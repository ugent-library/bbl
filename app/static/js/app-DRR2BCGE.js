(()=>{var up=Object.create;var qo=Object.defineProperty;var dp=Object.getOwnPropertyDescriptor;var hp=Object.getOwnPropertyNames;var fp=Object.getPrototypeOf,pp=Object.prototype.hasOwnProperty;var re=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),gp=(t,e)=>{for(var n in e)qo(t,n,{get:e[n],enumerable:!0})},mp=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of hp(e))!pp.call(t,r)&&r!==n&&qo(t,r,{get:()=>e[r],enumerable:!(i=dp(e,r))||i.enumerable});return t};var sn=(t,e,n)=>(n=t!=null?up(fp(t)):{},mp(e||!t||!t.__esModule?qo(n,"default",{value:t,enumerable:!0}):n,t));var eh=re((ux,Zd)=>{Zd.exports=function(){var e={},n=e._fns={};e.emit=function(o,a,l,c,d,u,h){var f=i(o);f.length&&r(o,f,[a,l,c,d,u,h])},e.on=function(o,a){n[o]||(n[o]=[]),n[o].push(a)},e.once=function(o,a){function l(){a.apply(this,arguments),e.off(o,l)}this.on(o,l)},e.off=function(o,a){var l=[];if(o&&a){var c=this._fns[o],d=0,u=c?c.length:0;for(d;d<u;d++)c[d]!==a&&l.push(c[d])}l.length?this._fns[o]=l:delete this._fns[o]};function i(s){var o=n[s]?n[s]:[],a=s.indexOf(":"),l=a===-1?[s]:[s.substring(0,a),s.substring(a+1)],c=Object.keys(n),d=0,u=c.length;for(d;d<u;d++){var h=c[d];if(h==="*"&&(o=o.concat(n[h])),l.length===2&&l[0]===h){o=o.concat(n[h]);break}}return o}function r(s,o,a){var l=0,c=o.length;for(l;l<c&&o[l];l++)o[l].event=s,o[l].apply(o[l],a)}return e}});var po=re((hx,nh)=>{function oy(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}nh.exports=oy});var rh=re((fx,ih)=>{var ay=typeof global=="object"&&global&&global.Object===Object&&global;ih.exports=ay});var sl=re((px,sh)=>{var ly=rh(),cy=typeof self=="object"&&self&&self.Object===Object&&self,uy=ly||cy||Function("return this")();sh.exports=uy});var ah=re((gx,oh)=>{var dy=sl(),hy=function(){return dy.Date.now()};oh.exports=hy});var ch=re((mx,lh)=>{var fy=/\s/;function py(t){for(var e=t.length;e--&&fy.test(t.charAt(e)););return e}lh.exports=py});var dh=re((vx,uh)=>{var gy=ch(),my=/^\s+/;function vy(t){return t&&t.slice(0,gy(t)+1).replace(my,"")}uh.exports=vy});var ol=re((_x,hh)=>{var _y=sl(),by=_y.Symbol;hh.exports=by});var mh=re((bx,gh)=>{var fh=ol(),ph=Object.prototype,yy=ph.hasOwnProperty,wy=ph.toString,yr=fh?fh.toStringTag:void 0;function Ey(t){var e=yy.call(t,yr),n=t[yr];try{t[yr]=void 0;var i=!0}catch{}var r=wy.call(t);return i&&(e?t[yr]=n:delete t[yr]),r}gh.exports=Ey});var _h=re((yx,vh)=>{var Ty=Object.prototype,Sy=Ty.toString;function Ay(t){return Sy.call(t)}vh.exports=Ay});var Eh=re((wx,wh)=>{var bh=ol(),xy=mh(),Oy=_h(),Cy="[object Null]",Py="[object Undefined]",yh=bh?bh.toStringTag:void 0;function Dy(t){return t==null?t===void 0?Py:Cy:yh&&yh in Object(t)?xy(t):Oy(t)}wh.exports=Dy});var Sh=re((Ex,Th)=>{function Ny(t){return t!=null&&typeof t=="object"}Th.exports=Ny});var xh=re((Tx,Ah)=>{var Iy=Eh(),Ry=Sh(),Ly="[object Symbol]";function ky(t){return typeof t=="symbol"||Ry(t)&&Iy(t)==Ly}Ah.exports=ky});var Dh=re((Sx,Ph)=>{var My=dh(),Oh=po(),Fy=xh(),Ch=NaN,Uy=/^[-+]0x[0-9a-f]+$/i,$y=/^0b[01]+$/i,Hy=/^0o[0-7]+$/i,jy=parseInt;function By(t){if(typeof t=="number")return t;if(Fy(t))return Ch;if(Oh(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Oh(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=My(t);var n=$y.test(t);return n||Hy.test(t)?jy(t.slice(2),n?2:8):Uy.test(t)?Ch:+t}Ph.exports=By});var Rh=re((Ax,Ih)=>{var Vy=po(),al=ah(),Nh=Dh(),qy="Expected a function",Wy=Math.max,zy=Math.min;function Ky(t,e,n){var i,r,s,o,a,l,c=0,d=!1,u=!1,h=!0;if(typeof t!="function")throw new TypeError(qy);e=Nh(e)||0,Vy(n)&&(d=!!n.leading,u="maxWait"in n,s=u?Wy(Nh(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h);function f(w){var T=i,D=r;return i=r=void 0,c=w,o=t.apply(D,T),o}function p(w){return c=w,a=setTimeout(v,e),d?f(w):o}function g(w){var T=w-l,D=w-c,O=e-T;return u?zy(O,s-D):O}function m(w){var T=w-l,D=w-c;return l===void 0||T>=e||T<0||u&&D>=s}function v(){var w=al();if(m(w))return b(w);a=setTimeout(v,g(w))}function b(w){return a=void 0,h&&i?f(w):(i=r=void 0,o)}function E(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function _(){return a===void 0?o:b(al())}function A(){var w=al(),T=m(w);if(i=arguments,r=this,l=w,T){if(a===void 0)return p(l);if(u)return clearTimeout(a),a=setTimeout(v,e),f(l)}return a===void 0&&(a=setTimeout(v,e)),o}return A.cancel=E,A.flush=_,A}Ih.exports=Ky});var kh=re((xx,Lh)=>{var Xy=Rh(),Yy=po(),Gy="Expected a function";function Jy(t,e,n){var i=!0,r=!0;if(typeof t!="function")throw new TypeError(Gy);return Yy(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Xy(t,e,{leading:i,maxWait:e,trailing:r})}Lh.exports=Jy});var fl=re((Hx,Vh)=>{"use strict";Vh.exports=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);let n=e<0,i=Math.abs(e);if(n&&(i=-i),i===0)return"0 B";let r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.min(Math.floor(Math.log(i)/Math.log(1024)),r.length-1),o=Number(i/1024**s),a=r[s];return`${o>=10||o%1===0?Math.round(o):o.toFixed(1)} ${a}`}});var zh=re((jx,Wh)=>{"use strict";function qh(t,e){this.text=t=t||"",this.hasWild=~t.indexOf("*"),this.separator=e,this.parts=t.split(e)}qh.prototype.match=function(t){var e=!0,n=this.parts,i,r=n.length,s;if(typeof t=="string"||t instanceof String)if(!this.hasWild&&this.text!=t)e=!1;else{for(s=(t||"").split(this.separator),i=0;e&&i<r;i++)n[i]!=="*"&&(i<s.length?e=n[i]===s[i]:e=!1);e=e&&s}else if(typeof t.splice=="function")for(e=[],i=t.length;i--;)this.match(t[i])&&(e[e.length]=t[i]);else if(typeof t=="object"){e={};for(var o in t)this.match(o)&&(e[o]=t[o])}return e};Wh.exports=function(t,e,n){var i=new qh(t,n||/[\/\.]/);return typeof e<"u"?i.match(e):i}});var Xh=re((Bx,Kh)=>{var iw=zh(),rw=/[\/\+\.]/;Kh.exports=function(t,e){function n(i){var r=iw(i,t,rw);return r&&r.length>=2}return e?n(e.split(";")[0]):n}});var Rl=re((jO,Io)=>{(function(){"use strict";var t={}.hasOwnProperty;function e(){for(var r="",s=0;s<arguments.length;s++){var o=arguments[s];o&&(r=i(r,n(o)))}return r}function n(r){if(typeof r=="string"||typeof r=="number")return r;if(typeof r!="object")return"";if(Array.isArray(r))return e.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var s="";for(var o in r)t.call(r,o)&&r[o]&&(s=i(s,o));return s}function i(r,s){return s?r?r+" "+s:r+s:r}typeof Io<"u"&&Io.exports?(e.default=e,Io.exports=e):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return e}):window.classNames=e})()});var Ff=re((hC,Mf)=>{function yt(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}Mf.exports=yt;yt.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};yt.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};yt.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},n),this._options.unref&&this._timer.unref(),!0};yt.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};yt.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};yt.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};yt.prototype.start=yt.prototype.try;yt.prototype.errors=function(){return this._errors};yt.prototype.attempts=function(){return this._attempts};yt.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,n=0,i=0;i<this._errors.length;i++){var r=this._errors[i],s=r.message,o=(t[s]||0)+1;t[s]=o,o>=n&&(e=r,n=o)}return e}});var Uf=re(ei=>{var Xw=Ff();ei.operation=function(t){var e=ei.timeouts(t);return new Xw(e,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})};ei.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var n in t)e[n]=t[n];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],r=0;r<e.retries;r++)i.push(this.createTimeout(r,e));return t&&t.forever&&!i.length&&i.push(this.createTimeout(r,e)),i.sort(function(s,o){return s-o}),i};ei.createTimeout=function(t,e){var n=e.randomize?Math.random()+1:1,i=Math.round(n*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return i=Math.min(i,e.maxTimeout),i};ei.wrap=function(t,e,n){if(e instanceof Array&&(n=e,e=null),!n){n=[];for(var i in t)typeof t[i]=="function"&&n.push(i)}for(var r=0;r<n.length;r++){var s=n[r],o=t[s];t[s]=function(l){var c=ei.operation(e),d=Array.prototype.slice.call(arguments,1),u=d.pop();d.push(function(h){c.retry(h)||(h&&(arguments[0]=c.mainError()),u.apply(this,arguments))}),c.attempt(function(){l.apply(t,d)})}.bind(t,o),t[s].options=e}}});var Hf=re((pC,$f)=>{$f.exports=Uf()});var vp=function(){"use strict";let htmx={onLoad:null,process:null,on:null,off:null,trigger:null,ajax:null,find:null,findAll:null,closest:null,values:function(t,e){return getInputValues(t,e||"post").values},remove:null,addClass:null,removeClass:null,toggleClass:null,takeClass:null,swap:null,defineExtension:null,removeExtension:null,logAll:null,logNone:null,logger:null,config:{historyEnabled:!0,historyCacheSize:10,refreshOnHistoryMiss:!1,defaultSwapStyle:"innerHTML",defaultSwapDelay:0,defaultSettleDelay:20,includeIndicatorStyles:!0,indicatorClass:"htmx-indicator",requestClass:"htmx-request",addedClass:"htmx-added",settlingClass:"htmx-settling",swappingClass:"htmx-swapping",allowEval:!0,allowScriptTags:!0,inlineScriptNonce:"",inlineStyleNonce:"",attributesToSettle:["class","style","width","height"],withCredentials:!1,timeout:0,wsReconnectDelay:"full-jitter",wsBinaryType:"blob",disableSelector:"[hx-disable], [data-hx-disable]",scrollBehavior:"instant",defaultFocusScroll:!1,getCacheBusterParam:!1,globalViewTransitions:!1,methodsThatUseUrlParams:["get","delete"],selfRequestsOnly:!0,ignoreTitle:!1,scrollIntoViewOnBoost:!0,triggerSpecsCache:null,disableInheritance:!1,responseHandling:[{code:"204",swap:!1},{code:"[23]..",swap:!0},{code:"[45]..",swap:!1,error:!0}],allowNestedOobSwaps:!0,historyRestoreAsHxRequest:!0,reportValidityOfForms:!1},parseInterval:null,location,_:null,version:"2.0.7"};htmx.onLoad=onLoadHelper,htmx.process=processNode,htmx.on=addEventListenerImpl,htmx.off=removeEventListenerImpl,htmx.trigger=triggerEvent,htmx.ajax=ajaxHelper,htmx.find=find,htmx.findAll=findAll,htmx.closest=closest,htmx.remove=removeElement,htmx.addClass=addClassToElement,htmx.removeClass=removeClassFromElement,htmx.toggleClass=toggleClassOnElement,htmx.takeClass=takeClassForElement,htmx.swap=swap,htmx.defineExtension=defineExtension,htmx.removeExtension=removeExtension,htmx.logAll=logAll,htmx.logNone=logNone,htmx.parseInterval=parseInterval,htmx._=internalEval;let internalAPI={addTriggerHandler,bodyContains,canAccessLocalStorage,findThisElement,filterValues,swap,hasAttribute,getAttributeValue,getClosestAttributeValue,getClosestMatch,getExpressionVars,getHeaders,getInputValues,getInternalData,getSwapSpecification,getTriggerSpecs,getTarget,makeFragment,mergeObjects,makeSettleInfo,oobSwap,querySelectorExt,settleImmediately,shouldCancel,triggerEvent,triggerErrorEvent,withExtensions},VERBS=["get","post","put","delete","patch"],VERB_SELECTOR=VERBS.map(function(t){return"[hx-"+t+"], [data-hx-"+t+"]"}).join(", ");function parseInterval(t){if(t==null)return;let e=NaN;return t.slice(-2)=="ms"?e=parseFloat(t.slice(0,-2)):t.slice(-1)=="s"?e=parseFloat(t.slice(0,-1))*1e3:t.slice(-1)=="m"?e=parseFloat(t.slice(0,-1))*1e3*60:e=parseFloat(t),isNaN(e)?void 0:e}function getRawAttribute(t,e){return t instanceof Element&&t.getAttribute(e)}function hasAttribute(t,e){return!!t.hasAttribute&&(t.hasAttribute(e)||t.hasAttribute("data-"+e))}function getAttributeValue(t,e){return getRawAttribute(t,e)||getRawAttribute(t,"data-"+e)}function parentElt(t){let e=t.parentElement;return!e&&t.parentNode instanceof ShadowRoot?t.parentNode:e}function getDocument(){return document}function getRootNode(t,e){return t.getRootNode?t.getRootNode({composed:e}):getDocument()}function getClosestMatch(t,e){for(;t&&!e(t);)t=parentElt(t);return t||null}function getAttributeValueWithDisinheritance(t,e,n){let i=getAttributeValue(e,n),r=getAttributeValue(e,"hx-disinherit");var s=getAttributeValue(e,"hx-inherit");if(t!==e){if(htmx.config.disableInheritance)return s&&(s==="*"||s.split(" ").indexOf(n)>=0)?i:null;if(r&&(r==="*"||r.split(" ").indexOf(n)>=0))return"unset"}return i}function getClosestAttributeValue(t,e){let n=null;if(getClosestMatch(t,function(i){return!!(n=getAttributeValueWithDisinheritance(t,asElement(i),e))}),n!=="unset")return n}function matches(t,e){return t instanceof Element&&t.matches(e)}function getStartTag(t){let n=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i.exec(t);return n?n[1].toLowerCase():""}function parseHTML(t){return new DOMParser().parseFromString(t,"text/html")}function takeChildrenFor(t,e){for(;e.childNodes.length>0;)t.append(e.childNodes[0])}function duplicateScript(t){let e=getDocument().createElement("script");return forEach(t.attributes,function(n){e.setAttribute(n.name,n.value)}),e.textContent=t.textContent,e.async=!1,htmx.config.inlineScriptNonce&&(e.nonce=htmx.config.inlineScriptNonce),e}function isJavaScriptScriptNode(t){return t.matches("script")&&(t.type==="text/javascript"||t.type==="module"||t.type==="")}function normalizeScriptTags(t){Array.from(t.querySelectorAll("script")).forEach(e=>{if(isJavaScriptScriptNode(e)){let n=duplicateScript(e),i=e.parentNode;try{i.insertBefore(n,e)}catch(r){logError(r)}finally{e.remove()}}})}function makeFragment(t){let e=t.replace(/<head(\s[^>]*)?>[\s\S]*?<\/head>/i,""),n=getStartTag(e),i;if(n==="html"){i=new DocumentFragment;let s=parseHTML(t);takeChildrenFor(i,s.body),i.title=s.title}else if(n==="body"){i=new DocumentFragment;let s=parseHTML(e);takeChildrenFor(i,s.body),i.title=s.title}else{let s=parseHTML('<body><template class="internal-htmx-wrapper">'+e+"</template></body>");i=s.querySelector("template").content,i.title=s.title;var r=i.querySelector("title");r&&r.parentNode===i&&(r.remove(),i.title=r.innerText)}return i&&(htmx.config.allowScriptTags?normalizeScriptTags(i):i.querySelectorAll("script").forEach(s=>s.remove())),i}function maybeCall(t){t&&t()}function isType(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function isFunction(t){return typeof t=="function"}function isRawObject(t){return isType(t,"Object")}function getInternalData(t){let e="htmx-internal-data",n=t[e];return n||(n=t[e]={}),n}function toArray(t){let e=[];if(t)for(let n=0;n<t.length;n++)e.push(t[n]);return e}function forEach(t,e){if(t)for(let n=0;n<t.length;n++)e(t[n])}function isScrolledIntoView(t){let e=t.getBoundingClientRect(),n=e.top,i=e.bottom;return n<window.innerHeight&&i>=0}function bodyContains(t){return t.getRootNode({composed:!0})===document}function splitOnWhitespace(t){return t.trim().split(/\s+/)}function mergeObjects(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function parseJSON(t){try{return JSON.parse(t)}catch(e){return logError(e),null}}function canAccessLocalStorage(){let t="htmx:sessionStorageTest";try{return sessionStorage.setItem(t,t),sessionStorage.removeItem(t),!0}catch{return!1}}function normalizePath(t){let e=new URL(t,"http://x");return e&&(t=e.pathname+e.search),t!="/"&&(t=t.replace(/\/+$/,"")),t}function internalEval(str){return maybeEval(getDocument().body,function(){return eval(str)})}function onLoadHelper(t){return htmx.on("htmx:load",function(n){t(n.detail.elt)})}function logAll(){htmx.logger=function(t,e,n){console&&console.log(e,t,n)}}function logNone(){htmx.logger=null}function find(t,e){return typeof t!="string"?t.querySelector(e):find(getDocument(),t)}function findAll(t,e){return typeof t!="string"?t.querySelectorAll(e):findAll(getDocument(),t)}function getWindow(){return window}function removeElement(t,e){t=resolveTarget(t),e?getWindow().setTimeout(function(){removeElement(t),t=null},e):parentElt(t).removeChild(t)}function asElement(t){return t instanceof Element?t:null}function asHtmlElement(t){return t instanceof HTMLElement?t:null}function asString(t){return typeof t=="string"?t:null}function asParentNode(t){return t instanceof Element||t instanceof Document||t instanceof DocumentFragment?t:null}function addClassToElement(t,e,n){t=asElement(resolveTarget(t)),t&&(n?getWindow().setTimeout(function(){addClassToElement(t,e),t=null},n):t.classList&&t.classList.add(e))}function removeClassFromElement(t,e,n){let i=asElement(resolveTarget(t));i&&(n?getWindow().setTimeout(function(){removeClassFromElement(i,e),i=null},n):i.classList&&(i.classList.remove(e),i.classList.length===0&&i.removeAttribute("class")))}function toggleClassOnElement(t,e){t=resolveTarget(t),t.classList.toggle(e)}function takeClassForElement(t,e){t=resolveTarget(t),forEach(t.parentElement.children,function(n){removeClassFromElement(n,e)}),addClassToElement(asElement(t),e)}function closest(t,e){return t=asElement(resolveTarget(t)),t?t.closest(e):null}function startsWith(t,e){return t.substring(0,e.length)===e}function endsWith(t,e){return t.substring(t.length-e.length)===e}function normalizeSelector(t){let e=t.trim();return startsWith(e,"<")&&endsWith(e,"/>")?e.substring(1,e.length-2):e}function querySelectorAllExt(t,e,n){if(e.indexOf("global ")===0)return querySelectorAllExt(t,e.slice(7),!0);t=resolveTarget(t);let i=[];{let o=0,a=0;for(let l=0;l<e.length;l++){let c=e[l];if(c===","&&o===0){i.push(e.substring(a,l)),a=l+1;continue}c==="<"?o++:c==="/"&&l<e.length-1&&e[l+1]===">"&&o--}a<e.length&&i.push(e.substring(a))}let r=[],s=[];for(;i.length>0;){let o=normalizeSelector(i.shift()),a;o.indexOf("closest ")===0?a=closest(asElement(t),normalizeSelector(o.slice(8))):o.indexOf("find ")===0?a=find(asParentNode(t),normalizeSelector(o.slice(5))):o==="next"||o==="nextElementSibling"?a=asElement(t).nextElementSibling:o.indexOf("next ")===0?a=scanForwardQuery(t,normalizeSelector(o.slice(5)),!!n):o==="previous"||o==="previousElementSibling"?a=asElement(t).previousElementSibling:o.indexOf("previous ")===0?a=scanBackwardsQuery(t,normalizeSelector(o.slice(9)),!!n):o==="document"?a=document:o==="window"?a=window:o==="body"?a=document.body:o==="root"?a=getRootNode(t,!!n):o==="host"?a=t.getRootNode().host:s.push(o),a&&r.push(a)}if(s.length>0){let o=s.join(","),a=asParentNode(getRootNode(t,!!n));r.push(...toArray(a.querySelectorAll(o)))}return r}var scanForwardQuery=function(t,e,n){let i=asParentNode(getRootNode(t,n)).querySelectorAll(e);for(let r=0;r<i.length;r++){let s=i[r];if(s.compareDocumentPosition(t)===Node.DOCUMENT_POSITION_PRECEDING)return s}},scanBackwardsQuery=function(t,e,n){let i=asParentNode(getRootNode(t,n)).querySelectorAll(e);for(let r=i.length-1;r>=0;r--){let s=i[r];if(s.compareDocumentPosition(t)===Node.DOCUMENT_POSITION_FOLLOWING)return s}};function querySelectorExt(t,e){return typeof t!="string"?querySelectorAllExt(t,e)[0]:querySelectorAllExt(getDocument().body,t)[0]}function resolveTarget(t,e){return typeof t=="string"?find(asParentNode(e)||document,t):t}function processEventArgs(t,e,n,i){return isFunction(e)?{target:getDocument().body,event:asString(t),listener:e,options:n}:{target:resolveTarget(t),event:asString(e),listener:n,options:i}}function addEventListenerImpl(t,e,n,i){return ready(function(){let s=processEventArgs(t,e,n,i);s.target.addEventListener(s.event,s.listener,s.options)}),isFunction(e)?e:n}function removeEventListenerImpl(t,e,n){return ready(function(){let i=processEventArgs(t,e,n);i.target.removeEventListener(i.event,i.listener)}),isFunction(e)?e:n}let DUMMY_ELT=getDocument().createElement("output");function findAttributeTargets(t,e){let n=getClosestAttributeValue(t,e);if(n){if(n==="this")return[findThisElement(t,e)];{let i=querySelectorAllExt(t,n);if(/(^|,)(\s*)inherit(\s*)($|,)/.test(n)){let s=asElement(getClosestMatch(t,function(o){return o!==t&&hasAttribute(asElement(o),e)}));s&&i.push(...findAttributeTargets(s,e))}return i.length===0?(logError('The selector "'+n+'" on '+e+" returned no matches!"),[DUMMY_ELT]):i}}}function findThisElement(t,e){return asElement(getClosestMatch(t,function(n){return getAttributeValue(asElement(n),e)!=null}))}function getTarget(t){let e=getClosestAttributeValue(t,"hx-target");return e?e==="this"?findThisElement(t,"hx-target"):querySelectorExt(t,e):getInternalData(t).boosted?getDocument().body:t}function shouldSettleAttribute(t){return htmx.config.attributesToSettle.includes(t)}function cloneAttributes(t,e){forEach(Array.from(t.attributes),function(n){!e.hasAttribute(n.name)&&shouldSettleAttribute(n.name)&&t.removeAttribute(n.name)}),forEach(e.attributes,function(n){shouldSettleAttribute(n.name)&&t.setAttribute(n.name,n.value)})}function isInlineSwap(t,e){let n=getExtensions(e);for(let i=0;i<n.length;i++){let r=n[i];try{if(r.isInlineSwap(t))return!0}catch(s){logError(s)}}return t==="outerHTML"}function oobSwap(t,e,n,i){i=i||getDocument();let r="#"+CSS.escape(getRawAttribute(e,"id")),s="outerHTML";t==="true"||(t.indexOf(":")>0?(s=t.substring(0,t.indexOf(":")),r=t.substring(t.indexOf(":")+1)):s=t),e.removeAttribute("hx-swap-oob"),e.removeAttribute("data-hx-swap-oob");let o=querySelectorAllExt(i,r,!1);return o.length?(forEach(o,function(a){let l,c=e.cloneNode(!0);l=getDocument().createDocumentFragment(),l.appendChild(c),isInlineSwap(s,a)||(l=asParentNode(c));let d={shouldSwap:!0,target:a,fragment:l};triggerEvent(a,"htmx:oobBeforeSwap",d)&&(a=d.target,d.shouldSwap&&(handlePreservedElements(l),swapWithStyle(s,a,a,l,n),restorePreservedElements()),forEach(n.elts,function(u){triggerEvent(u,"htmx:oobAfterSwap",d)}))}),e.parentNode.removeChild(e)):(e.parentNode.removeChild(e),triggerErrorEvent(getDocument().body,"htmx:oobErrorNoTarget",{content:e})),t}function restorePreservedElements(){let t=find("#--htmx-preserve-pantry--");if(t){for(let e of[...t.children]){let n=find("#"+e.id);n.parentNode.moveBefore(e,n),n.remove()}t.remove()}}function handlePreservedElements(t){forEach(findAll(t,"[hx-preserve], [data-hx-preserve]"),function(e){let n=getAttributeValue(e,"id"),i=getDocument().getElementById(n);if(i!=null)if(e.moveBefore){let r=find("#--htmx-preserve-pantry--");r==null&&(getDocument().body.insertAdjacentHTML("afterend","<div id='--htmx-preserve-pantry--'></div>"),r=find("#--htmx-preserve-pantry--")),r.moveBefore(i,null)}else e.parentNode.replaceChild(i,e)})}function handleAttributes(t,e,n){forEach(e.querySelectorAll("[id]"),function(i){let r=getRawAttribute(i,"id");if(r&&r.length>0){let s=r.replace("'","\\'"),o=i.tagName.replace(":","\\:"),a=asParentNode(t),l=a&&a.querySelector(o+"[id='"+s+"']");if(l&&l!==a){let c=i.cloneNode();cloneAttributes(i,l),n.tasks.push(function(){cloneAttributes(i,c)})}}})}function makeAjaxLoadTask(t){return function(){removeClassFromElement(t,htmx.config.addedClass),processNode(asElement(t)),processFocus(asParentNode(t)),triggerEvent(t,"htmx:load")}}function processFocus(t){let e="[autofocus]",n=asHtmlElement(matches(t,e)?t:t.querySelector(e));n?.focus()}function insertNodesBefore(t,e,n,i){for(handleAttributes(t,n,i);n.childNodes.length>0;){let r=n.firstChild;addClassToElement(asElement(r),htmx.config.addedClass),t.insertBefore(r,e),r.nodeType!==Node.TEXT_NODE&&r.nodeType!==Node.COMMENT_NODE&&i.tasks.push(makeAjaxLoadTask(r))}}function stringHash(t,e){let n=0;for(;n<t.length;)e=(e<<5)-e+t.charCodeAt(n++)|0;return e}function attributeHash(t){let e=0;for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];i.value&&(e=stringHash(i.name,e),e=stringHash(i.value,e))}return e}function deInitOnHandlers(t){let e=getInternalData(t);if(e.onHandlers){for(let n=0;n<e.onHandlers.length;n++){let i=e.onHandlers[n];removeEventListenerImpl(t,i.event,i.listener)}delete e.onHandlers}}function deInitNode(t){let e=getInternalData(t);e.timeout&&clearTimeout(e.timeout),e.listenerInfos&&forEach(e.listenerInfos,function(n){n.on&&removeEventListenerImpl(n.on,n.trigger,n.listener)}),deInitOnHandlers(t),forEach(Object.keys(e),function(n){n!=="firstInitCompleted"&&delete e[n]})}function cleanUpElement(t){triggerEvent(t,"htmx:beforeCleanupElement"),deInitNode(t),forEach(t.children,function(e){cleanUpElement(e)})}function swapOuterHTML(t,e,n){if(t.tagName==="BODY")return swapInnerHTML(t,e,n);let i,r=t.previousSibling,s=parentElt(t);if(s){for(insertNodesBefore(s,t,e,n),r==null?i=s.firstChild:i=r.nextSibling,n.elts=n.elts.filter(function(o){return o!==t});i&&i!==t;)i instanceof Element&&n.elts.push(i),i=i.nextSibling;cleanUpElement(t),t.remove()}}function swapAfterBegin(t,e,n){return insertNodesBefore(t,t.firstChild,e,n)}function swapBeforeBegin(t,e,n){return insertNodesBefore(parentElt(t),t,e,n)}function swapBeforeEnd(t,e,n){return insertNodesBefore(t,null,e,n)}function swapAfterEnd(t,e,n){return insertNodesBefore(parentElt(t),t.nextSibling,e,n)}function swapDelete(t){cleanUpElement(t);let e=parentElt(t);if(e)return e.removeChild(t)}function swapInnerHTML(t,e,n){let i=t.firstChild;if(insertNodesBefore(t,i,e,n),i){for(;i.nextSibling;)cleanUpElement(i.nextSibling),t.removeChild(i.nextSibling);cleanUpElement(i),t.removeChild(i)}}function swapWithStyle(t,e,n,i,r){switch(t){case"none":return;case"outerHTML":swapOuterHTML(n,i,r);return;case"afterbegin":swapAfterBegin(n,i,r);return;case"beforebegin":swapBeforeBegin(n,i,r);return;case"beforeend":swapBeforeEnd(n,i,r);return;case"afterend":swapAfterEnd(n,i,r);return;case"delete":swapDelete(n);return;default:var s=getExtensions(e);for(let o=0;o<s.length;o++){let a=s[o];try{let l=a.handleSwap(t,n,i,r);if(l){if(Array.isArray(l))for(let c=0;c<l.length;c++){let d=l[c];d.nodeType!==Node.TEXT_NODE&&d.nodeType!==Node.COMMENT_NODE&&r.tasks.push(makeAjaxLoadTask(d))}return}}catch(l){logError(l)}}t==="innerHTML"?swapInnerHTML(n,i,r):swapWithStyle(htmx.config.defaultSwapStyle,e,n,i,r)}}function findAndSwapOobElements(t,e,n){var i=findAll(t,"[hx-swap-oob], [data-hx-swap-oob]");return forEach(i,function(r){if(htmx.config.allowNestedOobSwaps||r.parentElement===null){let s=getAttributeValue(r,"hx-swap-oob");s!=null&&oobSwap(s,r,e,n)}else r.removeAttribute("hx-swap-oob"),r.removeAttribute("data-hx-swap-oob")}),i.length>0}function swap(t,e,n,i){i||(i={});let r=null,s=null,o=function(){maybeCall(i.beforeSwapCallback),t=resolveTarget(t);let c=i.contextElement?getRootNode(i.contextElement,!1):getDocument(),d=document.activeElement,u={};u={elt:d,start:d?d.selectionStart:null,end:d?d.selectionEnd:null};let h=makeSettleInfo(t);if(n.swapStyle==="textContent")t.textContent=e;else{let p=makeFragment(e);if(h.title=i.title||p.title,i.historyRequest&&(p=p.querySelector("[hx-history-elt],[data-hx-history-elt]")||p),i.selectOOB){let g=i.selectOOB.split(",");for(let m=0;m<g.length;m++){let v=g[m].split(":",2),b=v[0].trim();b.indexOf("#")===0&&(b=b.substring(1));let E=v[1]||"true",_=p.querySelector("#"+b);_&&oobSwap(E,_,h,c)}}if(findAndSwapOobElements(p,h,c),forEach(findAll(p,"template"),function(g){g.content&&findAndSwapOobElements(g.content,h,c)&&g.remove()}),i.select){let g=getDocument().createDocumentFragment();forEach(p.querySelectorAll(i.select),function(m){g.appendChild(m)}),p=g}handlePreservedElements(p),swapWithStyle(n.swapStyle,i.contextElement,t,p,h),restorePreservedElements()}if(u.elt&&!bodyContains(u.elt)&&getRawAttribute(u.elt,"id")){let p=document.getElementById(getRawAttribute(u.elt,"id")),g={preventScroll:n.focusScroll!==void 0?!n.focusScroll:!htmx.config.defaultFocusScroll};if(p){if(u.start&&p.setSelectionRange)try{p.setSelectionRange(u.start,u.end)}catch{}p.focus(g)}}t.classList.remove(htmx.config.swappingClass),forEach(h.elts,function(p){p.classList&&p.classList.add(htmx.config.settlingClass),triggerEvent(p,"htmx:afterSwap",i.eventInfo)}),maybeCall(i.afterSwapCallback),n.ignoreTitle||handleTitle(h.title);let f=function(){if(forEach(h.tasks,function(p){p.call()}),forEach(h.elts,function(p){p.classList&&p.classList.remove(htmx.config.settlingClass),triggerEvent(p,"htmx:afterSettle",i.eventInfo)}),i.anchor){let p=asElement(resolveTarget("#"+i.anchor));p&&p.scrollIntoView({block:"start",behavior:"auto"})}updateScrollState(h.elts,n),maybeCall(i.afterSettleCallback),maybeCall(r)};n.settleDelay>0?getWindow().setTimeout(f,n.settleDelay):f()},a=htmx.config.globalViewTransitions;n.hasOwnProperty("transition")&&(a=n.transition);let l=i.contextElement||getDocument();if(a&&triggerEvent(l,"htmx:beforeTransition",i.eventInfo)&&typeof Promise<"u"&&document.startViewTransition){let c=new Promise(function(u,h){r=u,s=h}),d=o;o=function(){document.startViewTransition(function(){return d(),c})}}try{n?.swapDelay&&n.swapDelay>0?getWindow().setTimeout(o,n.swapDelay):o()}catch(c){throw triggerErrorEvent(l,"htmx:swapError",i.eventInfo),maybeCall(s),c}}function handleTriggerHeader(t,e,n){let i=t.getResponseHeader(e);if(i.indexOf("{")===0){let r=parseJSON(i);for(let s in r)if(r.hasOwnProperty(s)){let o=r[s];isRawObject(o)?n=o.target!==void 0?o.target:n:o={value:o},triggerEvent(n,s,o)}}else{let r=i.split(",");for(let s=0;s<r.length;s++)triggerEvent(n,r[s].trim(),[])}}let WHITESPACE=/\s/,WHITESPACE_OR_COMMA=/[\s,]/,SYMBOL_START=/[_$a-zA-Z]/,SYMBOL_CONT=/[_$a-zA-Z0-9]/,STRINGISH_START=['"',"'","/"],NOT_WHITESPACE=/[^\s]/,COMBINED_SELECTOR_START=/[{(]/,COMBINED_SELECTOR_END=/[})]/;function tokenizeString(t){let e=[],n=0;for(;n<t.length;){if(SYMBOL_START.exec(t.charAt(n))){for(var i=n;SYMBOL_CONT.exec(t.charAt(n+1));)n++;e.push(t.substring(i,n+1))}else if(STRINGISH_START.indexOf(t.charAt(n))!==-1){let r=t.charAt(n);var i=n;for(n++;n<t.length&&t.charAt(n)!==r;)t.charAt(n)==="\\"&&n++,n++;e.push(t.substring(i,n+1))}else{let r=t.charAt(n);e.push(r)}n++}return e}function isPossibleRelativeReference(t,e,n){return SYMBOL_START.exec(t.charAt(0))&&t!=="true"&&t!=="false"&&t!=="this"&&t!==n&&e!=="."}function maybeGenerateConditional(t,e,n){if(e[0]==="["){e.shift();let i=1,r=" return (function("+n+"){ return (",s=null;for(;e.length>0;){let o=e[0];if(o==="]"){if(i--,i===0){s===null&&(r=r+"true"),e.shift(),r+=")})";try{let a=maybeEval(t,function(){return Function(r)()},function(){return!0});return a.source=r,a}catch(a){return triggerErrorEvent(getDocument().body,"htmx:syntax:error",{error:a,source:r}),null}}}else o==="["&&i++;isPossibleRelativeReference(o,s,n)?r+="(("+n+"."+o+") ? ("+n+"."+o+") : (window."+o+"))":r=r+o,s=e.shift()}}}function consumeUntil(t,e){let n="";for(;t.length>0&&!e.test(t[0]);)n+=t.shift();return n}function consumeCSSSelector(t){let e;return t.length>0&&COMBINED_SELECTOR_START.test(t[0])?(t.shift(),e=consumeUntil(t,COMBINED_SELECTOR_END).trim(),t.shift()):e=consumeUntil(t,WHITESPACE_OR_COMMA),e}let INPUT_SELECTOR="input, textarea, select";function parseAndCacheTrigger(t,e,n){let i=[],r=tokenizeString(e);do{consumeUntil(r,NOT_WHITESPACE);let a=r.length,l=consumeUntil(r,/[,\[\s]/);if(l!=="")if(l==="every"){let c={trigger:"every"};consumeUntil(r,NOT_WHITESPACE),c.pollInterval=parseInterval(consumeUntil(r,/[,\[\s]/)),consumeUntil(r,NOT_WHITESPACE);var s=maybeGenerateConditional(t,r,"event");s&&(c.eventFilter=s),i.push(c)}else{let c={trigger:l};var s=maybeGenerateConditional(t,r,"event");for(s&&(c.eventFilter=s),consumeUntil(r,NOT_WHITESPACE);r.length>0&&r[0]!==",";){let u=r.shift();if(u==="changed")c.changed=!0;else if(u==="once")c.once=!0;else if(u==="consume")c.consume=!0;else if(u==="delay"&&r[0]===":")r.shift(),c.delay=parseInterval(consumeUntil(r,WHITESPACE_OR_COMMA));else if(u==="from"&&r[0]===":"){if(r.shift(),COMBINED_SELECTOR_START.test(r[0]))var o=consumeCSSSelector(r);else{var o=consumeUntil(r,WHITESPACE_OR_COMMA);if(o==="closest"||o==="find"||o==="next"||o==="previous"){r.shift();let f=consumeCSSSelector(r);f.length>0&&(o+=" "+f)}}c.from=o}else u==="target"&&r[0]===":"?(r.shift(),c.target=consumeCSSSelector(r)):u==="throttle"&&r[0]===":"?(r.shift(),c.throttle=parseInterval(consumeUntil(r,WHITESPACE_OR_COMMA))):u==="queue"&&r[0]===":"?(r.shift(),c.queue=consumeUntil(r,WHITESPACE_OR_COMMA)):u==="root"&&r[0]===":"?(r.shift(),c[u]=consumeCSSSelector(r)):u==="threshold"&&r[0]===":"?(r.shift(),c[u]=consumeUntil(r,WHITESPACE_OR_COMMA)):triggerErrorEvent(t,"htmx:syntax:error",{token:r.shift()});consumeUntil(r,NOT_WHITESPACE)}i.push(c)}r.length===a&&triggerErrorEvent(t,"htmx:syntax:error",{token:r.shift()}),consumeUntil(r,NOT_WHITESPACE)}while(r[0]===","&&r.shift());return n&&(n[e]=i),i}function getTriggerSpecs(t){let e=getAttributeValue(t,"hx-trigger"),n=[];if(e){let i=htmx.config.triggerSpecsCache;n=i&&i[e]||parseAndCacheTrigger(t,e,i)}return n.length>0?n:matches(t,"form")?[{trigger:"submit"}]:matches(t,'input[type="button"], input[type="submit"]')?[{trigger:"click"}]:matches(t,INPUT_SELECTOR)?[{trigger:"change"}]:[{trigger:"click"}]}function cancelPolling(t){getInternalData(t).cancelled=!0}function processPolling(t,e,n){let i=getInternalData(t);i.timeout=getWindow().setTimeout(function(){bodyContains(t)&&i.cancelled!==!0&&(maybeFilterEvent(n,t,makeEvent("hx:poll:trigger",{triggerSpec:n,target:t}))||e(t),processPolling(t,e,n))},n.pollInterval)}function isLocalLink(t){return location.hostname===t.hostname&&getRawAttribute(t,"href")&&getRawAttribute(t,"href").indexOf("#")!==0}function eltIsDisabled(t){return closest(t,htmx.config.disableSelector)}function boostElement(t,e,n){if(t instanceof HTMLAnchorElement&&isLocalLink(t)&&(t.target===""||t.target==="_self")||t.tagName==="FORM"&&String(getRawAttribute(t,"method")).toLowerCase()!=="dialog"){e.boosted=!0;let i,r;if(t.tagName==="A")i="get",r=getRawAttribute(t,"href");else{let s=getRawAttribute(t,"method");i=s?s.toLowerCase():"get",r=getRawAttribute(t,"action"),(r==null||r==="")&&(r=location.href),i==="get"&&r.includes("?")&&(r=r.replace(/\?[^#]+/,""))}n.forEach(function(s){addEventListener(t,function(o,a){let l=asElement(o);if(eltIsDisabled(l)){cleanUpElement(l);return}issueAjaxRequest(i,r,l,a)},e,s,!0)})}}function shouldCancel(t,e){if(t.type==="submit"&&e.tagName==="FORM")return!0;if(t.type==="click"){let n=e.closest('input[type="submit"], button');if(n&&n.form&&n.type==="submit")return!0;let i=e.closest("a"),r=/^#.+/;if(i&&i.href&&!r.test(i.getAttribute("href")))return!0}return!1}function ignoreBoostedAnchorCtrlClick(t,e){return getInternalData(t).boosted&&t instanceof HTMLAnchorElement&&e.type==="click"&&(e.ctrlKey||e.metaKey)}function maybeFilterEvent(t,e,n){let i=t.eventFilter;if(i)try{return i.call(e,n)!==!0}catch(r){let s=i.source;return triggerErrorEvent(getDocument().body,"htmx:eventFilter:error",{error:r,source:s}),!0}return!1}function addEventListener(t,e,n,i,r){let s=getInternalData(t),o;i.from?o=querySelectorAllExt(t,i.from):o=[t],i.changed&&("lastValue"in s||(s.lastValue=new WeakMap),o.forEach(function(a){s.lastValue.has(i)||s.lastValue.set(i,new WeakMap),s.lastValue.get(i).set(a,a.value)})),forEach(o,function(a){let l=function(c){if(!bodyContains(t)){a.removeEventListener(i.trigger,l);return}if(ignoreBoostedAnchorCtrlClick(t,c)||((r||shouldCancel(c,a))&&c.preventDefault(),maybeFilterEvent(i,t,c)))return;let d=getInternalData(c);if(d.triggerSpec=i,d.handledFor==null&&(d.handledFor=[]),d.handledFor.indexOf(t)<0){if(d.handledFor.push(t),i.consume&&c.stopPropagation(),i.target&&c.target&&!matches(asElement(c.target),i.target))return;if(i.once){if(s.triggeredOnce)return;s.triggeredOnce=!0}if(i.changed){let u=c.target,h=u.value,f=s.lastValue.get(i);if(f.has(u)&&f.get(u)===h)return;f.set(u,h)}if(s.delayed&&clearTimeout(s.delayed),s.throttle)return;i.throttle>0?s.throttle||(triggerEvent(t,"htmx:trigger"),e(t,c),s.throttle=getWindow().setTimeout(function(){s.throttle=null},i.throttle)):i.delay>0?s.delayed=getWindow().setTimeout(function(){triggerEvent(t,"htmx:trigger"),e(t,c)},i.delay):(triggerEvent(t,"htmx:trigger"),e(t,c))}};n.listenerInfos==null&&(n.listenerInfos=[]),n.listenerInfos.push({trigger:i.trigger,listener:l,on:a}),a.addEventListener(i.trigger,l)})}let windowIsScrolling=!1,scrollHandler=null;function initScrollHandler(){scrollHandler||(scrollHandler=function(){windowIsScrolling=!0},window.addEventListener("scroll",scrollHandler),window.addEventListener("resize",scrollHandler),setInterval(function(){windowIsScrolling&&(windowIsScrolling=!1,forEach(getDocument().querySelectorAll("[hx-trigger*='revealed'],[data-hx-trigger*='revealed']"),function(t){maybeReveal(t)}))},200))}function maybeReveal(t){!hasAttribute(t,"data-hx-revealed")&&isScrolledIntoView(t)&&(t.setAttribute("data-hx-revealed","true"),getInternalData(t).initHash?triggerEvent(t,"revealed"):t.addEventListener("htmx:afterProcessNode",function(){triggerEvent(t,"revealed")},{once:!0}))}function loadImmediately(t,e,n,i){let r=function(){n.loaded||(n.loaded=!0,triggerEvent(t,"htmx:trigger"),e(t))};i>0?getWindow().setTimeout(r,i):r()}function processVerbs(t,e,n){let i=!1;return forEach(VERBS,function(r){if(hasAttribute(t,"hx-"+r)){let s=getAttributeValue(t,"hx-"+r);i=!0,e.path=s,e.verb=r,n.forEach(function(o){addTriggerHandler(t,o,e,function(a,l){let c=asElement(a);if(eltIsDisabled(c)){cleanUpElement(c);return}issueAjaxRequest(r,s,c,l)})})}}),i}function addTriggerHandler(t,e,n,i){if(e.trigger==="revealed")initScrollHandler(),addEventListener(t,i,n,e),maybeReveal(asElement(t));else if(e.trigger==="intersect"){let r={};e.root&&(r.root=querySelectorExt(t,e.root)),e.threshold&&(r.threshold=parseFloat(e.threshold)),new IntersectionObserver(function(o){for(let a=0;a<o.length;a++)if(o[a].isIntersecting){triggerEvent(t,"intersect");break}},r).observe(asElement(t)),addEventListener(asElement(t),i,n,e)}else!n.firstInitCompleted&&e.trigger==="load"?maybeFilterEvent(e,t,makeEvent("load",{elt:t}))||loadImmediately(asElement(t),i,n,e.delay):e.pollInterval>0?(n.polling=!0,processPolling(asElement(t),i,e)):addEventListener(t,i,n,e)}function shouldProcessHxOn(t){let e=asElement(t);if(!e)return!1;let n=e.attributes;for(let i=0;i<n.length;i++){let r=n[i].name;if(startsWith(r,"hx-on:")||startsWith(r,"data-hx-on:")||startsWith(r,"hx-on-")||startsWith(r,"data-hx-on-"))return!0}return!1}let HX_ON_QUERY=new XPathEvaluator().createExpression('.//*[@*[ starts-with(name(), "hx-on:") or starts-with(name(), "data-hx-on:") or starts-with(name(), "hx-on-") or starts-with(name(), "data-hx-on-") ]]');function processHXOnRoot(t,e){shouldProcessHxOn(t)&&e.push(asElement(t));let n=HX_ON_QUERY.evaluate(t),i=null;for(;i=n.iterateNext();)e.push(asElement(i))}function findHxOnWildcardElements(t){let e=[];if(t instanceof DocumentFragment)for(let n of t.childNodes)processHXOnRoot(n,e);else processHXOnRoot(t,e);return e}function findElementsToProcess(t){if(t.querySelectorAll){let n=", [hx-boost] a, [data-hx-boost] a, a[hx-boost], a[data-hx-boost]",i=[];for(let s in extensions){let o=extensions[s];if(o.getSelectors){var e=o.getSelectors();e&&i.push(e)}}return t.querySelectorAll(VERB_SELECTOR+n+", form, [type='submit'], [hx-ext], [data-hx-ext], [hx-trigger], [data-hx-trigger]"+i.flat().map(s=>", "+s).join(""))}else return[]}function maybeSetLastButtonClicked(t){let e=getTargetButton(t.target),n=getRelatedFormData(t);n&&(n.lastButtonClicked=e)}function maybeUnsetLastButtonClicked(t){let e=getRelatedFormData(t);e&&(e.lastButtonClicked=null)}function getTargetButton(t){return closest(asElement(t),"button, input[type='submit']")}function getRelatedForm(t){return t.form||closest(t,"form")}function getRelatedFormData(t){let e=getTargetButton(t.target);if(!e)return;let n=getRelatedForm(e);if(n)return getInternalData(n)}function initButtonTracking(t){t.addEventListener("click",maybeSetLastButtonClicked),t.addEventListener("focusin",maybeSetLastButtonClicked),t.addEventListener("focusout",maybeUnsetLastButtonClicked)}function addHxOnEventHandler(t,e,n){let i=getInternalData(t);Array.isArray(i.onHandlers)||(i.onHandlers=[]);let r,s=function(o){maybeEval(t,function(){eltIsDisabled(t)||(r||(r=new Function("event",n)),r.call(t,o))})};t.addEventListener(e,s),i.onHandlers.push({event:e,listener:s})}function processHxOnWildcard(t){deInitOnHandlers(t);for(let e=0;e<t.attributes.length;e++){let n=t.attributes[e].name,i=t.attributes[e].value;if(startsWith(n,"hx-on")||startsWith(n,"data-hx-on")){let r=n.indexOf("-on")+3,s=n.slice(r,r+1);if(s==="-"||s===":"){let o=n.slice(r+1);startsWith(o,":")?o="htmx"+o:startsWith(o,"-")?o="htmx:"+o.slice(1):startsWith(o,"htmx-")&&(o="htmx:"+o.slice(5)),addHxOnEventHandler(t,o,i)}}}}function initNode(t){triggerEvent(t,"htmx:beforeProcessNode");let e=getInternalData(t),n=getTriggerSpecs(t);processVerbs(t,e,n)||(getClosestAttributeValue(t,"hx-boost")==="true"?boostElement(t,e,n):hasAttribute(t,"hx-trigger")&&n.forEach(function(r){addTriggerHandler(t,r,e,function(){})})),(t.tagName==="FORM"||getRawAttribute(t,"type")==="submit"&&hasAttribute(t,"form"))&&initButtonTracking(t),e.firstInitCompleted=!0,triggerEvent(t,"htmx:afterProcessNode")}function maybeDeInitAndHash(t){if(!(t instanceof Element))return!1;let e=getInternalData(t),n=attributeHash(t);return e.initHash!==n?(deInitNode(t),e.initHash=n,!0):!1}function processNode(t){if(t=resolveTarget(t),eltIsDisabled(t)){cleanUpElement(t);return}let e=[];maybeDeInitAndHash(t)&&e.push(t),forEach(findElementsToProcess(t),function(n){if(eltIsDisabled(n)){cleanUpElement(n);return}maybeDeInitAndHash(n)&&e.push(n)}),forEach(findHxOnWildcardElements(t),processHxOnWildcard),forEach(e,initNode)}function kebabEventName(t){return t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function makeEvent(t,e){return new CustomEvent(t,{bubbles:!0,cancelable:!0,composed:!0,detail:e})}function triggerErrorEvent(t,e,n){triggerEvent(t,e,mergeObjects({error:e},n))}function ignoreEventForLogging(t){return t==="htmx:afterProcessNode"}function withExtensions(t,e,n){forEach(getExtensions(t,[],n),function(i){try{e(i)}catch(r){logError(r)}})}function logError(t){console.error(t)}function triggerEvent(t,e,n){t=resolveTarget(t),n==null&&(n={}),n.elt=t;let i=makeEvent(e,n);htmx.logger&&!ignoreEventForLogging(e)&&htmx.logger(t,e,n),n.error&&(logError(n.error),triggerEvent(t,"htmx:error",{errorInfo:n}));let r=t.dispatchEvent(i),s=kebabEventName(e);if(r&&s!==e){let o=makeEvent(s,i.detail);r=r&&t.dispatchEvent(o)}return withExtensions(asElement(t),function(o){r=r&&o.onEvent(e,i)!==!1&&!i.defaultPrevented}),r}let currentPathForHistory=location.pathname+location.search;function setCurrentPathForHistory(t){currentPathForHistory=t,canAccessLocalStorage()&&sessionStorage.setItem("htmx-current-path-for-history",t)}function getHistoryElement(){return getDocument().querySelector("[hx-history-elt],[data-hx-history-elt]")||getDocument().body}function saveToHistoryCache(t,e){if(!canAccessLocalStorage())return;let n=cleanInnerHtmlForHistory(e),i=getDocument().title,r=window.scrollY;if(htmx.config.historyCacheSize<=0){sessionStorage.removeItem("htmx-history-cache");return}t=normalizePath(t);let s=parseJSON(sessionStorage.getItem("htmx-history-cache"))||[];for(let a=0;a<s.length;a++)if(s[a].url===t){s.splice(a,1);break}let o={url:t,content:n,title:i,scroll:r};for(triggerEvent(getDocument().body,"htmx:historyItemCreated",{item:o,cache:s}),s.push(o);s.length>htmx.config.historyCacheSize;)s.shift();for(;s.length>0;)try{sessionStorage.setItem("htmx-history-cache",JSON.stringify(s));break}catch(a){triggerErrorEvent(getDocument().body,"htmx:historyCacheError",{cause:a,cache:s}),s.shift()}}function getCachedHistory(t){if(!canAccessLocalStorage())return null;t=normalizePath(t);let e=parseJSON(sessionStorage.getItem("htmx-history-cache"))||[];for(let n=0;n<e.length;n++)if(e[n].url===t)return e[n];return null}function cleanInnerHtmlForHistory(t){let e=htmx.config.requestClass,n=t.cloneNode(!0);return forEach(findAll(n,"."+e),function(i){removeClassFromElement(i,e)}),forEach(findAll(n,"[data-disabled-by-htmx]"),function(i){i.removeAttribute("disabled")}),n.innerHTML}function saveCurrentPageToHistory(){let t=getHistoryElement(),e=currentPathForHistory;canAccessLocalStorage()&&(e=sessionStorage.getItem("htmx-current-path-for-history")),e=e||location.pathname+location.search,getDocument().querySelector('[hx-history="false" i],[data-hx-history="false" i]')||(triggerEvent(getDocument().body,"htmx:beforeHistorySave",{path:e,historyElt:t}),saveToHistoryCache(e,t)),htmx.config.historyEnabled&&history.replaceState({htmx:!0},getDocument().title,location.href)}function pushUrlIntoHistory(t){htmx.config.getCacheBusterParam&&(t=t.replace(/org\.htmx\.cache-buster=[^&]*&?/,""),(endsWith(t,"&")||endsWith(t,"?"))&&(t=t.slice(0,-1))),htmx.config.historyEnabled&&history.pushState({htmx:!0},"",t),setCurrentPathForHistory(t)}function replaceUrlInHistory(t){htmx.config.historyEnabled&&history.replaceState({htmx:!0},"",t),setCurrentPathForHistory(t)}function settleImmediately(t){forEach(t,function(e){e.call(void 0)})}function loadHistoryFromServer(t){let e=new XMLHttpRequest,n={swapStyle:"innerHTML",swapDelay:0,settleDelay:0},i={path:t,xhr:e,historyElt:getHistoryElement(),swapSpec:n};e.open("GET",t,!0),htmx.config.historyRestoreAsHxRequest&&e.setRequestHeader("HX-Request","true"),e.setRequestHeader("HX-History-Restore-Request","true"),e.setRequestHeader("HX-Current-URL",location.href),e.onload=function(){this.status>=200&&this.status<400?(i.response=this.response,triggerEvent(getDocument().body,"htmx:historyCacheMissLoad",i),swap(i.historyElt,i.response,n,{contextElement:i.historyElt,historyRequest:!0}),setCurrentPathForHistory(i.path),triggerEvent(getDocument().body,"htmx:historyRestore",{path:t,cacheMiss:!0,serverResponse:i.response})):triggerErrorEvent(getDocument().body,"htmx:historyCacheMissLoadError",i)},triggerEvent(getDocument().body,"htmx:historyCacheMiss",i)&&e.send()}function restoreHistory(t){saveCurrentPageToHistory(),t=t||location.pathname+location.search;let e=getCachedHistory(t);if(e){let n={swapStyle:"innerHTML",swapDelay:0,settleDelay:0,scroll:e.scroll},i={path:t,item:e,historyElt:getHistoryElement(),swapSpec:n};triggerEvent(getDocument().body,"htmx:historyCacheHit",i)&&(swap(i.historyElt,e.content,n,{contextElement:i.historyElt,title:e.title}),setCurrentPathForHistory(i.path),triggerEvent(getDocument().body,"htmx:historyRestore",i))}else htmx.config.refreshOnHistoryMiss?htmx.location.reload(!0):loadHistoryFromServer(t)}function addRequestIndicatorClasses(t){let e=findAttributeTargets(t,"hx-indicator");return e==null&&(e=[t]),forEach(e,function(n){let i=getInternalData(n);i.requestCount=(i.requestCount||0)+1,n.classList.add.call(n.classList,htmx.config.requestClass)}),e}function disableElements(t){let e=findAttributeTargets(t,"hx-disabled-elt");return e==null&&(e=[]),forEach(e,function(n){let i=getInternalData(n);i.requestCount=(i.requestCount||0)+1,n.setAttribute("disabled",""),n.setAttribute("data-disabled-by-htmx","")}),e}function removeRequestIndicators(t,e){forEach(t.concat(e),function(n){let i=getInternalData(n);i.requestCount=(i.requestCount||1)-1}),forEach(t,function(n){getInternalData(n).requestCount===0&&n.classList.remove.call(n.classList,htmx.config.requestClass)}),forEach(e,function(n){getInternalData(n).requestCount===0&&(n.removeAttribute("disabled"),n.removeAttribute("data-disabled-by-htmx"))})}function haveSeenNode(t,e){for(let n=0;n<t.length;n++)if(t[n].isSameNode(e))return!0;return!1}function shouldInclude(t){let e=t;return e.name===""||e.name==null||e.disabled||closest(e,"fieldset[disabled]")||e.type==="button"||e.type==="submit"||e.tagName==="image"||e.tagName==="reset"||e.tagName==="file"?!1:e.type==="checkbox"||e.type==="radio"?e.checked:!0}function addValueToFormData(t,e,n){t!=null&&e!=null&&(Array.isArray(e)?e.forEach(function(i){n.append(t,i)}):n.append(t,e))}function removeValueFromFormData(t,e,n){if(t!=null&&e!=null){let i=n.getAll(t);Array.isArray(e)?i=i.filter(r=>e.indexOf(r)<0):i=i.filter(r=>r!==e),n.delete(t),forEach(i,r=>n.append(t,r))}}function getValueFromInput(t){return t instanceof HTMLSelectElement&&t.multiple?toArray(t.querySelectorAll("option:checked")).map(function(e){return e.value}):t instanceof HTMLInputElement&&t.files?toArray(t.files):t.value}function processInputValue(t,e,n,i,r){if(!(i==null||haveSeenNode(t,i))){if(t.push(i),shouldInclude(i)){let s=getRawAttribute(i,"name");addValueToFormData(s,getValueFromInput(i),e),r&&validateElement(i,n)}i instanceof HTMLFormElement&&(forEach(i.elements,function(s){t.indexOf(s)>=0?removeValueFromFormData(s.name,getValueFromInput(s),e):t.push(s),r&&validateElement(s,n)}),new FormData(i).forEach(function(s,o){s instanceof File&&s.name===""||addValueToFormData(o,s,e)}))}}function validateElement(t,e){let n=t;n.willValidate&&(triggerEvent(n,"htmx:validation:validate"),n.checkValidity()||(triggerEvent(n,"htmx:validation:failed",{message:n.validationMessage,validity:n.validity})&&!e.length&&htmx.config.reportValidityOfForms&&n.reportValidity(),e.push({elt:n,message:n.validationMessage,validity:n.validity})))}function overrideFormData(t,e){for(let n of e.keys())t.delete(n);return e.forEach(function(n,i){t.append(i,n)}),t}function getInputValues(t,e){let n=[],i=new FormData,r=new FormData,s=[],o=getInternalData(t);o.lastButtonClicked&&!bodyContains(o.lastButtonClicked)&&(o.lastButtonClicked=null);let a=t instanceof HTMLFormElement&&t.noValidate!==!0||getAttributeValue(t,"hx-validate")==="true";if(o.lastButtonClicked&&(a=a&&o.lastButtonClicked.formNoValidate!==!0),e!=="get"&&processInputValue(n,r,s,getRelatedForm(t),a),processInputValue(n,i,s,t,a),o.lastButtonClicked||t.tagName==="BUTTON"||t.tagName==="INPUT"&&getRawAttribute(t,"type")==="submit"){let c=o.lastButtonClicked||t,d=getRawAttribute(c,"name");addValueToFormData(d,c.value,r)}let l=findAttributeTargets(t,"hx-include");return forEach(l,function(c){processInputValue(n,i,s,asElement(c),a),matches(c,"form")||forEach(asParentNode(c).querySelectorAll(INPUT_SELECTOR),function(d){processInputValue(n,i,s,d,a)})}),overrideFormData(i,r),{errors:s,formData:i,values:formDataProxy(i)}}function appendParam(t,e,n){t!==""&&(t+="&"),String(n)==="[object Object]"&&(n=JSON.stringify(n));let i=encodeURIComponent(n);return t+=encodeURIComponent(e)+"="+i,t}function urlEncode(t){t=formDataFromObject(t);let e="";return t.forEach(function(n,i){e=appendParam(e,i,n)}),e}function getHeaders(t,e,n){let i={"HX-Request":"true","HX-Trigger":getRawAttribute(t,"id"),"HX-Trigger-Name":getRawAttribute(t,"name"),"HX-Target":getAttributeValue(e,"id"),"HX-Current-URL":location.href};return getValuesForElement(t,"hx-headers",!1,i),n!==void 0&&(i["HX-Prompt"]=n),getInternalData(t).boosted&&(i["HX-Boosted"]="true"),i}function filterValues(t,e){let n=getClosestAttributeValue(e,"hx-params");if(n){if(n==="none")return new FormData;if(n==="*")return t;if(n.indexOf("not ")===0)return forEach(n.slice(4).split(","),function(i){i=i.trim(),t.delete(i)}),t;{let i=new FormData;return forEach(n.split(","),function(r){r=r.trim(),t.has(r)&&t.getAll(r).forEach(function(s){i.append(r,s)})}),i}}else return t}function isAnchorLink(t){return!!getRawAttribute(t,"href")&&getRawAttribute(t,"href").indexOf("#")>=0}function getSwapSpecification(t,e){let n=e||getClosestAttributeValue(t,"hx-swap"),i={swapStyle:getInternalData(t).boosted?"innerHTML":htmx.config.defaultSwapStyle,swapDelay:htmx.config.defaultSwapDelay,settleDelay:htmx.config.defaultSettleDelay};if(htmx.config.scrollIntoViewOnBoost&&getInternalData(t).boosted&&!isAnchorLink(t)&&(i.show="top"),n){let o=splitOnWhitespace(n);if(o.length>0)for(let a=0;a<o.length;a++){let l=o[a];if(l.indexOf("swap:")===0)i.swapDelay=parseInterval(l.slice(5));else if(l.indexOf("settle:")===0)i.settleDelay=parseInterval(l.slice(7));else if(l.indexOf("transition:")===0)i.transition=l.slice(11)==="true";else if(l.indexOf("ignoreTitle:")===0)i.ignoreTitle=l.slice(12)==="true";else if(l.indexOf("scroll:")===0){var r=l.slice(7).split(":");let d=r.pop();var s=r.length>0?r.join(":"):null;i.scroll=d,i.scrollTarget=s}else if(l.indexOf("show:")===0){var r=l.slice(5).split(":");let u=r.pop();var s=r.length>0?r.join(":"):null;i.show=u,i.showTarget=s}else if(l.indexOf("focus-scroll:")===0){let c=l.slice(13);i.focusScroll=c=="true"}else a==0?i.swapStyle=l:logError("Unknown modifier in hx-swap: "+l)}}return i}function usesFormData(t){return getClosestAttributeValue(t,"hx-encoding")==="multipart/form-data"||matches(t,"form")&&getRawAttribute(t,"enctype")==="multipart/form-data"}function encodeParamsForBody(t,e,n){let i=null;return withExtensions(e,function(r){i==null&&(i=r.encodeParameters(t,n,e))}),i??(usesFormData(e)?overrideFormData(new FormData,formDataFromObject(n)):urlEncode(n))}function makeSettleInfo(t){return{tasks:[],elts:[t]}}function updateScrollState(t,e){let n=t[0],i=t[t.length-1];if(e.scroll){var r=null;e.scrollTarget&&(r=asElement(querySelectorExt(n,e.scrollTarget))),e.scroll==="top"&&(n||r)&&(r=r||n,r.scrollTop=0),e.scroll==="bottom"&&(i||r)&&(r=r||i,r.scrollTop=r.scrollHeight),typeof e.scroll=="number"&&getWindow().setTimeout(function(){window.scrollTo(0,e.scroll)},0)}if(e.show){var r=null;if(e.showTarget){let o=e.showTarget;e.showTarget==="window"&&(o="body"),r=asElement(querySelectorExt(n,o))}e.show==="top"&&(n||r)&&(r=r||n,r.scrollIntoView({block:"start",behavior:htmx.config.scrollBehavior})),e.show==="bottom"&&(i||r)&&(r=r||i,r.scrollIntoView({block:"end",behavior:htmx.config.scrollBehavior}))}}function getValuesForElement(t,e,n,i,r){if(i==null&&(i={}),t==null)return i;let s=getAttributeValue(t,e);if(s){let o=s.trim(),a=n;if(o==="unset")return null;o.indexOf("javascript:")===0?(o=o.slice(11),a=!0):o.indexOf("js:")===0&&(o=o.slice(3),a=!0),o.indexOf("{")!==0&&(o="{"+o+"}");let l;a?l=maybeEval(t,function(){return r?Function("event","return ("+o+")").call(t,r):Function("return ("+o+")").call(t)},{}):l=parseJSON(o);for(let c in l)l.hasOwnProperty(c)&&i[c]==null&&(i[c]=l[c])}return getValuesForElement(asElement(parentElt(t)),e,n,i,r)}function maybeEval(t,e,n){return htmx.config.allowEval?e():(triggerErrorEvent(t,"htmx:evalDisallowedError"),n)}function getHXVarsForElement(t,e,n){return getValuesForElement(t,"hx-vars",!0,n,e)}function getHXValsForElement(t,e,n){return getValuesForElement(t,"hx-vals",!1,n,e)}function getExpressionVars(t,e){return mergeObjects(getHXVarsForElement(t,e),getHXValsForElement(t,e))}function safelySetHeaderValue(t,e,n){if(n!==null)try{t.setRequestHeader(e,n)}catch{t.setRequestHeader(e,encodeURIComponent(n)),t.setRequestHeader(e+"-URI-AutoEncoded","true")}}function getPathFromResponse(t){if(t.responseURL)try{let e=new URL(t.responseURL);return e.pathname+e.search}catch{triggerErrorEvent(getDocument().body,"htmx:badResponseUrl",{url:t.responseURL})}}function hasHeader(t,e){return e.test(t.getAllResponseHeaders())}function ajaxHelper(t,e,n){if(t=t.toLowerCase(),n){if(n instanceof Element||typeof n=="string")return issueAjaxRequest(t,e,null,null,{targetOverride:resolveTarget(n)||DUMMY_ELT,returnPromise:!0});{let i=resolveTarget(n.target);return(n.target&&!i||n.source&&!i&&!resolveTarget(n.source))&&(i=DUMMY_ELT),issueAjaxRequest(t,e,resolveTarget(n.source),n.event,{handler:n.handler,headers:n.headers,values:n.values,targetOverride:i,swapOverride:n.swap,select:n.select,returnPromise:!0})}}else return issueAjaxRequest(t,e,null,null,{returnPromise:!0})}function hierarchyForElt(t){let e=[];for(;t;)e.push(t),t=t.parentElement;return e}function verifyPath(t,e,n){let i=new URL(e,location.protocol!=="about:"?location.href:window.origin),s=(location.protocol!=="about:"?location.origin:window.origin)===i.origin;return htmx.config.selfRequestsOnly&&!s?!1:triggerEvent(t,"htmx:validateUrl",mergeObjects({url:i,sameHost:s},n))}function formDataFromObject(t){if(t instanceof FormData)return t;let e=new FormData;for(let n in t)t.hasOwnProperty(n)&&(t[n]&&typeof t[n].forEach=="function"?t[n].forEach(function(i){e.append(n,i)}):typeof t[n]=="object"&&!(t[n]instanceof Blob)?e.append(n,JSON.stringify(t[n])):e.append(n,t[n]));return e}function formDataArrayProxy(t,e,n){return new Proxy(n,{get:function(i,r){return typeof r=="number"?i[r]:r==="length"?i.length:r==="push"?function(s){i.push(s),t.append(e,s)}:typeof i[r]=="function"?function(){i[r].apply(i,arguments),t.delete(e),i.forEach(function(s){t.append(e,s)})}:i[r]&&i[r].length===1?i[r][0]:i[r]},set:function(i,r,s){return i[r]=s,t.delete(e),i.forEach(function(o){t.append(e,o)}),!0}})}function formDataProxy(t){return new Proxy(t,{get:function(e,n){if(typeof n=="symbol"){let r=Reflect.get(e,n);return typeof r=="function"?function(){return r.apply(t,arguments)}:r}if(n==="toJSON")return()=>Object.fromEntries(t);if(n in e&&typeof e[n]=="function")return function(){return t[n].apply(t,arguments)};let i=t.getAll(n);if(i.length!==0)return i.length===1?i[0]:formDataArrayProxy(e,n,i)},set:function(e,n,i){return typeof n!="string"?!1:(e.delete(n),i&&typeof i.forEach=="function"?i.forEach(function(r){e.append(n,r)}):typeof i=="object"&&!(i instanceof Blob)?e.append(n,JSON.stringify(i)):e.append(n,i),!0)},deleteProperty:function(e,n){return typeof n=="string"&&e.delete(n),!0},ownKeys:function(e){return Reflect.ownKeys(Object.fromEntries(e))},getOwnPropertyDescriptor:function(e,n){return Reflect.getOwnPropertyDescriptor(Object.fromEntries(e),n)}})}function issueAjaxRequest(t,e,n,i,r,s){let o=null,a=null;if(r=r??{},r.returnPromise&&typeof Promise<"u")var l=new Promise(function(V,J){o=V,a=J});n==null&&(n=getDocument().body);let c=r.handler||handleAjaxResponse,d=r.select||null;if(!bodyContains(n))return maybeCall(o),l;let u=r.targetOverride||asElement(getTarget(n));if(u==null||u==DUMMY_ELT)return triggerErrorEvent(n,"htmx:targetError",{target:getClosestAttributeValue(n,"hx-target")}),maybeCall(a),l;let h=getInternalData(n),f=h.lastButtonClicked;if(f){let V=getRawAttribute(f,"formaction");V!=null&&(e=V);let J=getRawAttribute(f,"formmethod");if(J!=null)if(VERBS.includes(J.toLowerCase()))t=J;else return maybeCall(o),l}let p=getClosestAttributeValue(n,"hx-confirm");if(s===void 0&&triggerEvent(n,"htmx:confirm",{target:u,elt:n,path:e,verb:t,triggeringEvent:i,etc:r,issueRequest:function(Te){return issueAjaxRequest(t,e,n,i,r,!!Te)},question:p})===!1)return maybeCall(o),l;let g=n,m=getClosestAttributeValue(n,"hx-sync"),v=null,b=!1;if(m){let V=m.split(":"),J=V[0].trim();if(J==="this"?g=findThisElement(n,"hx-sync"):g=asElement(querySelectorExt(n,J)),m=(V[1]||"drop").trim(),h=getInternalData(g),m==="drop"&&h.xhr&&h.abortable!==!0)return maybeCall(o),l;if(m==="abort"){if(h.xhr)return maybeCall(o),l;b=!0}else m==="replace"?triggerEvent(g,"htmx:abort"):m.indexOf("queue")===0&&(v=(m.split(" ")[1]||"last").trim())}if(h.xhr)if(h.abortable)triggerEvent(g,"htmx:abort");else{if(v==null){if(i){let V=getInternalData(i);V&&V.triggerSpec&&V.triggerSpec.queue&&(v=V.triggerSpec.queue)}v==null&&(v="last")}return h.queuedRequests==null&&(h.queuedRequests=[]),v==="first"&&h.queuedRequests.length===0?h.queuedRequests.push(function(){issueAjaxRequest(t,e,n,i,r)}):v==="all"?h.queuedRequests.push(function(){issueAjaxRequest(t,e,n,i,r)}):v==="last"&&(h.queuedRequests=[],h.queuedRequests.push(function(){issueAjaxRequest(t,e,n,i,r)})),maybeCall(o),l}let E=new XMLHttpRequest;h.xhr=E,h.abortable=b;let _=function(){h.xhr=null,h.abortable=!1,h.queuedRequests!=null&&h.queuedRequests.length>0&&h.queuedRequests.shift()()},A=getClosestAttributeValue(n,"hx-prompt");if(A){var w=prompt(A);if(w===null||!triggerEvent(n,"htmx:prompt",{prompt:w,target:u}))return maybeCall(o),_(),l}if(p&&!s&&!confirm(p))return maybeCall(o),_(),l;let T=getHeaders(n,u,w);t!=="get"&&!usesFormData(n)&&(T["Content-Type"]="application/x-www-form-urlencoded"),r.headers&&(T=mergeObjects(T,r.headers));let D=getInputValues(n,t),O=D.errors,N=D.formData;r.values&&overrideFormData(N,formDataFromObject(r.values));let I=formDataFromObject(getExpressionVars(n,i)),$=overrideFormData(N,I),H=filterValues($,n);htmx.config.getCacheBusterParam&&t==="get"&&H.set("org.htmx.cache-buster",getRawAttribute(u,"id")||"true"),(e==null||e==="")&&(e=location.href);let z=getValuesForElement(n,"hx-request"),ue=getInternalData(n).boosted,q=htmx.config.methodsThatUseUrlParams.indexOf(t)>=0,B={boosted:ue,useUrlParams:q,formData:H,parameters:formDataProxy(H),unfilteredFormData:$,unfilteredParameters:formDataProxy($),headers:T,elt:n,target:u,verb:t,errors:O,withCredentials:r.credentials||z.credentials||htmx.config.withCredentials,timeout:r.timeout||z.timeout||htmx.config.timeout,path:e,triggeringEvent:i};if(!triggerEvent(n,"htmx:configRequest",B))return maybeCall(o),_(),l;if(e=B.path,t=B.verb,T=B.headers,H=formDataFromObject(B.parameters),O=B.errors,q=B.useUrlParams,O&&O.length>0)return triggerEvent(n,"htmx:validation:halted",B),maybeCall(o),_(),l;let de=e.split("#"),he=de[0],Oe=de[1],ve=e;if(q&&(ve=he,!H.keys().next().done&&(ve.indexOf("?")<0?ve+="?":ve+="&",ve+=urlEncode(H),Oe&&(ve+="#"+Oe))),!verifyPath(n,ve,B))return triggerErrorEvent(n,"htmx:invalidPath",B),maybeCall(a),_(),l;if(E.open(t.toUpperCase(),ve,!0),E.overrideMimeType("text/html"),E.withCredentials=B.withCredentials,E.timeout=B.timeout,!z.noHeaders){for(let V in T)if(T.hasOwnProperty(V)){let J=T[V];safelySetHeaderValue(E,V,J)}}let Y={xhr:E,target:u,requestConfig:B,etc:r,boosted:ue,select:d,pathInfo:{requestPath:e,finalRequestPath:ve,responsePath:null,anchor:Oe}};if(E.onload=function(){try{let V=hierarchyForElt(n);if(Y.pathInfo.responsePath=getPathFromResponse(E),c(n,Y),Y.keepIndicators!==!0&&removeRequestIndicators(wt,et),triggerEvent(n,"htmx:afterRequest",Y),triggerEvent(n,"htmx:afterOnLoad",Y),!bodyContains(n)){let J=null;for(;V.length>0&&J==null;){let Te=V.shift();bodyContains(Te)&&(J=Te)}J&&(triggerEvent(J,"htmx:afterRequest",Y),triggerEvent(J,"htmx:afterOnLoad",Y))}maybeCall(o)}catch(V){throw triggerErrorEvent(n,"htmx:onLoadError",mergeObjects({error:V},Y)),V}finally{_()}},E.onerror=function(){removeRequestIndicators(wt,et),triggerErrorEvent(n,"htmx:afterRequest",Y),triggerErrorEvent(n,"htmx:sendError",Y),maybeCall(a),_()},E.onabort=function(){removeRequestIndicators(wt,et),triggerErrorEvent(n,"htmx:afterRequest",Y),triggerErrorEvent(n,"htmx:sendAbort",Y),maybeCall(a),_()},E.ontimeout=function(){removeRequestIndicators(wt,et),triggerErrorEvent(n,"htmx:afterRequest",Y),triggerErrorEvent(n,"htmx:timeout",Y),maybeCall(a),_()},!triggerEvent(n,"htmx:beforeRequest",Y))return maybeCall(o),_(),l;var wt=addRequestIndicatorClasses(n),et=disableElements(n);forEach(["loadstart","loadend","progress","abort"],function(V){forEach([E,E.upload],function(J){J.addEventListener(V,function(Te){triggerEvent(n,"htmx:xhr:"+V,{lengthComputable:Te.lengthComputable,loaded:Te.loaded,total:Te.total})})})}),triggerEvent(n,"htmx:beforeSend",Y);let tt=q?null:encodeParamsForBody(E,n,H);return E.send(tt),l}function determineHistoryUpdates(t,e){let n=e.xhr,i=null,r=null;if(hasHeader(n,/HX-Push:/i)?(i=n.getResponseHeader("HX-Push"),r="push"):hasHeader(n,/HX-Push-Url:/i)?(i=n.getResponseHeader("HX-Push-Url"),r="push"):hasHeader(n,/HX-Replace-Url:/i)&&(i=n.getResponseHeader("HX-Replace-Url"),r="replace"),i)return i==="false"?{}:{type:r,path:i};let s=e.pathInfo.finalRequestPath,o=e.pathInfo.responsePath,a=getClosestAttributeValue(t,"hx-push-url"),l=getClosestAttributeValue(t,"hx-replace-url"),c=getInternalData(t).boosted,d=null,u=null;return a?(d="push",u=a):l?(d="replace",u=l):c&&(d="push",u=o||s),u?u==="false"?{}:(u==="true"&&(u=o||s),e.pathInfo.anchor&&u.indexOf("#")===-1&&(u=u+"#"+e.pathInfo.anchor),{type:d,path:u}):{}}function codeMatches(t,e){var n=new RegExp(t.code);return n.test(e.toString(10))}function resolveResponseHandling(t){for(var e=0;e<htmx.config.responseHandling.length;e++){var n=htmx.config.responseHandling[e];if(codeMatches(n,t.status))return n}return{swap:!1}}function handleTitle(t){if(t){let e=find("title");e?e.textContent=t:window.document.title=t}}function resolveRetarget(t,e){if(e==="this")return t;let n=asElement(querySelectorExt(t,e));if(n==null)throw triggerErrorEvent(t,"htmx:targetError",{target:e}),new Error(`Invalid re-target ${e}`);return n}function handleAjaxResponse(t,e){let n=e.xhr,i=e.target,r=e.etc,s=e.select;if(!triggerEvent(t,"htmx:beforeOnLoad",e))return;if(hasHeader(n,/HX-Trigger:/i)&&handleTriggerHeader(n,"HX-Trigger",t),hasHeader(n,/HX-Location:/i)){saveCurrentPageToHistory();let b=n.getResponseHeader("HX-Location");var o;b.indexOf("{")===0&&(o=parseJSON(b),b=o.path,delete o.path),ajaxHelper("get",b,o).then(function(){pushUrlIntoHistory(b)});return}let a=hasHeader(n,/HX-Refresh:/i)&&n.getResponseHeader("HX-Refresh")==="true";if(hasHeader(n,/HX-Redirect:/i)){e.keepIndicators=!0,htmx.location.href=n.getResponseHeader("HX-Redirect"),a&&htmx.location.reload();return}if(a){e.keepIndicators=!0,htmx.location.reload();return}let l=determineHistoryUpdates(t,e),c=resolveResponseHandling(n),d=c.swap,u=!!c.error,h=htmx.config.ignoreTitle||c.ignoreTitle,f=c.select;c.target&&(e.target=resolveRetarget(t,c.target));var p=r.swapOverride;p==null&&c.swapOverride&&(p=c.swapOverride),hasHeader(n,/HX-Retarget:/i)&&(e.target=resolveRetarget(t,n.getResponseHeader("HX-Retarget"))),hasHeader(n,/HX-Reswap:/i)&&(p=n.getResponseHeader("HX-Reswap"));var g=n.response,m=mergeObjects({shouldSwap:d,serverResponse:g,isError:u,ignoreTitle:h,selectOverride:f,swapOverride:p},e);if(!(c.event&&!triggerEvent(i,c.event,m))&&triggerEvent(i,"htmx:beforeSwap",m)){if(i=m.target,g=m.serverResponse,u=m.isError,h=m.ignoreTitle,f=m.selectOverride,p=m.swapOverride,e.target=i,e.failed=u,e.successful=!u,m.shouldSwap){n.status===286&&cancelPolling(t),withExtensions(t,function(_){g=_.transformResponse(g,n,t)}),l.type&&saveCurrentPageToHistory();var v=getSwapSpecification(t,p);v.hasOwnProperty("ignoreTitle")||(v.ignoreTitle=h),i.classList.add(htmx.config.swappingClass),s&&(f=s),hasHeader(n,/HX-Reselect:/i)&&(f=n.getResponseHeader("HX-Reselect"));let b=getClosestAttributeValue(t,"hx-select-oob"),E=getClosestAttributeValue(t,"hx-select");swap(i,g,v,{select:f==="unset"?null:f||E,selectOOB:b,eventInfo:e,anchor:e.pathInfo.anchor,contextElement:t,afterSwapCallback:function(){if(hasHeader(n,/HX-Trigger-After-Swap:/i)){let _=t;bodyContains(t)||(_=getDocument().body),handleTriggerHeader(n,"HX-Trigger-After-Swap",_)}},afterSettleCallback:function(){if(hasHeader(n,/HX-Trigger-After-Settle:/i)){let _=t;bodyContains(t)||(_=getDocument().body),handleTriggerHeader(n,"HX-Trigger-After-Settle",_)}},beforeSwapCallback:function(){l.type&&(triggerEvent(getDocument().body,"htmx:beforeHistoryUpdate",mergeObjects({history:l},e)),l.type==="push"?(pushUrlIntoHistory(l.path),triggerEvent(getDocument().body,"htmx:pushedIntoHistory",{path:l.path})):(replaceUrlInHistory(l.path),triggerEvent(getDocument().body,"htmx:replacedInHistory",{path:l.path})))}})}u&&triggerErrorEvent(t,"htmx:responseError",mergeObjects({error:"Response Status Error Code "+n.status+" from "+e.pathInfo.requestPath},e))}}let extensions={};function extensionBase(){return{init:function(t){return null},getSelectors:function(){return null},onEvent:function(t,e){return!0},transformResponse:function(t,e,n){return t},isInlineSwap:function(t){return!1},handleSwap:function(t,e,n,i){return!1},encodeParameters:function(t,e,n){return null}}}function defineExtension(t,e){e.init&&e.init(internalAPI),extensions[t]=mergeObjects(extensionBase(),e)}function removeExtension(t){delete extensions[t]}function getExtensions(t,e,n){if(e==null&&(e=[]),t==null)return e;n==null&&(n=[]);let i=getAttributeValue(t,"hx-ext");return i&&forEach(i.split(","),function(r){if(r=r.replace(/ /g,""),r.slice(0,7)=="ignore:"){n.push(r.slice(7));return}if(n.indexOf(r)<0){let s=extensions[r];s&&e.indexOf(s)<0&&e.push(s)}}),getExtensions(asElement(parentElt(t)),e,n)}var isReady=!1;getDocument().addEventListener("DOMContentLoaded",function(){isReady=!0});function ready(t){isReady||getDocument().readyState==="complete"?t():getDocument().addEventListener("DOMContentLoaded",t)}function insertIndicatorStyles(){if(htmx.config.includeIndicatorStyles!==!1){let t=htmx.config.inlineStyleNonce?` nonce="${htmx.config.inlineStyleNonce}"`:"",e=htmx.config.indicatorClass,n=htmx.config.requestClass;getDocument().head.insertAdjacentHTML("beforeend",`<style${t}>.${e}{opacity:0;visibility: hidden} .${n} .${e}, .${n}.${e}{opacity:1;visibility: visible;transition: opacity 200ms ease-in}</style>`)}}function getMetaConfig(){let t=getDocument().querySelector('meta[name="htmx-config"]');return t?parseJSON(t.content):null}function mergeMetaConfig(){let t=getMetaConfig();t&&(htmx.config=mergeObjects(htmx.config,t))}return ready(function(){mergeMetaConfig(),insertIndicatorStyles();let t=getDocument().body;processNode(t);let e=getDocument().querySelectorAll("[hx-trigger='restored'],[data-hx-trigger='restored']");t.addEventListener("htmx:abort",function(i){let r=i.target,s=getInternalData(r);s&&s.xhr&&s.xhr.abort()});let n=window.onpopstate?window.onpopstate.bind(window):null;window.onpopstate=function(i){i.state&&i.state.htmx?(restoreHistory(),forEach(e,function(r){triggerEvent(r,"htmx:restored",{document:getDocument(),triggerEvent})})):n&&n(i)},getWindow().setTimeout(function(){triggerEvent(t,"htmx:load",{}),t=null},0)}),htmx}(),on=vp;var _s={};gp(_s,{afterMain:()=>Cc,afterRead:()=>Ac,afterWrite:()=>Nc,applyStyles:()=>mi,arrow:()=>us,auto:()=>zi,basePlacements:()=>It,beforeMain:()=>xc,beforeRead:()=>Tc,beforeWrite:()=>Pc,bottom:()=>pe,clippingParents:()=>Wo,computeStyles:()=>_i,createPopper:()=>tr,createPopperBase:()=>Hc,createPopperLite:()=>jc,detectOverflow:()=>$e,end:()=>an,eventListeners:()=>bi,flip:()=>ps,hide:()=>gs,left:()=>le,main:()=>Oc,modifierPhases:()=>Ko,offset:()=>ms,placements:()=>Xi,popper:()=>An,popperGenerator:()=>Rn,popperOffsets:()=>Ei,preventOverflow:()=>vs,read:()=>Sc,reference:()=>zo,right:()=>fe,start:()=>Dt,top:()=>se,variationPlacements:()=>cs,viewport:()=>Ki,write:()=>Dc});var se="top",pe="bottom",fe="right",le="left",zi="auto",It=[se,pe,fe,le],Dt="start",an="end",Wo="clippingParents",Ki="viewport",An="popper",zo="reference",cs=It.reduce(function(t,e){return t.concat([e+"-"+Dt,e+"-"+an])},[]),Xi=[].concat(It,[zi]).reduce(function(t,e){return t.concat([e,e+"-"+Dt,e+"-"+an])},[]),Tc="beforeRead",Sc="read",Ac="afterRead",xc="beforeMain",Oc="main",Cc="afterMain",Pc="beforeWrite",Dc="write",Nc="afterWrite",Ko=[Tc,Sc,Ac,xc,Oc,Cc,Pc,Dc,Nc];function Se(t){return t?(t.nodeName||"").toLowerCase():null}function te(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ht(t){var e=te(t).Element;return t instanceof e||t instanceof Element}function _e(t){var e=te(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function gi(t){if(typeof ShadowRoot>"u")return!1;var e=te(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function _p(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},s=e.elements[n];!_e(s)||!Se(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function bp(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!_e(r)||!Se(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}var mi={name:"applyStyles",enabled:!0,phase:"write",fn:_p,effect:bp,requires:["computeStyles"]};function Ae(t){return t.split("-")[0]}var Et=Math.max,xn=Math.min,Rt=Math.round;function vi(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Yi(){return!/^((?!chrome|android).)*safari/i.test(vi())}function ft(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,s=1;e&&_e(t)&&(r=t.offsetWidth>0&&Rt(i.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Rt(i.height)/t.offsetHeight||1);var o=ht(t)?te(t):window,a=o.visualViewport,l=!Yi()&&n,c=(i.left+(l&&a?a.offsetLeft:0))/r,d=(i.top+(l&&a?a.offsetTop:0))/s,u=i.width/r,h=i.height/s;return{width:u,height:h,top:d,right:c+u,bottom:d+h,left:c,x:c,y:d}}function On(t){var e=ft(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function Gi(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&gi(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Ue(t){return te(t).getComputedStyle(t)}function Xo(t){return["table","td","th"].indexOf(Se(t))>=0}function Ce(t){return((ht(t)?t.ownerDocument:t.document)||window.document).documentElement}function Lt(t){return Se(t)==="html"?t:t.assignedSlot||t.parentNode||(gi(t)?t.host:null)||Ce(t)}function Ic(t){return!_e(t)||Ue(t).position==="fixed"?null:t.offsetParent}function yp(t){var e=/firefox/i.test(vi()),n=/Trident/i.test(vi());if(n&&_e(t)){var i=Ue(t);if(i.position==="fixed")return null}var r=Lt(t);for(gi(r)&&(r=r.host);_e(r)&&["html","body"].indexOf(Se(r))<0;){var s=Ue(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function Tt(t){for(var e=te(t),n=Ic(t);n&&Xo(n)&&Ue(n).position==="static";)n=Ic(n);return n&&(Se(n)==="html"||Se(n)==="body"&&Ue(n).position==="static")?e:n||yp(t)||e}function Cn(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Pn(t,e,n){return Et(t,xn(e,n))}function Rc(t,e,n){var i=Pn(t,e,n);return i>n?n:i}function Ji(){return{top:0,right:0,bottom:0,left:0}}function Qi(t){return Object.assign({},Ji(),t)}function Zi(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var wp=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Qi(typeof e!="number"?e:Zi(e,It))};function Ep(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Ae(n.placement),l=Cn(a),c=[le,fe].indexOf(a)>=0,d=c?"height":"width";if(!(!s||!o)){var u=wp(r.padding,n),h=On(s),f=l==="y"?se:le,p=l==="y"?pe:fe,g=n.rects.reference[d]+n.rects.reference[l]-o[l]-n.rects.popper[d],m=o[l]-n.rects.reference[l],v=Tt(s),b=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,E=g/2-m/2,_=u[f],A=b-h[d]-u[p],w=b/2-h[d]/2+E,T=Pn(_,w,A),D=l;n.modifiersData[i]=(e={},e[D]=T,e.centerOffset=T-w,e)}}function Tp(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||Gi(e.elements.popper,r)&&(e.elements.arrow=r))}var us={name:"arrow",enabled:!0,phase:"main",fn:Ep,effect:Tp,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function pt(t){return t.split("-")[1]}var Sp={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ap(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:Rt(n*r)/r||0,y:Rt(i*r)/r||0}}function Lc(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,d=t.roundOffsets,u=t.isFixed,h=o.x,f=h===void 0?0:h,p=o.y,g=p===void 0?0:p,m=typeof d=="function"?d({x:f,y:g}):{x:f,y:g};f=m.x,g=m.y;var v=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),E=le,_=se,A=window;if(c){var w=Tt(n),T="clientHeight",D="clientWidth";if(w===te(n)&&(w=Ce(n),Ue(w).position!=="static"&&a==="absolute"&&(T="scrollHeight",D="scrollWidth")),w=w,r===se||(r===le||r===fe)&&s===an){_=pe;var O=u&&w===A&&A.visualViewport?A.visualViewport.height:w[T];g-=O-i.height,g*=l?1:-1}if(r===le||(r===se||r===pe)&&s===an){E=fe;var N=u&&w===A&&A.visualViewport?A.visualViewport.width:w[D];f-=N-i.width,f*=l?1:-1}}var I=Object.assign({position:a},c&&Sp),$=d===!0?Ap({x:f,y:g},te(n)):{x:f,y:g};if(f=$.x,g=$.y,l){var H;return Object.assign({},I,(H={},H[_]=b?"0":"",H[E]=v?"0":"",H.transform=(A.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",H))}return Object.assign({},I,(e={},e[_]=b?g+"px":"",e[E]=v?f+"px":"",e.transform="",e))}function xp(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Ae(e.placement),variation:pt(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Lc(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Lc(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var _i={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:xp,data:{}};var ds={passive:!0};function Op(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,a=o===void 0?!0:o,l=te(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(d){d.addEventListener("scroll",n.update,ds)}),a&&l.addEventListener("resize",n.update,ds),function(){s&&c.forEach(function(d){d.removeEventListener("scroll",n.update,ds)}),a&&l.removeEventListener("resize",n.update,ds)}}var bi={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Op,data:{}};var Cp={left:"right",right:"left",bottom:"top",top:"bottom"};function yi(t){return t.replace(/left|right|bottom|top/g,function(e){return Cp[e]})}var Pp={start:"end",end:"start"};function hs(t){return t.replace(/start|end/g,function(e){return Pp[e]})}function Dn(t){var e=te(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Nn(t){return ft(Ce(t)).left+Dn(t).scrollLeft}function Yo(t,e){var n=te(t),i=Ce(t),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=Yi();(c||!c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+Nn(t),y:l}}function Go(t){var e,n=Ce(t),i=Dn(t),r=(e=t.ownerDocument)==null?void 0:e.body,s=Et(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Et(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+Nn(t),l=-i.scrollTop;return Ue(r||n).direction==="rtl"&&(a+=Et(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function In(t){var e=Ue(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function fs(t){return["html","body","#document"].indexOf(Se(t))>=0?t.ownerDocument.body:_e(t)&&In(t)?t:fs(Lt(t))}function ln(t,e){var n;e===void 0&&(e=[]);var i=fs(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=te(i),o=r?[s].concat(s.visualViewport||[],In(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(ln(Lt(o)))}function wi(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Dp(t,e){var n=ft(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function kc(t,e,n){return e===Ki?wi(Yo(t,n)):ht(e)?Dp(e,n):wi(Go(Ce(t)))}function Np(t){var e=ln(Lt(t)),n=["absolute","fixed"].indexOf(Ue(t).position)>=0,i=n&&_e(t)?Tt(t):t;return ht(i)?e.filter(function(r){return ht(r)&&Gi(r,i)&&Se(r)!=="body"}):[]}function Jo(t,e,n,i){var r=e==="clippingParents"?Np(t):[].concat(e),s=[].concat(r,[n]),o=s[0],a=s.reduce(function(l,c){var d=kc(t,c,i);return l.top=Et(d.top,l.top),l.right=xn(d.right,l.right),l.bottom=xn(d.bottom,l.bottom),l.left=Et(d.left,l.left),l},kc(t,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function er(t){var e=t.reference,n=t.element,i=t.placement,r=i?Ae(i):null,s=i?pt(i):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(r){case se:l={x:o,y:e.y-n.height};break;case pe:l={x:o,y:e.y+e.height};break;case fe:l={x:e.x+e.width,y:a};break;case le:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=r?Cn(r):null;if(c!=null){var d=c==="y"?"height":"width";switch(s){case Dt:l[c]=l[c]-(e[d]/2-n[d]/2);break;case an:l[c]=l[c]+(e[d]/2-n[d]/2);break;default:}}return l}function $e(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?Wo:a,c=n.rootBoundary,d=c===void 0?Ki:c,u=n.elementContext,h=u===void 0?An:u,f=n.altBoundary,p=f===void 0?!1:f,g=n.padding,m=g===void 0?0:g,v=Qi(typeof m!="number"?m:Zi(m,It)),b=h===An?zo:An,E=t.rects.popper,_=t.elements[p?b:h],A=Jo(ht(_)?_:_.contextElement||Ce(t.elements.popper),l,d,o),w=ft(t.elements.reference),T=er({reference:w,element:E,strategy:"absolute",placement:r}),D=wi(Object.assign({},E,T)),O=h===An?D:w,N={top:A.top-O.top+v.top,bottom:O.bottom-A.bottom+v.bottom,left:A.left-O.left+v.left,right:O.right-A.right+v.right},I=t.modifiersData.offset;if(h===An&&I){var $=I[r];Object.keys(N).forEach(function(H){var z=[fe,pe].indexOf(H)>=0?1:-1,ue=[se,pe].indexOf(H)>=0?"y":"x";N[H]+=$[ue]*z})}return N}function Qo(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?Xi:l,d=pt(i),u=d?a?cs:cs.filter(function(p){return pt(p)===d}):It,h=u.filter(function(p){return c.indexOf(p)>=0});h.length===0&&(h=u);var f=h.reduce(function(p,g){return p[g]=$e(t,{placement:g,boundary:r,rootBoundary:s,padding:o})[Ae(g)],p},{});return Object.keys(f).sort(function(p,g){return f[p]-f[g]})}function Ip(t){if(Ae(t)===zi)return[];var e=yi(t);return[hs(t),e,hs(e)]}function Rp(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,d=n.boundary,u=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=f===void 0?!0:f,g=n.allowedAutoPlacements,m=e.options.placement,v=Ae(m),b=v===m,E=l||(b||!p?[yi(m)]:Ip(m)),_=[m].concat(E).reduce(function(et,tt){return et.concat(Ae(tt)===zi?Qo(e,{placement:tt,boundary:d,rootBoundary:u,padding:c,flipVariations:p,allowedAutoPlacements:g}):tt)},[]),A=e.rects.reference,w=e.rects.popper,T=new Map,D=!0,O=_[0],N=0;N<_.length;N++){var I=_[N],$=Ae(I),H=pt(I)===Dt,z=[se,pe].indexOf($)>=0,ue=z?"width":"height",q=$e(e,{placement:I,boundary:d,rootBoundary:u,altBoundary:h,padding:c}),B=z?H?fe:le:H?pe:se;A[ue]>w[ue]&&(B=yi(B));var de=yi(B),he=[];if(s&&he.push(q[$]<=0),a&&he.push(q[B]<=0,q[de]<=0),he.every(function(et){return et})){O=I,D=!1;break}T.set(I,he)}if(D)for(var Oe=p?3:1,ve=function(tt){var V=_.find(function(J){var Te=T.get(J);if(Te)return Te.slice(0,tt).every(function(rn){return rn})});if(V)return O=V,"break"},Y=Oe;Y>0;Y--){var wt=ve(Y);if(wt==="break")break}e.placement!==O&&(e.modifiersData[i]._skip=!0,e.placement=O,e.reset=!0)}}var ps={name:"flip",enabled:!0,phase:"main",fn:Rp,requiresIfExists:["offset"],data:{_skip:!1}};function Mc(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Fc(t){return[se,fe,pe,le].some(function(e){return t[e]>=0})}function Lp(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=$e(e,{elementContext:"reference"}),a=$e(e,{altBoundary:!0}),l=Mc(o,i),c=Mc(a,r,s),d=Fc(l),u=Fc(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}var gs={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Lp};function kp(t,e,n){var i=Ae(t),r=[le,se].indexOf(i)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[le,fe].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function Mp(t){var e=t.state,n=t.options,i=t.name,r=n.offset,s=r===void 0?[0,0]:r,o=Xi.reduce(function(d,u){return d[u]=kp(u,e.rects,s),d},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=o}var ms={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Mp};function Fp(t){var e=t.state,n=t.name;e.modifiersData[n]=er({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var Ei={name:"popperOffsets",enabled:!0,phase:"read",fn:Fp,data:{}};function Zo(t){return t==="x"?"y":"x"}function Up(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,u=n.padding,h=n.tether,f=h===void 0?!0:h,p=n.tetherOffset,g=p===void 0?0:p,m=$e(e,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),v=Ae(e.placement),b=pt(e.placement),E=!b,_=Cn(v),A=Zo(_),w=e.modifiersData.popperOffsets,T=e.rects.reference,D=e.rects.popper,O=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,N=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),I=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,$={x:0,y:0};if(w){if(s){var H,z=_==="y"?se:le,ue=_==="y"?pe:fe,q=_==="y"?"height":"width",B=w[_],de=B+m[z],he=B-m[ue],Oe=f?-D[q]/2:0,ve=b===Dt?T[q]:D[q],Y=b===Dt?-D[q]:-T[q],wt=e.elements.arrow,et=f&&wt?On(wt):{width:0,height:0},tt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Ji(),V=tt[z],J=tt[ue],Te=Pn(0,T[q],et[q]),rn=E?T[q]/2-Oe-Te-V-N.mainAxis:ve-Te-V-N.mainAxis,rp=E?-T[q]/2+Oe+Te+J+N.mainAxis:Y+Te+J+N.mainAxis,Bo=e.elements.arrow&&Tt(e.elements.arrow),sp=Bo?_==="y"?Bo.clientTop||0:Bo.clientLeft||0:0,pc=(H=I?.[_])!=null?H:0,op=B+rn-pc-sp,ap=B+rp-pc,gc=Pn(f?xn(de,op):de,B,f?Et(he,ap):he);w[_]=gc,$[_]=gc-B}if(a){var mc,lp=_==="x"?se:le,cp=_==="x"?pe:fe,Sn=w[A],ls=A==="y"?"height":"width",vc=Sn+m[lp],_c=Sn-m[cp],Vo=[se,le].indexOf(v)!==-1,bc=(mc=I?.[A])!=null?mc:0,yc=Vo?vc:Sn-T[ls]-D[ls]-bc+N.altAxis,wc=Vo?Sn+T[ls]+D[ls]-bc-N.altAxis:_c,Ec=f&&Vo?Rc(yc,Sn,wc):Pn(f?yc:vc,Sn,f?wc:_c);w[A]=Ec,$[A]=Ec-Sn}e.modifiersData[i]=$}}var vs={name:"preventOverflow",enabled:!0,phase:"main",fn:Up,requiresIfExists:["offset"]};function ea(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function ta(t){return t===te(t)||!_e(t)?Dn(t):ea(t)}function $p(t){var e=t.getBoundingClientRect(),n=Rt(e.width)/t.offsetWidth||1,i=Rt(e.height)/t.offsetHeight||1;return n!==1||i!==1}function na(t,e,n){n===void 0&&(n=!1);var i=_e(e),r=_e(e)&&$p(e),s=Ce(e),o=ft(t,r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((Se(e)!=="body"||In(s))&&(a=ta(e)),_e(e)?(l=ft(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=Nn(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Hp(t){var e=new Map,n=new Set,i=[];t.forEach(function(s){e.set(s.name,s)});function r(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&r(l)}}),i.push(s)}return t.forEach(function(s){n.has(s.name)||r(s)}),i}function ia(t){var e=Hp(t);return Ko.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function ra(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function sa(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var Uc={placement:"bottom",modifiers:[],strategy:"absolute"};function $c(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Rn(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,s=r===void 0?Uc:r;return function(a,l,c){c===void 0&&(c=s);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Uc,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},u=[],h=!1,f={state:d,setOptions:function(v){var b=typeof v=="function"?v(d.options):v;g(),d.options=Object.assign({},s,d.options,b),d.scrollParents={reference:ht(a)?ln(a):a.contextElement?ln(a.contextElement):[],popper:ln(l)};var E=ia(sa([].concat(i,d.options.modifiers)));return d.orderedModifiers=E.filter(function(_){return _.enabled}),p(),f.update()},forceUpdate:function(){if(!h){var v=d.elements,b=v.reference,E=v.popper;if($c(b,E)){d.rects={reference:na(b,Tt(E),d.options.strategy==="fixed"),popper:On(E)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(N){return d.modifiersData[N.name]=Object.assign({},N.data)});for(var _=0;_<d.orderedModifiers.length;_++){if(d.reset===!0){d.reset=!1,_=-1;continue}var A=d.orderedModifiers[_],w=A.fn,T=A.options,D=T===void 0?{}:T,O=A.name;typeof w=="function"&&(d=w({state:d,options:D,name:O,instance:f})||d)}}}},update:ra(function(){return new Promise(function(m){f.forceUpdate(),m(d)})}),destroy:function(){g(),h=!0}};if(!$c(a,l))return f;f.setOptions(c).then(function(m){!h&&c.onFirstUpdate&&c.onFirstUpdate(m)});function p(){d.orderedModifiers.forEach(function(m){var v=m.name,b=m.options,E=b===void 0?{}:b,_=m.effect;if(typeof _=="function"){var A=_({state:d,name:v,instance:f,options:E}),w=function(){};u.push(A||w)}})}function g(){u.forEach(function(m){return m()}),u=[]}return f}}var Hc=Rn();var jp=[bi,Ei,_i,mi],jc=Rn({defaultModifiers:jp});var Bp=[bi,Ei,_i,mi,ms,ps,vs,us,gs],tr=Rn({defaultModifiers:Bp});var cn=new Map,oa={set(t,e,n){cn.has(t)||cn.set(t,new Map);let i=cn.get(t);if(!i.has(e)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(e,n)},get(t,e){return cn.has(t)&&cn.get(t).get(e)||null},remove(t,e){if(!cn.has(t))return;let n=cn.get(t);n.delete(e),n.size===0&&cn.delete(t)}},Vp=1e6,qp=1e3,wa="transitionend",mu=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(e,n)=>`#${CSS.escape(n)}`)),t),Wp=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),zp=t=>{do t+=Math.floor(Math.random()*Vp);while(document.getElementById(t));return t},Kp=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t),i=Number.parseFloat(e),r=Number.parseFloat(n);return!i&&!r?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*qp)},vu=t=>{t.dispatchEvent(new Event(wa))},kt=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),un=t=>kt(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(mu(t)):null,Di=t=>{if(!kt(t)||t.getClientRects().length===0)return!1;let e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){let i=t.closest("summary");if(i&&i.parentNode!==n||i===null)return!1}return e},dn=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",_u=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){let e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?_u(t.parentNode):null},Os=()=>{},ar=t=>{t.offsetHeight},bu=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,aa=[],Xp=t=>{document.readyState==="loading"?(aa.length||document.addEventListener("DOMContentLoaded",()=>{for(let e of aa)e()}),aa.push(t)):t()},gt=()=>document.documentElement.dir==="rtl",vt=t=>{Xp(()=>{let e=bu();if(e){let n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}})},Xe=(t,e=[],n=t)=>typeof t=="function"?t.call(...e):n,yu=(t,e,n=!0)=>{if(!n){Xe(t);return}let r=Kp(e)+5,s=!1,o=({target:a})=>{a===e&&(s=!0,e.removeEventListener(wa,o),Xe(t))};e.addEventListener(wa,o),setTimeout(()=>{s||vu(e)},r)},xa=(t,e,n,i)=>{let r=t.length,s=t.indexOf(e);return s===-1?!n&&i?t[r-1]:t[0]:(s+=n?1:-1,i&&(s=(s+r)%r),t[Math.max(0,Math.min(s,r-1))])},Yp=/[^.]*(?=\..*)\.|.*/,Gp=/\..*/,Jp=/::\d+$/,la={},Bc=1,wu={mouseenter:"mouseover",mouseleave:"mouseout"},Qp=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Eu(t,e){return e&&`${e}::${Bc++}`||t.uidEvent||Bc++}function Tu(t){let e=Eu(t);return t.uidEvent=e,la[e]=la[e]||{},la[e]}function Zp(t,e){return function n(i){return Oa(i,{delegateTarget:t}),n.oneOff&&y.off(t,i.type,e),e.apply(t,[i])}}function eg(t,e,n){return function i(r){let s=t.querySelectorAll(e);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(let a of s)if(a===o)return Oa(r,{delegateTarget:o}),i.oneOff&&y.off(t,r.type,e,n),n.apply(o,[r])}}function Su(t,e,n=null){return Object.values(t).find(i=>i.callable===e&&i.delegationSelector===n)}function Au(t,e,n){let i=typeof e=="string",r=i?n:e||n,s=xu(t);return Qp.has(s)||(s=t),[i,r,s]}function Vc(t,e,n,i,r){if(typeof e!="string"||!t)return;let[s,o,a]=Au(e,n,i);e in wu&&(o=(p=>function(g){if(!g.relatedTarget||g.relatedTarget!==g.delegateTarget&&!g.delegateTarget.contains(g.relatedTarget))return p.call(this,g)})(o));let l=Tu(t),c=l[a]||(l[a]={}),d=Su(c,o,s?n:null);if(d){d.oneOff=d.oneOff&&r;return}let u=Eu(o,e.replace(Yp,"")),h=s?eg(t,n,o):Zp(t,o);h.delegationSelector=s?n:null,h.callable=o,h.oneOff=r,h.uidEvent=u,c[u]=h,t.addEventListener(a,h,s)}function Ea(t,e,n,i,r){let s=Su(e[n],i,r);s&&(t.removeEventListener(n,s,!!r),delete e[n][s.uidEvent])}function tg(t,e,n,i){let r=e[n]||{};for(let[s,o]of Object.entries(r))s.includes(i)&&Ea(t,e,n,o.callable,o.delegationSelector)}function xu(t){return t=t.replace(Gp,""),wu[t]||t}var y={on(t,e,n,i){Vc(t,e,n,i,!1)},one(t,e,n,i){Vc(t,e,n,i,!0)},off(t,e,n,i){if(typeof e!="string"||!t)return;let[r,s,o]=Au(e,n,i),a=o!==e,l=Tu(t),c=l[o]||{},d=e.startsWith(".");if(typeof s<"u"){if(!Object.keys(c).length)return;Ea(t,l,o,s,r?n:null);return}if(d)for(let u of Object.keys(l))tg(t,l,u,e.slice(1));for(let[u,h]of Object.entries(c)){let f=u.replace(Jp,"");(!a||e.includes(f))&&Ea(t,l,o,h.callable,h.delegationSelector)}},trigger(t,e,n){if(typeof e!="string"||!t)return null;let i=bu(),r=xu(e),s=e!==r,o=null,a=!0,l=!0,c=!1;s&&i&&(o=i.Event(e,n),i(t).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),c=o.isDefaultPrevented());let d=Oa(new Event(e,{bubbles:a,cancelable:!0}),n);return c&&d.preventDefault(),l&&t.dispatchEvent(d),d.defaultPrevented&&o&&o.preventDefault(),d}};function Oa(t,e={}){for(let[n,i]of Object.entries(e))try{t[n]=i}catch{Object.defineProperty(t,n,{configurable:!0,get(){return i}})}return t}function qc(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function ca(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}var Mt={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${ca(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${ca(e)}`)},getDataAttributes(t){if(!t)return{};let e={},n=Object.keys(t.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(let i of n){let r=i.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1),e[r]=qc(t.dataset[i])}return e},getDataAttribute(t,e){return qc(t.getAttribute(`data-bs-${ca(e)}`))}},Mn=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){let i=kt(n)?Mt.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...kt(n)?Mt.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(let[i,r]of Object.entries(n)){let s=e[i],o=kt(s)?"element":Wp(s);if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${r}".`)}}},ng="5.3.5",nt=class extends Mn{constructor(e,n){super(),e=un(e),e&&(this._element=e,this._config=this._getConfig(n),oa.set(this._element,this.constructor.DATA_KEY,this))}dispose(){oa.remove(this._element,this.constructor.DATA_KEY),y.off(this._element,this.constructor.EVENT_KEY);for(let e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,i=!0){yu(e,n,i)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return oa.get(un(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return ng}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}},ua=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?n.trim():null}return e?e.split(",").map(n=>mu(n)).join(","):null},R={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){let n=[],i=t.parentNode.closest(e);for(;i;)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){let e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!dn(n)&&Di(n))},getSelectorFromElement(t){let e=ua(t);return e&&R.findOne(e)?e:null},getElementFromSelector(t){let e=ua(t);return e?R.findOne(e):null},getMultipleElementsFromSelector(t){let e=ua(t);return e?R.find(e):[]}},Fs=(t,e="hide")=>{let n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;y.on(document,n,`[data-bs-dismiss="${i}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),dn(this))return;let s=R.getElementFromSelector(this)||this.closest(`.${i}`);t.getOrCreateInstance(s)[e]()})},ig="alert",rg="bs.alert",Ou=`.${rg}`,sg=`close${Ou}`,og=`closed${Ou}`,ag="fade",lg="show",Cs=class t extends nt{static get NAME(){return ig}close(){if(y.trigger(this._element,sg).defaultPrevented)return;this._element.classList.remove(lg);let n=this._element.classList.contains(ag);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),y.trigger(this._element,og),this.dispose()}static jQueryInterface(e){return this.each(function(){let n=t.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}};Fs(Cs,"close");vt(Cs);var cg="button",ug="bs.button",dg=`.${ug}`,hg=".data-api",fg="active",Wc='[data-bs-toggle="button"]',pg=`click${dg}${hg}`,Ps=class t extends nt{static get NAME(){return cg}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(fg))}static jQueryInterface(e){return this.each(function(){let n=t.getOrCreateInstance(this);e==="toggle"&&n[e]()})}};y.on(document,pg,Wc,t=>{t.preventDefault();let e=t.target.closest(Wc);Ps.getOrCreateInstance(e).toggle()});vt(Ps);var gg="swipe",Ni=".bs.swipe",mg=`touchstart${Ni}`,vg=`touchmove${Ni}`,_g=`touchend${Ni}`,bg=`pointerdown${Ni}`,yg=`pointerup${Ni}`,wg="touch",Eg="pen",Tg="pointer-event",Sg=40,Ag={endCallback:null,leftCallback:null,rightCallback:null},xg={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"},Ds=class t extends Mn{constructor(e,n){super(),this._element=e,!(!e||!t.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Ag}static get DefaultType(){return xg}static get NAME(){return gg}dispose(){y.off(this._element,Ni)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Xe(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){let e=Math.abs(this._deltaX);if(e<=Sg)return;let n=e/this._deltaX;this._deltaX=0,n&&Xe(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(y.on(this._element,bg,e=>this._start(e)),y.on(this._element,yg,e=>this._end(e)),this._element.classList.add(Tg)):(y.on(this._element,mg,e=>this._start(e)),y.on(this._element,vg,e=>this._move(e)),y.on(this._element,_g,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===Eg||e.pointerType===wg)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}},Og="carousel",Cg="bs.carousel",pn=`.${Cg}`,Cu=".data-api",Pg="ArrowLeft",Dg="ArrowRight",Ng=500,nr="next",Ti="prev",Ai="left",As="right",Ig=`slide${pn}`,da=`slid${pn}`,Rg=`keydown${pn}`,Lg=`mouseenter${pn}`,kg=`mouseleave${pn}`,Mg=`dragstart${pn}`,Fg=`load${pn}${Cu}`,Ug=`click${pn}${Cu}`,Pu="carousel",bs="active",$g="slide",Hg="carousel-item-end",jg="carousel-item-start",Bg="carousel-item-next",Vg="carousel-item-prev",Du=".active",Nu=".carousel-item",qg=Du+Nu,Wg=".carousel-item img",zg=".carousel-indicators",Kg="[data-bs-slide], [data-bs-slide-to]",Xg='[data-bs-ride="carousel"]',Yg={[Pg]:As,[Dg]:Ai},Gg={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Jg={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"},rr=class t extends nt{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=R.findOne(zg,this._element),this._addEventListeners(),this._config.ride===Pu&&this.cycle()}static get Default(){return Gg}static get DefaultType(){return Jg}static get NAME(){return Og}next(){this._slide(nr)}nextWhenVisible(){!document.hidden&&Di(this._element)&&this.next()}prev(){this._slide(Ti)}pause(){this._isSliding&&vu(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){y.one(this._element,da,()=>this.cycle());return}this.cycle()}}to(e){let n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){y.one(this._element,da,()=>this.to(e));return}let i=this._getItemIndex(this._getActive());if(i===e)return;let r=e>i?nr:Ti;this._slide(r,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&y.on(this._element,Rg,e=>this._keydown(e)),this._config.pause==="hover"&&(y.on(this._element,Lg,()=>this.pause()),y.on(this._element,kg,()=>this._maybeEnableCycle())),this._config.touch&&Ds.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(let i of R.find(Wg,this._element))y.on(i,Mg,r=>r.preventDefault());let n={leftCallback:()=>this._slide(this._directionToOrder(Ai)),rightCallback:()=>this._slide(this._directionToOrder(As)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Ng+this._config.interval))}};this._swipeHelper=new Ds(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;let n=Yg[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;let n=R.findOne(Du,this._indicatorsElement);n.classList.remove(bs),n.removeAttribute("aria-current");let i=R.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);i&&(i.classList.add(bs),i.setAttribute("aria-current","true"))}_updateInterval(){let e=this._activeElement||this._getActive();if(!e)return;let n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;let i=this._getActive(),r=e===nr,s=n||xa(this._getItems(),i,r,this._config.wrap);if(s===i)return;let o=this._getItemIndex(s),a=f=>y.trigger(this._element,f,{relatedTarget:s,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:o});if(a(Ig).defaultPrevented||!i||!s)return;let c=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=s;let d=r?jg:Hg,u=r?Bg:Vg;s.classList.add(u),ar(s),i.classList.add(d),s.classList.add(d);let h=()=>{s.classList.remove(d,u),s.classList.add(bs),i.classList.remove(bs,u,d),this._isSliding=!1,a(da)};this._queueCallback(h,i,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains($g)}_getActive(){return R.findOne(qg,this._element)}_getItems(){return R.find(Nu,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return gt()?e===Ai?Ti:nr:e===Ai?nr:Ti}_orderToDirection(e){return gt()?e===Ti?Ai:As:e===Ti?As:Ai}static jQueryInterface(e){return this.each(function(){let n=t.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}};y.on(document,Ug,Kg,function(t){let e=R.getElementFromSelector(this);if(!e||!e.classList.contains(Pu))return;t.preventDefault();let n=rr.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");if(i){n.to(i),n._maybeEnableCycle();return}if(Mt.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});y.on(window,Fg,()=>{let t=R.find(Xg);for(let e of t)rr.getOrCreateInstance(e)});vt(rr);var Qg="collapse",Zg="bs.collapse",lr=`.${Zg}`,em=".data-api",tm=`show${lr}`,nm=`shown${lr}`,im=`hide${lr}`,rm=`hidden${lr}`,sm=`click${lr}${em}`,ha="show",Oi="collapse",ys="collapsing",om="collapsed",am=`:scope .${Oi} .${Oi}`,lm="collapse-horizontal",cm="width",um="height",dm=".collapse.show, .collapse.collapsing",Ta='[data-bs-toggle="collapse"]',hm={parent:null,toggle:!0},fm={parent:"(null|element)",toggle:"boolean"},Ns=class t extends nt{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];let i=R.find(Ta);for(let r of i){let s=R.getSelectorFromElement(r),o=R.find(s).filter(a=>a===this._element);s!==null&&o.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return hm}static get DefaultType(){return fm}static get NAME(){return Qg}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(dm).filter(a=>a!==this._element).map(a=>t.getOrCreateInstance(a,{toggle:!1}))),e.length&&e[0]._isTransitioning||y.trigger(this._element,tm).defaultPrevented)return;for(let a of e)a.hide();let i=this._getDimension();this._element.classList.remove(Oi),this._element.classList.add(ys),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let r=()=>{this._isTransitioning=!1,this._element.classList.remove(ys),this._element.classList.add(Oi,ha),this._element.style[i]="",y.trigger(this._element,nm)},o=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[i]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||y.trigger(this._element,im).defaultPrevented)return;let n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,ar(this._element),this._element.classList.add(ys),this._element.classList.remove(Oi,ha);for(let r of this._triggerArray){let s=R.getElementFromSelector(r);s&&!this._isShown(s)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;let i=()=>{this._isTransitioning=!1,this._element.classList.remove(ys),this._element.classList.add(Oi),y.trigger(this._element,rm)};this._element.style[n]="",this._queueCallback(i,this._element,!0)}_isShown(e=this._element){return e.classList.contains(ha)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=un(e.parent),e}_getDimension(){return this._element.classList.contains(lm)?cm:um}_initializeChildren(){if(!this._config.parent)return;let e=this._getFirstLevelChildren(Ta);for(let n of e){let i=R.getElementFromSelector(n);i&&this._addAriaAndCollapsedClass([n],this._isShown(i))}}_getFirstLevelChildren(e){let n=R.find(am,this._config.parent);return R.find(e,this._config.parent).filter(i=>!n.includes(i))}_addAriaAndCollapsedClass(e,n){if(e.length)for(let i of e)i.classList.toggle(om,!n),i.setAttribute("aria-expanded",n)}static jQueryInterface(e){let n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){let i=t.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}};y.on(document,sm,Ta,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();for(let e of R.getMultipleElementsFromSelector(this))Ns.getOrCreateInstance(e,{toggle:!1}).toggle()});vt(Ns);var zc="dropdown",pm="bs.dropdown",Fn=`.${pm}`,Ca=".data-api",gm="Escape",Kc="Tab",mm="ArrowUp",Xc="ArrowDown",vm=2,_m=`hide${Fn}`,bm=`hidden${Fn}`,ym=`show${Fn}`,wm=`shown${Fn}`,Iu=`click${Fn}${Ca}`,Ru=`keydown${Fn}${Ca}`,Em=`keyup${Fn}${Ca}`,xi="show",Tm="dropup",Sm="dropend",Am="dropstart",xm="dropup-center",Om="dropdown-center",Ln='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Cm=`${Ln}.${xi}`,xs=".dropdown-menu",Pm=".navbar",Dm=".navbar-nav",Nm=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Im=gt()?"top-end":"top-start",Rm=gt()?"top-start":"top-end",Lm=gt()?"bottom-end":"bottom-start",km=gt()?"bottom-start":"bottom-end",Mm=gt()?"left-start":"right-start",Fm=gt()?"right-start":"left-start",Um="top",$m="bottom",Hm={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},jm={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"},hn=class t extends nt{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=R.next(this._element,xs)[0]||R.prev(this._element,xs)[0]||R.findOne(xs,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Hm}static get DefaultType(){return jm}static get NAME(){return zc}toggle(){return this._isShown()?this.hide():this.show()}show(){if(dn(this._element)||this._isShown())return;let e={relatedTarget:this._element};if(!y.trigger(this._element,ym,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Dm))for(let i of[].concat(...document.body.children))y.on(i,"mouseover",Os);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(xi),this._element.classList.add(xi),y.trigger(this._element,wm,e)}}hide(){if(dn(this._element)||!this._isShown())return;let e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!y.trigger(this._element,_m,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(let i of[].concat(...document.body.children))y.off(i,"mouseover",Os);this._popper&&this._popper.destroy(),this._menu.classList.remove(xi),this._element.classList.remove(xi),this._element.setAttribute("aria-expanded","false"),Mt.removeDataAttribute(this._menu,"popper"),y.trigger(this._element,bm,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!kt(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${zc.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof _s>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let e=this._element;this._config.reference==="parent"?e=this._parent:kt(this._config.reference)?e=un(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);let n=this._getPopperConfig();this._popper=tr(e,this._menu,n)}_isShown(){return this._menu.classList.contains(xi)}_getPlacement(){let e=this._parent;if(e.classList.contains(Sm))return Mm;if(e.classList.contains(Am))return Fm;if(e.classList.contains(xm))return Um;if(e.classList.contains(Om))return $m;let n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(Tm)?n?Rm:Im:n?km:Lm}_detectNavbar(){return this._element.closest(Pm)!==null}_getOffset(){let{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){let e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Mt.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Xe(this._config.popperConfig,[void 0,e])}}_selectMenuItem({key:e,target:n}){let i=R.find(Nm,this._menu).filter(r=>Di(r));i.length&&xa(i,n,e===Xc,!i.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){let n=t.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===vm||e.type==="keyup"&&e.key!==Kc)return;let n=R.find(Cm);for(let i of n){let r=t.getInstance(i);if(!r||r._config.autoClose===!1)continue;let s=e.composedPath(),o=s.includes(r._menu);if(s.includes(r._element)||r._config.autoClose==="inside"&&!o||r._config.autoClose==="outside"&&o||r._menu.contains(e.target)&&(e.type==="keyup"&&e.key===Kc||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;let a={relatedTarget:r._element};e.type==="click"&&(a.clickEvent=e),r._completeHide(a)}}static dataApiKeydownHandler(e){let n=/input|textarea/i.test(e.target.tagName),i=e.key===gm,r=[mm,Xc].includes(e.key);if(!r&&!i||n&&!i)return;e.preventDefault();let s=this.matches(Ln)?this:R.prev(this,Ln)[0]||R.next(this,Ln)[0]||R.findOne(Ln,e.delegateTarget.parentNode),o=t.getOrCreateInstance(s);if(r){e.stopPropagation(),o.show(),o._selectMenuItem(e);return}o._isShown()&&(e.stopPropagation(),o.hide(),s.focus())}};y.on(document,Ru,Ln,hn.dataApiKeydownHandler);y.on(document,Ru,xs,hn.dataApiKeydownHandler);y.on(document,Iu,hn.clearMenus);y.on(document,Em,hn.clearMenus);y.on(document,Iu,Ln,function(t){t.preventDefault(),hn.getOrCreateInstance(this).toggle()});vt(hn);var Lu="backdrop",Bm="fade",Yc="show",Gc=`mousedown.bs.${Lu}`,Vm={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},qm={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"},Is=class extends Mn{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Vm}static get DefaultType(){return qm}static get NAME(){return Lu}show(e){if(!this._config.isVisible){Xe(e);return}this._append();let n=this._getElement();this._config.isAnimated&&ar(n),n.classList.add(Yc),this._emulateAnimation(()=>{Xe(e)})}hide(e){if(!this._config.isVisible){Xe(e);return}this._getElement().classList.remove(Yc),this._emulateAnimation(()=>{this.dispose(),Xe(e)})}dispose(){this._isAppended&&(y.off(this._element,Gc),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(Bm),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=un(e.rootElement),e}_append(){if(this._isAppended)return;let e=this._getElement();this._config.rootElement.append(e),y.on(e,Gc,()=>{Xe(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){yu(e,this._getElement(),this._config.isAnimated)}},Wm="focustrap",zm="bs.focustrap",Rs=`.${zm}`,Km=`focusin${Rs}`,Xm=`keydown.tab${Rs}`,Ym="Tab",Gm="forward",Jc="backward",Jm={autofocus:!0,trapElement:null},Qm={autofocus:"boolean",trapElement:"element"},Ls=class extends Mn{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Jm}static get DefaultType(){return Qm}static get NAME(){return Wm}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),y.off(document,Rs),y.on(document,Km,e=>this._handleFocusin(e)),y.on(document,Xm,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,y.off(document,Rs))}_handleFocusin(e){let{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;let i=R.focusableChildren(n);i.length===0?n.focus():this._lastTabNavDirection===Jc?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){e.key===Ym&&(this._lastTabNavDirection=e.shiftKey?Jc:Gm)}},Qc=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Zc=".sticky-top",ws="padding-right",eu="margin-right",sr=class{constructor(){this._element=document.body}getWidth(){let e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){let e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ws,n=>n+e),this._setElementAttributes(Qc,ws,n=>n+e),this._setElementAttributes(Zc,eu,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ws),this._resetElementAttributes(Qc,ws),this._resetElementAttributes(Zc,eu)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,i){let r=this.getWidth(),s=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+r)return;this._saveInitialAttribute(o,n);let a=window.getComputedStyle(o).getPropertyValue(n);o.style.setProperty(n,`${i(Number.parseFloat(a))}px`)};this._applyManipulationCallback(e,s)}_saveInitialAttribute(e,n){let i=e.style.getPropertyValue(n);i&&Mt.setDataAttribute(e,n,i)}_resetElementAttributes(e,n){let i=r=>{let s=Mt.getDataAttribute(r,n);if(s===null){r.style.removeProperty(n);return}Mt.removeDataAttribute(r,n),r.style.setProperty(n,s)};this._applyManipulationCallback(e,i)}_applyManipulationCallback(e,n){if(kt(e)){n(e);return}for(let i of R.find(e,this._element))n(i)}},Zm="modal",ev="bs.modal",mt=`.${ev}`,tv=".data-api",nv="Escape",iv=`hide${mt}`,rv=`hidePrevented${mt}`,ku=`hidden${mt}`,Mu=`show${mt}`,sv=`shown${mt}`,ov=`resize${mt}`,av=`click.dismiss${mt}`,lv=`mousedown.dismiss${mt}`,cv=`keydown.dismiss${mt}`,uv=`click${mt}${tv}`,tu="modal-open",dv="fade",nu="show",fa="modal-static",hv=".modal.show",fv=".modal-dialog",pv=".modal-body",gv='[data-bs-toggle="modal"]',mv={backdrop:!0,focus:!0,keyboard:!0},vv={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"},Ci=class t extends nt{constructor(e,n){super(e,n),this._dialog=R.findOne(fv,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new sr,this._addEventListeners()}static get Default(){return mv}static get DefaultType(){return vv}static get NAME(){return Zm}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||y.trigger(this._element,Mu,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(tu),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||y.trigger(this._element,iv).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(nu),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){y.off(window,mt),y.off(this._dialog,mt),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Is({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ls({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;let n=R.findOne(pv,this._dialog);n&&(n.scrollTop=0),ar(this._element),this._element.classList.add(nu);let i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,y.trigger(this._element,sv,{relatedTarget:e})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){y.on(this._element,cv,e=>{if(e.key===nv){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),y.on(window,ov,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),y.on(this._element,lv,e=>{y.one(this._element,av,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(tu),this._resetAdjustments(),this._scrollBar.reset(),y.trigger(this._element,ku)})}_isAnimated(){return this._element.classList.contains(dv)}_triggerBackdropTransition(){if(y.trigger(this._element,rv).defaultPrevented)return;let n=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(fa)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(fa),this._queueCallback(()=>{this._element.classList.remove(fa),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),i=n>0;if(i&&!e){let r=gt()?"paddingLeft":"paddingRight";this._element.style[r]=`${n}px`}if(!i&&e){let r=gt()?"paddingRight":"paddingLeft";this._element.style[r]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){let i=t.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e](n)}})}};y.on(document,uv,gv,function(t){let e=R.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),y.one(e,Mu,r=>{r.defaultPrevented||y.one(e,ku,()=>{Di(this)&&this.focus()})});let n=R.findOne(hv);n&&Ci.getInstance(n).hide(),Ci.getOrCreateInstance(e).toggle(this)});Fs(Ci);vt(Ci);var _v="offcanvas",bv="bs.offcanvas",Ft=`.${bv}`,Fu=".data-api",yv=`load${Ft}${Fu}`,wv="Escape",iu="show",ru="showing",su="hiding",Ev="offcanvas-backdrop",Uu=".offcanvas.show",Tv=`show${Ft}`,Sv=`shown${Ft}`,Av=`hide${Ft}`,ou=`hidePrevented${Ft}`,$u=`hidden${Ft}`,xv=`resize${Ft}`,Ov=`click${Ft}${Fu}`,Cv=`keydown.dismiss${Ft}`,Pv='[data-bs-toggle="offcanvas"]',Dv={backdrop:!0,keyboard:!0,scroll:!1},Nv={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"},fn=class t extends nt{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Dv}static get DefaultType(){return Nv}static get NAME(){return _v}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||y.trigger(this._element,Tv,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new sr().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(ru);let i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(iu),this._element.classList.remove(ru),y.trigger(this._element,Sv,{relatedTarget:e})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||y.trigger(this._element,Av).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(su),this._backdrop.hide();let n=()=>{this._element.classList.remove(iu,su),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new sr().reset(),y.trigger(this._element,$u)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){let e=()=>{if(this._config.backdrop==="static"){y.trigger(this._element,ou);return}this.hide()},n=!!this._config.backdrop;return new Is({className:Ev,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new Ls({trapElement:this._element})}_addEventListeners(){y.on(this._element,Cv,e=>{if(e.key===wv){if(this._config.keyboard){this.hide();return}y.trigger(this._element,ou)}})}static jQueryInterface(e){return this.each(function(){let n=t.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}};y.on(document,Ov,Pv,function(t){let e=R.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),dn(this))return;y.one(e,$u,()=>{Di(this)&&this.focus()});let n=R.findOne(Uu);n&&n!==e&&fn.getInstance(n).hide(),fn.getOrCreateInstance(e).toggle(this)});y.on(window,yv,()=>{for(let t of R.find(Uu))fn.getOrCreateInstance(t).show()});y.on(window,xv,()=>{for(let t of R.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&fn.getOrCreateInstance(t).hide()});Fs(fn);vt(fn);var Iv=/^aria-[\w-]*$/i,Hu={"*":["class","dir","id","lang","role",Iv],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Rv=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Lv=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,kv=(t,e)=>{let n=t.nodeName.toLowerCase();return e.includes(n)?Rv.has(n)?!!Lv.test(t.nodeValue):!0:e.filter(i=>i instanceof RegExp).some(i=>i.test(n))};function Mv(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);let r=new window.DOMParser().parseFromString(t,"text/html"),s=[].concat(...r.body.querySelectorAll("*"));for(let o of s){let a=o.nodeName.toLowerCase();if(!Object.keys(e).includes(a)){o.remove();continue}let l=[].concat(...o.attributes),c=[].concat(e["*"]||[],e[a]||[]);for(let d of l)kv(d,c)||o.removeAttribute(d.nodeName)}return r.body.innerHTML}var Fv="TemplateFactory",Uv={allowList:Hu,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},$v={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Hv={entry:"(string|element|function|null)",selector:"(string|element)"},Sa=class extends Mn{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Uv}static get DefaultType(){return $v}static get NAME(){return Fv}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){let e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(let[r,s]of Object.entries(this._config.content))this._setContent(e,s,r);let n=e.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&n.classList.add(...i.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(let[n,i]of Object.entries(e))super._typeCheckConfig({selector:n,entry:i},Hv)}_setContent(e,n,i){let r=R.findOne(i,e);if(r){if(n=this._resolvePossibleFunction(n),!n){r.remove();return}if(kt(n)){this._putElementInTemplate(un(n),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(n);return}r.textContent=n}}_maybeSanitize(e){return this._config.sanitize?Mv(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return Xe(e,[void 0,this])}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}},jv="tooltip",Bv=new Set(["sanitize","allowList","sanitizeFn"]),pa="fade",Vv="modal",Es="show",qv=".tooltip-inner",au=`.${Vv}`,lu="hide.bs.modal",ir="hover",ga="focus",Wv="click",zv="manual",Kv="hide",Xv="hidden",Yv="show",Gv="shown",Jv="inserted",Qv="click",Zv="focusin",e_="focusout",t_="mouseenter",n_="mouseleave",i_={AUTO:"auto",TOP:"top",RIGHT:gt()?"left":"right",BOTTOM:"bottom",LEFT:gt()?"right":"left"},r_={allowList:Hu,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},s_={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"},Pi=class t extends nt{constructor(e,n){if(typeof _s>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return r_}static get DefaultType(){return s_}static get NAME(){return jv}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),y.off(this._element.closest(au),lu,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;let e=y.trigger(this._element,this.constructor.eventName(Yv)),i=(_u(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!i)return;this._disposePopper();let r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));let{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(r),y.trigger(this._element,this.constructor.eventName(Jv))),this._popper=this._createPopper(r),r.classList.add(Es),"ontouchstart"in document.documentElement)for(let a of[].concat(...document.body.children))y.on(a,"mouseover",Os);let o=()=>{y.trigger(this._element,this.constructor.eventName(Gv)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||y.trigger(this._element,this.constructor.eventName(Kv)).defaultPrevented)return;if(this._getTipElement().classList.remove(Es),"ontouchstart"in document.documentElement)for(let r of[].concat(...document.body.children))y.off(r,"mouseover",Os);this._activeTrigger[Wv]=!1,this._activeTrigger[ga]=!1,this._activeTrigger[ir]=!1,this._isHovered=null;let i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),y.trigger(this._element,this.constructor.eventName(Xv)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){let n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(pa,Es),n.classList.add(`bs-${this.constructor.NAME}-auto`);let i=zp(this.constructor.NAME).toString();return n.setAttribute("id",i),this._isAnimated()&&n.classList.add(pa),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Sa({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[qv]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(pa)}_isShown(){return this.tip&&this.tip.classList.contains(Es)}_createPopper(e){let n=Xe(this._config.placement,[this,e,this._element]),i=i_[n.toUpperCase()];return tr(this._element,e,this._getPopperConfig(i))}_getOffset(){let{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return Xe(e,[this._element,this._element])}_getPopperConfig(e){let n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...n,...Xe(this._config.popperConfig,[void 0,n])}}_setListeners(){let e=this._config.trigger.split(" ");for(let n of e)if(n==="click")y.on(this._element,this.constructor.eventName(Qv),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if(n!==zv){let i=n===ir?this.constructor.eventName(t_):this.constructor.eventName(Zv),r=n===ir?this.constructor.eventName(n_):this.constructor.eventName(e_);y.on(this._element,i,this._config.selector,s=>{let o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusin"?ga:ir]=!0,o._enter()}),y.on(this._element,r,this._config.selector,s=>{let o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusout"?ga:ir]=o._element.contains(s.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},y.on(this._element.closest(au),lu,this._hideModalHandler)}_fixTitle(){let e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){let n=Mt.getDataAttributes(this._element);for(let i of Object.keys(n))Bv.has(i)&&delete n[i];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:un(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){let e={};for(let[n,i]of Object.entries(this._config))this.constructor.Default[n]!==i&&(e[n]=i);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){let n=t.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}};vt(Pi);var o_="popover",a_=".popover-header",l_=".popover-body",c_={...Pi.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},u_={...Pi.DefaultType,content:"(null|string|element|function)"},Aa=class t extends Pi{static get Default(){return c_}static get DefaultType(){return u_}static get NAME(){return o_}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[a_]:this._getTitle(),[l_]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){let n=t.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}};vt(Aa);var d_="scrollspy",h_="bs.scrollspy",Pa=`.${h_}`,f_=".data-api",p_=`activate${Pa}`,cu=`click${Pa}`,g_=`load${Pa}${f_}`,m_="dropdown-item",Si="active",v_='[data-bs-spy="scroll"]',ma="[href]",__=".nav, .list-group",uu=".nav-link",b_=".nav-item",y_=".list-group-item",w_=`${uu}, ${b_} > ${uu}, ${y_}`,E_=".dropdown",T_=".dropdown-toggle",S_={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},A_={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"},ks=class t extends nt{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return S_}static get DefaultType(){return A_}static get NAME(){return d_}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(let e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=un(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(n=>Number.parseFloat(n))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(y.off(this._config.target,cu),y.on(this._config.target,cu,ma,e=>{let n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();let i=this._rootElement||window,r=n.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:r,behavior:"smooth"});return}i.scrollTop=r}}))}_getNewObserver(){let e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){let n=o=>this._targetLinks.get(`#${o.target.id}`),i=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(n(o))},r=(this._rootElement||document.documentElement).scrollTop,s=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(let o of e){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(o));continue}let a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&a){if(i(o),!r)return;continue}!s&&!a&&i(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;let e=R.find(ma,this._config.target);for(let n of e){if(!n.hash||dn(n))continue;let i=R.findOne(decodeURI(n.hash),this._element);Di(i)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,i))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Si),this._activateParents(e),y.trigger(this._element,p_,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(m_)){R.findOne(T_,e.closest(E_)).classList.add(Si);return}for(let n of R.parents(e,__))for(let i of R.prev(n,w_))i.classList.add(Si)}_clearActiveClass(e){e.classList.remove(Si);let n=R.find(`${ma}.${Si}`,e);for(let i of n)i.classList.remove(Si)}static jQueryInterface(e){return this.each(function(){let n=t.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}};y.on(window,g_,()=>{for(let t of R.find(v_))ks.getOrCreateInstance(t)});vt(ks);var x_="tab",O_="bs.tab",Un=`.${O_}`,C_=`hide${Un}`,P_=`hidden${Un}`,D_=`show${Un}`,N_=`shown${Un}`,I_=`click${Un}`,R_=`keydown${Un}`,L_=`load${Un}`,k_="ArrowLeft",du="ArrowRight",M_="ArrowUp",hu="ArrowDown",va="Home",fu="End",kn="active",pu="fade",_a="show",F_="dropdown",ju=".dropdown-toggle",U_=".dropdown-menu",ba=`:not(${ju})`,$_='.list-group, .nav, [role="tablist"]',H_=".nav-item, .list-group-item",j_=`.nav-link${ba}, .list-group-item${ba}, [role="tab"]${ba}`,Bu='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ya=`${j_}, ${Bu}`,B_=`.${kn}[data-bs-toggle="tab"], .${kn}[data-bs-toggle="pill"], .${kn}[data-bs-toggle="list"]`,or=class t extends nt{constructor(e){super(e),this._parent=this._element.closest($_),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),y.on(this._element,R_,n=>this._keydown(n)))}static get NAME(){return x_}show(){let e=this._element;if(this._elemIsActive(e))return;let n=this._getActiveElem(),i=n?y.trigger(n,C_,{relatedTarget:e}):null;y.trigger(e,D_,{relatedTarget:n}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(kn),this._activate(R.getElementFromSelector(e));let i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(_a);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),y.trigger(e,N_,{relatedTarget:n})};this._queueCallback(i,e,e.classList.contains(pu))}_deactivate(e,n){if(!e)return;e.classList.remove(kn),e.blur(),this._deactivate(R.getElementFromSelector(e));let i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(_a);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),y.trigger(e,P_,{relatedTarget:n})};this._queueCallback(i,e,e.classList.contains(pu))}_keydown(e){if(![k_,du,M_,hu,va,fu].includes(e.key))return;e.stopPropagation(),e.preventDefault();let n=this._getChildren().filter(r=>!dn(r)),i;if([va,fu].includes(e.key))i=n[e.key===va?0:n.length-1];else{let r=[du,hu].includes(e.key);i=xa(n,e.target,r,!0)}i&&(i.focus({preventScroll:!0}),t.getOrCreateInstance(i).show())}_getChildren(){return R.find(ya,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(let i of n)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);let n=this._elemIsActive(e),i=this._getOuterElement(e);e.setAttribute("aria-selected",n),i!==e&&this._setAttributeIfNotExists(i,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){let n=R.getElementFromSelector(e);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,n){let i=this._getOuterElement(e);if(!i.classList.contains(F_))return;let r=(s,o)=>{let a=R.findOne(s,i);a&&a.classList.toggle(o,n)};r(ju,kn),r(U_,_a),i.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,i){e.hasAttribute(n)||e.setAttribute(n,i)}_elemIsActive(e){return e.classList.contains(kn)}_getInnerElement(e){return e.matches(ya)?e:R.findOne(ya,e)}_getOuterElement(e){return e.closest(H_)||e}static jQueryInterface(e){return this.each(function(){let n=t.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}};y.on(document,I_,Bu,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!dn(this)&&or.getOrCreateInstance(this).show()});y.on(window,L_,()=>{for(let t of R.find(B_))or.getOrCreateInstance(t)});vt(or);var V_="toast",q_="bs.toast",gn=`.${q_}`,W_=`mouseover${gn}`,z_=`mouseout${gn}`,K_=`focusin${gn}`,X_=`focusout${gn}`,Y_=`hide${gn}`,G_=`hidden${gn}`,J_=`show${gn}`,Q_=`shown${gn}`,Z_="fade",gu="hide",Ts="show",Ss="showing",eb={animation:"boolean",autohide:"boolean",delay:"number"},tb={animation:!0,autohide:!0,delay:5e3},Ms=class t extends nt{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return tb}static get DefaultType(){return eb}static get NAME(){return V_}show(){if(y.trigger(this._element,J_).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Z_);let n=()=>{this._element.classList.remove(Ss),y.trigger(this._element,Q_),this._maybeScheduleHide()};this._element.classList.remove(gu),ar(this._element),this._element.classList.add(Ts,Ss),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||y.trigger(this._element,Y_).defaultPrevented)return;let n=()=>{this._element.classList.add(gu),this._element.classList.remove(Ss,Ts),y.trigger(this._element,G_)};this._element.classList.add(Ss),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ts),super.dispose()}isShown(){return this._element.classList.contains(Ts)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}let i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){y.on(this._element,W_,e=>this._onInteraction(e,!0)),y.on(this._element,z_,e=>this._onInteraction(e,!1)),y.on(this._element,K_,e=>this._onInteraction(e,!0)),y.on(this._element,X_,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){let n=t.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}};Fs(Ms);vt(Ms);function Me(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(i.next(d))}catch(u){o(u)}}function l(d){try{c(i.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((i=i.apply(t,e||[])).next())})}function nb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ua={exports:{}},Ii=typeof Reflect=="object"?Reflect:null,Vu=Ii&&typeof Ii.apply=="function"?Ii.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},Us;Ii&&typeof Ii.ownKeys=="function"?Us=Ii.ownKeys:Object.getOwnPropertySymbols?Us=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Us=function(e){return Object.getOwnPropertyNames(e)};function ib(t){console&&console.warn&&console.warn(t)}var Wu=Number.isNaN||function(e){return e!==e};function X(){X.init.call(this)}Ua.exports=X;Ua.exports.once=ab;X.EventEmitter=X;X.prototype._events=void 0;X.prototype._eventsCount=0;X.prototype._maxListeners=void 0;var qu=10;function Ws(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(X,"defaultMaxListeners",{enumerable:!0,get:function(){return qu},set:function(t){if(typeof t!="number"||t<0||Wu(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");qu=t}});X.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};X.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Wu(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function zu(t){return t._maxListeners===void 0?X.defaultMaxListeners:t._maxListeners}X.prototype.getMaxListeners=function(){return zu(this)};X.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")Vu(l,this,n);else for(var c=l.length,d=Ju(l,c),i=0;i<c;++i)Vu(d[i],this,n);return!0};function Ku(t,e,n,i){var r,s,o;if(Ws(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=zu(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,ib(a)}return t}X.prototype.addListener=function(e,n){return Ku(this,e,n,!1)};X.prototype.on=X.prototype.addListener;X.prototype.prependListener=function(e,n){return Ku(this,e,n,!0)};function rb(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Xu(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=rb.bind(i);return r.listener=n,i.wrapFn=r,r}X.prototype.once=function(e,n){return Ws(n),this.on(e,Xu(this,e,n)),this};X.prototype.prependOnceListener=function(e,n){return Ws(n),this.prependListener(e,Xu(this,e,n)),this};X.prototype.removeListener=function(e,n){var i,r,s,o,a;if(Ws(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():sb(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};X.prototype.off=X.prototype.removeListener;X.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function Yu(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?ob(r):Ju(r,r.length)}X.prototype.listeners=function(e){return Yu(this,e,!0)};X.prototype.rawListeners=function(e){return Yu(this,e,!1)};X.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Gu.call(t,e)};X.prototype.listenerCount=Gu;function Gu(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}X.prototype.eventNames=function(){return this._eventsCount>0?Us(this._events):[]};function Ju(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function sb(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function ob(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function ab(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}Qu(t,e,s,{once:!0}),e!=="error"&&lb(t,r,{once:!0})})}function lb(t,e,n){typeof t.on=="function"&&Qu(t,"error",e,n)}function Qu(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var cb=Ua.exports,Zu=nb(cb),Q;(function(t){t[t.timeout=1]="timeout",t[t.transportClosed=2]="transportClosed",t[t.clientDisconnected=3]="clientDisconnected",t[t.clientClosed=4]="clientClosed",t[t.clientConnectToken=5]="clientConnectToken",t[t.clientRefreshToken=6]="clientRefreshToken",t[t.subscriptionUnsubscribed=7]="subscriptionUnsubscribed",t[t.subscriptionSubscribeToken=8]="subscriptionSubscribeToken",t[t.subscriptionRefreshToken=9]="subscriptionRefreshToken",t[t.transportWriteError=10]="transportWriteError",t[t.connectionClosed=11]="connectionClosed",t[t.badConfiguration=12]="badConfiguration"})(Q||(Q={}));var mn;(function(t){t[t.connectCalled=0]="connectCalled",t[t.transportClosed=1]="transportClosed",t[t.noPing=2]="noPing",t[t.subscribeTimeout=3]="subscribeTimeout",t[t.unsubscribeError=4]="unsubscribeError"})(mn||(mn={}));var cr;(function(t){t[t.disconnectCalled=0]="disconnectCalled",t[t.unauthorized=1]="unauthorized",t[t.badProtocol=2]="badProtocol",t[t.messageSizeLimit=3]="messageSizeLimit"})(cr||(cr={}));var $s;(function(t){t[t.subscribeCalled=0]="subscribeCalled",t[t.transportClosed=1]="transportClosed"})($s||($s={}));var Hs;(function(t){t[t.unsubscribeCalled=0]="unsubscribeCalled",t[t.unauthorized=1]="unauthorized",t[t.clientClosed=2]="clientClosed"})(Hs||(Hs={}));var Da;(function(t){t[t.channelCompaction=1]="channelCompaction"})(Da||(Da={}));var ge;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected"})(ge||(ge={}));var He;(function(t){t.Unsubscribed="unsubscribed",t.Subscribing="subscribing",t.Subscribed="subscribed"})(He||(He={}));function ub(t,e){return t.lastIndexOf(e,0)===0}function ed(t){return t==null?!1:typeof t=="function"}function db(t,e){if(globalThis.console){let n=globalThis.console[t];ed(n)&&n.apply(globalThis.console,e)}}function hb(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function js(t,e,n){t>31&&(t=31);let i=hb(0,Math.min(n,e*Math.pow(2,t)));return Math.min(n,e+i)}function fb(t){return"error"in t&&t.error!==null}function Bs(t){return Math.min(t*1e3,2147483647)}var Na=class extends Zu{constructor(e,n,i){super(),this._resubscribeTimeout=null,this._refreshTimeout=null,this.channel=n,this.state=He.Unsubscribed,this._centrifuge=e,this._token="",this._getToken=null,this._data=null,this._getData=null,this._recover=!1,this._offset=null,this._epoch=null,this._id=0,this._recoverable=!1,this._positioned=!1,this._joinLeave=!1,this._minResubscribeDelay=500,this._maxResubscribeDelay=2e4,this._resubscribeTimeout=null,this._resubscribeAttempts=0,this._promises={},this._promiseId=0,this._inflight=!1,this._refreshTimeout=null,this._delta="",this._delta_negotiated=!1,this._tagsFilter=null,this._prevValue=null,this._unsubPromise=Promise.resolve(),this._setOptions(i),this._centrifuge._debugEnabled?(this.on("state",r=>{this._debug("subscription state",n,r.oldState,"->",r.newState)}),this.on("error",r=>{this._debug("subscription error",n,r)})):this.on("error",function(){Function.prototype()})}ready(e){return this.state===He.Unsubscribed?Promise.reject({code:Q.subscriptionUnsubscribed,message:this.state}):this.state===He.Subscribed?Promise.resolve():new Promise((n,i)=>{let r={resolve:n,reject:i};e&&(r.timeout=setTimeout(function(){i({code:Q.timeout,message:"timeout"})},e)),this._promises[this._nextPromiseId()]=r})}subscribe(){this._isSubscribed()||(this._resubscribeAttempts=0,this._setSubscribing($s.subscribeCalled,"subscribe called"))}unsubscribe(){this._unsubPromise=this._setUnsubscribed(Hs.unsubscribeCalled,"unsubscribe called",!0)}publish(e){return Me(this,void 0,void 0,function*(){return yield this._methodCall(),this._centrifuge.publish(this.channel,e)})}presence(){return Me(this,void 0,void 0,function*(){return yield this._methodCall(),this._centrifuge.presence(this.channel)})}presenceStats(){return Me(this,void 0,void 0,function*(){return yield this._methodCall(),this._centrifuge.presenceStats(this.channel)})}history(e){return Me(this,void 0,void 0,function*(){return yield this._methodCall(),this._centrifuge.history(this.channel,e)})}setTagsFilter(e){if(e&&this._delta)throw new Error("cannot use delta and tagsFilter together");this._tagsFilter=e}setData(e){this._data=e}_methodCall(){return this._isSubscribed()?Promise.resolve():this._isUnsubscribed()?Promise.reject({code:Q.subscriptionUnsubscribed,message:this.state}):new Promise((e,n)=>{let i=this._centrifuge._config.timeout,r=setTimeout(()=>{n({code:Q.timeout,message:"timeout"})},i);this._promises[this._nextPromiseId()]={timeout:r,resolve:e,reject:n}})}_nextPromiseId(){return++this._promiseId}_needRecover(){return this._recover===!0}_isUnsubscribed(){return this.state===He.Unsubscribed}_isSubscribing(){return this.state===He.Subscribing}_isSubscribed(){return this.state===He.Subscribed}_setState(e){if(this.state!==e){let n=this.state;return this.state=e,this.emit("state",{newState:e,oldState:n,channel:this.channel}),!0}return!1}_usesToken(){return this._token!==""||this._getToken!==null}_clearSubscribingState(){this._resubscribeAttempts=0,this._clearResubscribeTimeout()}_clearSubscribedState(){this._clearRefreshTimeout()}_setSubscribed(e){if(!this._isSubscribing())return;this._clearSubscribingState(),e.id&&(this._id=e.id),e.recoverable&&(this._recover=!0,this._offset=e.offset||0,this._epoch=e.epoch||""),e.delta?this._delta_negotiated=!0:this._delta_negotiated=!1,this._setState(He.Subscribed);let n=this._centrifuge._getSubscribeContext(this.channel,e);this.emit("subscribed",n),this._resolvePromises();let i=e.publications;if(i&&i.length>0)for(let r in i)i.hasOwnProperty(r)&&this._handlePublication(i[r]);e.expires===!0&&(this._refreshTimeout=setTimeout(()=>this._refresh(),Bs(e.ttl)))}_setSubscribing(e,n){return Me(this,void 0,void 0,function*(){this._isSubscribing()||(this._isSubscribed()&&this._clearSubscribedState(),this._setState(He.Subscribing)&&this.emit("subscribing",{channel:this.channel,code:e,reason:n}),this._centrifuge._transport&&this._centrifuge._transport.emulation()&&(yield this._unsubPromise),this._isSubscribing()&&this._subscribe())})}_subscribe(){return this._debug("subscribing on",this.channel),this._isTransportOpen()?this._inflight?null:(this._inflight=!0,this._canSubscribeWithoutGettingToken()?this._subscribeWithoutToken():(this._getSubscriptionToken().then(e=>this._handleTokenResponse(e)).catch(e=>this._handleTokenError(e)),null)):(this._debug("delay subscribe on",this.channel,"till connected"),null)}_isTransportOpen(){return this._centrifuge._transportIsOpen}_canSubscribeWithoutGettingToken(){return!this._usesToken()||!!this._token}_subscribeWithoutToken(){return this._getData?(this._getDataAndSubscribe(this._token),null):this._sendSubscribe(this._token)}_getDataAndSubscribe(e){if(!this._getData){this._inflight=!1;return}this._getData({channel:this.channel}).then(n=>{if(!this._isSubscribing()){this._inflight=!1;return}this._data=n,this._sendSubscribe(e)}).catch(n=>this._handleGetDataError(n))}_handleGetDataError(e){if(!this._isSubscribing()){this._inflight=!1;return}if(e instanceof St){this._inflight=!1,this._failUnauthorized();return}this.emit("error",{type:"subscribeData",channel:this.channel,error:{code:Q.badConfiguration,message:e?.toString()||""}}),this._inflight=!1,this._scheduleResubscribe()}_handleTokenResponse(e){if(!this._isSubscribing()){this._inflight=!1;return}if(!e){this._inflight=!1,this._failUnauthorized();return}this._token=e,this._getData?this._getDataAndSubscribe(e):this._sendSubscribe(e)}_handleTokenError(e){if(!this._isSubscribing()){this._inflight=!1;return}if(e instanceof St){this._inflight=!1,this._failUnauthorized();return}this.emit("error",{type:"subscribeToken",channel:this.channel,error:{code:Q.subscriptionSubscribeToken,message:e?.toString()||""}}),this._inflight=!1,this._scheduleResubscribe()}_sendSubscribe(e){if(!this._isTransportOpen())return this._inflight=!1,null;let n=this._buildSubscribeCommand(e);return this._centrifuge._call(n).then(i=>{this._inflight=!1;let r=i.reply.subscribe;this._handleSubscribeResponse(r),i.next&&i.next()},i=>{this._inflight=!1,this._handleSubscribeError(i.error),i.next&&i.next()}),n}_buildSubscribeCommand(e){let n={channel:this.channel};if(e&&(n.token=e),this._data&&(n.data=this._data),this._positioned&&(n.positioned=!0),this._recoverable&&(n.recoverable=!0),this._joinLeave&&(n.join_leave=!0),n.flag=Da.channelCompaction,this._needRecover()){n.recover=!0;let i=this._getOffset();i&&(n.offset=i);let r=this._getEpoch();r&&(n.epoch=r)}return this._delta&&(n.delta=this._delta),this._tagsFilter&&(n.tf=this._tagsFilter),{subscribe:n}}_debug(...e){this._centrifuge._debug(...e)}_handleSubscribeError(e){if(this._isSubscribing()){if(e.code===Q.timeout){this._centrifuge._disconnect(mn.subscribeTimeout,"subscribe timeout",!0);return}this._subscribeError(e)}}_handleSubscribeResponse(e){this._isSubscribing()&&this._setSubscribed(e)}_setUnsubscribed(e,n,i){if(this._isUnsubscribed())return Promise.resolve();let r=Promise.resolve();return this._isSubscribed()?(i&&(r=this._centrifuge._unsubscribe(this)),this._clearSubscribedState()):this._isSubscribing()&&(this._inflight&&i&&(r=this._centrifuge._unsubscribe(this)),this._clearSubscribingState()),this._inflight=!1,this._setState(He.Unsubscribed)&&this.emit("unsubscribed",{channel:this.channel,code:e,reason:n}),this._rejectPromises({code:Q.subscriptionUnsubscribed,message:this.state}),r}_handlePublication(e){if(this._delta&&this._delta_negotiated){let{newData:i,newPrevValue:r}=this._centrifuge._codec.applyDeltaIfNeeded(e,this._prevValue);e.data=i,this._prevValue=r}let n=this._centrifuge._getPublicationContext(this.channel,e);this.emit("publication",n),e.offset&&(this._offset=e.offset)}_handleJoin(e){let n=this._centrifuge._getJoinLeaveContext(e.info);this.emit("join",{channel:this.channel,info:n})}_handleLeave(e){let n=this._centrifuge._getJoinLeaveContext(e.info);this.emit("leave",{channel:this.channel,info:n})}_resolvePromises(){for(let e in this._promises)this._promises.hasOwnProperty(e)&&(this._promises[e].timeout&&clearTimeout(this._promises[e].timeout),this._promises[e].resolve(),delete this._promises[e])}_rejectPromises(e){for(let n in this._promises)this._promises.hasOwnProperty(n)&&(this._promises[n].timeout&&clearTimeout(this._promises[n].timeout),this._promises[n].reject(e),delete this._promises[n])}_scheduleResubscribe(){if(!this._isSubscribing()){this._debug("not in subscribing state, skip resubscribe scheduling",this.channel);return}let e=this,n=this._getResubscribeDelay();this._resubscribeTimeout=setTimeout(function(){e._isSubscribing()&&e._subscribe()},n),this._debug("resubscribe scheduled after "+n,this.channel)}_subscribeError(e){if(this._isSubscribing())if(e.code<100||e.code===109||e.temporary===!0){e.code===109&&(this._token="");let n={channel:this.channel,type:"subscribe",error:e};this._centrifuge.state===ge.Connected&&this.emit("error",n),this._scheduleResubscribe()}else this._setUnsubscribed(e.code,e.message,!1)}_getResubscribeDelay(){let e=js(this._resubscribeAttempts,this._minResubscribeDelay,this._maxResubscribeDelay);return this._resubscribeAttempts++,e}_setOptions(e){if(e){if(e.since&&(this._offset=e.since.offset||0,this._epoch=e.since.epoch||"",this._recover=!0),e.data&&(this._data=e.data),e.getData&&(this._getData=e.getData),e.minResubscribeDelay!==void 0&&(this._minResubscribeDelay=e.minResubscribeDelay),e.maxResubscribeDelay!==void 0&&(this._maxResubscribeDelay=e.maxResubscribeDelay),e.token&&(this._token=e.token),e.getToken&&(this._getToken=e.getToken),e.positioned===!0&&(this._positioned=!0),e.recoverable===!0&&(this._recoverable=!0),e.joinLeave===!0&&(this._joinLeave=!0),e.delta){if(e.delta!=="fossil")throw new Error("unsupported delta format");this._delta=e.delta}if(e.tagsFilter&&(this._tagsFilter=e.tagsFilter),this._tagsFilter&&this._delta)throw new Error("cannot use delta and tagsFilter together")}}_getOffset(){let e=this._offset;return e!==null?e:0}_getEpoch(){let e=this._epoch;return e!==null?e:""}_clearRefreshTimeout(){this._refreshTimeout!==null&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null)}_clearResubscribeTimeout(){this._resubscribeTimeout!==null&&(clearTimeout(this._resubscribeTimeout),this._resubscribeTimeout=null)}_getSubscriptionToken(){this._debug("get subscription token for channel",this.channel);let e={channel:this.channel},n=this._getToken;return n===null?(this.emit("error",{type:"configuration",channel:this.channel,error:{code:Q.badConfiguration,message:"provide a function to get channel subscription token"}}),Promise.reject(new St(""))):n(e)}_refresh(){this._clearRefreshTimeout();let e=this;this._getSubscriptionToken().then(function(n){if(!e._isSubscribed())return;if(!n){e._failUnauthorized();return}e._token=n;let r={sub_refresh:{channel:e.channel,token:n}};e._centrifuge._call(r).then(s=>{let o=s.reply.sub_refresh;e._refreshResponse(o),s.next&&s.next()},s=>{e._refreshError(s.error),s.next&&s.next()})}).catch(function(n){if(n instanceof St){e._failUnauthorized();return}e.emit("error",{type:"refreshToken",channel:e.channel,error:{code:Q.subscriptionRefreshToken,message:n!==void 0?n.toString():""}}),e._refreshTimeout=setTimeout(()=>e._refresh(),e._getRefreshRetryDelay())})}_refreshResponse(e){this._isSubscribed()&&(this._debug("subscription token refreshed, channel",this.channel),this._clearRefreshTimeout(),e.expires===!0&&(this._refreshTimeout=setTimeout(()=>this._refresh(),Bs(e.ttl))))}_refreshError(e){this._isSubscribed()&&(e.code<100||e.temporary===!0?(this.emit("error",{type:"refresh",channel:this.channel,error:e}),this._refreshTimeout=setTimeout(()=>this._refresh(),this._getRefreshRetryDelay())):this._setUnsubscribed(e.code,e.message,!0))}_getRefreshRetryDelay(){return js(0,1e4,2e4)}_failUnauthorized(){this._setUnsubscribed(Hs.unauthorized,"unauthorized",!0)}},Ia=class{constructor(e,n){this.endpoint=e,this.options=n,this._transport=null}name(){return"sockjs"}subName(){return"sockjs-"+this._transport.transport}emulation(){return!1}supported(){return this.options.sockjs!==null}initialize(e,n){this._transport=new this.options.sockjs(this.endpoint,null,this.options.sockjsOptions),this._transport.onopen=()=>{n.onOpen()},this._transport.onerror=i=>{n.onError(i)},this._transport.onclose=i=>{n.onClose(i)},this._transport.onmessage=i=>{n.onMessage(i.data)}}close(){this._transport.close()}send(e){this._transport.send(e)}},Vs=class{constructor(e,n){this.endpoint=e,this.options=n,this._transport=null}name(){return"websocket"}subName(){return"websocket"}emulation(){return!1}supported(){return this.options.websocket!==void 0&&this.options.websocket!==null}initialize(e,n){let i="";e==="protobuf"&&(i="centrifuge-protobuf"),i!==""?this._transport=new this.options.websocket(this.endpoint,i):this._transport=new this.options.websocket(this.endpoint),e==="protobuf"&&(this._transport.binaryType="arraybuffer"),this._transport.onopen=()=>{n.onOpen()},this._transport.onerror=r=>{n.onError(r)},this._transport.onclose=r=>{n.onClose(r)},this._transport.onmessage=r=>{n.onMessage(r.data)}}close(){this._transport.close()}send(e){this._transport.send(e)}},Ra=class{constructor(e,n){this.endpoint=e,this.options=n,this._abortController=null,this._utf8decoder=new TextDecoder,this._protocol="json"}name(){return"http_stream"}subName(){return"http_stream"}emulation(){return!0}_handleErrors(e){if(!e.ok)throw new Error(e.status);return e}_fetchEventTarget(e,n,i){let r=new EventTarget,s=e.options.fetch;return s(n,i).then(e._handleErrors).then(o=>{r.dispatchEvent(new Event("open"));let a="",l=0,c=new Uint8Array,d=o.body.getReader();return new e.options.readableStream({start(u){function h(){return d.read().then(({done:f,value:p})=>{if(f){r.dispatchEvent(new Event("close")),u.close();return}try{if(e._protocol==="json")for(a+=e._utf8decoder.decode(p);l<a.length;)if(a[l]===`
`){let g=a.substring(0,l);r.dispatchEvent(new MessageEvent("message",{data:g})),a=a.substring(l+1),l=0}else++l;else{let g=new Uint8Array(c.length+p.length);for(g.set(c),g.set(p,c.length),c=g;;){let m=e.options.decoder.decodeReply(c);if(m.ok){let v=c.slice(0,m.pos);r.dispatchEvent(new MessageEvent("message",{data:v})),c=c.slice(m.pos);continue}break}}}catch(g){r.dispatchEvent(new Event("error",{detail:g})),r.dispatchEvent(new Event("close")),u.close();return}h()}).catch(function(f){r.dispatchEvent(new Event("error",{detail:f})),r.dispatchEvent(new Event("close")),u.close()})}return h()}})}).catch(o=>{r.dispatchEvent(new Event("error",{detail:o})),r.dispatchEvent(new Event("close"))}),r}supported(){return this.options.fetch!==null&&this.options.readableStream!==null&&typeof TextDecoder<"u"&&typeof AbortController<"u"&&typeof EventTarget<"u"&&typeof Event<"u"&&typeof MessageEvent<"u"&&typeof Error<"u"}initialize(e,n,i){this._protocol=e,this._abortController=new AbortController;let r,s;e==="json"?(r={Accept:"application/json","Content-Type":"application/json"},s=i):(r={Accept:"application/octet-stream","Content-Type":"application/octet-stream"},s=i);let o={method:"POST",headers:r,body:s,mode:"cors",credentials:"same-origin",signal:this._abortController.signal},a=this._fetchEventTarget(this,this.endpoint,o);a.addEventListener("open",()=>{n.onOpen()}),a.addEventListener("error",l=>{this._abortController.abort(),n.onError(l)}),a.addEventListener("close",()=>{this._abortController.abort(),n.onClose({code:4,reason:"connection closed"})}),a.addEventListener("message",l=>{n.onMessage(l.data)})}close(){this._abortController.abort()}send(e,n,i){let r,s,o={session:n,node:i,data:e};this._protocol==="json"?(r={"Content-Type":"application/json"},s=JSON.stringify(o)):(r={"Content-Type":"application/octet-stream"},s=this.options.encoder.encodeEmulationRequest(o));let a=this.options.fetch,l={method:"POST",headers:r,body:s,mode:"cors",credentials:"same-origin"};a(this.options.emulationEndpoint,l)}},La=class{constructor(e,n){this.endpoint=e,this.options=n,this._protocol="json",this._transport=null,this._onClose=null}name(){return"sse"}subName(){return"sse"}emulation(){return!0}supported(){return this.options.eventsource!==null&&this.options.fetch!==null}initialize(e,n,i){let r;globalThis&&globalThis.document&&globalThis.document.baseURI?r=new URL(this.endpoint,globalThis.document.baseURI):r=new URL(this.endpoint),r.searchParams.append("cf_connect",i);let s={},o=new this.options.eventsource(r.toString(),s);this._transport=o;let a=this;o.onopen=function(){n.onOpen()},o.onerror=function(l){o.close(),n.onError(l),n.onClose({code:4,reason:"connection closed"})},o.onmessage=function(l){n.onMessage(l.data)},a._onClose=function(){n.onClose({code:4,reason:"connection closed"})}}close(){this._transport.close(),this._onClose!==null&&this._onClose()}send(e,n,i){let r={session:n,node:i,data:e},s={"Content-Type":"application/json"},o=JSON.stringify(r),a=this.options.fetch,l={method:"POST",headers:s,body:o,mode:"cors",credentials:"same-origin"};a(this.options.emulationEndpoint,l)}},ka=class{constructor(e,n){this.endpoint=e,this.options=n,this._transport=null,this._stream=null,this._writer=null,this._utf8decoder=new TextDecoder,this._protocol="json"}name(){return"webtransport"}subName(){return"webtransport"}emulation(){return!1}supported(){return this.options.webtransport!==void 0&&this.options.webtransport!==null}initialize(e,n){return Me(this,void 0,void 0,function*(){let i;globalThis&&globalThis.document&&globalThis.document.baseURI?i=new URL(this.endpoint,globalThis.document.baseURI):i=new URL(this.endpoint),e==="protobuf"&&i.searchParams.append("cf_protocol","protobuf"),this._protocol=e;let r=new EventTarget;this._transport=new this.options.webtransport(i.toString()),this._transport.closed.then(()=>{n.onClose({code:4,reason:"connection closed"})}).catch(()=>{n.onClose({code:4,reason:"connection closed"})});try{yield this._transport.ready}catch{this.close();return}let s;try{s=yield this._transport.createBidirectionalStream()}catch{this.close();return}this._stream=s,this._writer=this._stream.writable.getWriter(),r.addEventListener("close",()=>{n.onClose({code:4,reason:"connection closed"})}),r.addEventListener("message",o=>{n.onMessage(o.data)}),this._startReading(r),n.onOpen()})}_startReading(e){return Me(this,void 0,void 0,function*(){let n=this._stream.readable.getReader(),i="",r=0,s=new Uint8Array;try{for(;;){let{done:o,value:a}=yield n.read();if(a.length>0)if(this._protocol==="json")for(i+=this._utf8decoder.decode(a);r<i.length;)if(i[r]===`
`){let l=i.substring(0,r);e.dispatchEvent(new MessageEvent("message",{data:l})),i=i.substring(r+1),r=0}else++r;else{let l=new Uint8Array(s.length+a.length);for(l.set(s),l.set(a,s.length),s=l;;){let c=this.options.decoder.decodeReply(s);if(c.ok){let d=s.slice(0,c.pos);e.dispatchEvent(new MessageEvent("message",{data:d})),s=s.slice(c.pos);continue}break}}if(o)break}}catch{e.dispatchEvent(new Event("close"))}})}close(){return Me(this,void 0,void 0,function*(){try{this._writer&&(yield this._writer.close()),this._transport.close()}catch{}})}send(e){return Me(this,void 0,void 0,function*(){let n;this._protocol==="json"?n=new TextEncoder().encode(e+`
`):n=e;try{yield this._writer.write(n)}catch{this.close()}})}},pb=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,36,-1,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,-1,-1,-1,63,-1],Ma=class{constructor(e){this.a=e,this.pos=0}haveBytes(){return this.pos<this.a.length}getByte(){let e=this.a[this.pos];if(this.pos++,this.pos>this.a.length)throw new RangeError("out of bounds");return e}getChar(){return String.fromCharCode(this.getByte())}getInt(){let e=0,n;for(;this.haveBytes()&&(n=pb[127&this.getByte()])>=0;)e=(e<<6)+n;return this.pos--,e>>>0}},Fa=class{constructor(){this.a=[]}toByteArray(e){return Array.isArray(e)?this.a:new Uint8Array(this.a)}putArray(e,n,i){for(let r=n;r<i;r++)this.a.push(e[r])}};function gb(t){let e=0,n=0,i=0,r=0,s=0,o=t.length;for(;o>=16;)e=e+t[s+0]|0,n=n+t[s+1]|0,i=i+t[s+2]|0,r=r+t[s+3]|0,e=e+t[s+4]|0,n=n+t[s+5]|0,i=i+t[s+6]|0,r=r+t[s+7]|0,e=e+t[s+8]|0,n=n+t[s+9]|0,i=i+t[s+10]|0,r=r+t[s+11]|0,e=e+t[s+12]|0,n=n+t[s+13]|0,i=i+t[s+14]|0,r=r+t[s+15]|0,s+=16,o-=16;for(;o>=4;)e=e+t[s+0]|0,n=n+t[s+1]|0,i=i+t[s+2]|0,r=r+t[s+3]|0,s+=4,o-=4;switch(r=((r+(i<<8)|0)+(n<<16)|0)+(e<<24)|0,o){case 3:r=r+(t[s+2]<<8)|0;case 2:r=r+(t[s+1]<<16)|0;case 1:r=r+(t[s+0]<<24)|0}return r>>>0}function mb(t,e){let n=0,i=new Ma(e),r=t.length,s=e.length,o=i.getInt();if(i.getChar()!==`
`)throw new Error("size integer not terminated by '\\n'");let a=new Fa;for(;i.haveBytes();){let l=i.getInt(),c;switch(i.getChar()){case"@":if(c=i.getInt(),i.haveBytes()&&i.getChar()!==",")throw new Error("copy command not terminated by ','");if(n+=l,n>o)throw new Error("copy exceeds output file size");if(c+l>r)throw new Error("copy extends past end of input");a.putArray(t,c,c+l);break;case":":if(n+=l,n>o)throw new Error("insert command gives an output larger than predicted");if(l>s)throw new Error("insert count exceeds size of delta");a.putArray(i.a,i.pos,i.pos+l),i.pos+=l;break;case";":{let d=a.toByteArray(t);if(l!==gb(d))throw new Error("bad checksum");if(n!==o)throw new Error("generated size does not match predicted size");return d}default:throw new Error("unknown delta operator")}}throw new Error("unterminated delta")}var qs=class{name(){return"json"}encodeCommands(e){return e.map(n=>JSON.stringify(n)).join(`
`)}decodeReplies(e){return e.trim().split(`
`).map(n=>JSON.parse(n))}applyDeltaIfNeeded(e,n){let i,r;if(e.delta){let s=mb(n,new TextEncoder().encode(e.data));i=JSON.parse(new TextDecoder().decode(s)),r=s}else i=JSON.parse(e.data),r=new TextEncoder().encode(e.data);return{newData:i,newPrevValue:r}}},vb={headers:{},token:"",getToken:null,data:null,getData:null,debug:!1,name:"js",version:"",fetch:null,readableStream:null,websocket:null,eventsource:null,sockjs:null,sockjsOptions:{},emulationEndpoint:"/emulation",minReconnectDelay:500,maxReconnectDelay:2e4,timeout:5e3,maxServerPingDelay:1e4,networkEventTarget:null},St=class extends Error{constructor(e){super(e),this.name=this.constructor.name}},$n=class extends Zu{constructor(e,n){super(),this._reconnectTimeout=null,this._refreshTimeout=null,this._serverPingTimeout=null,this.state=ge.Disconnected,this._transportIsOpen=!1,this._endpoint=e,this._emulation=!1,this._transports=[],this._currentTransportIndex=0,this._triedAllTransports=!1,this._transportWasOpen=!1,this._transport=null,this._transportId=0,this._deviceWentOffline=!1,this._transportClosed=!0,this._codec=new qs,this._reconnecting=!1,this._reconnectTimeout=null,this._reconnectAttempts=0,this._client=null,this._session="",this._node="",this._subs={},this._serverSubs={},this._commandId=0,this._commands=[],this._batching=!1,this._refreshRequired=!1,this._refreshTimeout=null,this._callbacks={},this._token="",this._data=null,this._dispatchPromise=Promise.resolve(),this._serverPing=0,this._serverPingTimeout=null,this._sendPong=!1,this._promises={},this._promiseId=0,this._debugEnabled=!1,this._networkEventsSet=!1,this._config=Object.assign(Object.assign({},vb),n),this._configure(),this._debugEnabled?(this.on("state",i=>{this._debug("client state",i.oldState,"->",i.newState)}),this.on("error",i=>{this._debug("client error",i)})):this.on("error",function(){Function.prototype()})}newSubscription(e,n){if(this.getSubscription(e)!==null)throw new Error("Subscription to the channel "+e+" already exists");let i=new Na(this,e,n);return this._subs[e]=i,i}getSubscription(e){return this._getSub(e)}removeSubscription(e){e&&(e.state!==He.Unsubscribed&&e.unsubscribe(),this._removeSubscription(e))}subscriptions(){return this._subs}ready(e){return Me(this,void 0,void 0,function*(){switch(this.state){case ge.Disconnected:throw{code:Q.clientDisconnected,message:"client disconnected"};case ge.Connected:return;default:return new Promise((n,i)=>{let r={resolve:n,reject:i};e&&(r.timeout=setTimeout(()=>{i({code:Q.timeout,message:"timeout"})},e)),this._promises[this._nextPromiseId()]=r})}})}connect(){if(this._isConnected()){this._debug("connect called when already connected");return}if(this._isConnecting()){this._debug("connect called when already connecting");return}this._debug("connect called"),this._reconnectAttempts=0,this._startConnecting()}disconnect(){this._disconnect(cr.disconnectCalled,"disconnect called",!1)}setToken(e){this._token=e}setData(e){this._data=e}setHeaders(e){this._config.headers=e}send(e){return Me(this,void 0,void 0,function*(){let n={send:{data:e}};if(yield this._methodCall(),!this._transportSendCommands([n]))throw this._createErrorObject(Q.transportWriteError,"transport write error")})}rpc(e,n){return Me(this,void 0,void 0,function*(){let i={rpc:{method:e,data:n}};return yield this._methodCall(),{data:(yield this._callPromise(i,s=>s.rpc)).data}})}publish(e,n){return Me(this,void 0,void 0,function*(){let i={publish:{channel:e,data:n}};return yield this._methodCall(),yield this._callPromise(i,()=>({})),{}})}history(e,n){return Me(this,void 0,void 0,function*(){let i={history:this._getHistoryRequest(e,n)};yield this._methodCall();let r=yield this._callPromise(i,o=>o.history),s=[];if(r.publications)for(let o=0;o<r.publications.length;o++)s.push(this._getPublicationContext(e,r.publications[o]));return{publications:s,epoch:r.epoch||"",offset:r.offset||0}})}presence(e){return Me(this,void 0,void 0,function*(){let n={presence:{channel:e}};yield this._methodCall();let r=(yield this._callPromise(n,s=>s.presence)).presence;for(let s in r)if(Object.prototype.hasOwnProperty.call(r,s)){let o=r[s],a=o.conn_info,l=o.chan_info;a&&(o.connInfo=a),l&&(o.chanInfo=l)}return{clients:r}})}presenceStats(e){return Me(this,void 0,void 0,function*(){let n={presence_stats:{channel:e}};yield this._methodCall();let i=yield this._callPromise(n,r=>r.presence_stats);return{numUsers:i.num_users,numClients:i.num_clients}})}startBatching(){this._batching=!0}stopBatching(){let e=this;Promise.resolve().then(function(){Promise.resolve().then(function(){e._batching=!1,e._flush()})})}_debug(...e){this._debugEnabled&&db("debug",e)}_codecName(){return this._codec.name()}_formatOverride(){}_configure(){if(!("Promise"in globalThis))throw new Error("Promise polyfill required");if(!this._endpoint)throw new Error("endpoint configuration required");if(this._config.token!==null&&(this._token=this._config.token),this._config.data!==null&&(this._data=this._config.data),this._codec=new qs,this._formatOverride(),(this._config.debug===!0||typeof localStorage<"u"&&localStorage.getItem("centrifuge.debug"))&&(this._debugEnabled=!0),this._debug("config",this._config),typeof this._endpoint!="string")if(typeof this._endpoint=="object"&&this._endpoint instanceof Array){this._transports=this._endpoint,this._emulation=!0;for(let e in this._transports)if(this._transports.hasOwnProperty(e)){let n=this._transports[e];if(!n.endpoint||!n.transport)throw new Error("malformed transport configuration");let i=n.transport;if(["websocket","http_stream","sse","sockjs","webtransport"].indexOf(i)<0)throw new Error("unsupported transport name: "+i)}}else throw new Error("unsupported url configuration type: only string or array of objects are supported")}_setState(e){if(this.state!==e){this._reconnecting=!1;let n=this.state;return this.state=e,this.emit("state",{newState:e,oldState:n}),!0}return!1}_isDisconnected(){return this.state===ge.Disconnected}_isConnecting(){return this.state===ge.Connecting}_isConnected(){return this.state===ge.Connected}_nextCommandId(){return++this._commandId}_setNetworkEvents(){if(this._networkEventsSet)return;let e=null;this._config.networkEventTarget!==null?e=this._config.networkEventTarget:typeof globalThis.addEventListener<"u"&&(e=globalThis),e&&(e.addEventListener("offline",()=>{this._debug("offline event triggered"),(this.state===ge.Connected||this.state===ge.Connecting)&&(this._disconnect(mn.transportClosed,"transport closed",!0),this._deviceWentOffline=!0)}),e.addEventListener("online",()=>{this._debug("online event triggered"),this.state===ge.Connecting&&(this._deviceWentOffline&&!this._transportClosed&&(this._deviceWentOffline=!1,this._transportClosed=!0),this._clearReconnectTimeout(),this._startReconnecting())}),this._networkEventsSet=!0)}_getReconnectDelay(){let e=js(this._reconnectAttempts,this._config.minReconnectDelay,this._config.maxReconnectDelay);return this._reconnectAttempts+=1,e}_clearOutgoingRequests(){for(let e in this._callbacks)if(this._callbacks.hasOwnProperty(e)){let n=this._callbacks[e];clearTimeout(n.timeout);let i=n.errback;if(!i)continue;i({error:this._createErrorObject(Q.connectionClosed,"connection closed")})}this._callbacks={}}_clearConnectedState(){this._client=null,this._clearServerPingTimeout(),this._clearRefreshTimeout();for(let e in this._subs){if(!this._subs.hasOwnProperty(e))continue;let n=this._subs[e];n.state===He.Subscribed&&n._setSubscribing($s.transportClosed,"transport closed")}for(let e in this._serverSubs)this._serverSubs.hasOwnProperty(e)&&this.emit("subscribing",{channel:e})}_handleWriteError(e){for(let n of e){let i=n.id;if(!(i in this._callbacks))continue;let r=this._callbacks[i];clearTimeout(this._callbacks[i].timeout),delete this._callbacks[i];let s=r.errback;s({error:this._createErrorObject(Q.transportWriteError,"transport write error")})}}_transportSendCommands(e){if(!e.length)return!0;if(!this._transport)return!1;try{this._transport.send(this._codec.encodeCommands(e),this._session,this._node)}catch(n){return this._debug("error writing commands",n),this._handleWriteError(e),!1}return!0}_initializeTransport(){let e;this._config.websocket!==null?e=this._config.websocket:typeof globalThis.WebSocket!="function"&&typeof globalThis.WebSocket!="object"||(e=globalThis.WebSocket);let n=null;this._config.sockjs!==null?n=this._config.sockjs:typeof globalThis.SockJS<"u"&&(n=globalThis.SockJS);let i=null;this._config.eventsource!==null?i=this._config.eventsource:typeof globalThis.EventSource<"u"&&(i=globalThis.EventSource);let r=null;this._config.fetch!==null?r=this._config.fetch:typeof globalThis.fetch<"u"&&(r=globalThis.fetch);let s=null;if(this._config.readableStream!==null?s=this._config.readableStream:typeof globalThis.ReadableStream<"u"&&(s=globalThis.ReadableStream),this._emulation){this._currentTransportIndex>=this._transports.length&&(this._triedAllTransports=!0,this._currentTransportIndex=0);let f=0;for(;;){if(f>=this._transports.length)throw new Error("no supported transport found");let p=this._transports[this._currentTransportIndex],g=p.transport,m=p.endpoint;if(g==="websocket"){if(this._debug("trying websocket transport"),this._transport=new Vs(m,{websocket:e}),!this._transport.supported()){this._debug("websocket transport not available"),this._currentTransportIndex++,f++;continue}}else if(g==="webtransport"){if(this._debug("trying webtransport transport"),this._transport=new ka(m,{webtransport:globalThis.WebTransport,decoder:this._codec,encoder:this._codec}),!this._transport.supported()){this._debug("webtransport transport not available"),this._currentTransportIndex++,f++;continue}}else if(g==="http_stream"){if(this._debug("trying http_stream transport"),this._transport=new Ra(m,{fetch:r,readableStream:s,emulationEndpoint:this._config.emulationEndpoint,decoder:this._codec,encoder:this._codec}),!this._transport.supported()){this._debug("http_stream transport not available"),this._currentTransportIndex++,f++;continue}}else if(g==="sse"){if(this._debug("trying sse transport"),this._transport=new La(m,{eventsource:i,fetch:r,emulationEndpoint:this._config.emulationEndpoint}),!this._transport.supported()){this._debug("sse transport not available"),this._currentTransportIndex++,f++;continue}}else if(g==="sockjs"){if(this._debug("trying sockjs"),this._transport=new Ia(m,{sockjs:n,sockjsOptions:this._config.sockjsOptions}),!this._transport.supported()){this._debug("sockjs transport not available"),this._currentTransportIndex++,f++;continue}}else throw new Error("unknown transport "+g);break}}else{if(ub(this._endpoint,"http"))throw new Error("Provide explicit transport endpoints configuration in case of using HTTP (i.e. using array of TransportEndpoint instead of a single string), or use ws(s):// scheme in an endpoint if you aimed using WebSocket transport");if(this._debug("client will use websocket"),this._transport=new Vs(this._endpoint,{websocket:e}),!this._transport.supported())throw new Error("WebSocket constructor not found, make sure it is available globally or passed as a dependency in Centrifuge options")}let o=this,a=this._transport,l=this._nextTransportId();o._debug("id of transport",l);let c=!1,d=[];if(this._transport.emulation()){let f=o._sendConnect(!0);d.push(f)}this._setNetworkEvents();let u=this._codec.encodeCommands(d);this._transportClosed=!1;let h;h=setTimeout(function(){a.close()},this._config.timeout),this._transport.initialize(this._codecName(),{onOpen:function(){if(h&&(clearTimeout(h),h=null),o._transportId!=l){o._debug("open callback from non-actual transport"),a.close();return}c=!0,o._debug(a.subName(),"transport open"),!a.emulation()&&(o._transportIsOpen=!0,o._transportWasOpen=!0,o.startBatching(),o._sendConnect(!1),o._sendSubscribeCommands(),o.stopBatching(),o.emit("__centrifuge_debug:connect_frame_sent",{}))},onError:function(f){if(o._transportId!=l){o._debug("error callback from non-actual transport");return}o._debug("transport level error",f)},onClose:function(f){if(h&&(clearTimeout(h),h=null),o._transportId!=l){o._debug("close callback from non-actual transport");return}o._debug(a.subName(),"transport closed"),o._transportClosed=!0,o._transportIsOpen=!1;let p="connection closed",g=!0,m=0;if(f&&"code"in f&&f.code&&(m=f.code),f&&f.reason)try{let v=JSON.parse(f.reason);p=v.reason,g=v.reconnect}catch{p=f.reason,(m>=3500&&m<4e3||m>=4500&&m<5e3)&&(g=!1)}m<3e3?(m===1009?(m=cr.messageSizeLimit,p="message size limit exceeded",g=!1):(m=mn.transportClosed,p="transport closed"),o._emulation&&!o._transportWasOpen&&(o._currentTransportIndex++,o._currentTransportIndex>=o._transports.length&&(o._triedAllTransports=!0,o._currentTransportIndex=0))):o._transportWasOpen=!0,o._isConnecting()&&!c&&o.emit("error",{type:"transport",error:{code:Q.transportClosed,message:"transport closed"},transport:a.name()}),o._reconnecting=!1,o._disconnect(m,p,g)},onMessage:function(f){o._dataReceived(f)}},u),o.emit("__centrifuge_debug:transport_initialized",{})}_sendConnect(e){let n=this._constructConnectCommand(),i=this;return this._call(n,e).then(r=>{let s=r.reply.connect;i._connectResponse(s),r.next&&r.next()},r=>{i._connectError(r.error),r.next&&r.next()}),n}_startReconnecting(){if(this._debug("start reconnecting"),!this._isConnecting()){this._debug("stop reconnecting: client not in connecting state");return}if(this._reconnecting){this._debug("reconnect already in progress, return from reconnect routine");return}if(this._transportClosed===!1){this._debug("waiting for transport close");return}this._reconnecting=!0;let e=this._token==="";if(!(this._refreshRequired||e&&this._config.getToken!==null)){this._config.getData?this._config.getData().then(r=>{this._isConnecting()&&(this._data=r,this._initializeTransport())}).catch(r=>this._handleGetDataError(r)):this._initializeTransport();return}let i=this;this._getToken().then(function(r){if(i._isConnecting()){if(r==null||r==null){i._failUnauthorized();return}i._token=r,i._debug("connection token refreshed"),i._config.getData?i._config.getData().then(function(s){i._isConnecting()&&(i._data=s,i._initializeTransport())}).catch(s=>i._handleGetDataError(s)):i._initializeTransport()}}).catch(function(r){if(!i._isConnecting())return;if(r instanceof St){i._failUnauthorized();return}i.emit("error",{type:"connectToken",error:{code:Q.clientConnectToken,message:r!==void 0?r.toString():""}});let s=i._getReconnectDelay();i._debug("error on getting connection token, reconnect after "+s+" milliseconds",r),i._reconnecting=!1,i._reconnectTimeout=setTimeout(()=>{i._startReconnecting()},s)})}_handleGetDataError(e){if(e instanceof St){this._failUnauthorized();return}this.emit("error",{type:"connectData",error:{code:Q.badConfiguration,message:e?.toString()||""}});let n=this._getReconnectDelay();this._debug("error on getting connect data, reconnect after "+n+" milliseconds",e),this._reconnecting=!1,this._reconnectTimeout=setTimeout(()=>{this._startReconnecting()},n)}_connectError(e){this.state===ge.Connecting&&(e.code===109&&(this._refreshRequired=!0),e.code<100||e.temporary===!0||e.code===109?(this.emit("error",{type:"connect",error:e}),this._debug("closing transport due to connect error"),this._disconnect(e.code,e.message,!0)):this._disconnect(e.code,e.message,!1))}_scheduleReconnect(){if(!this._isConnecting())return;let e=!1;this._emulation&&!this._transportWasOpen&&!this._triedAllTransports&&(e=!0);let n=this._getReconnectDelay();e&&(n=0),this._debug("reconnect after "+n+" milliseconds"),this._clearReconnectTimeout(),this._reconnectTimeout=setTimeout(()=>{this._startReconnecting()},n)}_constructConnectCommand(){let e={};this._token&&(e.token=this._token),this._data&&(e.data=this._data),this._config.name&&(e.name=this._config.name),this._config.version&&(e.version=this._config.version),Object.keys(this._config.headers).length>0&&(e.headers=this._config.headers);let n={},i=!1;for(let r in this._serverSubs)if(this._serverSubs.hasOwnProperty(r)&&this._serverSubs[r].recoverable){i=!0;let s={recover:!0};this._serverSubs[r].offset&&(s.offset=this._serverSubs[r].offset),this._serverSubs[r].epoch&&(s.epoch=this._serverSubs[r].epoch),n[r]=s}return i&&(e.subs=n),{connect:e}}_getHistoryRequest(e,n){let i={channel:e};return n!==void 0&&(n.since&&(i.since={offset:n.since.offset},n.since.epoch&&(i.since.epoch=n.since.epoch)),n.limit!==void 0&&(i.limit=n.limit),n.reverse===!0&&(i.reverse=!0)),i}_methodCall(){return this._isConnected()?Promise.resolve():new Promise((e,n)=>{let i=setTimeout(function(){n({code:Q.timeout,message:"timeout"})},this._config.timeout);this._promises[this._nextPromiseId()]={timeout:i,resolve:e,reject:n}})}_callPromise(e,n){return new Promise((i,r)=>{this._call(e,!1).then(s=>{var o;let a=n(s.reply);i(a),(o=s.next)===null||o===void 0||o.call(s)},s=>{var o;r(s.error),(o=s.next)===null||o===void 0||o.call(s)})})}_dataReceived(e){this._serverPing>0&&this._waitServerPing();let n=this._codec.decodeReplies(e);this._dispatchPromise=this._dispatchPromise.then(()=>{let i;this._dispatchPromise=new Promise(r=>{i=r}),this._dispatchSynchronized(n,i)})}_dispatchSynchronized(e,n){let i=Promise.resolve();for(let r in e)e.hasOwnProperty(r)&&(i=i.then(()=>this._dispatchReply(e[r])));i=i.then(()=>{n()})}_dispatchReply(e){let n,i=new Promise(s=>{n=s});if(e==null)return this._debug("dispatch: got undefined or null reply"),n(),i;let r=e.id;return r&&r>0?this._handleReply(e,n):e.push?this._handlePush(e.push,n):this._handleServerPing(n),i}_call(e,n){return new Promise((i,r)=>{e.id=this._nextCommandId(),this._registerCall(e.id,i,r),n||this._addCommand(e)})}_startConnecting(){this._debug("start connecting"),this._setState(ge.Connecting)&&this.emit("connecting",{code:mn.connectCalled,reason:"connect called"}),this._client=null,this._startReconnecting()}_disconnect(e,n,i){if(this._isDisconnected())return;this._transportIsOpen=!1;let r=this.state;this._reconnecting=!1;let s={code:e,reason:n},o=!1;if(i?o=this._setState(ge.Connecting):(o=this._setState(ge.Disconnected),this._rejectPromises({code:Q.clientDisconnected,message:"disconnected"})),this._clearOutgoingRequests(),r===ge.Connecting&&this._clearReconnectTimeout(),r===ge.Connected&&this._clearConnectedState(),o&&(this._isConnecting()?this.emit("connecting",s):this.emit("disconnected",s)),this._transport){this._debug("closing existing transport");let a=this._transport;this._transport=null,a.close(),this._transportClosed=!0,this._nextTransportId()}else this._debug("no transport to close");this._scheduleReconnect()}_failUnauthorized(){this._disconnect(cr.unauthorized,"unauthorized",!1)}_getToken(){return this._debug("get connection token"),this._config.getToken?this._config.getToken({}):(this.emit("error",{type:"configuration",error:{code:Q.badConfiguration,message:"token expired but no getToken function set in the configuration"}}),Promise.reject(new St("")))}_refresh(){let e=this._client,n=this;this._getToken().then(function(i){if(e!==n._client)return;if(!i){n._failUnauthorized();return}if(n._token=i,n._debug("connection token refreshed"),!n._isConnected())return;let r={refresh:{token:n._token}};n._call(r,!1).then(s=>{let o=s.reply.refresh;n._refreshResponse(o),s.next&&s.next()},s=>{n._refreshError(s.error),s.next&&s.next()})}).catch(function(i){if(n._isConnected()){if(i instanceof St){n._failUnauthorized();return}n.emit("error",{type:"refreshToken",error:{code:Q.clientRefreshToken,message:i!==void 0?i.toString():""}}),n._refreshTimeout=setTimeout(()=>n._refresh(),n._getRefreshRetryDelay())}})}_refreshError(e){e.code<100||e.temporary===!0?(this.emit("error",{type:"refresh",error:e}),this._refreshTimeout=setTimeout(()=>this._refresh(),this._getRefreshRetryDelay())):this._disconnect(e.code,e.message,!1)}_getRefreshRetryDelay(){return js(0,5e3,1e4)}_refreshResponse(e){this._refreshTimeout&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null),e.expires&&(this._client=e.client,this._refreshTimeout=setTimeout(()=>this._refresh(),Bs(e.ttl)))}_removeSubscription(e){e!==null&&delete this._subs[e.channel]}_unsubscribe(e){if(!this._transportIsOpen)return Promise.resolve();let i={unsubscribe:{channel:e.channel}},r=this;return new Promise((o,a)=>{this._call(i,!1).then(l=>{o(),l.next&&l.next()},l=>{o(),l.next&&l.next(),r._disconnect(mn.unsubscribeError,"unsubscribe error",!0)})})}_getSub(e,n){if(n&&n>0){for(let r in this._subs)if(this._subs.hasOwnProperty(r)){let s=this._subs[r];if(s._id===n)return s}return null}let i=this._subs[e];return i||null}_isServerSub(e){return this._serverSubs[e]!==void 0}_sendSubscribeCommands(){let e=[];for(let n in this._subs){if(!this._subs.hasOwnProperty(n))continue;let i=this._subs[n];if(i._inflight!==!0&&i.state===He.Subscribing){let r=i._subscribe();r&&e.push(r)}}return e}_connectResponse(e){if(this._transportIsOpen=!0,this._transportWasOpen=!0,this._reconnectAttempts=0,this._refreshRequired=!1,this._isConnected())return;this._client=e.client,this._setState(ge.Connected),this._refreshTimeout&&clearTimeout(this._refreshTimeout),e.expires&&(this._refreshTimeout=setTimeout(()=>this._refresh(),Bs(e.ttl))),this._session=e.session,this._node=e.node,this.startBatching(),this._sendSubscribeCommands(),this.stopBatching();let n={client:e.client,transport:this._transport.subName()};e.data&&(n.data=e.data),this.emit("connected",n),this._resolvePromises(),this._processServerSubs(e.subs||{}),e.ping&&e.ping>0?(this._serverPing=e.ping*1e3,this._sendPong=e.pong===!0,this._waitServerPing()):this._serverPing=0}_processServerSubs(e){for(let n in e){if(!e.hasOwnProperty(n))continue;let i=e[n];this._serverSubs[n]={offset:i.offset,epoch:i.epoch,recoverable:i.recoverable||!1};let r=this._getSubscribeContext(n,i);this.emit("subscribed",r)}for(let n in e){if(!e.hasOwnProperty(n))continue;let i=e[n];if(i.recovered){let r=i.publications;if(r&&r.length>0)for(let s in r)r.hasOwnProperty(s)&&this._handlePublication(n,r[s])}}for(let n in this._serverSubs)this._serverSubs.hasOwnProperty(n)&&(e[n]||(this.emit("unsubscribed",{channel:n}),delete this._serverSubs[n]))}_clearRefreshTimeout(){this._refreshTimeout!==null&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null)}_clearReconnectTimeout(){this._reconnectTimeout!==null&&(clearTimeout(this._reconnectTimeout),this._reconnectTimeout=null)}_clearServerPingTimeout(){this._serverPingTimeout!==null&&(clearTimeout(this._serverPingTimeout),this._serverPingTimeout=null)}_waitServerPing(){this._config.maxServerPingDelay!==0&&this._isConnected()&&(this._clearServerPingTimeout(),this._serverPingTimeout=setTimeout(()=>{this._isConnected()&&this._disconnect(mn.noPing,"no ping",!0)},this._serverPing+this._config.maxServerPingDelay))}_getSubscribeContext(e,n){let i={channel:e,positioned:!1,recoverable:!1,wasRecovering:!1,recovered:!1,hasRecoveredPublications:!1};n.recovered&&(i.recovered=!0),n.positioned&&(i.positioned=!0),n.recoverable&&(i.recoverable=!0),n.was_recovering&&(i.wasRecovering=!0);let r="";"epoch"in n&&(r=n.epoch);let s=0;return"offset"in n&&(s=n.offset),(i.positioned||i.recoverable)&&(i.streamPosition={offset:s,epoch:r}),Array.isArray(n.publications)&&n.publications.length>0&&(i.hasRecoveredPublications=!0),n.data&&(i.data=n.data),i}_handleReply(e,n){let i=e.id;if(!(i in this._callbacks)){n();return}let r=this._callbacks[i];if(clearTimeout(this._callbacks[i].timeout),delete this._callbacks[i],fb(e)){let s=r.errback;if(!s){n();return}let o={code:e.error.code,message:e.error.message||"",temporary:e.error.temporary||!1};s({error:o,next:n})}else{let s=r.callback;if(!s)return;s({reply:e,next:n})}}_handleJoin(e,n,i){let r=this._getSub(e,i);if(!r&&e){if(this._isServerSub(e)){let s={channel:e,info:this._getJoinLeaveContext(n.info)};this.emit("join",s)}return}r._handleJoin(n)}_handleLeave(e,n,i){let r=this._getSub(e,i);if(!r&&e){if(this._isServerSub(e)){let s={channel:e,info:this._getJoinLeaveContext(n.info)};this.emit("leave",s)}return}r._handleLeave(n)}_handleUnsubscribe(e,n){let i=this._getSub(e,0);if(!i&&e){this._isServerSub(e)&&(delete this._serverSubs[e],this.emit("unsubscribed",{channel:e}));return}n.code<2500?i._setUnsubscribed(n.code,n.reason,!1):i._setSubscribing(n.code,n.reason)}_handleSubscribe(e,n){this._serverSubs[e]={offset:n.offset,epoch:n.epoch,recoverable:n.recoverable||!1},this.emit("subscribed",this._getSubscribeContext(e,n))}_handleDisconnect(e){let n=e.code,i=!0;(n>=3500&&n<4e3||n>=4500&&n<5e3)&&(i=!1),this._disconnect(n,e.reason,i)}_getPublicationContext(e,n){let i={channel:e,data:n.data};return n.offset&&(i.offset=n.offset),n.info&&(i.info=this._getJoinLeaveContext(n.info)),n.tags&&(i.tags=n.tags),i}_getJoinLeaveContext(e){let n={client:e.client,user:e.user},i=e.conn_info;i&&(n.connInfo=i);let r=e.chan_info;return r&&(n.chanInfo=r),n}_handlePublication(e,n,i){let r=this._getSub(e,i);if(!r&&e){if(this._isServerSub(e)){let s=this._getPublicationContext(e,n);this.emit("publication",s),n.offset!==void 0&&(this._serverSubs[e].offset=n.offset)}return}r._handlePublication(n)}_handleMessage(e){this.emit("message",{data:e.data})}_handleServerPing(e){if(this._sendPong){let n={};this._transportSendCommands([n])}e()}_handlePush(e,n){let i=e.channel,r=e.id;e.pub?this._handlePublication(i,e.pub,r):e.message?this._handleMessage(e.message):e.join?this._handleJoin(i,e.join,r):e.leave?this._handleLeave(i,e.leave,r):e.unsubscribe?this._handleUnsubscribe(i,e.unsubscribe):e.subscribe?this._handleSubscribe(i,e.subscribe):e.disconnect&&this._handleDisconnect(e.disconnect),n()}_flush(){let e=this._commands.slice(0);this._commands=[],this._transportSendCommands(e)}_createErrorObject(e,n,i){let r={code:e,message:n};return i&&(r.temporary=!0),r}_registerCall(e,n,i){this._callbacks[e]={callback:n,errback:i,timeout:null},this._callbacks[e].timeout=setTimeout(()=>{delete this._callbacks[e],ed(i)&&i({error:this._createErrorObject(Q.timeout,"timeout")})},this._config.timeout)}_addCommand(e){this._batching?this._commands.push(e):this._transportSendCommands([e])}_nextPromiseId(){return++this._promiseId}_nextTransportId(){return++this._transportId}_resolvePromises(){for(let e in this._promises)this._promises.hasOwnProperty(e)&&(this._promises[e].timeout&&clearTimeout(this._promises[e].timeout),this._promises[e].resolve(),delete this._promises[e])}_rejectPromises(e){for(let n in this._promises)this._promises.hasOwnProperty(n)&&(this._promises[n].timeout&&clearTimeout(this._promises[n].timeout),this._promises[n].reject(e),delete this._promises[n])}};$n.SubscriptionState=He;$n.State=ge;$n.UnauthorizedError=St;function td(t){if(!t.hasAttribute("data-centrifuge"))return;let e=t.getAttribute("data-centrifuge-url"),n=t.getAttribute("data-centrifuge-token"),i=new $n(e,{token:n});i.on("publication",function(r){on.swap("body",r.data.content,{swapStyle:"none"})}),i.connect()}function nd(t){t.querySelectorAll("[data-clipboard]").forEach(e=>{e.addEventListener("click",()=>{navigator.clipboard.writeText(e.dataset.clipboard).then(()=>{let n=e.querySelector(".if"),i=e.querySelector(".btn-text"),r=e.className,s=n.className,o=i.className,a=i.innerText;e.classList.remove("btn-outline-secondary"),e.classList.add("btn-outline-success"),n.classList.remove("if-copy","text-muted"),n.classList.add("if-check","text-success"),i.classList.remove("text-muted"),i.classList.add("text-success"),i.setAttribute("aria-live","polite"),i.innerText="Copied",setTimeout(function(){e.className=r,n.className=s,i.className=o,i.innerText=a},1500)})})})}function od(t){t.matches("[data-repeatable]")&&id(t),t.querySelectorAll("[data-repeatable]").forEach(e=>id(e))}function id(t){t.querySelectorAll("[data-repeatable-field]").forEach(e=>{ad(t,e)})}function ad(t,e){e.querySelectorAll("[data-repeatable-remove]").forEach(n=>{n.addEventListener("click",()=>{t.querySelectorAll("[data-repeatable-field]").length==1?rd(e):(e.remove(),sd(t))})}),e.querySelectorAll("[data-repeatable-add]").forEach(n=>{n.addEventListener("click",()=>{let i=e.cloneNode(!0);rd(i),e.after(i),sd(t),ad(t,i)})})}function rd(t){t.querySelectorAll("[data-repeatable-clear]").forEach(e=>{e.value=""}),t.querySelectorAll(".is-invalid").forEach(e=>{e.classList.remove("is-invalid")})}function sd(t){let e=t.getAttribute("data-repeatable-name"),n=t.getAttribute("data-repeatable-id");t.querySelectorAll("[data-repeatable-field]").forEach((i,r)=>{i.querySelectorAll(`[name^='${e}[']`).forEach(s=>{let o=s.getAttribute("name"),a=o.slice(0,e.length+1),l=o.slice(e.length+1).replace(/^[0-9]+/,""),c=a+r.toString()+l;s.setAttribute("name",c)}),i.querySelectorAll(`[id^='${n}-']`).forEach(s=>{let o=s.getAttribute("id"),a=o.slice(0,n.length+1),l=o.slice(n.length+1).replace(/^[0-9]+/,""),c=a+r.toString()+l;s.setAttribute("id",c)})})}var ld="&#8203;";function $a(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function cd(t){return function(e){if(Array.isArray(e))return $a(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return $a(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return $a(e,n)}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _n={isEnabled:function(){var t;return(t=window.TAGIFY_DEBUG)===null||t===void 0||t},log:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i;this.isEnabled()&&(i=console).log.apply(i,["[Tagify]:"].concat(cd(e)))},warn:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i;this.isEnabled()&&(i=console).warn.apply(i,["[Tagify]:"].concat(cd(e)))}},dr=function(t,e,n,i){return t=""+t,e=""+e,i&&(t=t.trim(),e=e.trim()),n?t==e:t.toLowerCase()==e.toLowerCase()},ud=function(t,e){return t&&Array.isArray(t)&&t.map(function(n){return za(n,e)})};function za(t,e){var n,i={};for(n in t)e.indexOf(n)<0&&(i[n]=t[n]);return i}function Ha(t){return new DOMParser().parseFromString(t.trim(),"text/html").body.firstElementChild}function dd(t,e){for(e=e||"previous";t=t[e+"Sibling"];)if(t.nodeType==3)return t}function jn(t){return typeof t=="string"?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/`|'/g,"&#039;"):t}function At(t){var e=Object.prototype.toString.call(t).split(" ")[1].slice(0,-1);return t===Object(t)&&e!="Array"&&e!="Function"&&e!="RegExp"&&e!="HTMLUnknownElement"}function be(t,e,n){var i,r;function s(o,a){for(var l in a)if(a.hasOwnProperty(l)){if(At(a[l])){At(o[l])?s(o[l],a[l]):o[l]=Object.assign({},a[l]);continue}if(Array.isArray(a[l])){o[l]=Object.assign([],a[l]);continue}o[l]=a[l]}}return i=t,((r=Object)!=null&&typeof Symbol<"u"&&r[Symbol.hasInstance]?r[Symbol.hasInstance](i):i instanceof r)||(t={}),s(t,e),n&&s(t,n),t}function hd(){var t=[],e={},n=!0,i=!1,r=void 0;try{for(var s,o=arguments[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var a=s.value,l=!0,c=!1,d=void 0;try{for(var u,h=a[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var f=u.value;At(f)?e[f.value]||(t.push(f),e[f.value]=1):t.includes(f)||t.push(f)}}catch(p){c=!0,d=p}finally{try{l||h.return==null||h.return()}finally{if(c)throw d}}}}catch(p){i=!0,r=p}finally{try{n||o.return==null||o.return()}finally{if(i)throw r}}return t}function zs(t){return String.prototype.normalize?typeof t=="string"?t.normalize("NFD").replace(/[\u0300-\u036f]/g,""):void 0:t}var fd=function(){return/(?=.*chrome)(?=.*android)/i.test(navigator.userAgent)};function pd(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})}function Bn(t){var e,n=yd.call(this,t),i=t==null||(e=t.classList)===null||e===void 0?void 0:e.contains(this.settings.classNames.tag);return n&&i}function gd(t){return yd.call(this,t)&&t?.closest(this.settings.classNames.tagSelector)}function yd(t){var e;return(t==null||(e=t.closest)===null||e===void 0?void 0:e.call(t,this.settings.classNames.namespaceSelector))===this.DOM.scope}function wd(t,e){var n=window.getSelection();return e=e||n.getRangeAt(0),typeof t=="string"&&(t=document.createTextNode(t)),e&&(e.deleteContents(),e.insertNode(t)),t}function Z(t,e,n){return t?(e&&(t.__tagifyTagData=n?e:be({},t.__tagifyTagData||{},e)),t.__tagifyTagData):(_n.warn("tag element doesn't exist",{tagElm:t,data:e}),e)}function vn(t){if(t&&t.parentNode){var e=t,n=window.getSelection(),i=n.getRangeAt(0);n.rangeCount&&(i.setStartAfter(e),i.collapse(!0),n.removeAllRanges(),n.addRange(i))}}function Ed(t,e){t.forEach(function(n){if(Z(n.previousSibling)||!n.previousSibling){var i=document.createTextNode("\u200B");n.before(i),e&&vn(i)}})}var ja={delimiters:",",pattern:null,tagTextProp:"value",maxTags:1/0,callbacks:{},addTagOnBlur:!0,addTagOn:["blur","tab","enter"],onChangeAfterBlur:!0,duplicates:!1,whitelist:[],blacklist:[],enforceWhitelist:!1,userInput:!0,focusable:!0,focusInputOnRemove:!0,keepInvalidTags:!1,createInvalidTags:!0,mixTagsAllowedAfter:/,|\.|\:|\s/,mixTagsInterpolator:["[[","]]"],backspace:!0,skipInvalid:!1,pasteAsTags:!0,editTags:{clicks:2,keepInvalid:!0},transformTag:function(){},trim:!0,a11y:{focusableTags:!1},mixMode:{insertAfterTag:"\xA0"},autoComplete:{enabled:!0,rightKey:!1,tabKey:!1},classNames:{namespace:"tagify",mixMode:"tagify--mix",selectMode:"tagify--select",input:"tagify__input",focus:"tagify--focus",tagNoAnimation:"tagify--noAnim",tagInvalid:"tagify--invalid",tagNotAllowed:"tagify--notAllowed",scopeLoading:"tagify--loading",hasMaxTags:"tagify--hasMaxTags",hasNoTags:"tagify--noTags",empty:"tagify--empty",inputInvalid:"tagify__input--invalid",dropdown:"tagify__dropdown",dropdownWrapper:"tagify__dropdown__wrapper",dropdownHeader:"tagify__dropdown__header",dropdownFooter:"tagify__dropdown__footer",dropdownItem:"tagify__dropdown__item",dropdownItemActive:"tagify__dropdown__item--active",dropdownItemHidden:"tagify__dropdown__item--hidden",dropdownItemSelected:"tagify__dropdown__item--selected",dropdownInital:"tagify__dropdown--initial",tag:"tagify__tag",tagText:"tagify__tag-text",tagX:"tagify__tag__removeBtn",tagLoading:"tagify__tag--loading",tagEditing:"tagify__tag--editable",tagFlash:"tagify__tag--flash",tagHide:"tagify__tag--hide"},dropdown:{classname:"",enabled:2,maxItems:10,searchKeys:["value","searchBy"],fuzzySearch:!0,caseSensitive:!1,accentedSearch:!0,includeSelectedTags:!1,escapeHTML:!0,highlightFirst:!0,closeOnSelect:!0,clearOnSelect:!0,position:"all",appendTarget:null},hooks:{beforeRemoveTag:function(){return Promise.resolve()},beforePaste:function(){return Promise.resolve()},suggestionClick:function(){return Promise.resolve()},beforeKeyDown:function(){return Promise.resolve()}}};function _b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),i.forEach(function(r){_b(t,r,n[r])})}return t}function yb(t,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(n,i){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);i&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,s)}return r}(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}function Ba(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function wb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eb(t){return function(e){if(Array.isArray(e))return Ba(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return Ba(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ba(e,n)}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tb(){for(var t in this.dropdown={},this._dropdown)this.dropdown[t]=typeof this._dropdown[t]=="function"?this._dropdown[t].bind(this):this._dropdown[t];this.dropdown.refs(),this.DOM.dropdown.__tagify=this}var Ks,Ri,Sb=(Ks=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),i.forEach(function(r){wb(t,r,n[r])})}return t}({},{events:{binding:function(){var t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],e=this.dropdown.events.callbacks,n=this.listeners.dropdown=this.listeners.dropdown||{position:this.dropdown.position.bind(this,null),onKeyDown:e.onKeyDown.bind(this),onMouseOver:e.onMouseOver.bind(this),onMouseLeave:e.onMouseLeave.bind(this),onClick:e.onClick.bind(this),onScroll:e.onScroll.bind(this)},i=t?"addEventListener":"removeEventListener";this.settings.dropdown.position!="manual"&&(document[i]("scroll",n.position,!0),window[i]("resize",n.position),window[i]("keydown",n.onKeyDown)),this.DOM.dropdown[i]("mouseover",n.onMouseOver),this.DOM.dropdown[i]("mouseleave",n.onMouseLeave),this.DOM.dropdown[i]("mousedown",n.onClick),this.DOM.dropdown.content[i]("scroll",n.onScroll)},callbacks:{onKeyDown:function(t){var e=this;if(this.state.hasFocus&&!this.state.composing){var n=this.settings,i=n.dropdown.includeSelectedTags,r=this.DOM.dropdown.querySelector(n.classNames.dropdownItemActiveSelector),s=this.dropdown.getSuggestionDataByNode(r),o=n.mode=="mix",a=n.mode=="select";n.hooks.beforeKeyDown(t,{tagify:this}).then(function(l){switch(t.key){case"ArrowDown":case"ArrowUp":case"Down":case"Up":t.preventDefault();var c=e.dropdown.getAllSuggestionsRefs(),d=t.key=="ArrowUp"||t.key=="Up";r&&(r=e.dropdown.getNextOrPrevOption(r,!d)),r&&r.matches(n.classNames.dropdownItemSelector)||(r=c[d?c.length-1:0]),e.dropdown.highlightOption(r,!0);break;case"PageUp":case"PageDown":var u;t.preventDefault();var h=e.dropdown.getAllSuggestionsRefs(),f=Math.floor(e.DOM.dropdown.content.clientHeight/((u=h[0])===null||u===void 0?void 0:u.offsetHeight))||1,p=t.key==="PageUp";if(r){var g=h.indexOf(r),m=p?Math.max(0,g-f):Math.min(h.length-1,g+f);r=h[m]}else r=h[0];e.dropdown.highlightOption(r,!0);break;case"Home":case"End":t.preventDefault();var v=e.dropdown.getAllSuggestionsRefs();r=v[t.key==="Home"?0:v.length-1],e.dropdown.highlightOption(r,!0);break;case"Escape":case"Esc":e.dropdown.hide();break;case"ArrowRight":if(e.state.actions.ArrowLeft||n.autoComplete.rightKey)return;case"Tab":var b=!n.autoComplete.rightKey||!n.autoComplete.tabKey;if(!o&&!a&&r&&b&&!e.state.editing&&s){t.preventDefault();var E=e.dropdown.getMappedValue(s);return e.state.autoCompleteData=s,e.input.autocomplete.set.call(e,E),!1}return!0;case"Enter":t.preventDefault(),e.state.actions.selectOption=!0,setTimeout(function(){return e.state.actions.selectOption=!1},100),n.hooks.suggestionClick(t,{tagify:e,tagData:s,suggestionElm:r}).then(function(){if(r){var A=i?r:e.dropdown.getNextOrPrevOption(r,!d);e.dropdown.selectOption(r,t,function(){if(A){var w=A.getAttribute("value");A=e.dropdown.getSuggestionNodeByValue(w),e.dropdown.highlightOption(A)}})}else e.dropdown.hide(),o||e.addTags(e.state.inputText.trim(),!0)}).catch(function(A){return _n.warn(A)});break;case"Backspace":if(o||e.state.editing.scope)return;var _=e.input.raw.call(e);_!=""&&_.charCodeAt(0)!=8203||(n.backspace===!0?e.removeTags():n.backspace=="edit"&&setTimeout(e.editTag.bind(e),0))}})}},onMouseOver:function(t){var e=t.target.closest(this.settings.classNames.dropdownItemSelector);this.dropdown.highlightOption(e)},onMouseLeave:function(t){this.dropdown.highlightOption()},onClick:function(t){var e=this;if(t.button==0&&t.target!=this.DOM.dropdown&&t.target!=this.DOM.dropdown.content){var n=t.target.closest(this.settings.classNames.dropdownItemSelector),i=this.dropdown.getSuggestionDataByNode(n);this.state.actions.selectOption=!0,setTimeout(function(){return e.state.actions.selectOption=!1},100),this.settings.hooks.suggestionClick(t,{tagify:this,tagData:i,suggestionElm:n}).then(function(){n?e.dropdown.selectOption(n,t):e.dropdown.hide()}).catch(function(r){return _n.warn(r)})}},onScroll:function(t){var e=t.target,n=e.scrollTop/(e.scrollHeight-e.parentNode.clientHeight)*100;this.trigger("dropdown:scroll",{percentage:Math.round(n)})}}},refilter:function(t){t=t||this.state.dropdown.query||"",this.suggestedListItems=this.dropdown.filterListItems(t),this.dropdown.fill(),this.suggestedListItems.length||this.dropdown.hide(),this.trigger("dropdown:updated",this.DOM.dropdown)},getSuggestionDataByNode:function(t){for(var e,n=t&&t.getAttribute("value"),i=this.suggestedListItems.length;i--;){if(At(e=this.suggestedListItems[i])&&e.value==n)return e;if(e==n)return{value:e}}},getSuggestionNodeByValue:function(t){return this.dropdown.getAllSuggestionsRefs().find(function(e){return e.getAttribute("value")===t})},getNextOrPrevOption:function(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this.dropdown.getAllSuggestionsRefs(),i=n.findIndex(function(r){return r===t});return e?n[i+1]:n[i-1]},highlightOption:function(t,e){var n,i=this.settings.classNames.dropdownItemActive;if(this.state.ddItemElm&&(this.state.ddItemElm.classList.remove(i),this.state.ddItemElm.removeAttribute("aria-selected")),!t)return this.state.ddItemData=null,this.state.ddItemElm=null,void this.input.autocomplete.suggest.call(this);n=this.dropdown.getSuggestionDataByNode(t),this.state.ddItemData=n,this.state.ddItemElm=t,t.classList.add(i),t.setAttribute("aria-selected",!0),e&&(t.parentNode.scrollTop=t.clientHeight+t.offsetTop-t.parentNode.clientHeight),this.settings.autoComplete&&(this.input.autocomplete.suggest.call(this,n),this.dropdown.position())},selectOption:function(t,e,n){var i=this,r=this.settings,s=r.dropdown.includeSelectedTags,o=r.dropdown,a=o.clearOnSelect,l=o.closeOnSelect;if(!t)return this.addTags(this.state.inputText,!0),void(l&&this.dropdown.hide());e=e||{};var c=t.getAttribute("value"),d=c=="noMatch",u=r.mode=="mix",h=this.suggestedListItems.find(function(p){var g;return((g=p.value)!==null&&g!==void 0?g:p)==c});if(this.trigger("dropdown:select",{data:h,elm:t,event:e}),h||d){if(this.state.editing){var f=this.normalizeTags([h])[0];h=r.transformTag.call(this,f)||f,this.onEditTagDone(null,be({__isValid:!0},h))}else this[u?"addMixTags":"addTags"]([h||this.input.raw.call(this)],a);(u||this.DOM.input.parentNode)&&(setTimeout(function(){i.DOM.input.focus(),i.toggleFocusClass(!0)}),l&&setTimeout(this.dropdown.hide.bind(this)),s?n&&n():(t.addEventListener("transitionend",function(){i.dropdown.fillHeaderFooter(),setTimeout(function(){t.remove(),i.dropdown.refilter(),n&&n()},100)},{once:!0}),t.classList.add(this.settings.classNames.dropdownItemHidden)))}else l&&setTimeout(this.dropdown.hide.bind(this))},selectAll:function(t){this.suggestedListItems.length=0,this.dropdown.hide(),this.dropdown.filterListItems("");var e=this.dropdown.filterListItems("");return t||(e=this.state.dropdown.suggestions),this.addTags(e,!0),this},filterListItems:function(t,e){var n,i,r,s,o,a,l=function(){var A,w,T=void 0,D=void 0;A=p[E],i=((w=Object)!=null&&typeof Symbol<"u"&&w[Symbol.hasInstance]?w[Symbol.hasInstance](A):A instanceof w)?p[E]:{value:p[E]};var O,N=Object.keys(i).some(function(I){return b.includes(I)})?b:["value"];u.fuzzySearch&&!e.exact?(s=N.reduce(function(I,$){return I+" "+(i[$]||"")},"").toLowerCase().trim(),u.accentedSearch&&(s=zs(s),a=zs(a)),T=s.indexOf(a)==0,D=s===a,O=s,r=a.toLowerCase().split(" ").every(function(I){return O.includes(I.toLowerCase())})):(T=!0,r=N.some(function(I){var $=""+(i[I]||"");return u.accentedSearch&&($=zs($),a=zs(a)),u.caseSensitive||($=$.toLowerCase()),D=$===a,e.exact?$===a:$.indexOf(a)==0})),o=!u.includeSelectedTags&&n.isTagDuplicate(At(i)?i.value:i),r&&!o&&(D&&T?f.push(i):u.sortby=="startsWith"&&T?h.unshift(i):h.push(i))},c=this,d=this.settings,u=d.dropdown,h=(e=e||{},[]),f=[],p=d.whitelist,g=u.maxItems>=0?u.maxItems:1/0,m=u.includeSelectedTags,v=typeof u.sortby=="function",b=u.searchKeys,E=0;if(!(t=d.mode=="select"&&this.value.length&&this.value[0][d.tagTextProp]==t?"":t)||!b.length){h=m?p:p.filter(function(A){return!c.isTagDuplicate(At(A)?A.value:A)});var _=v?u.sortby(h,a):h.slice(0,g);return this.state.dropdown.suggestions=_,_}for(a=u.caseSensitive?""+t:(""+t).toLowerCase();E<p.length;E++)n=this,l();return this.state.dropdown.suggestions=f.concat(h),_=v?u.sortby(f.concat(h),a):f.concat(h).slice(0,g),this.state.dropdown.suggestions=_,_},getMappedValue:function(t){var e=this.settings.dropdown.mapValueTo;return e?typeof e=="function"?e(t):t[e]||t.value:t.value},createListHTML:function(t){var e=this;return be([],t).map(function(n,i){typeof n!="string"&&typeof n!="number"||(n={value:n});var r=e.dropdown.getMappedValue(n);return r=typeof r=="string"&&e.settings.dropdown.escapeHTML?jn(r):r,e.settings.templates.dropdownItem.apply(e,[yb(bb({},n),{mappedValue:r}),e])}).join("")}}),Ri=(Ri={refs:function(){this.DOM.dropdown=this.parseTemplate("dropdown",[this.settings]),this.DOM.dropdown.content=this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-wrapper']")},getHeaderRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-header']")},getFooterRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-footer']")},getAllSuggestionsRefs:function(){return Eb(this.DOM.dropdown.content.querySelectorAll(this.settings.classNames.dropdownItemSelector))},show:function(t){var e,n,i,r=this,s=this.settings,o=s.mode=="mix"&&!s.enforceWhitelist,a=!s.whitelist||!s.whitelist.length,l=s.dropdown.position=="manual";if(t=t===void 0?this.state.inputText:t,!(a&&!o&&!s.templates.dropdownItemNoMatch||s.dropdown.enabled===!1||this.state.isLoading||this.settings.readonly)){if(clearTimeout(this.dropdownHide__bindEventsTimeout),this.suggestedListItems=this.dropdown.filterListItems(t),t&&!this.suggestedListItems.length&&(this.trigger("dropdown:noMatch",t),s.templates.dropdownItemNoMatch&&(i=s.templates.dropdownItemNoMatch.call(this,{value:t}))),!i){if(this.suggestedListItems.length)t&&o&&!this.state.editing.scope&&!dr(this.suggestedListItems[0].value,t)&&this.suggestedListItems.unshift({value:t});else{if(!t||!o||this.state.editing.scope)return this.input.autocomplete.suggest.call(this),void this.dropdown.hide();this.suggestedListItems=[{value:t}]}n=""+(At(e=this.suggestedListItems[0])?e.value:e),s.autoComplete&&n&&n.indexOf(t)==0&&this.input.autocomplete.suggest.call(this,e)}this.dropdown.fill(i),s.dropdown.highlightFirst&&this.dropdown.highlightOption(this.DOM.dropdown.content.querySelector(s.classNames.dropdownItemSelector)),this.state.dropdown.visible||setTimeout(this.dropdown.events.binding.bind(this)),this.state.dropdown.visible=t||!0,this.state.dropdown.query=t,this.setStateSelection(),l||setTimeout(function(){r.dropdown.position(),r.dropdown.render()}),setTimeout(function(){r.trigger("dropdown:show",r.DOM.dropdown)})}},hide:function(t){var e=this,n=this.DOM,i=n.scope,r=n.dropdown,s=this.settings.dropdown.position=="manual"&&!t;if(r&&document.body.contains(r)&&!s)return window.removeEventListener("resize",this.dropdown.position),this.dropdown.events.binding.call(this,!1),i.setAttribute("aria-expanded",!1),r.parentNode.removeChild(r),setTimeout(function(){e.state.dropdown.visible=!1},100),this.state.dropdown.query=this.state.ddItemData=this.state.ddItemElm=this.state.selection=null,this.state.tag&&this.state.tag.value.length&&(this.state.flaggedTags[this.state.tag.baseOffset]=this.state.tag),this.trigger("dropdown:hide",r),this},toggle:function(t){this.dropdown[this.state.dropdown.visible&&!t?"hide":"show"]()},getAppendTarget:function(){var t=this.settings.dropdown;return typeof t.appendTarget=="function"?t.appendTarget():t.appendTarget},render:function(){var t,e,n,i=this,r=(t=this.DOM.dropdown,(n=t.cloneNode(!0)).style.cssText="position:fixed; top:-9999px; opacity:0",document.body.appendChild(n),e=n.clientHeight,n.parentNode.removeChild(n),e),s=this.settings,o=this.dropdown.getAppendTarget();return s.dropdown.enabled===!1||(this.DOM.scope.setAttribute("aria-expanded",!0),document.body.contains(this.DOM.dropdown)||(this.DOM.dropdown.classList.add(s.classNames.dropdownInital),this.dropdown.position(r),o.appendChild(this.DOM.dropdown),setTimeout(function(){return i.DOM.dropdown.classList.remove(s.classNames.dropdownInital)}))),this},fill:function(t){t=typeof t=="string"?t:this.dropdown.createListHTML(t||this.suggestedListItems);var e,n=this.settings.templates.dropdownContent.call(this,t);this.DOM.dropdown.content.innerHTML=(e=n)?e.replace(/\>[\r\n ]+\</g,"><").split(/>\s+</).join("><").trim():""},fillHeaderFooter:function(){var t=this.dropdown.filterListItems(this.state.dropdown.query),e=this.parseTemplate("dropdownHeader",[t]),n=this.parseTemplate("dropdownFooter",[t]),i=this.dropdown.getHeaderRef(),r=this.dropdown.getFooterRef();e&&i?.parentNode.replaceChild(e,i),n&&r?.parentNode.replaceChild(n,r)},position:function(t){var e=this.settings.dropdown,n=this.dropdown.getAppendTarget();if(e.position!="manual"&&n){var i,r,s,o,a,l,c,d,u,h,f=this.DOM.dropdown,p=e.RTL,g=n===document.body,m=n===this.DOM.scope,v=g?window.pageYOffset:n.scrollTop,b=document.fullscreenElement||document.webkitFullscreenElement||document.documentElement,E=b.clientHeight,_=Math.max(b.clientWidth||0,window.innerWidth||0),A=_>480?e.position:"all",w=this.DOM[A=="input"?"input":"scope"];if(t=t||f.clientHeight,this.state.dropdown.visible){if(A=="text"?(s=(i=function(){var O=document.getSelection();if(O.rangeCount){var N,I,$=O.getRangeAt(0),H=$.startContainer,z=$.startOffset;if(z>0)return(I=document.createRange()).setStart(H,z-1),I.setEnd(H,z),{left:(N=I.getBoundingClientRect()).right,top:N.top,bottom:N.bottom};if(H.getBoundingClientRect)return H.getBoundingClientRect()}return{left:-9999,top:-9999}}()).bottom,r=i.top,o=i.left,a="auto"):(l=function(O){var N=0,I=0;for(O=O.parentNode;O&&O!=b;)N+=O.offsetTop||0,I+=O.offsetLeft||0,O=O.parentNode;return{top:N,left:I}}(n),i=w.getBoundingClientRect(),r=m?-1:i.top-l.top,s=(m?i.height:i.bottom-l.top)-1,o=m?-1:i.left-l.left,a=i.width+"px"),!g){var T=function(){for(var O=0,N=e.appendTarget.parentNode;N;)O+=N.scrollTop||0,N=N.parentNode;return O}();r+=T,s+=T}var D;r=Math.floor(r),s=Math.ceil(s),d=_-o<120,u=((c=(D=e.placeAbove)!==null&&D!==void 0?D:E-i.bottom<t)?r:s)+v,h=o+(p&&i.width||0)+window.pageXOffset,h=A=="text"&&d?"right: 0;":"left: ".concat(h,"px;"),f.style.cssText="".concat(h," top: ").concat(u,"px; min-width: ").concat(a,"; max-width: ").concat(a),f.setAttribute("placement",c?"top":"bottom"),f.setAttribute("position",A)}}}})!=null?Ri:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Ks,Object.getOwnPropertyDescriptors(Ri)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}(Object(Ri)).forEach(function(t){Object.defineProperty(Ks,t,Object.getOwnPropertyDescriptor(Ri,t))}),Ks),ur="@yaireo/tagify/",Ab={empty:"empty",exceed:"number of tags exceeded",pattern:"pattern mismatch",duplicate:"already exists",notAllowed:"not allowed"},xb={wrapper:function(t,e){return'<tags class="'.concat(e.classNames.namespace," ").concat(e.mode?"".concat(e.classNames[e.mode+"Mode"]):""," ").concat(t.className,`"
                    `).concat(e.readonly?"readonly":"",`
                    `).concat(e.disabled?"disabled":"",`
                    `).concat(e.required?"required":"",`
                    `).concat(e.mode==="select"?"spellcheck='false'":"",`
                    tabIndex="-1">
                    `).concat(this.settings.templates.input.call(this),`
                `).concat(ld,`
        </tags>`)},input:function(){var t=this.settings,e=t.placeholder||ld;return"<span ".concat(!t.readonly&&t.userInput?"contenteditable":"",' data-can-editable tabIndex="0" data-placeholder="').concat(e,'" aria-placeholder="').concat(t.placeholder||"",`"
                    class="`).concat(t.classNames.input,`"
                    role="textbox"
                    autocapitalize="false"
                    autocorrect="off"
                    aria-autocomplete="both"
                    aria-multiline="`).concat(t.mode=="mix",'"></span>')},tag:function(t,e){var n=e.settings;return'<tag title="'.concat(t.title||t.value,`"
                    contenteditable='false'
                    tabIndex="`).concat(n.a11y.focusableTags?0:-1,`"
                    class="`).concat(n.classNames.tag," ").concat(t.class||"",`"
                    `).concat(this.getAttributes(t),`>
            <x title='' tabIndex="`).concat(n.a11y.focusableTags?0:-1,'" class="').concat(n.classNames.tagX,`" role='button' aria-label='remove tag'></x>
            <div>
                <span `).concat(n.mode==="select"&&n.userInput?"contenteditable='true'":"",` autocapitalize="false" autocorrect="off" spellcheck='false' class="`).concat(n.classNames.tagText,'">').concat(t[n.tagTextProp]||t.value,`</span>
            </div>
        </tag>`)},dropdown:function(t){var e=t.dropdown,n=e.position=="manual";return'<div class="'.concat(n?"":t.classNames.dropdown," ").concat(e.classname,'" role="listbox" aria-labelledby="dropdown" dir="').concat(e.RTL?"rtl":"",`">
                    <div data-selector='tagify-suggestions-wrapper' class="`).concat(t.classNames.dropdownWrapper,`"></div>
                </div>`)},dropdownContent:function(t){var e=this.settings.templates,n=this.state.dropdown.suggestions;return`
            `.concat(e.dropdownHeader.call(this,n),`
            `).concat(t,`
            `).concat(e.dropdownFooter.call(this,n),`
        `)},dropdownItem:function(t){return"<div ".concat(this.getAttributes(t),`
                    class='`).concat(this.settings.classNames.dropdownItem," ").concat(this.isTagDuplicate(t.value)?this.settings.classNames.dropdownItemSelected:""," ").concat(t.class||"",`'
                    tabindex="0"
                    role="option">`).concat(t.mappedValue||t.value,"</div>")},dropdownHeader:function(t){return`<header data-selector='tagify-suggestions-header' class="`.concat(this.settings.classNames.dropdownHeader,'"></header>')},dropdownFooter:function(t){var e=t.length-this.settings.dropdown.maxItems;return e>0?`<footer data-selector='tagify-suggestions-footer' class="`.concat(this.settings.classNames.dropdownFooter,`">
                `).concat(e,` more items. Refine your search.
            </footer>`):""},dropdownItemNoMatch:null};function md(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function vd(t,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function Ob(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var s,o,a=[],l=!0,c=!1;try{for(r=r.call(n);!(l=(s=r.next()).done)&&(a.push(s.value),!i||a.length!==i);l=!0);}catch(d){c=!0,o=d}finally{try{l||r.return==null||r.return()}finally{if(c)throw o}}return a}}(t,e)||function(n,i){if(n){if(typeof n=="string")return md(n,i);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return md(n,i)}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Va(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Hn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _d(t,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function Cb(t,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(n,i){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);i&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,s)}return r}(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}function qa(t){return function(e){if(Array.isArray(e))return Va(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return Va(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Va(e,n)}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Pb={customBinding:function(){var t=this;this.customEventsList.forEach(function(e){t.on(e,t.settings.callbacks[e])})},binding:function(){var t,e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],n=this.settings,i=this.events.callbacks,r=e?"addEventListener":"removeEventListener";if(!(this.state.mainEvents&&e||n.disabled||n.readonly)){for(var s in this.state.mainEvents=e,e&&!this.listeners.main&&(this.events.bindGlobal.call(this),this.settings.isJQueryPlugin&&jQuery(this.DOM.originalInput).on("tagify.removeAllTags",this.removeAllTags.bind(this))),t=this.listeners.main=this.listeners.main||{keydown:["input",i.onKeydown.bind(this)],click:["scope",i.onClickScope.bind(this)],dblclick:n.mode!="select"&&["scope",i.onDoubleClickScope.bind(this)],paste:["input",i.onPaste.bind(this)],drop:["input",i.onDrop.bind(this)],compositionstart:["input",i.onCompositionStart.bind(this)],compositionend:["input",i.onCompositionEnd.bind(this)]})t[s]&&this.DOM[t[s][0]][r](s,t[s][1]);var o=this.listeners.main.inputMutationObserver||new MutationObserver(i.onInputDOMChange.bind(this));o.disconnect(),n.mode=="mix"&&o.observe(this.DOM.input,{childList:!0}),this.events.bindOriginaInputListener.call(this)}},bindOriginaInputListener:function(t){var e=(t||0)+500;this.listeners.main&&(clearInterval(this.listeners.main.originalInputValueObserverInterval),this.listeners.main.originalInputValueObserverInterval=setInterval(this.events.callbacks.observeOriginalInputValue.bind(this),e))},bindGlobal:function(t){var e,n=this.events.callbacks,i=t?"removeEventListener":"addEventListener";if(this.listeners&&(t||!this.listeners.global)){this.listeners.global=this.listeners.global||[{type:this.isIE?"keydown":"input",target:this.DOM.input,cb:n[this.isIE?"onInputIE":"onInput"].bind(this)},{type:"keydown",target:window,cb:n.onWindowKeyDown.bind(this)},{type:"focusin",target:this.DOM.scope,cb:n.onFocusBlur.bind(this)},{type:"focusout",target:this.DOM.scope,cb:n.onFocusBlur.bind(this)},{type:"click",target:document,cb:n.onClickAnywhere.bind(this),useCapture:!0}];var r=!0,s=!1,o=void 0;try{for(var a,l=this.listeners.global[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)(e=a.value).target[i](e.type,e.cb,!!e.useCapture)}catch(c){s=!0,o=c}finally{try{r||l.return==null||l.return()}finally{if(s)throw o}}}},unbindGlobal:function(){this.events.bindGlobal.call(this,!0)},callbacks:{onFocusBlur:function(t){var e,n,i=this.settings,r=gd.call(this,t.relatedTarget),s=Bn.call(this,t.target),o=t.target.classList.contains(i.classNames.tagX),a=t.type=="focusin",l=t.type=="focusout";o&&i.mode!="mix"&&i.focusInputOnRemove&&this.DOM.input.focus(),r&&a&&!s&&!o&&this.toggleFocusClass(this.state.hasFocus=+new Date);var c=t.target?this.trim(this.DOM.input.textContent):"",d=(n=this.value)===null||n===void 0||(e=n[0])===null||e===void 0?void 0:e[i.tagTextProp],u=i.dropdown.enabled>=0,h={relatedTarget:t.relatedTarget},f=this.state.actions.selectOption&&(u||!i.dropdown.closeOnSelect),p=this.state.actions.addNew&&u;if(l){if(t.relatedTarget===this.DOM.scope)return this.dropdown.hide(),void this.DOM.input.focus();this.postUpdate(),i.onChangeAfterBlur&&this.triggerChangeEvent()}if(!(f||p||o))if(this.state.hasFocus=!(!a&&!r)&&+new Date,this.toggleFocusClass(this.state.hasFocus),i.mode!="mix"){if(a){if(!i.focusable)return;var g=i.dropdown.enabled===0&&!this.state.dropdown.visible,m=this.DOM.scope.querySelector(this.settings.classNames.tagTextSelector);return this.trigger("focus",h),void(g&&!s&&(this.dropdown.show(this.value.length?"":void 0),i.mode==="select"&&this.setRangeAtStartEnd(!1,m)))}if(l){if(this.trigger("blur",h),this.loading(!1),i.mode=="select"){if(this.value.length){var v=this.getTagElms()[0];c=this.trim(v.textContent)}d===c&&(c="")}c&&!this.state.actions.selectOption&&i.addTagOnBlur&&i.addTagOn.includes("blur")&&this.addTags(c,!0)}r||(this.DOM.input.removeAttribute("style"),this.dropdown.hide())}else a?this.trigger("focus",h):l&&(this.trigger("blur",h),this.loading(!1),this.dropdown.hide(),this.state.dropdown.visible=void 0,this.setStateSelection())},onCompositionStart:function(t){this.state.composing=!0},onCompositionEnd:function(t){this.state.composing=!1},onWindowKeyDown:function(t){var e,n=this.settings,i=document.activeElement,r=gd.call(this,i)&&this.DOM.scope.contains(i),s=i===this.DOM.input,o=r&&i.hasAttribute("readonly"),a=this.DOM.scope.querySelector(this.settings.classNames.tagTextSelector),l=this.state.dropdown.visible;if((t.key==="Tab"&&l||this.state.hasFocus||r&&!o)&&!s){e=i.nextElementSibling;var c=t.target.classList.contains(n.classNames.tagX);switch(t.key){case"Backspace":n.readonly||this.state.editing||(this.removeTags(i),(e||this.DOM.input).focus());break;case"Enter":if(c)return void this.removeTags(t.target.parentNode);n.a11y.focusableTags&&Bn.call(this,i)&&setTimeout(this.editTag.bind(this),0,i);break;case"ArrowDown":this.state.dropdown.visible||n.mode=="mix"||this.dropdown.show();break;case"Tab":a?.focus()}}},onKeydown:function(t){var e=this,n=this.settings;if(!this.state.composing&&n.userInput){n.mode=="select"&&n.enforceWhitelist&&this.value.length&&t.key!="Tab"&&t.preventDefault();var i=this.trim(t.target.textContent);this.trigger("keydown",{event:t}),n.hooks.beforeKeyDown(t,{tagify:this}).then(function(r){if(n.mode=="mix"){switch(t.key){case"Left":case"ArrowLeft":e.state.actions.ArrowLeft=!0;break;case"Delete":case"Backspace":if(e.state.editing)return;var s=document.getSelection(),o=t.key=="Delete"&&s.anchorOffset==(s.anchorNode.length||0),a=s.anchorNode.previousSibling,l=s.anchorNode.nodeType==1||!s.anchorOffset&&a&&a.nodeType==1&&s.anchorNode.previousSibling;(function(v){var b=document.createElement("div");v.replace(/\&#?[0-9a-z]+;/gi,function(E){return b.innerHTML=E,b.innerText})})(e.DOM.input.innerHTML);var c,d,u,h=e.getTagElms(),f=s.anchorNode.length===1&&s.anchorNode.nodeValue=="\u200B";if(n.backspace=="edit"&&l)return c=s.anchorNode.nodeType==1?null:s.anchorNode.previousElementSibling,setTimeout(e.editTag.bind(e),0,c),void t.preventDefault();if(fd()&&_d(l,Element))return u=dd(l),l.hasAttribute("readonly")||l.remove(),e.DOM.input.focus(),void setTimeout(function(){vn(u),e.DOM.input.click()});if(s.anchorNode.nodeName=="BR")return;if((o||l)&&s.anchorNode.nodeType==1?d=s.anchorOffset==0?o?h[0]:null:h[Math.min(h.length,s.anchorOffset)-1]:o?d=s.anchorNode.nextElementSibling:_d(l,Element)&&(d=l),s.anchorNode.nodeType==3&&!s.anchorNode.nodeValue&&s.anchorNode.previousElementSibling&&t.preventDefault(),(l||o)&&!n.backspace||s.type!="Range"&&!s.anchorOffset&&s.anchorNode==e.DOM.input&&t.key!="Delete")return void t.preventDefault();if(s.type!="Range"&&d&&d.hasAttribute("readonly"))return void vn(dd(d));t.key=="Delete"&&f&&Z(s.anchorNode.nextSibling)&&e.removeTags(s.anchorNode.nextSibling)}return!0}var p=n.dropdown.position=="manual";switch(t.key){case"Backspace":n.mode=="select"&&n.enforceWhitelist&&e.value.length?e.removeTags():e.state.dropdown.visible&&n.dropdown.position!="manual"||t.target.textContent!=""&&i.charCodeAt(0)!=8203||(n.backspace===!0?e.removeTags():n.backspace=="edit"&&setTimeout(e.editTag.bind(e),0));break;case"Esc":case"Escape":if(e.state.dropdown.visible)return;t.target.blur();break;case"Down":case"ArrowDown":e.state.dropdown.visible||e.dropdown.show();break;case"ArrowRight":var g=e.state.inputSuggestion||e.state.ddItemData;if(g&&n.autoComplete.rightKey)return void e.addTags([g],!0);break;case"Tab":return!0;case"Enter":if(e.state.dropdown.visible&&!p)return;t.preventDefault();var m=e.state.autoCompleteData||i;setTimeout(function(){e.state.dropdown.visible&&!p||e.state.actions.selectOption||!n.addTagOn.includes(t.key.toLowerCase())||(e.addTags([m],!0),e.state.autoCompleteData=null)})}}).catch(function(r){return r})}},onInput:function(t){this.postUpdate();var e=this.settings;if(e.mode=="mix")return this.events.callbacks.onMixTagsInput.call(this,t);var n=this.input.normalize.call(this,void 0,{trim:!1}),i=n.length>=e.dropdown.enabled,r={value:n,inputElm:this.DOM.input},s=this.validateTag({value:n});e.mode=="select"&&this.toggleScopeValidation(s),r.isValid=s,this.state.inputText!=n&&(this.input.set.call(this,n,!1),n.search(e.delimiters)!=-1?this.addTags(n)&&this.input.set.call(this):e.dropdown.enabled>=0&&this.dropdown[i?"show":"hide"](n),this.trigger("input",r))},onMixTagsInput:function(t){var e,n,i,r,s,o,a,l,c=this,d=this.settings,u=this.value.length,h=this.getTagElms(),f=document.createDocumentFragment(),p=window.getSelection().getRangeAt(0),g=[].map.call(h,function(m){return Z(m).value});if(t.inputType=="deleteContentBackward"&&fd()&&this.events.callbacks.onKeydown.call(this,{target:t.target,key:"Backspace"}),Ed(this.getTagElms()),this.value.slice().forEach(function(m){m.readonly&&!g.includes(m.value)&&f.appendChild(c.createTagElem(m))}),f.childNodes.length&&(p.insertNode(f),this.setRangeAtStartEnd(!1,f.lastChild)),h.length!=u)return this.value=[].map.call(this.getTagElms(),function(m){return Z(m)}),void this.update({withoutChangeEvent:!0});if(this.hasMaxTags())return!0;if(window.getSelection&&(o=window.getSelection()).rangeCount>0&&o.anchorNode.nodeType==3){if((p=o.getRangeAt(0).cloneRange()).collapse(!0),p.setStart(o.focusNode,0),i=(e=p.toString().slice(0,p.endOffset)).split(d.pattern).length-1,(n=e.match(d.pattern))&&(r=e.slice(e.lastIndexOf(n[n.length-1]))),r){if(this.state.actions.ArrowLeft=!1,this.state.tag={prefix:r.match(d.pattern)[0],value:r.replace(d.pattern,"")},this.state.tag.baseOffset=o.baseOffset-this.state.tag.value.length,l=this.state.tag.value.match(d.delimiters))return this.state.tag.value=this.state.tag.value.replace(d.delimiters,""),this.state.tag.delimiters=l[0],this.addTags(this.state.tag.value,d.dropdown.clearOnSelect),void this.dropdown.hide();s=this.state.tag.value.length>=d.dropdown.enabled;try{a=(a=this.state.flaggedTags[this.state.tag.baseOffset]).prefix==this.state.tag.prefix&&a.value[0]==this.state.tag.value[0],this.state.flaggedTags[this.state.tag.baseOffset]&&!this.state.tag.value&&delete this.state.flaggedTags[this.state.tag.baseOffset]}catch{}(a||i<this.state.mixMode.matchedPatternCount)&&(s=!1)}else this.state.flaggedTags={};this.state.mixMode.matchedPatternCount=i}setTimeout(function(){c.update({withoutChangeEvent:!0}),c.trigger("input",be({},c.state.tag,{textContent:c.DOM.input.textContent})),c.state.tag&&c.dropdown[s?"show":"hide"](c.state.tag.value)},10)},onInputIE:function(t){var e=this;setTimeout(function(){e.events.callbacks.onInput.call(e,t)})},observeOriginalInputValue:function(){this.DOM.originalInput.parentNode||this.destroy(),this.DOM.originalInput.value!=this.DOM.originalInput.tagifyValue&&this.loadOriginalValues()},onClickAnywhere:function(t){if(t.target!=this.DOM.scope&&!this.DOM.scope.contains(t.target)){this.toggleFocusClass(!1),this.state.hasFocus=!1;var e=t.target.closest(this.settings.classNames.dropdownSelector);e?.__tagify!=this&&this.dropdown.hide()}},onClickScope:function(t){var e=this.settings,n=t.target.closest("."+e.classNames.tag);t.target,this.DOM.scope;var i=+new Date-this.state.hasFocus;if(!t.target.classList.contains(e.classNames.tagX))return n&&!this.state.editing?(this.trigger("click",{tag:n,index:this.getNodeIndex(n),data:Z(n),event:t}),void(e.editTags!==1&&e.editTags.clicks!==1&&e.mode!="select"||this.events.callbacks.onDoubleClickScope.call(this,t))):void(t.target==this.DOM.input&&(e.mode=="mix"&&this.fixFirefoxLastTagNoCaret(),i>500||!e.focusable)?this.state.dropdown.visible?this.dropdown.hide():e.dropdown.enabled===0&&e.mode!="mix"&&this.dropdown.show(this.value.length?"":void 0):e.mode!="select"||e.dropdown.enabled!==0||this.state.dropdown.visible||(this.events.callbacks.onDoubleClickScope.call(this,Cb(function(r){for(var s=1;s<arguments.length;s++){var o=arguments[s]!=null?arguments[s]:{},a=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable}))),a.forEach(function(l){Hn(r,l,o[l])})}return r}({},t),{target:this.getTagElms()[0]})),!e.userInput&&this.dropdown.show()));this.removeTags(t.target.parentNode)},onPaste:function(t){var e=this;t.preventDefault();var n,i,r,s=this.settings;if(!s.userInput)return!1;s.readonly||(i=t.clipboardData||window.clipboardData,r=i.getData("Text"),s.hooks.beforePaste(t,{tagify:this,pastedText:r,clipboardData:i}).then(function(o){o===void 0&&(o=r),o&&(e.injectAtCaret(o,window.getSelection().getRangeAt(0)),e.settings.mode=="mix"?e.events.callbacks.onMixTagsInput.call(e,t):e.settings.pasteAsTags?n=e.addTags(e.state.inputText+o,!0):(e.state.inputText=o,e.dropdown.show(o))),e.trigger("paste",{event:t,pastedText:r,clipboardData:i,tagsElems:n})}).catch(function(o){return o}))},onDrop:function(t){t.preventDefault()},onEditTagInput:function(t,e){var n,i=t.closest("."+this.settings.classNames.tag),r=this.getNodeIndex(i),s=Z(i),o=this.input.normalize.call(this,t),a=(Hn(n={},this.settings.tagTextProp,o),Hn(n,"__tagId",s.__tagId),n),l=this.validateTag(a);this.editTagChangeDetected(be(s,a))||t.originalIsValid!==!0||(l=!0),i.classList.toggle(this.settings.classNames.tagInvalid,l!==!0),s.__isValid=l,i.title=l===!0?s.title||s.value:l,o.length>=this.settings.dropdown.enabled&&(this.state.editing&&(this.state.editing.value=o),this.dropdown.show(o)),this.trigger("edit:input",{tag:i,index:r,data:be({},this.value[r],{newValue:o}),event:e})},onEditTagPaste:function(t,e){var n=(e.clipboardData||window.clipboardData).getData("Text");e.preventDefault();var i=wd(n);this.setRangeAtStartEnd(!1,i)},onEditTagClick:function(t,e){this.events.callbacks.onClickScope.call(this,e)},onEditTagFocus:function(t){this.state.editing={scope:t,input:t.querySelector("[contenteditable]")}},onEditTagBlur:function(t,e){var n=Bn.call(this,e.relatedTarget);if(this.settings.mode=="select"&&n&&e.relatedTarget.contains(e.target))this.dropdown.hide();else if(this.state.editing&&(this.state.hasFocus||this.toggleFocusClass(),this.DOM.scope.contains(document.activeElement)||this.trigger("blur",{}),this.DOM.scope.contains(t))){var i,r,s,o=this.settings,a=t.closest("."+o.classNames.tag),l=Z(a),c=this.input.normalize.call(this,t),d=(Hn(i={},o.tagTextProp,c),Hn(i,"__tagId",l.__tagId),i),u=l.__originalData,h=this.editTagChangeDetected(be(l,d)),f=this.validateTag(d);if(c)if(h){var p;if(r=this.hasMaxTags(),s=be({},u,(Hn(p={},o.tagTextProp,this.trim(c)),Hn(p,"__isValid",f),p)),o.transformTag.call(this,s,u),(f=(!r||u.__isValid===!0)&&this.validateTag(s))!==!0){if(this.trigger("invalid",{data:s,tag:a,message:f}),o.editTags.keepInvalid)return;o.keepInvalidTags?s.__isValid=f:s=u}else o.keepInvalidTags&&(delete s.title,delete s["aria-invalid"],delete s.class);this.onEditTagDone(a,s)}else this.onEditTagDone(a,u);else this.onEditTagDone(a)}},onEditTagkeydown:function(t,e){if(!this.state.composing)switch(this.trigger("edit:keydown",{event:t}),t.key){case"Esc":case"Escape":this.state.editing=!1,e.__tagifyTagData.__originalData.value?e.parentNode.replaceChild(e.__tagifyTagData.__originalHTML,e):e.remove();break;case"Enter":case"Tab":t.preventDefault(),setTimeout(function(){return t.target.blur()},0)}},onDoubleClickScope:function(t){var e=t.target.closest("."+this.settings.classNames.tag);if(e){var n,i,r=Z(e),s=this.settings;r?.editable!==!1&&(n=e.classList.contains(this.settings.classNames.tagEditing),i=e.hasAttribute("readonly"),s.readonly||n||i||!this.settings.editTags||!s.userInput||(this.events.callbacks.onEditTagFocus.call(this,e),this.editTag(e)),this.toggleFocusClass(!0),s.mode!="select"&&this.trigger("dblclick",{tag:e,index:this.getNodeIndex(e),data:Z(e)}))}},onInputDOMChange:function(t){var e=this;t.forEach(function(i){i.addedNodes.forEach(function(r){if(r.outerHTML=="<div><br></div>")r.replaceWith(document.createElement("br"));else if(r.nodeType==1&&r.querySelector(e.settings.classNames.tagSelector)){var s,o=document.createTextNode("");r.childNodes[0].nodeType==3&&r.previousSibling.nodeName!="BR"&&(o=document.createTextNode(`
`)),(s=r).replaceWith.apply(s,qa([o].concat(qa(qa(r.childNodes).slice(0,-1))))),vn(o)}else if(Bn.call(e,r)){var a;if(((a=r.previousSibling)===null||a===void 0?void 0:a.nodeType)!=3||r.previousSibling.textContent||r.previousSibling.remove(),r.previousSibling&&r.previousSibling.nodeName=="BR"){r.previousSibling.replaceWith(`
\u200B`);for(var l=r.nextSibling,c="";l;)c+=l.textContent,l=l.nextSibling;c.trim()&&vn(r.previousSibling)}else r.previousSibling&&!Z(r.previousSibling)||r.before("\u200B")}}),i.removedNodes.forEach(function(r){r&&r.nodeName=="BR"&&Bn.call(e,n)&&(e.removeTags(n),e.fixFirefoxLastTagNoCaret())})});var n=this.DOM.input.lastChild;n&&n.nodeValue==""&&n.remove(),n&&n.nodeName=="BR"||this.DOM.input.appendChild(document.createElement("br"))}}};function Wa(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ka(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ut(t,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function bd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),i.forEach(function(r){Ka(t,r,n[r])})}return t}function Xs(t){return function(e){if(Array.isArray(e))return Wa(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return Wa(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Wa(e,n)}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hr(t,e){if(!t){_n.warn("input element not found",t);var n=new Proxy(this,{get:function(){return function(){return n}}});return n}if(t.__tagify)return _n.warn("input element is already Tagified - Same instance is returned.",t),t.__tagify;var i;be(this,function(r){var s=document.createTextNode(""),o={};function a(l,c,d){d&&c.split(/\s+/g).forEach(function(u){return s[l+"EventListener"].call(s,u,d)})}return{removeAllCustomListeners:function(){Object.entries(o).forEach(function(l){var c=Ob(l,2),d=c[0];c[1].forEach(function(u){return a("remove",d,u)})}),o={}},off:function(l,c){return l&&(c?a("remove",l,c):l.split(/\s+/g).forEach(function(d){var u;(u=o[d])===null||u===void 0||u.forEach(function(h){return a("remove",d,h)}),delete o[d]})),this},on:function(l,c){return c&&typeof c=="function"&&(l.split(/\s+/g).forEach(function(d){Array.isArray(o[d])?o[d].push(c):o[d]=[c]}),a("add",l,c)),this},trigger:function(l,c,d){var u;if(d=d||{cloneData:!0},l)if(r.settings.isJQueryPlugin)l=="remove"&&(l="removeTag"),jQuery(r.DOM.originalInput).triggerHandler(l,[c]);else{try{var h=typeof c=="object"?c:{value:c};if((h=d.cloneData?be({},h):h).tagify=this,c.event&&(h.event=this.cloneEvent(c.event)),vd(c,Object))for(var f in c)vd(c[f],HTMLElement)&&(h[f]=c[f]);u=new CustomEvent(l,{detail:h})}catch(p){_n.warn(p)}s.dispatchEvent(u)}}}}(this)),this.isFirefox=/firefox|fxios/i.test(navigator.userAgent)&&!/seamonkey/i.test(navigator.userAgent),this.isIE=window.document.documentMode,e=e||{},this.getPersistedData=(i=e.id,function(r){var s;if(i){var o,a="/"+r;if(((s=localStorage)===null||s===void 0?void 0:s.getItem(ur+i+"/v"))===1)try{o=JSON.parse(localStorage[ur+i+a])}catch{}return o}}),this.setPersistedData=function(r){var s;return r?((s=localStorage)===null||s===void 0||s.setItem(ur+r+"/v",1),function(o,a){var l,c="/"+a,d=JSON.stringify(o);o&&a&&((l=localStorage)===null||l===void 0||l.setItem(ur+r+c,d),dispatchEvent(new Event("storage")))}):function(){}}(e.id),this.clearPersistedData=function(r){return function(s){var o=ur+"/"+r+"/";if(s)localStorage.removeItem(o+s);else for(var a in localStorage)a.includes(o)&&localStorage.removeItem(a)}}(e.id),this.applySettings(t,e),this.state={inputText:"",editing:!1,composing:!1,actions:{},mixMode:{},dropdown:{},flaggedTags:{}},this.value=[],this.listeners={},this.DOM={},this.build(t),Tb.call(this),this.getCSSVars(),this.loadOriginalValues(),this.events.customBinding.call(this),this.events.binding.call(this),t.autofocus&&this.DOM.input.focus(),t.__tagify=this}hr.prototype={_dropdown:Sb,placeCaretAfterNode:vn,getSetTagData:Z,helpers:{sameStr:dr,removeCollectionProp:ud,omit:za,isObject:At,parseHTML:Ha,escapeHTML:jn,extend:be,concatWithoutDups:hd,getUID:pd,isNodeTag:Bn},customEventsList:["change","add","remove","invalid","input","paste","click","keydown","focus","blur","edit:input","edit:beforeUpdate","edit:updated","edit:start","edit:keydown","dropdown:show","dropdown:hide","dropdown:select","dropdown:updated","dropdown:noMatch","dropdown:scroll"],dataProps:["__isValid","__removed","__originalData","__originalHTML","__tagId"],trim:function(t){return this.settings.trim&&t&&typeof t=="string"?t.trim():t},parseHTML:Ha,templates:xb,parseTemplate:function(t,e){return Ha((t=this.settings.templates[t]||t).apply(this,e))},set whitelist(t){var e=t&&Array.isArray(t);this.settings.whitelist=e?t:[],this.setPersistedData(e?t:[],"whitelist")},get whitelist(){return this.settings.whitelist},set userInput(t){this.settings.userInput=!!t,this.setContentEditable(!!t)},get userInput(){return this.settings.userInput},generateClassSelectors:function(t){var e=function(i){var r=i;Object.defineProperty(t,r+"Selector",{get:function(){return"."+this[r].split(" ")[0]}})};for(var n in t)e(n)},applySettings:function(t,e){var n,i;ja.templates=this.templates;var r=be({},ja,e.mode=="mix"?{dropdown:{position:"text"}}:{}),s=this.settings=be({},r,e);if(s.disabled=t.hasAttribute("disabled"),s.readonly=s.readonly||t.hasAttribute("readonly"),s.placeholder=jn(t.getAttribute("placeholder")||s.placeholder||""),s.required=t.hasAttribute("required"),this.generateClassSelectors(s.classNames),this.isIE&&(s.autoComplete=!1),["whitelist","blacklist"].forEach(function(a){var l=t.getAttribute("data-"+a);l&&Ut(l=l.split(s.delimiters),Array)&&(s[a]=l)}),"autoComplete"in e&&!At(e.autoComplete)&&(s.autoComplete=ja.autoComplete,s.autoComplete.enabled=e.autoComplete),s.mode=="mix"&&(s.pattern=s.pattern||/@/,s.autoComplete.rightKey=!0,s.delimiters=e.delimiters||null,s.tagTextProp&&!s.dropdown.searchKeys.includes(s.tagTextProp)&&s.dropdown.searchKeys.push(s.tagTextProp)),t.pattern)try{s.pattern=new RegExp(t.pattern)}catch{}if(s.delimiters){s._delimiters=s.delimiters;try{s.delimiters=new RegExp(this.settings.delimiters,"g")}catch{}}(s.disabled||s.readonly)&&(s.userInput=!1),this.TEXTS=bd({},Ab,s.texts||{}),s.mode=="select"&&(s.dropdown.includeSelectedTags=!0),(s.mode!="select"||!((n=e.dropdown)===null||n===void 0)&&n.enabled)&&s.userInput||(s.dropdown.enabled=0),s.disabled&&(s.dropdown.enabled=!1),s.dropdown.appendTarget=((i=e.dropdown)===null||i===void 0?void 0:i.appendTarget)||document.body,s.dropdown.includeSelectedTags===void 0&&(s.dropdown.includeSelectedTags=s.duplicates);var o=this.getPersistedData("whitelist");Array.isArray(o)&&(this.whitelist=Array.isArray(s.whitelist)?hd(s.whitelist,o):o)},getAttributes:function(t){var e,n=this.getCustomAttributes(t),i="";for(e in n)i+=" "+e+(t[e]!==void 0?'="'.concat(n[e],'"'):"");return i},getCustomAttributes:function(t){if(!At(t))return"";var e,n={};for(e in t)e.slice(0,2)!="__"&&e!="class"&&t.hasOwnProperty(e)&&t[e]!==void 0&&(n[e]=jn(t[e]));return n},setStateSelection:function(){var t=window.getSelection(),e={anchorOffset:t.anchorOffset,anchorNode:t.anchorNode,range:t.getRangeAt&&t.rangeCount&&t.getRangeAt(0)};return this.state.selection=e,e},getCSSVars:function(){var t,e,n,i=getComputedStyle(this.DOM.scope,null);this.CSSVars={tagHideTransition:(t=function(r){if(!r)return{};var s=(r=r.trim().split(" ")[0]).split(/\d+/g).filter(function(o){return o}).pop().trim();return{value:+r.split(s).filter(function(o){return o})[0].trim(),unit:s}}((n="tag-hide-transition",i.getPropertyValue("--"+n))),e=t.value,t.unit=="s"?1e3*e:e)}},build:function(t){var e=this.DOM,n=t.closest("label");this.settings.mixMode.integrated?(e.originalInput=null,e.scope=t,e.input=t):(e.originalInput=t,e.originalInput_tabIndex=t.tabIndex,e.scope=this.parseTemplate("wrapper",[t,this.settings]),e.input=e.scope.querySelector(this.settings.classNames.inputSelector),t.parentNode.insertBefore(e.scope,t),t.tabIndex=-1),n&&n.setAttribute("for","")},destroy:function(){var t;this.events.unbindGlobal.call(this),(t=this.DOM.scope.parentNode)===null||t===void 0||t.removeChild(this.DOM.scope),this.DOM.originalInput.tabIndex=this.DOM.originalInput_tabIndex,delete this.DOM.originalInput.__tagify,this.dropdown.hide(!0),this.removeAllCustomListeners(),clearTimeout(this.dropdownHide__bindEventsTimeout),clearInterval(this.listeners.main.originalInputValueObserverInterval)},loadOriginalValues:function(t){var e,n=this.settings;if(this.state.blockChangeEvent=!0,t===void 0){var i=this.getPersistedData("value");t=i&&!this.DOM.originalInput.value?i:n.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value}if(this.removeAllTags(),t)if(n.mode=="mix")this.parseMixTags(t),(e=this.DOM.input.lastChild)&&e.tagName=="BR"||this.DOM.input.insertAdjacentHTML("beforeend","<br>");else{try{Ut(JSON.parse(t),Array)&&(t=JSON.parse(t))}catch{}this.addTags(t,!0).forEach(function(r){return r&&r.classList.add(n.classNames.tagNoAnimation)})}else this.postUpdate();this.state.lastOriginalValueReported=n.mixMode.integrated?"":this.DOM.originalInput.value},cloneEvent:function(t){var e={};for(var n in t)n!="path"&&(e[n]=t[n]);return e},loading:function(t){return this.state.isLoading=t,this.DOM.scope.classList[t?"add":"remove"](this.settings.classNames.scopeLoading),this},tagLoading:function(t,e){return t&&t.classList[e?"add":"remove"](this.settings.classNames.tagLoading),this},toggleClass:function(t,e){typeof t=="string"&&this.DOM.scope.classList.toggle(t,e)},toggleScopeValidation:function(t){var e=t===!0||t===void 0;!this.settings.required&&t&&t===this.TEXTS.empty&&(e=!0),this.toggleClass(this.settings.classNames.tagInvalid,!e),this.DOM.scope.title=e?"":t},toggleFocusClass:function(t){this.toggleClass(this.settings.classNames.focus,!!t)},setPlaceholder:function(t){var e=this;["data","aria"].forEach(function(n){return e.DOM.input.setAttribute("".concat(n,"-placeholder"),t)})},triggerChangeEvent:function(){if(!this.settings.mixMode.integrated){var t=this.DOM.originalInput,e=this.state.lastOriginalValueReported!==t.value,n=new CustomEvent("change",{bubbles:!0});e&&(this.state.lastOriginalValueReported=t.value,n.simulated=!0,t._valueTracker&&t._valueTracker.setValue(Math.random()),t.dispatchEvent(n),this.trigger("change",this.state.lastOriginalValueReported),t.value=this.state.lastOriginalValueReported)}},events:Pb,fixFirefoxLastTagNoCaret:function(){},setRangeAtStartEnd:function(t,e){if(e){t=typeof t=="number"?t:!!t,e=e.lastChild||e;var n=document.getSelection();if(Ut(n.focusNode,Element)&&!this.DOM.input.contains(n.focusNode))return!0;try{n.rangeCount>=1&&["Start","End"].forEach(function(i){return n.getRangeAt(0)["set"+i](e,t||e.length)})}catch(i){console.warn(i)}}},insertAfterTag:function(t,e){if(e=e||this.settings.mixMode.insertAfterTag,t&&t.parentNode&&e)return e=typeof e=="string"?document.createTextNode(e):e,t.parentNode.insertBefore(e,t.nextSibling),e},editTagChangeDetected:function(t){var e=t.__originalData;for(var n in e)if(!this.dataProps.includes(n)&&t[n]!=e[n])return!0;return!1},getTagTextNode:function(t){return t.querySelector(this.settings.classNames.tagTextSelector)},setTagTextNode:function(t,e){this.getTagTextNode(t).innerHTML=jn(e)},editTag:function(t,e){var n=this;t=t||this.getLastTag(),e=e||{};var i=this.settings,r=this.getTagTextNode(t),s=this.getNodeIndex(t),o=Z(t),a=this.events.callbacks,l=!0,c=i.mode=="select";if(!c&&this.dropdown.hide(),r){if(!Ut(o,Object)||!("editable"in o)||o.editable)return o=Z(t,{__originalData:be({},o),__originalHTML:t.cloneNode(!0)}),Z(o.__originalHTML,o.__originalData),r.setAttribute("contenteditable",!0),t.classList.add(i.classNames.tagEditing),this.events.callbacks.onEditTagFocus.call(this,t),r.addEventListener("click",a.onEditTagClick.bind(this,t)),r.addEventListener("blur",a.onEditTagBlur.bind(this,this.getTagTextNode(t))),r.addEventListener("input",a.onEditTagInput.bind(this,r)),r.addEventListener("paste",a.onEditTagPaste.bind(this,r)),r.addEventListener("keydown",function(d){return a.onEditTagkeydown.call(n,d,t)}),r.addEventListener("compositionstart",a.onCompositionStart.bind(this)),r.addEventListener("compositionend",a.onCompositionEnd.bind(this)),e.skipValidation||(l=this.editTagToggleValidity(t)),r.originalIsValid=l,this.trigger("edit:start",{tag:t,index:s,data:o,isValid:l}),r.focus(),!c&&this.setRangeAtStartEnd(!1,r),i.dropdown.enabled===0&&!c&&this.dropdown.show(),this.state.hasFocus=!0,this}else _n.warn("Cannot find element in Tag template: .",i.classNames.tagTextSelector)},editTagToggleValidity:function(t,e){var n;if(e=e||Z(t))return(n=!("__isValid"in e)||e.__isValid===!0)||this.removeTagsFromValue(t),this.update(),t.classList.toggle(this.settings.classNames.tagNotAllowed,!n),e.__isValid=n,e.__isValid;_n.warn("tag has no data: ",t,e)},onEditTagDone:function(t,e){t=t||this.state.editing.scope,e=e||{};var n,i,r=this.settings,s={tag:t,index:this.getNodeIndex(t),previousData:Z(t),data:e};this.trigger("edit:beforeUpdate",s,{cloneData:!1}),this.state.editing=!1,delete e.__originalData,delete e.__originalHTML,t&&t.parentNode&&(((i=e[r.tagTextProp])!==void 0?!((n=(i+="").trim)===null||n===void 0)&&n.call(i):!(r.tagTextProp in e)&&e.value)?(t=this.replaceTag(t,e),this.editTagToggleValidity(t,e),r.a11y.focusableTags?t.focus():r.mode!="select"&&vn(t)):this.removeTags(t)),this.trigger("edit:updated",s),r.dropdown.closeOnSelect&&this.dropdown.hide(),this.settings.keepInvalidTags&&this.reCheckInvalidTags()},replaceTag:function(t,e){e&&e.value!==""&&e.value!==void 0||(e=t.__tagifyTagData),e.__isValid&&e.__isValid!=1&&be(e,this.getInvalidTagAttrs(e,e.__isValid));var n=this.createTagElem(e);return t.parentNode.replaceChild(n,t),this.updateValueByDOMTags(),n},updateValueByDOMTags:function(){var t=this;this.value.length=0;var e=this.settings.classNames,n=[e.tagNotAllowed.split(" ")[0],e.tagHide];[].forEach.call(this.getTagElms(),function(i){Xs(i.classList).some(function(r){return n.includes(r)})||t.value.push(Z(i))}),this.update(),this.dropdown.refilter()},injectAtCaret:function(t,e){var n;if(e=e||((n=this.state.selection)===null||n===void 0?void 0:n.range),typeof t=="string"&&(t=document.createTextNode(t)),!e&&t)return this.appendMixTags(t),this;var i=wd(t,e);return this.setRangeAtStartEnd(!1,i),this.updateValueByDOMTags(),this.update(),this},input:{set:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this.settings,i=n.dropdown.closeOnSelect;this.state.inputText=t,e&&(this.DOM.input.innerHTML=jn(""+t),t&&this.toggleClass(n.classNames.empty,!this.DOM.input.innerHTML)),!t&&i&&this.dropdown.hide.bind(this),this.input.autocomplete.suggest.call(this),this.input.validate.call(this)},raw:function(){return this.DOM.input.textContent},validate:function(){var t=!this.state.inputText||this.validateTag({value:this.state.inputText})===!0;return this.DOM.input.classList.toggle(this.settings.classNames.inputInvalid,!t),t},normalize:function(t,e){var n=t||this.DOM.input,i=[];n.childNodes.forEach(function(r){return r.nodeType==3&&i.push(r.nodeValue)}),i=i.join(`
`);try{i=i.replace(/(?:\r\n|\r|\n)/g,this.settings.delimiters.source.charAt(0))}catch{}return i=i.replace(/\s/g," "),e?.trim?this.trim(i):i},autocomplete:{suggest:function(t){if(this.settings.autoComplete.enabled){typeof(t=t||{value:""})!="object"&&(t={value:t});var e=this.dropdown.getMappedValue(t);if(typeof e!="number"){var n=this.state.inputText.toLowerCase(),i=e.substr(0,this.state.inputText.length).toLowerCase(),r=e.substring(this.state.inputText.length);e&&this.state.inputText&&i==n?(this.DOM.input.setAttribute("data-suggest",r),this.state.inputSuggestion=t):(this.DOM.input.removeAttribute("data-suggest"),delete this.state.inputSuggestion)}}},set:function(t){var e=this.DOM.input.getAttribute("data-suggest"),n=t||(e?this.state.inputText+e:null);return!!n&&(this.settings.mode=="mix"?this.replaceTextWithNode(document.createTextNode(this.state.tag.prefix+n)):(this.input.set.call(this,n),this.setRangeAtStartEnd(!1,this.DOM.input)),this.input.autocomplete.suggest.call(this),this.dropdown.hide(),!0)}}},getTagIdx:function(t){return this.value.findIndex(function(e){return e.__tagId==(t||{}).__tagId})},getNodeIndex:function(t){var e=0;if(t)for(;t=t.previousElementSibling;)e++;return e},getTagElms:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i="."+Xs(this.settings.classNames.tag.split(" ")).concat(Xs(e)).join(".");return[].slice.call(this.DOM.scope.querySelectorAll(i))},getLastTag:function(){var t=this.settings.classNames,e=this.DOM.scope.querySelectorAll("".concat(t.tagSelector,":not(.").concat(t.tagHide,"):not([readonly])"));return e[e.length-1]},isTagDuplicate:function(t,e,n){var i=0,r=!0,s=!1,o=void 0;try{for(var a,l=this.value[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;dr(this.trim(""+t),c.value,e)&&n!=c.__tagId&&i++}}catch(d){s=!0,o=d}finally{try{r||l.return==null||l.return()}finally{if(s)throw o}}return i},getTagIndexByValue:function(t){var e=this,n=[],i=this.settings.dropdown.caseSensitive;return this.getTagElms().forEach(function(r,s){r.__tagifyTagData&&dr(e.trim(r.__tagifyTagData.value),t,i)&&n.push(s)}),n},getTagElmByValue:function(t){var e=this.getTagIndexByValue(t)[0];return this.getTagElms()[e]},flashTag:function(t){var e=this;t&&(t.classList.add(this.settings.classNames.tagFlash),setTimeout(function(){t.classList.remove(e.settings.classNames.tagFlash)},100))},isTagBlacklisted:function(t){return t=this.trim(t.toLowerCase()),this.settings.blacklist.filter(function(e){return(""+e).toLowerCase()==t}).length},isTagWhitelisted:function(t){return!!this.getWhitelistItem(t)},getWhitelistItem:function(t,e,n){e=e||"value";var i,r=this.settings;return(n=n||r.whitelist).some(function(s){var o=typeof s=="object"?s[e]||s.value:s;if(dr(o,t,r.dropdown.caseSensitive,r.trim))return i=typeof s=="object"?s:{value:s},!0}),i||e!="value"||r.tagTextProp=="value"||(i=this.getWhitelistItem(t,r.tagTextProp,n)),i},validateTag:function(t){var e=this.settings,n="value"in t?"value":e.tagTextProp,i=this.trim(t[n]+"");return(t[n]+"").trim()?e.mode!="mix"&&e.pattern&&Ut(e.pattern,RegExp)&&!e.pattern.test(i)?this.TEXTS.pattern:!e.duplicates&&this.isTagDuplicate(i,e.dropdown.caseSensitive,t.__tagId)?this.TEXTS.duplicate:this.isTagBlacklisted(i)||e.enforceWhitelist&&!this.isTagWhitelisted(i)?this.TEXTS.notAllowed:!e.validate||e.validate(t):this.TEXTS.empty},getInvalidTagAttrs:function(t,e){return{"aria-invalid":!0,class:"".concat(t.class||""," ").concat(this.settings.classNames.tagNotAllowed).trim(),title:e}},hasMaxTags:function(){return this.value.length>=this.settings.maxTags&&this.TEXTS.exceed},setReadonly:function(t,e){var n=this.settings;this.DOM.scope.contains(document.activeElement)&&document.activeElement.blur(),n[e||"readonly"]=t,this.DOM.scope[(t?"set":"remove")+"Attribute"](e||"readonly",!0),this.settings.userInput=!0,this.setContentEditable(!t)},setContentEditable:function(t){this.DOM.scope.querySelectorAll("[data-can-editable]").forEach(function(e){e.contentEditable=t,e.tabIndex=t?0:-1})},setDisabled:function(t){this.setReadonly(t,"disabled")},normalizeTags:function(t){var e=this,n=this.settings,i=n.whitelist,r=n.delimiters,s=n.mode,o=n.tagTextProp,a=[],l=!!i&&Ut(i[0],Object),c=Array.isArray(t),d=c&&t[0].value,u=function(h){return(h+"").split(r).reduce(function(f,p){var g,m=e.trim(p);return m&&f.push((Ka(g={},o,m),Ka(g,"value",m),g)),f},[])};if(typeof t=="number"&&(t=t.toString()),typeof t=="string"){if(!t.trim())return[];t=u(t)}else c&&(t=t.reduce(function(h,f){if(At(f)){var p=be({},f);o in p||(o="value"),p[o]=e.trim(p[o]),(p[o]||p[o]===0)&&h.push(p)}else if(f!=null&&f!==""&&f!==void 0){var g;(g=h).push.apply(g,Xs(u(f)))}return h},[]));return l&&!d&&(t.forEach(function(h){var f=a.map(function(m){return m.value}),p=e.dropdown.filterListItems.call(e,h[o],{exact:!0});e.settings.duplicates||(p=p.filter(function(m){return!f.includes(m.value)}));var g=p.length>1?e.getWhitelistItem(h[o],o,p):p[0];g&&Ut(g,Object)?a.push(g):s!="mix"&&(h.value==null&&(h.value=h[o]),a.push(h))}),a.length&&(t=a)),t},parseMixTags:function(t){var e=this,n=this.settings,i=n.mixTagsInterpolator,r=n.duplicates,s=n.transformTag,o=n.enforceWhitelist,a=n.maxTags,l=n.tagTextProp,c=[];t=t.split(i[0]).map(function(u,h){var f,p,g,m=u.split(i[1]),v=m[0],b=c.length==a;try{if(v==+v)throw Error;p=JSON.parse(v)}catch{p=e.normalizeTags(v)[0]||{value:v}}if(s.call(e,p),b||!(m.length>1)||o&&!e.isTagWhitelisted(p.value)||!r&&e.isTagDuplicate(p.value)){if(u)return h?i[0]+u:u}else p[f=p[l]?l:"value"]=e.trim(p[f]),g=e.createTagElem(p),c.push(p),g.classList.add(e.settings.classNames.tagNoAnimation),m[0]=g.outerHTML,e.value.push(p);return m.join("")}).join(""),this.DOM.input.innerHTML=t,this.DOM.input.appendChild(document.createTextNode("")),this.DOM.input.normalize();var d=this.getTagElms();return d.forEach(function(u,h){return Z(u,c[h])}),this.update({withoutChangeEvent:!0}),Ed(d,this.state.hasFocus),t},replaceTextWithNode:function(t,e){if(this.state.tag||e){e=e||this.state.tag.prefix+this.state.tag.value;var n,i,r=this.state.selection||window.getSelection(),s=r.anchorNode,o=this.state.tag.delimiters?this.state.tag.delimiters.length:0;return s.splitText(r.anchorOffset-o),(n=s.nodeValue.lastIndexOf(e))==-1||(i=s.splitText(n),t&&s.parentNode.replaceChild(t,i)),!0}},prepareNewTagNode:function(t,e){e=e||{};var n=this.settings,i=[],r={},s=Object.assign({},t,{value:t.value+""});if(t=Object.assign({},s),n.transformTag.call(this,t),t.__isValid=this.hasMaxTags()||this.validateTag(t),t.__isValid!==!0){if(e.skipInvalid)return;if(be(r,this.getInvalidTagAttrs(t,t.__isValid),{__preInvalidData:s}),t.__isValid==this.TEXTS.duplicate&&this.flashTag(this.getTagElmByValue(t.value)),!n.createInvalidTags)return void i.push(t.value)}return"readonly"in t&&(t.readonly?r["aria-readonly"]=!0:delete t.readonly),{tagElm:this.createTagElem(t,r),tagData:t,aggregatedInvalidInput:i}},postProcessNewTagNode:function(t,e){var n=this,i=this.settings,r=e.__isValid;r&&r===!0?this.value.push(e):(this.trigger("invalid",{data:e,index:this.value.length,tag:t,message:r}),i.keepInvalidTags||setTimeout(function(){return n.removeTags(t,!0)},1e3)),this.dropdown.position()},selectTag:function(t,e){var n=this;if(!this.settings.enforceWhitelist||this.isTagWhitelisted(e.value)){this.state.actions.selectOption&&setTimeout(function(){return n.setRangeAtStartEnd(!1,n.DOM.input)});var i=this.getLastTag();return i?this.replaceTag(i,e):this.appendTag(t),this.value[0]=e,this.update(),this.trigger("add",{tag:t,data:e}),[t]}},addEmptyTag:function(t){var e=be({value:""},t||{}),n=this.createTagElem(e);Z(n,e),this.appendTag(n),this.editTag(n,{skipValidation:!0}),this.toggleFocusClass(!0)},addTags:function(t,e,n){var i=this,r=[],s=this.settings,o=[],a=document.createDocumentFragment(),l=[];if(!t||t.length==0)return r;switch(t=this.normalizeTags(t),s.mode){case"mix":return this.addMixTags(t);case"select":e=!1,this.removeAllTags()}return this.DOM.input.removeAttribute("style"),t.forEach(function(c){var d=i.prepareNewTagNode(c,{skipInvalid:n||s.skipInvalid});if(d){var u=d.tagElm;if(c=d.tagData,o=d.aggregatedInvalidInput,r.push(u),s.mode=="select")return i.selectTag(u,c);a.appendChild(u),i.postProcessNewTagNode(u,c),l.push({tagElm:u,tagData:c})}}),this.appendTag(a),l.forEach(function(c){var d=c.tagElm,u=c.tagData;return i.trigger("add",{tag:d,index:i.getTagIdx(u),data:u})}),this.update(),t.length&&e&&(this.input.set.call(this,s.createInvalidTags?"":o.join(s._delimiters)),this.setRangeAtStartEnd(!1,this.DOM.input)),this.dropdown.refilter(),r},addMixTags:function(t){var e=this;if((t=this.normalizeTags(t))[0].prefix||this.state.tag)return this.prefixedTextToTag(t[0]);var n=document.createDocumentFragment();return t.forEach(function(i){var r=e.prepareNewTagNode(i);n.appendChild(r.tagElm),e.insertAfterTag(r.tagElm),e.postProcessNewTagNode(r.tagElm,r.tagData)}),this.appendMixTags(n),n.children},appendMixTags:function(t){var e=!!this.state.selection;e?this.injectAtCaret(t):(this.DOM.input.focus(),(e=this.setStateSelection()).range.setStart(this.DOM.input,e.range.endOffset),e.range.setEnd(this.DOM.input,e.range.endOffset),this.DOM.input.appendChild(t),this.updateValueByDOMTags(),this.update())},prefixedTextToTag:function(t){var e,n,i,r=this,s=this.settings,o=(e=this.state.tag)===null||e===void 0?void 0:e.delimiters;if(t.prefix=t.prefix||this.state.tag?this.state.tag.prefix:(s.pattern.source||s.pattern)[0],i=this.prepareNewTagNode(t),n=i.tagElm,this.replaceTextWithNode(n)||this.DOM.input.appendChild(n),setTimeout(function(){return n.classList.add(r.settings.classNames.tagNoAnimation)},300),this.update(),!o){var a=this.insertAfterTag(n)||n;setTimeout(vn,0,a)}return this.state.tag=null,this.postProcessNewTagNode(n,i.tagData),n},appendTag:function(t){var e=this.DOM,n=e.input;e.scope.insertBefore(t,n)},createTagElem:function(t,e){t.__tagId=pd();var n,i=be({},t,bd({value:jn(t.value+"")},e));return function(r){for(var s,o=document.createNodeIterator(r,NodeFilter.SHOW_TEXT,null,!1);s=o.nextNode();)s.textContent.trim()||s.parentNode.removeChild(s)}(n=this.parseTemplate("tag",[i,this])),Z(n,t),n},reCheckInvalidTags:function(){var t=this,e=this.settings;this.getTagElms(e.classNames.tagNotAllowed).forEach(function(n,i){var r=Z(n),s=t.hasMaxTags(),o=t.validateTag(r),a=o===!0&&!s;if(e.mode=="select"&&t.toggleScopeValidation(o),a)return r=r.__preInvalidData?r.__preInvalidData:{value:r.value},t.replaceTag(n,r);n.title=s||o})},removeTags:function(t,e,n){var i,r=this,s=this.settings;if(t=t&&Ut(t,HTMLElement)?[t]:Ut(t,Array)?t:t?[t]:[this.getLastTag()].filter(function(o){return o}),i=t.reduce(function(o,a){a&&typeof a=="string"&&(a=r.getTagElmByValue(a));var l=Z(a);return a&&l&&!l.readonly&&o.push({node:a,idx:r.getTagIdx(l),data:Z(a,{__removed:!0})}),o},[]),n=typeof n=="number"?n:this.CSSVars.tagHideTransition,s.mode=="select"&&(n=0,this.input.set.call(this)),i.length==1&&s.mode!="select"&&i[0].node.classList.contains(s.classNames.tagNotAllowed)&&(e=!0),i.length)return s.hooks.beforeRemoveTag(i,{tagify:this}).then(function(){var o=function(a){a.node.parentNode&&(a.node.parentNode.removeChild(a.node),e?s.keepInvalidTags&&this.trigger("remove",{tag:a.node,index:a.idx}):(this.trigger("remove",{tag:a.node,index:a.idx,data:a.data}),this.dropdown.refilter(),this.dropdown.position(),this.DOM.input.normalize(),s.keepInvalidTags&&this.reCheckInvalidTags()))};n&&n>10&&i.length==1?function(a){a.node.style.width=parseFloat(window.getComputedStyle(a.node).width)+"px",document.body.clientTop,a.node.classList.add(s.classNames.tagHide),setTimeout(o.bind(this),n,a)}.call(r,i[0]):i.forEach(o.bind(r)),e||(r.removeTagsFromValue(i.map(function(a){return a.node})),r.update(),s.mode=="select"&&s.userInput&&r.setContentEditable(!0))}).catch(function(o){})},removeTagsFromDOM:function(){this.getTagElms().forEach(function(t){return t.remove()})},removeTagsFromValue:function(t){var e=this;(t=Array.isArray(t)?t:[t]).forEach(function(n){var i=Z(n),r=e.getTagIdx(i);r>-1&&e.value.splice(r,1)})},removeAllTags:function(t){var e=this;t=t||{},this.value=[],this.settings.mode=="mix"?this.DOM.input.innerHTML="":this.removeTagsFromDOM(),this.dropdown.refilter(),this.dropdown.position(),this.state.dropdown.visible&&setTimeout(function(){e.DOM.input.focus()}),this.settings.mode=="select"&&(this.input.set.call(this),this.settings.userInput&&this.setContentEditable(!0)),this.update(t)},postUpdate:function(){this.state.blockChangeEvent=!1;var t,e,n=this.settings,i=n.classNames,r=n.mode=="mix"?n.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value.trim():this.value.length+this.input.raw.call(this).length;this.toggleClass(i.hasMaxTags,this.value.length>=n.maxTags),this.toggleClass(i.hasNoTags,!this.value.length),this.toggleClass(i.empty,!r),n.mode=="select"&&this.toggleScopeValidation((e=this.value)===null||e===void 0||(t=e[0])===null||t===void 0?void 0:t.__isValid)},setOriginalInputValue:function(t){var e=this.DOM.originalInput;this.settings.mixMode.integrated||(e.value=t,e.tagifyValue=e.value,this.setPersistedData(t,"value"))},update:function(t){clearTimeout(this.debouncedUpdateTimeout),this.debouncedUpdateTimeout=setTimeout(function(){var e=this.getInputValue();this.setOriginalInputValue(e),this.settings.onChangeAfterBlur&&(t||{}).withoutChangeEvent||this.state.blockChangeEvent||this.triggerChangeEvent(),this.postUpdate()}.bind(this),100),this.events.bindOriginaInputListener.call(this,100)},getInputValue:function(){var t=this.getCleanValue();return this.settings.mode=="mix"?this.getMixedTagsAsString(t):t.length?this.settings.originalInputValueFormat?this.settings.originalInputValueFormat(t):JSON.stringify(t):""},getCleanValue:function(t){return ud(t||this.value,this.dataProps)},getMixedTagsAsString:function(){var t="",e=this,n=this.settings,i=n.originalInputValueFormat||JSON.stringify,r=n.mixTagsInterpolator;return function s(o){o.childNodes.forEach(function(a){if(a.nodeType==1){var l=Z(a);if(a.tagName=="BR"&&(t+=`\r
`),l&&Bn.call(e,a)){if(l.__removed)return;t+=r[0]+i(za(l,e.dataProps))+r[1]}else a.getAttribute("style")||["B","I","U"].includes(a.tagName)?t+=a.textContent:a.tagName!="DIV"&&a.tagName!="P"||(t+=`\r
`,s(a))}else t+=a.textContent})}(this.DOM.input),t}},hr.prototype.removeTag=hr.prototype.removeTags;function Td(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Nt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Td(Object(n),!0).forEach(function(i){Db(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Td(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function eo(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?eo=function(e){return typeof e}:eo=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eo(t)}function Db(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wn(){return wn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wn.apply(this,arguments)}function Nb(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function Ib(t,e){if(t==null)return{};var n=Nb(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var Rb="1.15.6";function $t(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var En=$t(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),uo=$t(/Edge/i),Sd=$t(/firefox/i),to=$t(/safari/i)&&!$t(/chrome/i)&&!$t(/android/i),il=$t(/iP(ad|od|hone)/i),Rd=$t(/chrome/i)&&$t(/android/i),Ld={capture:!1,passive:!1};function K(t,e,n){t.addEventListener(e,n,!En&&Ld)}function W(t,e,n){t.removeEventListener(e,n,!En&&Ld)}function so(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function kd(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Ot(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&so(t,e):so(t,e))||i&&t===n)return t;if(t===n)break}while(t=kd(t))}return null}var Ad=/\s+/g;function it(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(Ad," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(Ad," ")}}function M(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function Ui(t,e){var n="";if(typeof t=="string")n=t;else do{var i=M(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function Md(t,e,n){if(t){var i=t.getElementsByTagName(e),r=0,s=i.length;if(n)for(;r<s;r++)n(i[r],r);return i}return[]}function Ht(){var t=document.scrollingElement;return t||document.documentElement}function me(t,e,n,i,r){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,d,u;if(t!==window&&t.parentNode&&t!==Ht()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,d=s.height,u=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(e||n)&&t!==window&&(r=r||t.parentNode,!En))do if(r&&r.getBoundingClientRect&&(M(r,"transform")!=="none"||n&&M(r,"position")!=="static")){var h=r.getBoundingClientRect();o-=h.top+parseInt(M(r,"border-top-width")),a-=h.left+parseInt(M(r,"border-left-width")),l=o+s.height,c=a+s.width;break}while(r=r.parentNode);if(i&&t!==window){var f=Ui(r||t),p=f&&f.a,g=f&&f.d;f&&(o/=g,a/=p,u/=p,d/=g,l=o+d,c=a+u)}return{top:o,left:a,bottom:l,right:c,width:u,height:d}}}function xd(t,e,n){for(var i=oo(t,!0),r=me(t)[e];i;){var s=me(i)[n],o=void 0;if(n==="top"||n==="left"?o=r>=s:o=r<=s,!o)return i;if(i===Ht())break;i=oo(i,!1)}return!1}function $i(t,e,n,i){for(var r=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==U.ghost&&(i||o[s]!==U.dragged)&&Ot(o[s],n.draggable,t,!1)){if(r===e)return o[s];r++}s++}return null}function rl(t,e){for(var n=t.lastElementChild;n&&(n===U.ghost||M(n,"display")==="none"||e&&!so(n,e));)n=n.previousElementSibling;return n||null}function _t(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==U.clone&&(!e||so(t,e))&&n++;return n}function Od(t){var e=0,n=0,i=Ht();if(t)do{var r=Ui(t),s=r.a,o=r.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==i&&(t=t.parentNode));return[e,n]}function Lb(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return-1}function oo(t,e){if(!t||!t.getBoundingClientRect)return Ht();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=M(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Ht();if(i||e)return n;i=!0}}while(n=n.parentNode);return Ht()}function kb(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Xa(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Ya;function Fd(t,e){return function(){if(!Ya){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),Ya=setTimeout(function(){Ya=void 0},e)}}}function Ud(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function $d(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function Hd(t,e,n){var i={};return Array.from(t.children).forEach(function(r){var s,o,a,l;if(!(!Ot(r,e.draggable,t,!1)||r.animated||r===n)){var c=me(r);i.left=Math.min((s=i.left)!==null&&s!==void 0?s:1/0,c.left),i.top=Math.min((o=i.top)!==null&&o!==void 0?o:1/0,c.top),i.right=Math.max((a=i.right)!==null&&a!==void 0?a:-1/0,c.right),i.bottom=Math.max((l=i.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var Ge="Sortable"+new Date().getTime();function Mb(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(r){if(!(M(r,"display")==="none"||r===U.ghost)){t.push({target:r,rect:me(r)});var s=Nt({},t[t.length-1].rect);if(r.thisAnimationDuration){var o=Ui(r,!0);o&&(s.top-=o.f,s.left-=o.e)}r.fromRect=s}})}},addAnimationState:function(i){t.push(i)},removeAnimationState:function(i){t.splice(Lb(t,{target:i}),1)},animateAll:function(i){var r=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,d=c.fromRect,u=me(c),h=c.prevFromRect,f=c.prevToRect,p=a.rect,g=Ui(c,!0);g&&(u.top-=g.f,u.left-=g.e),c.toRect=u,c.thisAnimationDuration&&Xa(h,u)&&!Xa(d,u)&&(p.top-u.top)/(p.left-u.left)===(d.top-u.top)/(d.left-u.left)&&(l=Ub(p,h,f,r.options)),Xa(u,d)||(c.prevFromRect=d,c.prevToRect=u,l||(l=r.options.animation),r.animate(c,p,u,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof i=="function"&&i()},o):typeof i=="function"&&i(),t=[]},animate:function(i,r,s,o){if(o){M(i,"transition",""),M(i,"transform","");var a=Ui(this.el),l=a&&a.a,c=a&&a.d,d=(r.left-s.left)/(l||1),u=(r.top-s.top)/(c||1);i.animatingX=!!d,i.animatingY=!!u,M(i,"transform","translate3d("+d+"px,"+u+"px,0)"),this.forRepaintDummy=Fb(i),M(i,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),M(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){M(i,"transition",""),M(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},o)}}}}function Fb(t){return t.offsetWidth}function Ub(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var Li=[],Ga={initializeByDefault:!0},vr={mount:function(e){for(var n in Ga)Ga.hasOwnProperty(n)&&!(n in e)&&(e[n]=Ga[n]);Li.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Li.push(e)},pluginEvent:function(e,n,i){var r=this;this.eventCanceled=!1,i.cancel=function(){r.eventCanceled=!0};var s=e+"Global";Li.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](Nt({sortable:n},i)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Nt({sortable:n},i)))})},initializePlugins:function(e,n,i,r){Li.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,wn(i,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var i={};return Li.forEach(function(r){typeof r.eventProperties=="function"&&wn(i,r.eventProperties.call(n[r.pluginName],e))}),i},modifyOption:function(e,n,i){var r;return Li.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(r=s.optionListeners[n].call(e[s.pluginName],i))}),r}};function $b(t){var e=t.sortable,n=t.rootEl,i=t.name,r=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,d=t.oldDraggableIndex,u=t.newDraggableIndex,h=t.originalEvent,f=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[Ge],!!e){var g,m=e.options,v="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!En&&!uo?g=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(i,!0,!0)),g.to=o||n,g.from=a||n,g.item=r||n,g.clone=s,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=d,g.newDraggableIndex=u,g.originalEvent=h,g.pullMode=f?f.lastPutMode:void 0;var b=Nt(Nt({},p),vr.getEventProperties(i,e));for(var E in b)g[E]=b[E];n&&n.dispatchEvent(g),m[v]&&m[v].call(e,g)}}var Hb=["evt"],Ye=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=i.evt,s=Ib(i,Hb);vr.pluginEvent.bind(U)(e,n,Nt({dragEl:S,parentEl:ce,ghostEl:j,rootEl:ne,nextEl:Wn,lastDownEl:no,cloneEl:oe,cloneHidden:yn,dragStarted:fr,putSortable:Pe,activeSortable:U.active,originalEvent:r,oldIndex:Fi,oldDraggableIndex:pr,newIndex:rt,newDraggableIndex:bn,hideGhostForTarget:qd,unhideGhostForTarget:Wd,cloneNowHidden:function(){yn=!0},cloneNowShown:function(){yn=!1},dispatchSortableEvent:function(a){je({sortable:n,name:a,originalEvent:r})}},s))};function je(t){$b(Nt({putSortable:Pe,cloneEl:oe,targetEl:S,rootEl:ne,oldIndex:Fi,oldDraggableIndex:pr,newIndex:rt,newDraggableIndex:bn},t))}var S,ce,j,ne,Wn,no,oe,yn,Fi,rt,pr,bn,Ys,Pe,Mi=!1,ao=!1,lo=[],Vn,xt,Ja,Qa,Cd,Pd,fr,ki,gr,mr=!1,Gs=!1,io,Fe,Za=[],tl=!1,co=[],ho=typeof document<"u",Js=il,Dd=uo||En?"cssFloat":"float",jb=ho&&!Rd&&!il&&"draggable"in document.createElement("div"),jd=function(){if(ho){if(En)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Bd=function(e,n){var i=M(e),r=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),s=$i(e,0,n),o=$i(e,1,n),a=s&&M(s),l=o&&M(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+me(s).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+me(o).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var u=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=r&&i[Dd]==="none"||o&&i[Dd]==="none"&&c+d>r)?"vertical":"horizontal"},Bb=function(e,n,i){var r=i?e.left:e.top,s=i?e.right:e.bottom,o=i?e.width:e.height,a=i?n.left:n.top,l=i?n.right:n.bottom,c=i?n.width:n.height;return r===a||s===l||r+o/2===a+c/2},Vb=function(e,n){var i;return lo.some(function(r){var s=r[Ge].options.emptyInsertThreshold;if(!(!s||rl(r))){var o=me(r),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return i=r}}),i},Vd=function(e){function n(s,o){return function(a,l,c,d){var u=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||u))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,d),o)(a,l,c,d);var h=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===h||s.join&&s.indexOf(h)>-1}}var i={},r=e.group;(!r||eo(r)!="object")&&(r={name:r}),i.name=r.name,i.checkPull=n(r.pull,!0),i.checkPut=n(r.put),i.revertClone=r.revertClone,e.group=i},qd=function(){!jd&&j&&M(j,"display","none")},Wd=function(){!jd&&j&&M(j,"display","")};ho&&!Rd&&document.addEventListener("click",function(t){if(ao)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),ao=!1,!1},!0);var qn=function(e){if(S){e=e.touches?e.touches[0]:e;var n=Vb(e.clientX,e.clientY);if(n){var i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[Ge]._onDragOver(i)}}},qb=function(e){S&&S.parentNode[Ge]._isOutsideThisEl(e.target)};function U(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=wn({},e),t[Ge]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Bd(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:U.supportPointer!==!1&&"PointerEvent"in window&&(!to||il),emptyInsertThreshold:5};vr.initializePlugins(this,t,n);for(var i in n)!(i in e)&&(e[i]=n[i]);Vd(e);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:jb,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?K(t,"pointerdown",this._onTapStart):(K(t,"mousedown",this._onTapStart),K(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(K(t,"dragover",this),K(t,"dragenter",this)),lo.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),wn(this,Mb())}U.prototype={constructor:U,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ki=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,S):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,r=this.options,s=r.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,d=r.filter;if(Qb(i),!S&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||r.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&to&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Ot(l,r.draggable,i,!1),!(l&&l.animated)&&no!==l)){if(Fi=_t(l),pr=_t(l,r.draggable),typeof d=="function"){if(d.call(this,e,l,this)){je({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:i,fromEl:i}),Ye("filter",n,{evt:e}),s&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(u){if(u=Ot(c,u.trim(),i,!1),u)return je({sortable:n,rootEl:u,name:"filter",targetEl:l,fromEl:i,toEl:i}),Ye("filter",n,{evt:e}),!0}),d)){s&&e.preventDefault();return}r.handle&&!Ot(c,r.handle,i,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,i){var r=this,s=r.el,o=r.options,a=s.ownerDocument,l;if(i&&!S&&i.parentNode===s){var c=me(i);if(ne=s,S=i,ce=S.parentNode,Wn=S.nextSibling,no=i,Ys=o.group,U.dragged=S,Vn={target:S,clientX:(n||e).clientX,clientY:(n||e).clientY},Cd=Vn.clientX-c.left,Pd=Vn.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,S.style["will-change"]="all",l=function(){if(Ye("delayEnded",r,{evt:e}),U.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Sd&&r.nativeDraggable&&(S.draggable=!0),r._triggerDragStart(e,n),je({sortable:r,name:"choose",originalEvent:e}),it(S,o.chosenClass,!0)},o.ignore.split(",").forEach(function(d){Md(S,d.trim(),el)}),K(a,"dragover",qn),K(a,"mousemove",qn),K(a,"touchmove",qn),o.supportPointer?(K(a,"pointerup",r._onDrop),!this.nativeDraggable&&K(a,"pointercancel",r._onDrop)):(K(a,"mouseup",r._onDrop),K(a,"touchend",r._onDrop),K(a,"touchcancel",r._onDrop)),Sd&&this.nativeDraggable&&(this.options.touchStartThreshold=4,S.draggable=!0),Ye("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(uo||En))){if(U.eventCanceled){this._onDrop();return}o.supportPointer?(K(a,"pointerup",r._disableDelayedDrag),K(a,"pointercancel",r._disableDelayedDrag)):(K(a,"mouseup",r._disableDelayedDrag),K(a,"touchend",r._disableDelayedDrag),K(a,"touchcancel",r._disableDelayedDrag)),K(a,"mousemove",r._delayedDragTouchMoveHandler),K(a,"touchmove",r._delayedDragTouchMoveHandler),o.supportPointer&&K(a,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){S&&el(S),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;W(e,"mouseup",this._disableDelayedDrag),W(e,"touchend",this._disableDelayedDrag),W(e,"touchcancel",this._disableDelayedDrag),W(e,"pointerup",this._disableDelayedDrag),W(e,"pointercancel",this._disableDelayedDrag),W(e,"mousemove",this._delayedDragTouchMoveHandler),W(e,"touchmove",this._delayedDragTouchMoveHandler),W(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?K(document,"pointermove",this._onTouchMove):n?K(document,"touchmove",this._onTouchMove):K(document,"mousemove",this._onTouchMove):(K(S,"dragend",this),K(ne,"dragstart",this._onDragStart));try{document.selection?ro(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Mi=!1,ne&&S){Ye("dragStarted",this,{evt:n}),this.nativeDraggable&&K(document,"dragover",qb);var i=this.options;!e&&it(S,i.dragClass,!1),it(S,i.ghostClass,!0),U.active=this,e&&this._appendGhost(),je({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(xt){this._lastX=xt.clientX,this._lastY=xt.clientY,qd();for(var e=document.elementFromPoint(xt.clientX,xt.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(xt.clientX,xt.clientY),e!==n);)n=e;if(S.parentNode[Ge]._isOutsideThisEl(e),n)do{if(n[Ge]){var i=void 0;if(i=n[Ge]._onDragOver({clientX:xt.clientX,clientY:xt.clientY,target:e,rootEl:n}),i&&!this.options.dragoverBubble)break}e=n}while(n=kd(n));Wd()}},_onTouchMove:function(e){if(Vn){var n=this.options,i=n.fallbackTolerance,r=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=j&&Ui(j,!0),a=j&&o&&o.a,l=j&&o&&o.d,c=Js&&Fe&&Od(Fe),d=(s.clientX-Vn.clientX+r.x)/(a||1)+(c?c[0]-Za[0]:0)/(a||1),u=(s.clientY-Vn.clientY+r.y)/(l||1)+(c?c[1]-Za[1]:0)/(l||1);if(!U.active&&!Mi){if(i&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(j){o?(o.e+=d-(Ja||0),o.f+=u-(Qa||0)):o={a:1,b:0,c:0,d:1,e:d,f:u};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");M(j,"webkitTransform",h),M(j,"mozTransform",h),M(j,"msTransform",h),M(j,"transform",h),Ja=d,Qa=u,xt=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!j){var e=this.options.fallbackOnBody?document.body:ne,n=me(S,!0,Js,!0,e),i=this.options;if(Js){for(Fe=e;M(Fe,"position")==="static"&&M(Fe,"transform")==="none"&&Fe!==document;)Fe=Fe.parentNode;Fe!==document.body&&Fe!==document.documentElement?(Fe===document&&(Fe=Ht()),n.top+=Fe.scrollTop,n.left+=Fe.scrollLeft):Fe=Ht(),Za=Od(Fe)}j=S.cloneNode(!0),it(j,i.ghostClass,!1),it(j,i.fallbackClass,!0),it(j,i.dragClass,!0),M(j,"transition",""),M(j,"transform",""),M(j,"box-sizing","border-box"),M(j,"margin",0),M(j,"top",n.top),M(j,"left",n.left),M(j,"width",n.width),M(j,"height",n.height),M(j,"opacity","0.8"),M(j,"position",Js?"absolute":"fixed"),M(j,"zIndex","100000"),M(j,"pointerEvents","none"),U.ghost=j,e.appendChild(j),M(j,"transform-origin",Cd/parseInt(j.style.width)*100+"% "+Pd/parseInt(j.style.height)*100+"%")}},_onDragStart:function(e,n){var i=this,r=e.dataTransfer,s=i.options;if(Ye("dragStart",this,{evt:e}),U.eventCanceled){this._onDrop();return}Ye("setupClone",this),U.eventCanceled||(oe=$d(S),oe.removeAttribute("id"),oe.draggable=!1,oe.style["will-change"]="",this._hideClone(),it(oe,this.options.chosenClass,!1),U.clone=oe),i.cloneId=ro(function(){Ye("clone",i),!U.eventCanceled&&(i.options.removeCloneOnHide||ne.insertBefore(oe,S),i._hideClone(),je({sortable:i,name:"clone"}))}),!n&&it(S,s.dragClass,!0),n?(ao=!0,i._loopId=setInterval(i._emulateDragOver,50)):(W(document,"mouseup",i._onDrop),W(document,"touchend",i._onDrop),W(document,"touchcancel",i._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(i,r,S)),K(document,"drop",i),M(S,"transform","translateZ(0)")),Mi=!0,i._dragStartId=ro(i._dragStarted.bind(i,n,e)),K(document,"selectstart",i),fr=!0,window.getSelection().removeAllRanges(),to&&M(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,i=e.target,r,s,o,a=this.options,l=a.group,c=U.active,d=Ys===l,u=a.sort,h=Pe||c,f,p=this,g=!1;if(tl)return;function m(de,he){Ye(de,p,Nt({evt:e,isOwner:d,axis:f?"vertical":"horizontal",revert:o,dragRect:r,targetRect:s,canSort:u,fromSortable:h,target:i,completed:b,onMove:function(ve,Y){return Qs(ne,n,S,r,ve,me(ve),e,Y)},changed:E},he))}function v(){m("dragOverAnimationCapture"),p.captureAnimationState(),p!==h&&h.captureAnimationState()}function b(de){return m("dragOverCompleted",{insertion:de}),de&&(d?c._hideClone():c._showClone(p),p!==h&&(it(S,Pe?Pe.options.ghostClass:c.options.ghostClass,!1),it(S,a.ghostClass,!0)),Pe!==p&&p!==U.active?Pe=p:p===U.active&&Pe&&(Pe=null),h===p&&(p._ignoreWhileAnimating=i),p.animateAll(function(){m("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(i===S&&!S.animated||i===n&&!i.animated)&&(ki=null),!a.dragoverBubble&&!e.rootEl&&i!==document&&(S.parentNode[Ge]._isOutsideThisEl(e.target),!de&&qn(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function E(){rt=_t(S),bn=_t(S,a.draggable),je({sortable:p,name:"change",toEl:n,newIndex:rt,newDraggableIndex:bn,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=Ot(i,a.draggable,n,!0),m("dragOver"),U.eventCanceled)return g;if(S.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||p._ignoreWhileAnimating===i)return b(!1);if(ao=!1,c&&!a.disabled&&(d?u||(o=ce!==ne):Pe===this||(this.lastPutMode=Ys.checkPull(this,c,S,e))&&l.checkPut(this,c,S,e))){if(f=this._getDirection(e,i)==="vertical",r=me(S),m("dragOverValid"),U.eventCanceled)return g;if(o)return ce=ne,v(),this._hideClone(),m("revert"),U.eventCanceled||(Wn?ne.insertBefore(S,Wn):ne.appendChild(S)),b(!0);var _=rl(n,a.draggable);if(!_||Xb(e,f,this)&&!_.animated){if(_===S)return b(!1);if(_&&n===e.target&&(i=_),i&&(s=me(i)),Qs(ne,n,S,r,i,s,e,!!i)!==!1)return v(),_&&_.nextSibling?n.insertBefore(S,_.nextSibling):n.appendChild(S),ce=n,E(),b(!0)}else if(_&&Kb(e,f,this)){var A=$i(n,0,a,!0);if(A===S)return b(!1);if(i=A,s=me(i),Qs(ne,n,S,r,i,s,e,!1)!==!1)return v(),n.insertBefore(S,A),ce=n,E(),b(!0)}else if(i.parentNode===n){s=me(i);var w=0,T,D=S.parentNode!==n,O=!Bb(S.animated&&S.toRect||r,i.animated&&i.toRect||s,f),N=f?"top":"left",I=xd(i,"top","top")||xd(S,"top","top"),$=I?I.scrollTop:void 0;ki!==i&&(T=s[N],mr=!1,Gs=!O&&a.invertSwap||D),w=Yb(e,i,s,f,O?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,Gs,ki===i);var H;if(w!==0){var z=_t(S);do z-=w,H=ce.children[z];while(H&&(M(H,"display")==="none"||H===j))}if(w===0||H===i)return b(!1);ki=i,gr=w;var ue=i.nextElementSibling,q=!1;q=w===1;var B=Qs(ne,n,S,r,i,s,e,q);if(B!==!1)return(B===1||B===-1)&&(q=B===1),tl=!0,setTimeout(zb,30),v(),q&&!ue?n.appendChild(S):i.parentNode.insertBefore(S,q?ue:i),I&&Ud(I,0,$-I.scrollTop),ce=S.parentNode,T!==void 0&&!Gs&&(io=Math.abs(T-me(i)[N])),E(),b(!0)}if(n.contains(S))return b(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){W(document,"mousemove",this._onTouchMove),W(document,"touchmove",this._onTouchMove),W(document,"pointermove",this._onTouchMove),W(document,"dragover",qn),W(document,"mousemove",qn),W(document,"touchmove",qn)},_offUpEvents:function(){var e=this.el.ownerDocument;W(e,"mouseup",this._onDrop),W(e,"touchend",this._onDrop),W(e,"pointerup",this._onDrop),W(e,"pointercancel",this._onDrop),W(e,"touchcancel",this._onDrop),W(document,"selectstart",this)},_onDrop:function(e){var n=this.el,i=this.options;if(rt=_t(S),bn=_t(S,i.draggable),Ye("drop",this,{evt:e}),ce=S&&S.parentNode,rt=_t(S),bn=_t(S,i.draggable),U.eventCanceled){this._nulling();return}Mi=!1,Gs=!1,mr=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),nl(this.cloneId),nl(this._dragStartId),this.nativeDraggable&&(W(document,"drop",this),W(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),to&&M(document.body,"user-select",""),M(S,"transform",""),e&&(fr&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),j&&j.parentNode&&j.parentNode.removeChild(j),(ne===ce||Pe&&Pe.lastPutMode!=="clone")&&oe&&oe.parentNode&&oe.parentNode.removeChild(oe),S&&(this.nativeDraggable&&W(S,"dragend",this),el(S),S.style["will-change"]="",fr&&!Mi&&it(S,Pe?Pe.options.ghostClass:this.options.ghostClass,!1),it(S,this.options.chosenClass,!1),je({sortable:this,name:"unchoose",toEl:ce,newIndex:null,newDraggableIndex:null,originalEvent:e}),ne!==ce?(rt>=0&&(je({rootEl:ce,name:"add",toEl:ce,fromEl:ne,originalEvent:e}),je({sortable:this,name:"remove",toEl:ce,originalEvent:e}),je({rootEl:ce,name:"sort",toEl:ce,fromEl:ne,originalEvent:e}),je({sortable:this,name:"sort",toEl:ce,originalEvent:e})),Pe&&Pe.save()):rt!==Fi&&rt>=0&&(je({sortable:this,name:"update",toEl:ce,originalEvent:e}),je({sortable:this,name:"sort",toEl:ce,originalEvent:e})),U.active&&((rt==null||rt===-1)&&(rt=Fi,bn=pr),je({sortable:this,name:"end",toEl:ce,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Ye("nulling",this),ne=S=ce=j=Wn=oe=no=yn=Vn=xt=fr=rt=bn=Fi=pr=ki=gr=Pe=Ys=U.dragged=U.ghost=U.clone=U.active=null,co.forEach(function(e){e.checked=!0}),co.length=Ja=Qa=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":S&&(this._onDragOver(e),Wb(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,i=this.el.children,r=0,s=i.length,o=this.options;r<s;r++)n=i[r],Ot(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||Jb(n));return e},sort:function(e,n){var i={},r=this.el;this.toArray().forEach(function(s,o){var a=r.children[o];Ot(a,this.options.draggable,r,!1)&&(i[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){i[s]&&(r.removeChild(i[s]),r.appendChild(i[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Ot(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var i=this.options;if(n===void 0)return i[e];var r=vr.modifyOption(this,e,n);typeof r<"u"?i[e]=r:i[e]=n,e==="group"&&Vd(i)},destroy:function(){Ye("destroy",this);var e=this.el;e[Ge]=null,W(e,"mousedown",this._onTapStart),W(e,"touchstart",this._onTapStart),W(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(W(e,"dragover",this),W(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),lo.splice(lo.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!yn){if(Ye("hideClone",this),U.eventCanceled)return;M(oe,"display","none"),this.options.removeCloneOnHide&&oe.parentNode&&oe.parentNode.removeChild(oe),yn=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(yn){if(Ye("showClone",this),U.eventCanceled)return;S.parentNode==ne&&!this.options.group.revertClone?ne.insertBefore(oe,S):Wn?ne.insertBefore(oe,Wn):ne.appendChild(oe),this.options.group.revertClone&&this.animate(S,oe),M(oe,"display",""),yn=!1}}};function Wb(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Qs(t,e,n,i,r,s,o,a){var l,c=t[Ge],d=c.options.onMove,u;return window.CustomEvent&&!En&&!uo?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=r||e,l.relatedRect=s||me(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),d&&(u=d.call(c,l,o)),u}function el(t){t.draggable=!1}function zb(){tl=!1}function Kb(t,e,n){var i=me($i(n.el,0,n.options,!0)),r=Hd(n.el,n.options,j),s=10;return e?t.clientX<r.left-s||t.clientY<i.top&&t.clientX<i.right:t.clientY<r.top-s||t.clientY<i.bottom&&t.clientX<i.left}function Xb(t,e,n){var i=me(rl(n.el,n.options.draggable)),r=Hd(n.el,n.options,j),s=10;return e?t.clientX>r.right+s||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>r.bottom+s||t.clientX>i.right&&t.clientY>i.top}function Yb(t,e,n,i,r,s,o,a){var l=i?t.clientY:t.clientX,c=i?n.height:n.width,d=i?n.top:n.left,u=i?n.bottom:n.right,h=!1;if(!o){if(a&&io<c*r){if(!mr&&(gr===1?l>d+c*s/2:l<u-c*s/2)&&(mr=!0),mr)h=!0;else if(gr===1?l<d+io:l>u-io)return-gr}else if(l>d+c*(1-r)/2&&l<u-c*(1-r)/2)return Gb(e)}return h=h||o,h&&(l<d+c*s/2||l>u-c*s/2)?l>d+c/2?1:-1:0}function Gb(t){return _t(S)<_t(t)?1:-1}function Jb(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function Qb(t){co.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&co.push(i)}}function ro(t){return setTimeout(t,0)}function nl(t){return clearTimeout(t)}ho&&K(document,"touchmove",function(t){(U.active||Mi)&&t.cancelable&&t.preventDefault()});U.utils={on:K,off:W,css:M,find:Md,is:function(e,n){return!!Ot(e,n,e,!1)},extend:kb,throttle:Fd,closest:Ot,toggleClass:it,clone:$d,index:_t,nextTick:ro,cancelNextTick:nl,detectDirection:Bd,getChild:$i,expando:Ge};U.get=function(t){return t[Ge]};U.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(U.utils=Nt(Nt({},U.utils),i.utils)),vr.mount(i)})};U.create=function(t,e){return new U(t,e)};U.version=Rb;var ye=[],Zs,Nd,Zb=!1;var Id;function ey(){ye.forEach(function(t){clearInterval(t.pid)}),ye=[]}var rx=Fd(function(t,e,n,i){if(e.scroll){var r=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Ht(),c=!1,d;Nd!==n&&(Nd=n,ey(),Zs=e.scroll,d=e.scrollFn,Zs===!0&&(Zs=oo(n,!0)));var u=0,h=Zs;do{var f=h,p=me(f),g=p.top,m=p.bottom,v=p.left,b=p.right,E=p.width,_=p.height,A=void 0,w=void 0,T=f.scrollWidth,D=f.scrollHeight,O=M(f),N=f.scrollLeft,I=f.scrollTop;f===l?(A=E<T&&(O.overflowX==="auto"||O.overflowX==="scroll"||O.overflowX==="visible"),w=_<D&&(O.overflowY==="auto"||O.overflowY==="scroll"||O.overflowY==="visible")):(A=E<T&&(O.overflowX==="auto"||O.overflowX==="scroll"),w=_<D&&(O.overflowY==="auto"||O.overflowY==="scroll"));var $=A&&(Math.abs(b-r)<=o&&N+E<T)-(Math.abs(v-r)<=o&&!!N),H=w&&(Math.abs(m-s)<=o&&I+_<D)-(Math.abs(g-s)<=o&&!!I);if(!ye[u])for(var z=0;z<=u;z++)ye[z]||(ye[z]={});(ye[u].vx!=$||ye[u].vy!=H||ye[u].el!==f)&&(ye[u].el=f,ye[u].vx=$,ye[u].vy=H,clearInterval(ye[u].pid),($!=0||H!=0)&&(c=!0,ye[u].pid=setInterval(function(){i&&this.layer===0&&U.active._onTouchMove(Id);var ue=ye[this.layer].vy?ye[this.layer].vy*a:0,q=ye[this.layer].vx?ye[this.layer].vx*a:0;typeof d=="function"&&d.call(U.dragged.parentNode[Ge],q,ue,t,Id,ye[this.layer].el)!=="continue"||Ud(ye[this.layer].el,q,ue)}.bind({layer:u}),24))),u++}while(e.bubbleScroll&&h!==l&&(h=oo(h,!1)));Zb=c}},30),zd=function(e){var n=e.originalEvent,i=e.putSortable,r=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=i||s;a();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,u=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(u)&&(o("spill"),this.onSpill({dragEl:r,putSortable:i}))}};function Kd(){}Kd.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var r=$i(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:zd};wn(Kd,{pluginName:"revertOnSpill"});function Xd(){}Xd.prototype={onSpill:function(e){var n=e.dragEl,i=e.putSortable,r=i||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:zd};wn(Xd,{pluginName:"removeOnSpill"});var Yd=U;function Gd(t){t.querySelectorAll("[data-tags]").forEach(e=>{let n=e.dataset.tagsInputName,i=new hr(e,{delimiters:",",duplicates:!1,pasteAsTags:!0});i.on("change",function(r){i.DOM.scope.parentElement.querySelectorAll(`input[name="${n}"]`).forEach(s=>{s.remove()}),r.detail.tagify.value.forEach(s=>{let o=document.createElement("input");o.type="hidden",o.name=n,o.value=s.value,i.DOM.scope.parentElement.appendChild(o)})}),Yd.create(i.DOM.scope,{draggable:"."+i.settings.classNames.tag,onEnd:function(){i.updateValueByDOMTags()}})})}function fo(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var ty=0;function Qd(t){return"__private_"+ty+++"_"+t}function ny(t,e,n){let i=[];return t.forEach(r=>typeof r!="string"?i.push(r):e[Symbol.split](r).forEach((s,o,a)=>{s!==""&&i.push(s),o<a.length-1&&i.push(n)})),i}function Jd(t,e){let n=/\$/g,i="$$$$",r=[t];if(e==null)return r;for(let s of Object.keys(e))if(s!=="_"){let o=e[s];typeof o=="string"&&(o=n[Symbol.replace](o,i)),r=ny(r,new RegExp(`%\\{${s}\\}`,"g"),o)}return r}var iy=t=>{throw new Error(`missing string: ${t}`)},_r=Qd("onMissingKey"),br=Qd("apply"),zn=class{constructor(e,n){let{onMissingKey:i=iy}=n===void 0?{}:n;Object.defineProperty(this,br,{value:ry}),Object.defineProperty(this,_r,{writable:!0,value:void 0}),this.locale={strings:{},pluralize(r){return r===1?0:1}},Array.isArray(e)?e.forEach(fo(this,br)[br],this):fo(this,br)[br](e),fo(this,_r)[_r]=i}translate(e,n){return this.translateArray(e,n).join("")}translateArray(e,n){let i=this.locale.strings[e];if(i==null&&(fo(this,_r)[_r](e),i=e),typeof i=="object"){if(n&&typeof n.smart_count<"u"){let s=this.locale.pluralize(n.smart_count);return Jd(i[s],n)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof i!="string")throw new Error("string was not a string");return Jd(i,n)}};function ry(t){if(!(t!=null&&t.strings))return;let e=this.locale;Object.assign(this.locale,{strings:{...e.strings,...t.strings},pluralize:t.pluralize||e.pluralize})}var Qh=sn(eh(),1);var sy="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var th=(t=21)=>{let e="",n=t|0;for(;n--;)e+=sy[Math.random()*64|0];return e};var Zh=sn(kh(),1);function go(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Qy=0;function Mh(t){return"__private_"+Qy+++"_"+t}var Zy={version:"4.2.0"},Kn=Mh("callbacks"),ll=Mh("publish"),mo=class{constructor(){Object.defineProperty(this,ll,{value:ew}),this.state={},Object.defineProperty(this,Kn,{writable:!0,value:new Set})}getState(){return this.state}setState(e){let n={...this.state},i={...this.state,...e};this.state=i,go(this,ll)[ll](n,i,e)}subscribe(e){return go(this,Kn)[Kn].add(e),()=>{go(this,Kn)[Kn].delete(e)}}};function ew(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];go(this,Kn)[Kn].forEach(i=>{i(...e)})}mo.VERSION=Zy.version;var Fh=mo;function wr(t){let e=t.lastIndexOf(".");return e===-1||e===t.length-1?{name:t,extension:void 0}:{name:t.slice(0,e),extension:t.slice(e+1)}}var cl={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function Er(t){var e;if(t.type)return t.type;let n=t.name?(e=wr(t.name).extension)==null?void 0:e.toLowerCase():null;return n&&n in cl?cl[n]:"application/octet-stream"}function tw(t){return t.charCodeAt(0).toString(32)}function Uh(t){let e="";return t.replace(/[^A-Z0-9]/gi,n=>(e+=`-${tw(n)}`,"/"))+e}function $h(t,e){let n=e||"uppy";return typeof t.name=="string"&&(n+=`-${Uh(t.name.toLowerCase())}`),t.type!==void 0&&(n+=`-${t.type}`),t.meta&&typeof t.meta.relativePath=="string"&&(n+=`-${Uh(t.meta.relativePath.toLowerCase())}`),t.data.size!==void 0&&(n+=`-${t.data.size}`),t.data.lastModified!==void 0&&(n+=`-${t.data.lastModified}`),n}function nw(t){return!t.isRemote||!t.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(t.remote.provider)}function Hh(t,e){if(nw(t))return t.id;let n=Er(t);return $h({...t,type:n},e)}function ul(t){if(t==null&&typeof navigator<"u"&&(t=navigator.userAgent),!t)return!0;let e=/Edge\/(\d+\.\d+)/.exec(t);if(!e)return!0;let i=e[1].split(".",2),r=parseInt(i[0],10),s=parseInt(i[1],10);return r<15||r===15&&s<15063||r>18||r===18&&s>=18218}function dl(t,e){return e.name?e.name:t.split("/")[0]==="image"?`${t.split("/")[0]}.${t.split("/")[1]}`:"noname"}function hl(t){return t<10?`0${t}`:t.toString()}function Hi(){let t=new Date,e=hl(t.getHours()),n=hl(t.getMinutes()),i=hl(t.getSeconds());return`${e}:${n}:${i}`}var jh={debug:()=>{},warn:()=>{},error:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return console.error(`[Uppy] [${Hi()}]`,...e)}},Bh={debug:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return console.debug(`[Uppy] [${Hi()}]`,...e)},warn:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return console.warn(`[Uppy] [${Hi()}]`,...e)},error:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return console.error(`[Uppy] [${Hi()}]`,...e)}};var Tr=sn(fl(),1),Yh=sn(Xh(),1),Gh={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]},Je=class extends Error{constructor(e,n){var i;super(e),this.isRestriction=!0,this.isUserFacing=(i=n?.isUserFacing)!=null?i:!0,n!=null&&n.file&&(this.file=n.file)}},vo=class{constructor(e,n){this.getI18n=n,this.getOpts=()=>{var i;let r=e();if(((i=r.restrictions)==null?void 0:i.allowedFileTypes)!=null&&!Array.isArray(r.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return r}}validateAggregateRestrictions(e,n){let{maxTotalFileSize:i,maxNumberOfFiles:r}=this.getOpts().restrictions;if(r&&e.filter(o=>!o.isGhost).length+n.length>r)throw new Je(`${this.getI18n()("youCanOnlyUploadX",{smart_count:r})}`);if(i){let s=[...e,...n].reduce((o,a)=>{var l;return o+((l=a.size)!=null?l:0)},0);if(s>i)throw new Je(this.getI18n()("aggregateExceedsSize",{sizeAllowed:(0,Tr.default)(i),size:(0,Tr.default)(s)}))}}validateSingleFile(e){let{maxFileSize:n,minFileSize:i,allowedFileTypes:r}=this.getOpts().restrictions;if(r&&!r.some(a=>a.includes("/")?e.type?(0,Yh.default)(e.type.replace(/;.*?$/,""),a):!1:a[0]==="."&&e.extension?e.extension.toLowerCase()===a.slice(1).toLowerCase():!1)){let a=r.join(", ");throw new Je(this.getI18n()("youCanOnlyUploadFileTypes",{types:a}),{file:e})}if(n&&e.size!=null&&e.size>n){var s;throw new Je(this.getI18n()("exceedsSize",{size:(0,Tr.default)(n),file:(s=e.name)!=null?s:this.getI18n()("unnamed")}),{file:e})}if(i&&e.size!=null&&e.size<i)throw new Je(this.getI18n()("inferiorSize",{size:(0,Tr.default)(i)}),{file:e})}validate(e,n){n.forEach(i=>{this.validateSingleFile(i)}),this.validateAggregateRestrictions(e,n)}validateMinNumberOfFiles(e){let{minNumberOfFiles:n}=this.getOpts().restrictions;if(n&&Object.keys(e).length<n)throw new Je(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:n}))}getMissingRequiredMetaFields(e){var n;let i=new Je(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:(n=e.name)!=null?n:this.getI18n()("unnamed")})),{requiredMetaFields:r}=this.getOpts().restrictions,s=[];for(let o of r)(!Object.hasOwn(e.meta,o)||e.meta[o]==="")&&s.push(o);return{missingFields:s,error:i}}};var Jh={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};function x(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var sw=0;function G(t){return"__private_"+sw+++"_"+t}var ow={version:"4.4.4"},_o={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null},De=G("plugins"),Ne=G("restricter"),Sr=G("storeUnsubscribe"),jt=G("emitter"),Xn=G("preProcessors"),Yn=G("uploaders"),qt=G("postProcessors"),st=G("informAndEmit"),Ir=G("checkRequiredMetaFieldsOnFile"),pl=G("checkRequiredMetaFields"),Ar=G("assertNewUploadAllowed"),vl=G("transformFile"),xr=G("startIfAutoProceed"),Or=G("checkAndUpdateFileState"),Nr=G("getFilesToRetry"),Cr=G("doRetryAll"),_l=G("handleUploadProgress"),Pr=G("updateTotalProgress"),Wt=G("updateTotalProgressThrottled"),bl=G("calculateTotalProgress"),gl=G("addListeners"),Ct=G("updateOnlineStatus"),Dr=G("requestClientById"),Bt=G("createUpload"),ml=G("getUpload"),Gn=G("removeUpload"),Vt=G("runUpload"),bo=class t{constructor(e){Object.defineProperty(this,Vt,{value:Ew}),Object.defineProperty(this,Gn,{value:ww}),Object.defineProperty(this,ml,{value:yw}),Object.defineProperty(this,Bt,{value:bw}),Object.defineProperty(this,gl,{value:_w}),Object.defineProperty(this,bl,{value:vw}),Object.defineProperty(this,Pr,{value:mw}),Object.defineProperty(this,Cr,{value:gw}),Object.defineProperty(this,Nr,{value:pw}),Object.defineProperty(this,Or,{value:fw}),Object.defineProperty(this,xr,{value:hw}),Object.defineProperty(this,vl,{value:dw}),Object.defineProperty(this,Ar,{value:uw}),Object.defineProperty(this,pl,{value:cw}),Object.defineProperty(this,Ir,{value:lw}),Object.defineProperty(this,st,{value:aw}),Object.defineProperty(this,De,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,Ne,{writable:!0,value:void 0}),Object.defineProperty(this,Sr,{writable:!0,value:void 0}),Object.defineProperty(this,jt,{writable:!0,value:(0,Qh.default)()}),Object.defineProperty(this,Xn,{writable:!0,value:new Set}),Object.defineProperty(this,Yn,{writable:!0,value:new Set}),Object.defineProperty(this,qt,{writable:!0,value:new Set}),this.scheduledAutoProceed=null,this.wasOffline=!1,Object.defineProperty(this,_l,{writable:!0,value:(r,s)=>{let o=r?this.getFile(r.id):void 0;if(r==null||!o){this.log(`Not setting progress for a file that has been removed: ${r?.id}`);return}if(o.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${r.id}`);return}let a={bytesTotal:s.bytesTotal,percentage:s.bytesTotal!=null&&Number.isFinite(s.bytesTotal)&&s.bytesTotal>0?Math.round(s.bytesUploaded/s.bytesTotal*100):void 0};o.progress.uploadStarted!=null?this.setFileState(r.id,{progress:{...o.progress,...a,bytesUploaded:s.bytesUploaded}}):this.setFileState(r.id,{progress:{...o.progress,...a}}),x(this,Wt)[Wt]()}}),Object.defineProperty(this,Wt,{writable:!0,value:(0,Zh.default)(()=>x(this,Pr)[Pr](),500,{leading:!0,trailing:!0})}),Object.defineProperty(this,Ct,{writable:!0,value:this.updateOnlineStatus.bind(this)}),Object.defineProperty(this,Dr,{writable:!0,value:new Map}),this.defaultLocale=Jh;let n={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:Gh,meta:{},onBeforeFileAdded:(r,s)=>!Object.hasOwn(s,r.id),onBeforeUpload:r=>r,store:new Fh,logger:jh,infoTimeout:5e3},i={...n,...e};this.opts={...i,restrictions:{...n.restrictions,...e&&e.restrictions}},e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=Bh),this.log(`Using Core v${t.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({..._o,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:ul(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),x(this,Ne)[Ne]=new vo(()=>this.opts,()=>this.i18n),x(this,Sr)[Sr]=this.store.subscribe((r,s,o)=>{this.emit("state-update",r,s,o),this.updateAll(s)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),x(this,gl)[gl]()}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];x(this,jt)[jt].emit(e,...i)}on(e,n){return x(this,jt)[jt].on(e,n),this}once(e,n){return x(this,jt)[jt].once(e,n),this}off(e,n){return x(this,jt)[jt].off(e,n),this}updateAll(e){this.iteratePlugins(n=>{n.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){let n=this.getState().files;this.setState({files:{...n,...Object.fromEntries(Object.entries(e).map(i=>{let[r,s]=i;return[r,{...n[r],...s}]}))}})}setFileState(e,n){if(!this.getState().files[e])throw new Error(`Can\u2019t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:n})}i18nInit(){let e=i=>this.log(`Missing i18n string: ${i}`,"error"),n=new zn([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=n.translate.bind(n),this.i18nArray=n.translateArray.bind(n),this.locale=n.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e?.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(n=>{n.setOptions(e)}),this.setState(void 0)}resetProgress(){let e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},n={...this.getState().files},i=Object.create(null);Object.keys(n).forEach(r=>{i[r]={...n[r],progress:{...n[r].progress,...e},tus:void 0,transloadit:void 0}}),this.setState({files:i,..._o})}clear(){let{capabilities:e,currentUploads:n}=this.getState();if(Object.keys(n).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({..._o,files:{}})}addPreProcessor(e){x(this,Xn)[Xn].add(e)}removePreProcessor(e){return x(this,Xn)[Xn].delete(e)}addPostProcessor(e){x(this,qt)[qt].add(e)}removePostProcessor(e){return x(this,qt)[qt].delete(e)}addUploader(e){x(this,Yn)[Yn].add(e)}removeUploader(e){return x(this,Yn)[Yn].delete(e)}setMeta(e){let n={...this.getState().meta,...e},i={...this.getState().files};Object.keys(i).forEach(r=>{i[r]={...i[r],meta:{...i[r].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:n,files:i})}setFileMeta(e,n){let i={...this.getState().files};if(!i[e]){this.log(`Was trying to set metadata for a file that has been removed: ${e}`);return}let r={...i[e].meta,...n};i[e]={...i[e],meta:r},this.setState({files:i})}getFile(e){return this.getState().files[e]}getFiles(){let{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(n=>this.getFile(n))}getObjectOfFilesPerState(){let{files:e,totalProgress:n,error:i}=this.getState(),r=Object.values(e),s=[],o=[],a=[],l=[],c=[],d=[],u=[],h=[],f=[];for(let p of r){let{progress:g}=p;!g.uploadComplete&&g.uploadStarted&&(s.push(p),p.isPaused||h.push(p)),g.uploadStarted||o.push(p),(g.uploadStarted||g.preprocess||g.postprocess)&&a.push(p),g.uploadStarted&&l.push(p),p.isPaused&&c.push(p),g.uploadComplete&&d.push(p),p.error&&u.push(p),(g.preprocess||g.postprocess)&&f.push(p)}return{newFiles:o,startedFiles:a,uploadStartedFiles:l,pausedFiles:c,completeFiles:d,erroredFiles:u,inProgressFiles:s,inProgressNotPausedFiles:h,processingFiles:f,isUploadStarted:l.length>0,isAllComplete:n===100&&d.length===r.length&&f.length===0,isAllErrored:!!i&&u.length===r.length,isAllPaused:s.length!==0&&c.length===s.length,isUploadInProgress:s.length>0,isSomeGhost:r.some(p=>p.isGhost)}}validateRestrictions(e,n){n===void 0&&(n=this.getFiles());try{x(this,Ne)[Ne].validate(n,[e])}catch(i){return i}return null}validateSingleFile(e){try{x(this,Ne)[Ne].validateSingleFile(e)}catch(n){return n.message}return null}validateAggregateRestrictions(e){let n=this.getFiles();try{x(this,Ne)[Ne].validateAggregateRestrictions(n,e)}catch(i){return i.message}return null}checkIfFileAlreadyExists(e){let{files:n}=this.getState();return!!(n[e]&&!n[e].isGhost)}addFile(e){x(this,Ar)[Ar](e);let{nextFilesState:n,validFilesToAdd:i,errors:r}=x(this,Or)[Or]([e]),s=r.filter(a=>a.isRestriction);if(x(this,st)[st](s),r.length>0)throw r[0];this.setState({files:n});let[o]=i;return this.emit("file-added",o),this.emit("files-added",i),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),x(this,xr)[xr](),o.id}addFiles(e){x(this,Ar)[Ar]();let{nextFilesState:n,validFilesToAdd:i,errors:r}=x(this,Or)[Or](e),s=r.filter(a=>a.isRestriction);x(this,st)[st](s);let o=r.filter(a=>!a.isRestriction);if(o.length>0){let a=`Multiple errors occurred while adding files:
`;if(o.forEach(l=>{a+=`
 * ${l.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:a},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(o,a);{let l=new Error(a);throw l.errors=o,l}}this.setState({files:n}),i.forEach(a=>{this.emit("file-added",a)}),this.emit("files-added",i),i.length>5?this.log(`Added batch of ${i.length} files`):Object.values(i).forEach(a=>{this.log(`Added file: ${a.name}
 id: ${a.id}
 type: ${a.type}`)}),i.length>0&&x(this,xr)[xr]()}removeFiles(e){let{files:n,currentUploads:i}=this.getState(),r={...n},s={...i},o=Object.create(null);e.forEach(d=>{n[d]&&(o[d]=n[d],delete r[d])});function a(d){return o[d]===void 0}Object.keys(s).forEach(d=>{let u=i[d].fileIDs.filter(a);if(u.length===0){delete s[d];return}let{capabilities:h}=this.getState();if(u.length!==i[d].fileIDs.length&&!h.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");s[d]={...i[d],fileIDs:u}});let l={currentUploads:s,files:r};Object.keys(r).length===0&&(l.allowNewUpload=!0,l.error=null,l.recoveredState=null),this.setState(l),x(this,Wt)[Wt]();let c=Object.keys(o);c.forEach(d=>{this.emit("file-removed",o[d])}),c.length>5?this.log(`Removed ${c.length} files`):this.log(`Removed files: ${c.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;let n=this.getFile(e),r=!(n.isPaused||!1);return this.setFileState(e,{isPaused:r}),this.emit("upload-pause",n,r),r}pauseAll(){let e={...this.getState().files};Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{let r={...e[i],isPaused:!0};e[i]=r}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){let e={...this.getState().files};Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{let r={...e[i],isPaused:!1,error:null};e[i]=r}),this.setState({files:e}),this.emit("resume-all")}async retryAll(){let e=await x(this,Cr)[Cr]();return this.emit("complete",e),e}cancelAll(){this.emit("cancel-all");let{files:e}=this.getState(),n=Object.keys(e);n.length&&this.removeFiles(n),this.setState(_o)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));let n=x(this,Bt)[Bt]([e],{forceAllowNewUpload:!0});return x(this,Vt)[Vt](n)}logout(){this.iteratePlugins(e=>{var n;(n=e.provider)==null||n.logout==null||n.logout()})}[Symbol.for("uppy test: updateTotalProgress")](){return x(this,Pr)[Pr]()}updateOnlineStatus(){var e;((e=window.navigator.onLine)!=null?e:!0)?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e){if(typeof e!="function"){let l=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(l)}for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];let s=new e(this,...i),o=s.id;if(!o)throw new Error("Your plugin must have an id");if(!s.type)throw new Error("Your plugin must have a type");let a=this.getPlugin(o);if(a){let l=`Already found a plugin named '${a.id}'. Tried to use: '${o}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(l)}return e.VERSION&&this.log(`Using ${o} v${e.VERSION}`),s.type in x(this,De)[De]?x(this,De)[De][s.type].push(s):x(this,De)[De][s.type]=[s],s.install(),this.emit("plugin-added",s),this}getPlugin(e){for(let n of Object.values(x(this,De)[De])){let i=n.find(r=>r.id===e);if(i!=null)return i}}[Symbol.for("uppy test: getPlugins")](e){return x(this,De)[De][e]}iteratePlugins(e){Object.values(x(this,De)[De]).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();let n=x(this,De)[De][e.type],i=n.findIndex(o=>o.id===e.id);i!==-1&&n.splice(i,1);let s={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(s)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),x(this,Sr)[Sr](),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",x(this,Ct)[Ct]),window.removeEventListener("offline",x(this,Ct)[Ct]))}hideInfo(){let{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,n,i){n===void 0&&(n="info"),i===void 0&&(i=3e3);let r=typeof e=="object";this.setState({info:[...this.getState().info,{type:n,message:r?e.message:e,details:r?e.details:null}]}),setTimeout(()=>this.hideInfo(),i),this.emit("info-visible")}log(e,n){let{logger:i}=this.opts;switch(n){case"error":i.error(e);break;case"warning":i.warn(e);break;default:i.debug(e);break}}registerRequestClient(e,n){x(this,Dr)[Dr].set(e,n)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);let n=x(this,Dr)[Dr].get(e.remote.requestClientId);if(n==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return n}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?x(this,Vt)[Vt](e):(x(this,Gn)[Gn](e),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](){return x(this,Bt)[Bt](...arguments)}addResultData(e,n){if(!x(this,ml)[ml](e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}let{currentUploads:i}=this.getState(),r={...i[e],result:{...i[e].result,...n}};this.setState({currentUploads:{...i,[e]:r}})}async upload(){var e;(e=x(this,De)[De].uploader)!=null&&e.length||this.log("No uploader type plugins are used","warning");let{files:n}=this.getState();if(x(this,Nr)[Nr]().length>0){let s=await x(this,Cr)[Cr]();if(!(this.getFiles().filter(a=>a.progress.uploadStarted==null).length>0))return this.emit("complete",s),s;({files:n}=this.getState())}let r=this.opts.onBeforeUpload(n);return r===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(r&&typeof r=="object"&&(n=r,this.setState({files:n})),Promise.resolve().then(()=>x(this,Ne)[Ne].validateMinNumberOfFiles(n)).catch(s=>{throw x(this,st)[st]([s]),s}).then(()=>{if(!x(this,pl)[pl](n))throw new Je(this.i18n("missingRequiredMetaField"))}).catch(s=>{throw s}).then(async()=>{let{currentUploads:s}=this.getState(),o=Object.values(s).flatMap(d=>d.fileIDs),a=[];Object.keys(n).forEach(d=>{let u=this.getFile(d);!u.progress.uploadStarted&&o.indexOf(d)===-1&&a.push(u.id)});let l=x(this,Bt)[Bt](a),c=await x(this,Vt)[Vt](l);return this.emit("complete",c),c}).catch(s=>{throw this.emit("error",s),this.log(s,"error"),s}))}};function aw(t){for(let s of t)s.isRestriction?this.emit("restriction-failed",s.file,s):this.emit("error",s,s.file),this.log(s,"warning");let e=t.filter(s=>s.isUserFacing),n=4,i=e.slice(0,n),r=e.slice(n);i.forEach(s=>{let{message:o,details:a=""}=s;this.info({message:o,details:a},"error",this.opts.infoTimeout)}),r.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:r.length})})}function lw(t){let{missingFields:e,error:n}=x(this,Ne)[Ne].getMissingRequiredMetaFields(t);return e.length>0?(this.setFileState(t.id,{missingRequiredMetaFields:e}),this.log(n.message),this.emit("restriction-failed",t,n),!1):!0}function cw(t){let e=!0;for(let n of Object.values(t))x(this,Ir)[Ir](n)||(e=!1);return e}function uw(t){let{allowNewUpload:e}=this.getState();if(e===!1){let n=new Je(this.i18n("noMoreFilesAllowed"),{file:t});throw x(this,st)[st]([n]),n}}function dw(t){let e=t instanceof File?{name:t.name,type:t.type,size:t.size,data:t}:t,n=Er(e),i=dl(n,e),r=wr(i).extension,s=Hh(e,this.getID()),o=e.meta||{};o.name=i,o.type=n;let a=Number.isFinite(e.data.size)?e.data.size:null;return{source:e.source||"",id:s,name:i,extension:r||"",meta:{...this.getState().meta,...o},type:n,data:e.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:a,uploadComplete:!1,uploadStarted:null},size:a,isGhost:!1,isRemote:e.isRemote||!1,remote:e.remote,preview:e.preview}}function hw(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(t=>{t.isRestriction||this.log(t.stack||t.message||t)})},4))}function fw(t){let{files:e}=this.getState(),n={...e},i=[],r=[];for(let a of t)try{var s;let l=x(this,vl)[vl](a),c=(s=e[l.id])==null?void 0:s.isGhost;c&&(l={...e[l.id],isGhost:!1,data:a.data},this.log(`Replaced the blob in the restored ghost file: ${l.name}, ${l.id}`));let d=this.opts.onBeforeFileAdded(l,n);if(!d&&this.checkIfFileAlreadyExists(l.id)){var o;throw new Je(this.i18n("noDuplicates",{fileName:(o=l.name)!=null?o:this.i18n("unnamed")}),{file:a})}if(d===!1&&!c)throw new Je("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:a});typeof d=="object"&&d!==null&&(l=d),x(this,Ne)[Ne].validateSingleFile(l),n[l.id]=l,i.push(l)}catch(l){r.push(l)}try{x(this,Ne)[Ne].validateAggregateRestrictions(Object.values(e),i)}catch(a){return r.push(a),{nextFilesState:e,validFilesToAdd:[],errors:r}}return{nextFilesState:n,validFilesToAdd:i,errors:r}}function pw(){let{files:t}=this.getState();return Object.keys(t).filter(e=>t[e].error)}async function gw(){let t=x(this,Nr)[Nr](),e={...this.getState().files};if(t.forEach(i=>{e[i]={...e[i],isPaused:!1,error:null}}),this.setState({files:e,error:null}),this.emit("retry-all",this.getFilesByIds(t)),t.length===0)return{successful:[],failed:[]};let n=x(this,Bt)[Bt](t,{forceAllowNewUpload:!0});return x(this,Vt)[Vt](n)}function mw(){var t,e;let n=x(this,bl)[bl](),i=null;n!=null&&(i=Math.round(n*100),i>100?i=100:i<0&&(i=0)),this.emit("progress",(t=i)!=null?t:0),this.setState({totalProgress:(e=i)!=null?e:0})}function vw(){let e=this.getFiles().filter(a=>a.progress.uploadStarted||a.progress.preprocess||a.progress.postprocess);if(e.length===0)return 0;if(e.every(a=>a.progress.uploadComplete))return 1;let n=a=>a.progress.bytesTotal!=null&&a.progress.bytesTotal!==0,i=e.filter(n),r=e.filter(a=>!n(a));if(i.every(a=>a.progress.uploadComplete)&&r.length>0&&!r.every(a=>a.progress.uploadComplete))return null;let s=i.reduce((a,l)=>{var c;return a+((c=l.progress.bytesTotal)!=null?c:0)},0),o=i.reduce((a,l)=>a+(l.progress.bytesUploaded||0),0);return s===0?0:o/s}function _w(){let t=(i,r,s)=>{let o=i.message||"Unknown error";i.details&&(o+=` ${i.details}`),this.setState({error:o}),r!=null&&r.id in this.getState().files&&this.setFileState(r.id,{error:o,response:s})};this.on("error",t),this.on("upload-error",(i,r,s)=>{if(t(r,i,s),typeof r=="object"&&r.message){var o;this.log(r.message,"error");let a=new Error(this.i18n("failedToUpload",{file:(o=i?.name)!=null?o:""}));a.isUserFacing=!0,a.details=r.message,r.details&&(a.details+=` ${r.details}`),x(this,st)[st]([a])}else x(this,st)[st]([r])});let e=null;this.on("upload-stalled",(i,r)=>{let{message:s}=i,o=r.map(a=>a.meta.name).join(", ");e||(this.info({message:s,details:o},"warning",this.opts.infoTimeout),e=setTimeout(()=>{e=null},this.opts.infoTimeout)),this.log(`${s} ${o}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});let n=i=>{let r=i.filter(o=>{let a=o!=null&&this.getFile(o.id);return a||this.log(`Not setting progress for a file that has been removed: ${o?.id}`),a}),s=Object.fromEntries(r.map(o=>[o.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:o.size}}]));this.patchFilesState(s)};this.on("upload-start",n),this.on("upload-progress",x(this,_l)[_l]),this.on("upload-success",(i,r)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let s=this.getFile(i.id).progress;this.setFileState(i.id,{progress:{...s,postprocess:x(this,qt)[qt].size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:s.bytesTotal},response:r,uploadURL:r.uploadURL,isPaused:!1}),i.size==null&&this.setFileState(i.id,{size:r.bytesUploaded||s.bytesTotal}),x(this,Wt)[Wt]()}),this.on("preprocess-progress",(i,r)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:{...this.getFile(i.id).progress,preprocess:r}})}),this.on("preprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let r={...this.getState().files};r[i.id]={...r[i.id],progress:{...r[i.id].progress}},delete r[i.id].progress.preprocess,this.setState({files:r})}),this.on("postprocess-progress",(i,r)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:{...this.getState().files[i.id].progress,postprocess:r}})}),this.on("postprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let r={...this.getState().files};r[i.id]={...r[i.id],progress:{...r[i.id].progress}},delete r[i.id].progress.postprocess,this.setState({files:r})}),this.on("restored",()=>{x(this,Wt)[Wt]()}),this.on("dashboard:file-edit-complete",i=>{i&&x(this,Ir)[Ir](i)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",x(this,Ct)[Ct]),window.addEventListener("offline",x(this,Ct)[Ct]),setTimeout(x(this,Ct)[Ct],3e3))}function bw(t,e){e===void 0&&(e={});let{forceAllowNewUpload:n=!1}=e,{allowNewUpload:i,currentUploads:r}=this.getState();if(!i&&!n)throw new Error("Cannot create a new upload: already uploading.");let s=th();return this.emit("upload",s,this.getFilesByIds(t)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...r,[s]:{fileIDs:t,step:0,result:{}}}}),s}function yw(t){let{currentUploads:e}=this.getState();return e[t]}function ww(t){let e={...this.getState().currentUploads};delete e[t],this.setState({currentUploads:e})}async function Ew(t){let e=()=>{let{currentUploads:s}=this.getState();return s[t]},n=e(),i=[...x(this,Xn)[Xn],...x(this,Yn)[Yn],...x(this,qt)[qt]];try{for(let s=n.step||0;s<i.length&&n;s++){let o=i[s];this.setState({currentUploads:{...this.getState().currentUploads,[t]:{...n,step:s}}});let{fileIDs:a}=n;await o(a,t),n=e()}}catch(s){throw x(this,Gn)[Gn](t),s}if(n){n.fileIDs.forEach(l=>{let c=this.getFile(l);c&&c.progress.postprocess&&this.emit("postprocess-complete",c)});let s=n.fileIDs.map(l=>this.getFile(l)),o=s.filter(l=>!l.error),a=s.filter(l=>l.error);this.addResultData(t,{successful:o,failed:a,uploadID:t}),n=e()}let r;return n&&(r=n.result,x(this,Gn)[Gn](t)),r==null&&this.log(`Not setting result for an upload that has been removed: ${t}`),r}bo.VERSION=ow.version;var yo=bo;var Ao,ie,sf,Tw,Jn,ef,of,af,lf,El,yl,wl,Sw,Rr={},cf=[],Aw=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,xo=Array.isArray;function zt(t,e){for(var n in e)t[n]=e[n];return t}function Tl(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function C(t,e,n){var i,r,s,o={};for(s in e)s=="key"?i=e[s]:s=="ref"?r=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?Ao.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)o[s]==null&&(o[s]=t.defaultProps[s]);return Eo(t,o,i,r,null)}function Eo(t,e,n,i,r){var s={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++sf,__i:-1,__u:0};return r==null&&ie.vnode!=null&&ie.vnode(s),s}function Oo(t){return t.children}function To(t,e){this.props=t,this.context=e}function ji(t,e){if(e==null)return t.__?ji(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?ji(t):null}function uf(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return uf(t)}}function tf(t){(!t.__d&&(t.__d=!0)&&Jn.push(t)&&!So.__r++||ef!=ie.debounceRendering)&&((ef=ie.debounceRendering)||of)(So)}function So(){for(var t,e,n,i,r,s,o,a=1;Jn.length;)Jn.length>a&&Jn.sort(af),t=Jn.shift(),a=Jn.length,t.__d&&(n=void 0,r=(i=(e=t).__v).__e,s=[],o=[],e.__P&&((n=zt({},i)).__v=i.__v+1,ie.vnode&&ie.vnode(n),Sl(e.__P,n,i,e.__n,e.__P.namespaceURI,32&i.__u?[r]:null,s,r??ji(i),!!(32&i.__u),o),n.__v=i.__v,n.__.__k[n.__i]=n,ff(s,n,o),n.__e!=r&&uf(n)));So.__r=0}function df(t,e,n,i,r,s,o,a,l,c,d){var u,h,f,p,g,m,v=i&&i.__k||cf,b=e.length;for(l=xw(n,e,v,l,b),u=0;u<b;u++)(f=n.__k[u])!=null&&(h=f.__i==-1?Rr:v[f.__i]||Rr,f.__i=u,m=Sl(t,f,h,r,s,o,a,l,c,d),p=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&Al(h.ref,null,f),d.push(f.ref,f.__c||p,f)),g==null&&p!=null&&(g=p),4&f.__u||h.__k===f.__k?l=hf(f,l,t):typeof f.type=="function"&&m!==void 0?l=m:p&&(l=p.nextSibling),f.__u&=-7);return n.__e=g,l}function xw(t,e,n,i,r){var s,o,a,l,c,d=n.length,u=d,h=0;for(t.__k=new Array(r),s=0;s<r;s++)(o=e[s])!=null&&typeof o!="boolean"&&typeof o!="function"?(l=s+h,(o=t.__k[s]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Eo(null,o,null,null,null):xo(o)?Eo(Oo,{children:o},null,null,null):o.constructor==null&&o.__b>0?Eo(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=t,o.__b=t.__b+1,a=null,(c=o.__i=Ow(o,n,l,u))!=-1&&(u--,(a=n[c])&&(a.__u|=2)),a==null||a.__v==null?(c==-1&&(r>d?h--:r<d&&h++),typeof o.type!="function"&&(o.__u|=4)):c!=l&&(c==l-1?h--:c==l+1?h++:(c>l?h--:h++,o.__u|=4))):t.__k[s]=null;if(u)for(s=0;s<d;s++)(a=n[s])!=null&&(2&a.__u)==0&&(a.__e==i&&(i=ji(a)),gf(a,a));return i}function hf(t,e,n){var i,r;if(typeof t.type=="function"){for(i=t.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=t,e=hf(i[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=ji(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Ow(t,e,n,i){var r,s,o=t.key,a=t.type,l=e[n];if(l===null&&t.key==null||l&&o==l.key&&a==l.type&&(2&l.__u)==0)return n;if(i>(l!=null&&(2&l.__u)==0?1:0))for(r=n-1,s=n+1;r>=0||s<e.length;){if(r>=0){if((l=e[r])&&(2&l.__u)==0&&o==l.key&&a==l.type)return r;r--}if(s<e.length){if((l=e[s])&&(2&l.__u)==0&&o==l.key&&a==l.type)return s;s++}}return-1}function nf(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Aw.test(e)?n:n+"px"}function wo(t,e,n,i,r){var s;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||nf(t.style,e,"");if(n)for(e in n)i&&n[e]==i[e]||nf(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(lf,"$1")),e=e.toLowerCase()in t||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?i?n.u=i.u:(n.u=El,t.addEventListener(e,s?wl:yl,s)):t.removeEventListener(e,s?wl:yl,s);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function rf(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=El++;else if(e.t<n.u)return;return n(ie.event?ie.event(e):e)}}}function Sl(t,e,n,i,r,s,o,a,l,c){var d,u,h,f,p,g,m,v,b,E,_,A,w,T,D,O,N,I=e.type;if(e.constructor!=null)return null;128&n.__u&&(l=!!(32&n.__u),s=[a=e.__e=n.__e]),(d=ie.__b)&&d(e);e:if(typeof I=="function")try{if(v=e.props,b="prototype"in I&&I.prototype.render,E=(d=I.contextType)&&i[d.__c],_=d?E?E.props.value:d.__:i,n.__c?m=(u=e.__c=n.__c).__=u.__E:(b?e.__c=u=new I(v,_):(e.__c=u=new To(v,_),u.constructor=I,u.render=Pw),E&&E.sub(u),u.props=v,u.state||(u.state={}),u.context=_,u.__n=i,h=u.__d=!0,u.__h=[],u._sb=[]),b&&u.__s==null&&(u.__s=u.state),b&&I.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=zt({},u.__s)),zt(u.__s,I.getDerivedStateFromProps(v,u.__s))),f=u.props,p=u.state,u.__v=e,h)b&&I.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),b&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(b&&I.getDerivedStateFromProps==null&&v!==f&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(v,_),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(v,u.__s,_)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(u.props=v,u.state=u.__s,u.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function($){$&&($.__=e)}),A=0;A<u._sb.length;A++)u.__h.push(u._sb[A]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(v,u.__s,_),b&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(f,p,g)})}if(u.context=_,u.props=v,u.__P=t,u.__e=!1,w=ie.__r,T=0,b){for(u.state=u.__s,u.__d=!1,w&&w(e),d=u.render(u.props,u.state,u.context),D=0;D<u._sb.length;D++)u.__h.push(u._sb[D]);u._sb=[]}else do u.__d=!1,w&&w(e),d=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++T<25);u.state=u.__s,u.getChildContext!=null&&(i=zt(zt({},i),u.getChildContext())),b&&!h&&u.getSnapshotBeforeUpdate!=null&&(g=u.getSnapshotBeforeUpdate(f,p)),O=d,d!=null&&d.type===Oo&&d.key==null&&(O=pf(d.props.children)),a=df(t,xo(O)?O:[O],e,n,i,r,s,o,a,l,c),u.base=e.__e,e.__u&=-161,u.__h.length&&o.push(u),m&&(u.__E=u.__=null)}catch($){if(e.__v=null,l||s!=null)if($.then){for(e.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,e.__e=a}else for(N=s.length;N--;)Tl(s[N]);else e.__e=n.__e,e.__k=n.__k;ie.__e($,e,n)}else s==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):a=e.__e=Cw(n.__e,e,n,i,r,s,o,l,c);return(d=ie.diffed)&&d(e),128&e.__u?void 0:a}function ff(t,e,n){for(var i=0;i<n.length;i++)Al(n[i],n[++i],n[++i]);ie.__c&&ie.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(s){s.call(r)})}catch(s){ie.__e(s,r.__v)}})}function pf(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:xo(t)?t.map(pf):zt({},t)}function Cw(t,e,n,i,r,s,o,a,l){var c,d,u,h,f,p,g,m=n.props,v=e.props,b=e.type;if(b=="svg"?r="http://www.w3.org/2000/svg":b=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(c=0;c<s.length;c++)if((f=s[c])&&"setAttribute"in f==!!b&&(b?f.localName==b:f.nodeType==3)){t=f,s[c]=null;break}}if(t==null){if(b==null)return document.createTextNode(v);t=document.createElementNS(r,b,v.is&&v),a&&(ie.__m&&ie.__m(e,s),a=!1),s=null}if(b==null)m===v||a&&t.data==v||(t.data=v);else{if(s=s&&Ao.call(t.childNodes),m=n.props||Rr,!a&&s!=null)for(m={},c=0;c<t.attributes.length;c++)m[(f=t.attributes[c]).name]=f.value;for(c in m)if(f=m[c],c!="children"){if(c=="dangerouslySetInnerHTML")u=f;else if(!(c in v)){if(c=="value"&&"defaultValue"in v||c=="checked"&&"defaultChecked"in v)continue;wo(t,c,null,f,r)}}for(c in v)f=v[c],c=="children"?h=f:c=="dangerouslySetInnerHTML"?d=f:c=="value"?p=f:c=="checked"?g=f:a&&typeof f!="function"||m[c]===f||wo(t,c,f,m[c],r);if(d)a||u&&(d.__html==u.__html||d.__html==t.innerHTML)||(t.innerHTML=d.__html),e.__k=[];else if(u&&(t.innerHTML=""),df(e.type=="template"?t.content:t,xo(h)?h:[h],e,n,i,b=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,o,s?s[0]:n.__k&&ji(n,0),a,l),s!=null)for(c=s.length;c--;)Tl(s[c]);a||(c="value",b=="progress"&&p==null?t.removeAttribute("value"):p!=null&&(p!==t[c]||b=="progress"&&!p||b=="option"&&p!=m[c])&&wo(t,c,p,m[c],r),c="checked",g!=null&&g!=t[c]&&wo(t,c,g,m[c],r))}return t}function Al(t,e,n){try{if(typeof t=="function"){var i=typeof t.__u=="function";i&&t.__u(),i&&e==null||(t.__u=t(e))}else t.current=e}catch(r){ie.__e(r,n)}}function gf(t,e,n){var i,r;if(ie.unmount&&ie.unmount(t),(i=t.ref)&&(i.current&&i.current!=t.__e||Al(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){ie.__e(s,e)}i.base=i.__P=null}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&gf(i[r],e,n||typeof t.type!="function");n||Tl(t.__e),t.__c=t.__=t.__e=void 0}function Pw(t,e,n){return this.constructor(t,n)}function xl(t,e,n){var i,r,s,o;e==document&&(e=document.documentElement),ie.__&&ie.__(t,e),r=(i=typeof n=="function")?null:n&&n.__k||e.__k,s=[],o=[],Sl(e,t=(!i&&n||e).__k=C(Oo,null,[t]),r||Rr,Rr,e.namespaceURI,!i&&n?[n]:r?null:e.firstChild?Ao.call(e.childNodes):null,s,!i&&n?n:r?r.__e:e.firstChild,i,o),ff(s,t,o)}Ao=cf.slice,ie={__e:function(t,e,n,i){for(var r,s,o;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(t)),o=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,i||{}),o=r.__d),o)return r.__E=r}catch(a){t=a}throw t}},sf=0,Tw=function(t){return t!=null&&t.constructor==null},To.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=zt({},this.state),typeof t=="function"&&(t=t(zt({},n),this.props)),t&&zt(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),tf(this))},To.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),tf(this))},To.prototype.render=Oo,Jn=[],of=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,af=function(t,e){return t.__v.__b-e.__v.__b},So.__r=0,lf=/(PointerCapture)$|Capture$/i,El=0,yl=rf(!1),wl=rf(!0),Sw=0;function Ol(t){return typeof t!="object"||t===null||!("nodeType"in t)?!1:t.nodeType===Node.ELEMENT_NODE}function Dw(t,e){return e===void 0&&(e=document),typeof t=="string"?e.querySelector(t):Ol(t)?t:null}var mf=Dw;function Nw(t){for(var e;t&&!t.dir;)t=t.parentNode;return(e=t)==null?void 0:e.dir}var Co=Nw;var Tn=class{constructor(e,n){this.uppy=e,this.opts=n??{}}getPluginState(){let{plugins:e}=this.uppy.getState();return e?.[this.id]||{}}setPluginState(e){let{plugins:n}=this.uppy.getState();this.uppy.setState({plugins:{...n,[this.id]:{...n[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){let e=new zn([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}};function vf(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Iw=0;function Rw(t){return"__private_"+Iw+++"_"+t}function Lw(t){let e=null,n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=r,e||(e=Promise.resolve().then(()=>(e=null,t(...n)))),e}}var Lr=Rw("updateUI"),Cl=class t extends Tn{constructor(){super(...arguments),Object.defineProperty(this,Lr,{writable:!0,value:void 0})}getTargetPlugin(e){let n;if(typeof e?.addTarget=="function")n=e,n instanceof t||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:n,UIPlugin:t}}));else if(typeof e=="function"){let i=e;this.uppy.iteratePlugins(r=>{r instanceof i&&(n=r)})}return n}mount(e,n){let i=n.id,r=mf(e);if(r){this.isTargetDOMEl=!0;let a=document.createElement("div");return a.classList.add("uppy-Root"),vf(this,Lr)[Lr]=Lw(l=>{this.uppy.getPlugin(this.id)&&(xl(this.render(l,a),a),this.afterUpdate())}),this.uppy.log(`Installing ${i} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(r.innerHTML=""),xl(this.render(this.uppy.getState(),a),a),this.el=a,r.appendChild(a),a.dir=this.opts.direction||Co(a)||"ltr",this.onMount(),this.el}let s=this.getTargetPlugin(e);if(s)return this.uppy.log(`Installing ${i} to ${s.id}`),this.parent=s,this.el=s.addTarget(n),this.onMount(),this.el;this.uppy.log(`Not installing ${i}`);let o=`Invalid target option given to ${i}.`;throw typeof e=="function"?o+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":o+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(o)}render(e,n){throw new Error("Extend the render method to add your plugin to a DOM element")}update(e){if(this.el!=null){var n,i;(n=(i=vf(this,Lr))[Lr])==null||n.call(i,e)}}unmount(){if(this.isTargetDOMEl){var e;(e=this.el)==null||e.remove()}this.onUnmount()}onMount(){}onUnmount(){}},kr=Cl;var Po=Array.from;function Pl(){let t=document.body;return!(!("draggable"in t)||!("ondragstart"in t&&"ondrop"in t)||!("FormData"in window)||!("FileReader"in window))}function Do(t,e,n,i){let{onSuccess:r}=i;t.readEntries(s=>{let o=[...e,...s];s.length?queueMicrotask(()=>{Do(t,o,n,{onSuccess:r})}):r(o)},s=>{n(s),r(e)})}function _f(t,e){return t==null?t:{kind:t.isFile?"file":t.isDirectory?"directory":void 0,name:t.name,getFile(){return new Promise((n,i)=>t.file(n,i))},async*values(){let n=t.createReader();yield*await new Promise(r=>{Do(n,[],e,{onSuccess:s=>r(s.map(o=>_f(o,e)))})})},isSameEntry:void 0}}function bf(t,e,n){try{return n===void 0&&(n=void 0),async function*(){let i=()=>`${e}/${t.name}`;if(t.kind==="file"){let r=await t.getFile();r!=null?(r.relativePath=e?i():null,yield r):n!=null&&(yield n)}else if(t.kind==="directory")for await(let r of t.values())yield*bf(r,e?i():t.name);else n!=null&&(yield n)}()}catch(i){return Promise.reject(i)}}async function*Dl(t,e){let n=await Promise.all(Array.from(t.items,async i=>{var r;let s,o=()=>typeof i.getAsEntry=="function"?i.getAsEntry():i.webkitGetAsEntry();return(r=s)!=null||(s=_f(o(),e)),{fileSystemHandle:s,lastResortFile:i.getAsFile()}}));for(let{lastResortFile:i,fileSystemHandle:r}of n)if(r!=null)try{yield*bf(r,"",i)}catch(s){i!=null?yield i:e(s)}else i!=null&&(yield i)}function Nl(t){let e=Po(t.files);return Promise.resolve(e)}async function Il(t,e){var n;let i=(n=e?.logDropError)!=null?n:Function.prototype;try{let r=[];for await(let s of Dl(t,i))r.push(s);return r}catch{return Nl(t)}}var yf={strings:{dropHereOr:"Drop here or %{browse}",browse:"browse"}};var kw={version:"4.1.2"},Mw={inputName:"files[]",width:"100%",height:"100%"},Qn=class t extends kr{constructor(e,n){super(e,{...Mw,...n}),this.isDragDropSupported=Pl(),this.addFiles=i=>{let r=i.map(s=>({source:this.id,name:s.name,type:s.type,data:s,meta:{relativePath:s.relativePath||null}}));try{this.uppy.addFiles(r)}catch(s){this.uppy.log(s)}},this.onInputChange=i=>{let r=Po(i.currentTarget.files||[]);r.length>0&&(this.uppy.log("[DragDrop] Files selected through input"),this.addFiles(r)),i.currentTarget.value=""},this.handleDragOver=i=>{var r,s;i.preventDefault(),i.stopPropagation();let{types:o}=i.dataTransfer,a=o.some(c=>c==="Files"),{allowNewUpload:l}=this.uppy.getState();if(!a||!l){i.dataTransfer.dropEffect="none";return}i.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),(r=(s=this.opts).onDragOver)==null||r.call(s,i)},this.handleDragLeave=i=>{var r,s;i.preventDefault(),i.stopPropagation(),this.setPluginState({isDraggingOver:!1}),(r=(s=this.opts).onDragLeave)==null||r.call(s,i)},this.handleDrop=async i=>{var r,s;i.preventDefault(),i.stopPropagation(),this.setPluginState({isDraggingOver:!1});let o=l=>{this.uppy.log(l,"error")},a=await Il(i.dataTransfer,{logDropError:o});a.length>0&&(this.uppy.log("[DragDrop] Files dropped"),this.addFiles(a)),(r=(s=this.opts).onDrop)==null||r.call(s,i)},this.type="acquirer",this.id=this.opts.id||"DragDrop",this.title="Drag & Drop",this.defaultLocale=yf,this.i18nInit()}renderHiddenFileInput(){var e;let{restrictions:n}=this.uppy.opts;return C("input",{className:"uppy-DragDrop-input",type:"file",hidden:!0,ref:i=>{this.fileInputRef=i},name:this.opts.inputName,multiple:n.maxNumberOfFiles!==1,accept:(e=n.allowedFileTypes)==null?void 0:e.join(", "),onChange:this.onInputChange})}static renderArrowSvg(){return C("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-DragDrop-arrow",width:"16",height:"16",viewBox:"0 0 16 16"},C("path",{d:"M11 10V0H5v10H2l6 6 6-6h-3zm0 0",fillRule:"evenodd"}))}renderLabel(){return C("div",{className:"uppy-DragDrop-label"},this.i18nArray("dropHereOr",{browse:C("span",{className:"uppy-DragDrop-browse"},this.i18n("browse"))}))}renderNote(){return C("span",{className:"uppy-DragDrop-note"},this.opts.note)}render(){let e=`uppy-u-reset
      uppy-DragDrop-container
      ${this.isDragDropSupported?"uppy-DragDrop--isDragDropSupported":""}
      ${this.getPluginState().isDraggingOver?"uppy-DragDrop--isDraggingOver":""}
    `,n={width:this.opts.width,height:this.opts.height};return C("button",{type:"button",className:e,style:n,onClick:()=>this.fileInputRef.click(),onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},this.renderHiddenFileInput(),C("div",{className:"uppy-DragDrop-inner"},t.renderArrowSvg(),this.renderLabel(),this.renderNote()))}install(){let{target:e}=this.opts;this.setPluginState({isDraggingOver:!1}),e&&this.mount(e,this)}uninstall(){this.unmount()}};Qn.VERSION=kw.version;function No(t,e,n,i){return n===0||t===e?t:i===0?e:t+(e-t)*2**(-i/n)}var ot={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};var Hl=sn(Rl(),1);function Mr(t){let e=[],n="indeterminate",i;for(let{progress:s}of Object.values(t)){let{preprocess:o,postprocess:a}=s;i==null&&(o||a)&&({mode:n,message:i}=o||a),o?.mode==="determinate"&&e.push(o.value),a?.mode==="determinate"&&e.push(a.value)}let r=e.reduce((s,o)=>s+o/e.length,0);return{mode:n,message:i,value:r}}var Fl=sn(Rl(),1),Ml=sn(fl(),1);function Ll(t){let e=Math.floor(t/3600)%24,n=Math.floor(t/60)%60,i=Math.floor(t%60);return{hours:e,minutes:n,seconds:i}}function kl(t){let e=Ll(t),n=e.hours===0?"":`${e.hours}h`,i=e.minutes===0?"":`${e.hours===0?e.minutes:` ${e.minutes.toString(10).padStart(2,"0")}`}m`,r=e.hours!==0?"":`${e.minutes===0?e.seconds:` ${e.seconds.toString(10).padStart(2,"0")}`}s`;return`${n}${i}${r}`}var Fw="\xB7",wf=()=>` ${Fw} `;function Ef(t){let{newFiles:e,isUploadStarted:n,recoveredState:i,i18n:r,uploadState:s,isSomeGhost:o,startUpload:a}=t,l=(0,Fl.default)("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":s===ot.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":o}),c=e&&n&&!i?r("uploadXNewFiles",{smart_count:e}):r("uploadXFiles",{smart_count:e});return C("button",{type:"button",className:l,"aria-label":r("uploadXFiles",{smart_count:e}),onClick:a,disabled:o,"data-uppy-super-focusable":!0},c)}function Tf(t){let{i18n:e,uppy:n}=t;return C("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>n.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry"},C("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10"},C("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),e("retry"))}function Sf(t){let{i18n:e,uppy:n}=t;return C("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>n.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0},C("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},C("g",{fill:"none",fillRule:"evenodd"},C("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),C("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))}function Af(t){let{isAllPaused:e,i18n:n,isAllComplete:i,resumableUploads:r,uppy:s}=t,o=n(e?"resume":"pause");function a(){if(!i){if(!r){s.cancelAll();return}if(e){s.resumeAll();return}s.pauseAll()}}return C("button",{title:o,"aria-label":o,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:a,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0},C("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},C("g",{fill:"none",fillRule:"evenodd"},C("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),C("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"}))))}function xf(t){let{i18n:e,doneButtonHandler:n}=t;return C("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:n,"data-uppy-super-focusable":!0},e("done"))}function Of(){return C("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},C("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"}))}function Cf(t){let{progress:e}=t,{value:n,mode:i,message:r}=e;return C("div",{className:"uppy-StatusBar-content"},C(Of,null),i==="determinate"?`${Math.round(n*100)}% \xB7 `:"",r)}function Uw(t){let{numUploads:e,complete:n,totalUploadedSize:i,totalSize:r,totalETA:s,i18n:o}=t,a=e>1,l=(0,Ml.default)(i);return C("div",{className:"uppy-StatusBar-statusSecondary"},a&&o("filesUploadedOfTotal",{complete:n,smart_count:e}),C("span",{className:"uppy-StatusBar-additionalInfo"},a&&wf(),r!=null?o("dataUploadedOfTotal",{complete:l,total:(0,Ml.default)(r)}):o("dataUploadedOfUnknown",{complete:l}),wf(),s!=null&&o("xTimeLeft",{time:kl(s)})))}function Pf(t){let{i18n:e,complete:n,numUploads:i}=t;return C("div",{className:"uppy-StatusBar-statusSecondary"},e("filesUploadedOfTotal",{complete:n,smart_count:i}))}function $w(t){let{i18n:e,newFiles:n,startUpload:i}=t,r=(0,Fl.default)("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return C("div",{className:"uppy-StatusBar-statusSecondary"},C("div",{className:"uppy-StatusBar-statusSecondaryHint"},e("xMoreFilesAdded",{smart_count:n})),C("button",{type:"button",className:r,"aria-label":e("uploadXFiles",{smart_count:n}),onClick:i},e("upload")))}function Df(t){let{i18n:e,supportsUploadProgress:n,totalProgress:i,showProgressDetails:r,isUploadStarted:s,isAllComplete:o,isAllPaused:a,newFiles:l,numUploads:c,complete:d,totalUploadedSize:u,totalSize:h,totalETA:f,startUpload:p}=t,g=l&&s;if(!s||o)return null;let m=e(a?"paused":"uploading");function v(){return!a&&!g&&r?n?C(Uw,{numUploads:c,complete:d,totalUploadedSize:u,totalSize:h,totalETA:f,i18n:e}):C(Pf,{i18n:e,complete:d,numUploads:c}):null}return C("div",{className:"uppy-StatusBar-content","aria-label":m,title:m},a?null:C(Of,null),C("div",{className:"uppy-StatusBar-status"},C("div",{className:"uppy-StatusBar-statusPrimary"},n&&i!==0?`${m}: ${i}%`:m),v(),g?C($w,{i18n:e,newFiles:l,startUpload:p}):null))}function Nf(t){let{i18n:e}=t;return C("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete")},C("div",{className:"uppy-StatusBar-status"},C("div",{className:"uppy-StatusBar-statusPrimary"},C("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11"},C("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),e("complete"))))}function If(t){let{error:e,i18n:n,complete:i,numUploads:r}=t;function s(){let o=`${n("uploadFailed")} 

 ${e}`;alert(o)}return C("div",{className:"uppy-StatusBar-content",title:n("uploadFailed")},C("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11"},C("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),C("div",{className:"uppy-StatusBar-status"},C("div",{className:"uppy-StatusBar-statusPrimary"},n("uploadFailed"),C("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":n("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:s,type:"button"},"?")),C(Pf,{i18n:n,complete:i,numUploads:r})))}var{STATE_ERROR:Rf,STATE_WAITING:Hw,STATE_PREPROCESSING:Ul,STATE_UPLOADING:Ro,STATE_POSTPROCESSING:$l,STATE_COMPLETE:Lo}=ot;function jl(t){let{newFiles:e,allowNewUpload:n,isUploadInProgress:i,isAllPaused:r,resumableUploads:s,error:o,hideUploadButton:a=void 0,hidePauseResumeButton:l=!1,hideCancelButton:c=!1,hideRetryButton:d=!1,recoveredState:u,uploadState:h,totalProgress:f,files:p,supportsUploadProgress:g,hideAfterFinish:m=!1,isSomeGhost:v,doneButtonHandler:b=void 0,isUploadStarted:E,i18n:_,startUpload:A,uppy:w,isAllComplete:T,showProgressDetails:D=void 0,numUploads:O,complete:N,totalSize:I,totalETA:$,totalUploadedSize:H}=t;function z(){switch(h){case $l:case Ul:{let rn=Mr(p);return rn.mode==="determinate"?rn.value*100:f}case Rf:return null;case Ro:return g?f:null;default:return f}}function ue(){switch(h){case $l:case Ul:{let{mode:rn}=Mr(p);return rn==="indeterminate"}case Ro:return!g;default:return!1}}let q=z(),B=q??100,de=!o&&e&&(!i&&!r||u)&&n&&!a,he=!c&&h!==Hw&&h!==Lo,Oe=s&&!l&&h===Ro,ve=o&&!T&&!d,Y=b&&h===Lo,wt=(0,Hl.default)("uppy-StatusBar-progress",{"is-indeterminate":ue()}),et=(0,Hl.default)("uppy-StatusBar",`is-${h}`,{"has-ghosts":v}),tt=(()=>{switch(h){case Ul:case $l:return C(Cf,{progress:Mr(p)});case Lo:return C(Nf,{i18n:_});case Rf:return C(If,{error:o,i18n:_,numUploads:O,complete:N});case Ro:return C(Df,{i18n:_,supportsUploadProgress:g,totalProgress:f,showProgressDetails:D,isUploadStarted:E,isAllComplete:T,isAllPaused:r,newFiles:e,numUploads:O,complete:N,totalUploadedSize:H,totalSize:I,totalETA:$,startUpload:A});default:return null}})();return!(de||ve||Oe||he||Y)&&!tt||h===Lo&&m?null:C("div",{className:et},C("div",{className:wt,style:{width:`${B}%`},role:"progressbar","aria-label":`${B}%`,"aria-valuetext":`${B}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":q}),tt,C("div",{className:"uppy-StatusBar-actions"},de?C(Ef,{newFiles:e,isUploadStarted:E,recoveredState:u,i18n:_,isSomeGhost:v,startUpload:A,uploadState:h}):null,ve?C(Tf,{i18n:_,uppy:w}):null,Oe?C(Af,{isAllPaused:r,i18n:_,isAllComplete:T,resumableUploads:s,uppy:w}):null,he?C(Sf,{i18n:_,uppy:w}):null,Y?C(xf,{i18n:_,doneButtonHandler:b}):null))}var Lf={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};function ae(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var jw=0;function Bi(t){return"__private_"+jw+++"_"+t}var Bw={version:"4.1.3"},Vw=2e3,qw=2e3;function Ww(t,e,n,i){if(t)return ot.STATE_ERROR;if(e)return ot.STATE_COMPLETE;if(n)return ot.STATE_WAITING;let r=ot.STATE_WAITING,s=Object.keys(i);for(let o=0;o<s.length;o++){let{progress:a}=i[s[o]];if(a.uploadStarted&&!a.uploadComplete)return ot.STATE_UPLOADING;a.preprocess&&(r=ot.STATE_PREPROCESSING),a.postprocess&&r!==ot.STATE_PREPROCESSING&&(r=ot.STATE_POSTPROCESSING)}return r}var zw={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null},bt=Bi("lastUpdateTime"),Pt=Bi("previousUploadedBytes"),Kt=Bi("previousSpeed"),at=Bi("previousETA"),Bl=Bi("computeSmoothETA"),Fr=Bi("onUploadStart"),Zn=class extends kr{constructor(e,n){super(e,{...zw,...n}),Object.defineProperty(this,Bl,{value:Kw}),Object.defineProperty(this,bt,{writable:!0,value:void 0}),Object.defineProperty(this,Pt,{writable:!0,value:void 0}),Object.defineProperty(this,Kt,{writable:!0,value:void 0}),Object.defineProperty(this,at,{writable:!0,value:void 0}),this.startUpload=()=>this.uppy.upload().catch(()=>{}),Object.defineProperty(this,Fr,{writable:!0,value:()=>{let{recoveredState:i}=this.uppy.getState();if(ae(this,Kt)[Kt]=null,ae(this,at)[at]=null,i){ae(this,Pt)[Pt]=Object.values(i.files).reduce((r,s)=>{let{progress:o}=s;return r+o.bytesUploaded},0),this.uppy.emit("restore-confirmed");return}ae(this,bt)[bt]=performance.now(),ae(this,Pt)[Pt]=0}}),this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=Lf,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(e){let{capabilities:n,files:i,allowNewUpload:r,totalProgress:s,error:o,recoveredState:a}=e,{newFiles:l,startedFiles:c,completeFiles:d,isUploadStarted:u,isAllComplete:h,isAllPaused:f,isUploadInProgress:p,isSomeGhost:g}=this.uppy.getObjectOfFilesPerState(),m=a?Object.values(i):l,v=!!n.resumableUploads,b=n.uploadProgress!==!1,E=null,_=0;c.every(w=>w.progress.bytesTotal!=null&&w.progress.bytesTotal!==0)?(E=0,c.forEach(w=>{E+=w.progress.bytesTotal||0,_+=w.progress.bytesUploaded||0})):c.forEach(w=>{_+=w.progress.bytesUploaded||0});let A=ae(this,Bl)[Bl]({uploaded:_,total:E});return jl({error:o,uploadState:Ww(o,h,a,e.files||{}),allowNewUpload:r,totalProgress:s,totalSize:E,totalUploadedSize:_,isAllComplete:!1,isAllPaused:f,isUploadStarted:u,isUploadInProgress:p,isSomeGhost:g,recoveredState:a,complete:d.length,newFiles:m.length,numUploads:c.length,totalETA:A,files:i,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:v,supportsUploadProgress:b,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish})}onMount(){let e=this.el;Co(e)||(e.dir="ltr")}install(){let{target:e}=this.opts;e&&this.mount(e,this),this.uppy.on("upload",ae(this,Fr)[Fr]),ae(this,bt)[bt]=performance.now(),ae(this,Pt)[Pt]=this.uppy.getFiles().reduce((n,i)=>n+i.progress.bytesUploaded,0)}uninstall(){this.unmount(),this.uppy.off("upload",ae(this,Fr)[Fr])}};function Kw(t){var e,n;if(t.total==null||t.total===0)return null;let i=t.total-t.uploaded;if(i<=0)return null;(n=(e=ae(this,bt))[bt])!=null||(e[bt]=performance.now());let r=performance.now()-ae(this,bt)[bt];if(r===0){var s;return Math.round(((s=ae(this,at)[at])!=null?s:0)/100)/10}let o=t.uploaded-ae(this,Pt)[Pt];if(ae(this,Pt)[Pt]=t.uploaded,o<=0){var a;return Math.round(((a=ae(this,at)[at])!=null?a:0)/100)/10}let l=o/r,c=ae(this,Kt)[Kt]==null?l:No(l,ae(this,Kt)[Kt],Vw,r);ae(this,Kt)[Kt]=c;let d=i/c,u=Math.max(ae(this,at)[at]-r,0),h=ae(this,at)[at]==null?d:No(d,u,qw,r);return ae(this,at)[at]=h,ae(this,bt)[bt]=performance.now(),Math.round(h/100)/10}Zn.VERSION=Bw.version;var Vl=class extends Error{constructor(){super(...arguments),this.name="UserFacingApiError"}},kf=Vl;var Bf=sn(Hf(),1);var Yw=Object.prototype.toString,Gw=t=>Yw.call(t)==="[object Error]",Jw=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);function ql(t){return t&&Gw(t)&&t.name==="TypeError"&&typeof t.message=="string"?t.message==="Load failed"?t.stack===void 0:Jw.has(t.message):!1}var Vi=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}},jf=(t,e,n)=>{let i=n.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=i,t};async function ko(t,e){return new Promise((n,i)=>{e={...e},e.onFailedAttempt??=()=>{},e.shouldRetry??=()=>!0,e.retries??=10;let r=Bf.default.operation(e),s=()=>{r.stop(),i(e.signal?.reason)};e.signal&&!e.signal.aborted&&e.signal.addEventListener("abort",s,{once:!0});let o=()=>{e.signal?.removeEventListener("abort",s),r.stop()};r.attempt(async a=>{try{let l=await t(a);o(),n(l)}catch(l){try{if(!(l instanceof Error))throw new TypeError(`Non-error was thrown: "${l}". You should only throw errors.`);if(l instanceof Vi)throw l.originalError;if(l instanceof TypeError&&!ql(l))throw l;if(jf(l,a,e),await e.shouldRetry(l)||(r.stop(),i(l)),await e.onFailedAttempt(l),!r.retry(l))throw r.mainError()}catch(c){jf(c,a,e),o(),i(c)}}})})}var Wl=class extends Error{constructor(e,n){n===void 0&&(n=null),super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=n}},Vf=Wl;function zl(){return fetch(...arguments).catch(t=>{throw t.name==="AbortError"?t:new Vf(t)})}function Ur(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Kl=class extends Error{constructor(e,n){super(e),this.cause=n?.cause,this.cause&&Ur(this.cause,"isNetworkError")?this.isNetworkError=this.cause.isNetworkError:this.isNetworkError=!1}},qf=Kl;function Xl(t){var e;let i=(e=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?([^\n]+)/i.exec(t))==null?void 0:e[1];return`${/^http:\/\//i.test(t)?"ws":"wss"}://${i}`}var Yl=class extends Error{constructor(){super("Authorization required"),this.name="AuthError",this.isAuthError=!0}},Wf=Yl;function Xt(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Qw=0;function Mo(t){return"__private_"+Qw+++"_"+t}var Zw={version:"4.4.1"};function eE(t){return t.replace(/\/$/,"")}var zf=10,tE=5*60*1e3,Kf=401,Jl=class extends Error{constructor(e){let{statusCode:n,message:i}=e;super(i),this.name="HttpError",this.statusCode=n}};async function nE(t){if(t.status===Kf)throw new Wf;if(t.ok)return t.json();let e=`Failed request with status: ${t.status}. ${t.statusText}`,n;try{n=await t.json(),n.message&&(e=`${e} message: ${n.message}`),n.requestId&&(e=`${e} request-Id: ${n.requestId}`)}catch(i){throw new Error(e,{cause:i})}throw t.status>=400&&t.status<=499&&n.message?new kf(n.message):new Jl({statusCode:t.status,message:e})}function iE(t,e,n){let{progress:i,bytesUploaded:r,bytesTotal:s}=e;if(i){var o;t.uppy.log(`Upload progress: ${i}`),t.uppy.emit("upload-progress",n,{uploadStarted:(o=n.progress.uploadStarted)!=null?o:0,bytesUploaded:r,bytesTotal:s})}}var Yt=Mo("companionHeaders"),$r=Mo("getUrl"),Gl=Mo("requestSocketToken"),Hr=Mo("awaitRemoteFileUpload"),Gt=class{constructor(e,n){Object.defineProperty(this,Hr,{value:sE}),Object.defineProperty(this,$r,{value:rE}),Object.defineProperty(this,Yt,{writable:!0,value:void 0}),Object.defineProperty(this,Gl,{writable:!0,value:async i=>{var r;let{file:s,postBody:o,signal:a}=i;if(((r=s.remote)==null?void 0:r.url)==null)throw new Error("Cannot connect to an undefined URL");return(await this.post(s.remote.url,{...s.remote.body,...o},{signal:a})).token}}),this.uppy=e,this.opts=n,this.onReceiveResponse=this.onReceiveResponse.bind(this),Xt(this,Yt)[Yt]=n.companionHeaders}setCompanionHeaders(e){Xt(this,Yt)[Yt]=e}[Symbol.for("uppy test: getCompanionHeaders")](){return Xt(this,Yt)[Yt]}get hostname(){let{companion:e}=this.uppy.getState(),n=this.opts.companionUrl;return eE(e&&e[n]?e[n]:n)}async headers(e){return e===void 0&&(e=!1),{...{Accept:"application/json",...e?void 0:{"Content-Type":"application/json"}},...Xt(this,Yt)[Yt]}}onReceiveResponse(e){let{headers:n}=e,r=this.uppy.getState().companion||{},s=this.opts.companionUrl;n.has("i-am")&&n.get("i-am")!==r[s]&&this.uppy.setState({companion:{...r,[s]:n.get("i-am")}})}async request(e){let{path:n,method:i="GET",data:r,skipPostResponse:s,signal:o}=e;try{let a=await this.headers(!r),l=await zl(Xt(this,$r)[$r](n),{method:i,signal:o,headers:a,credentials:this.opts.companionCookiesRule||"same-origin",body:r?JSON.stringify(r):null});return s||this.onReceiveResponse(l),await nE(l)}catch(a){throw a.isAuthError||a.name==="UserFacingApiError"||a.name==="AbortError"?a:new qf(`Could not ${i} ${Xt(this,$r)[$r](n)}`,{cause:a})}}async get(e,n){return this.request({...n,path:e})}async post(e,n,i){return this.request({...i,path:e,method:"POST",data:n})}async delete(e,n,i){return this.request({...i,path:e,method:"DELETE",data:n})}async uploadRemoteFile(e,n,i){var r=this;try{let{signal:s,getQueue:o}=i||{};return await ko(async()=>{var a;let l=(a=this.uppy.getFile(e.id))==null?void 0:a.serverToken;if(l!=null)return this.uppy.log(`Connecting to exiting websocket ${l}`),Xt(this,Hr)[Hr]({file:e,queue:o(),signal:s});let d=await o().wrapPromiseFunction(async function(){try{return await Xt(r,Gl)[Gl](...arguments)}catch(u){if(u.isAuthError)throw new Vi(u);if(u.cause==null)throw u;let h=u.cause,f=()=>[408,409,429,418,423].includes(h.statusCode)||h.statusCode>=500&&h.statusCode<=599&&![501,505].includes(h.statusCode);throw h.name==="HttpError"&&!f()?new Vi(h):h}},{priority:-1})({file:e,postBody:n,signal:s}).abortOn(s);if(this.uppy.getFile(e.id))return this.uppy.setFileState(e.id,{serverToken:d}),Xt(this,Hr)[Hr]({file:this.uppy.getFile(e.id),queue:o(),signal:s})},{retries:zf,signal:s,onFailedAttempt:a=>this.uppy.log(`Retrying upload due to: ${a.message}`,"warning")})}catch(s){if(s.name==="AbortError")return;throw this.uppy.emit("upload-error",e,s),s}}};function rE(t){return/^(https?:|)\/\//.test(t)?t:`${this.hostname}/${t}`}async function sE(t){let{file:e,queue:n,signal:i}=t,r,{capabilities:s}=this.uppy.getState();try{return await new Promise((o,a)=>{let l=e.serverToken,c=Xl(e.remote.companionUrl),d,u,h,{isPaused:f}=e,p=(T,D)=>{if(d==null||d.readyState!==d.OPEN){var O;this.uppy.log(`Cannot send "${T}" to socket ${e.id} because the socket state was ${String((O=d)==null?void 0:O.readyState)}`,"warning");return}d.send(JSON.stringify({action:T,payload:D??{}}))};function g(){s.resumableUploads&&p(f?"pause":"resume")}let m=async()=>{u&&u.abort(),u=new AbortController;let T=O=>{var N;this.uppy.setFileState(e.id,{serverToken:null}),(N=u)==null||N.abort==null||N.abort(),a(O)};function D(){clearTimeout(h),!f&&(h=setTimeout(()=>T(new Error("Timeout waiting for message from Companion socket")),tE))}try{await n.wrapPromiseFunction(async()=>{await ko(async()=>new Promise((N,I)=>{d=new WebSocket(`${c}/api/${l}`),D(),d.addEventListener("close",()=>{d=void 0,I(new Error("Socket closed unexpectedly"))}),d.addEventListener("error",H=>{var z;this.uppy.log(`Companion socket error ${JSON.stringify(H)}, closing socket`,"warning"),(z=d)==null||z.close()}),d.addEventListener("open",()=>{g()}),d.addEventListener("message",H=>{D();try{let{action:de,payload:he}=JSON.parse(H.data);switch(de){case"progress":{iE(this,he,this.uppy.getFile(e.id));break}case"success":{var z,ue,q,B;let Oe=(z=he.response)==null?void 0:z.responseText;this.uppy.emit("upload-success",this.uppy.getFile(e.id),{uploadURL:he.url,status:(ue=(q=he.response)==null?void 0:q.status)!=null?ue:200,body:Oe?JSON.parse(Oe):void 0}),(B=u)==null||B.abort==null||B.abort(),o();break}case"error":{let{message:Oe}=he.error;throw Object.assign(new Error(Oe),{cause:he.error})}default:this.uppy.log(`Companion socket unknown action ${de}`,"warning")}}catch(de){T(de)}});let $=()=>{this.uppy.log(`Closing socket ${e.id}`),clearTimeout(h),d&&d.close(),d=void 0};u.signal.addEventListener("abort",()=>{$()})}),{retries:zf,signal:u.signal,onFailedAttempt:()=>{u.signal.aborted||this.uppy.log(`Retrying websocket ${e.id}`)}})})().abortOn(u.signal)}catch(O){if(u.signal.aborted)return;T(O)}},v=T=>{s.resumableUploads&&(f=T,d&&g())},b=T=>{var D;s.individualCancellation&&T.id===e.id&&(p("cancel"),(D=u)==null||D.abort==null||D.abort(),this.uppy.log(`upload ${e.id} was removed`),o())},E=()=>{var T;p("cancel"),(T=u)==null||T.abort==null||T.abort(),this.uppy.log(`upload ${e.id} was canceled`),o()},_=(T,D)=>{T?.id===e.id&&v(D)},A=()=>v(!0),w=()=>v(!1);this.uppy.on("file-removed",b),this.uppy.on("cancel-all",E),this.uppy.on("upload-pause",_),this.uppy.on("pause-all",A),this.uppy.on("resume-all",w),r=()=>{this.uppy.off("file-removed",b),this.uppy.off("cancel-all",E),this.uppy.off("upload-pause",_),this.uppy.off("pause-all",A),this.uppy.off("resume-all",w)},i.addEventListener("abort",()=>{var T;(T=u)==null||T.abort()}),m()})}finally{r?.()}}Gt.VERSION=Zw.version;function Jt(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var aE=0;function Xf(t){return"__private_"+aE+++"_"+t}var Be=Xf("uppy"),jr=Xf("events"),Br=class{constructor(e){Object.defineProperty(this,Be,{writable:!0,value:void 0}),Object.defineProperty(this,jr,{writable:!0,value:[]}),Jt(this,Be)[Be]=e}on(e,n){return Jt(this,jr)[jr].push([e,n]),Jt(this,Be)[Be].on(e,n)}remove(){for(let[e,n]of Jt(this,jr)[jr].splice(0))Jt(this,Be)[Be].off(e,n)}onFilePause(e,n){this.on("upload-pause",(i,r)=>{e===i?.id&&n(r)})}onFileRemove(e,n){this.on("file-removed",i=>{e===i.id&&n(i.id)})}onPause(e,n){this.on("upload-pause",(i,r)=>{e===i?.id&&n(r)})}onRetry(e,n){this.on("upload-retry",i=>{e===i?.id&&n()})}onRetryAll(e,n){this.on("retry-all",()=>{Jt(this,Be)[Be].getFile(e)&&n()})}onPauseAll(e,n){this.on("pause-all",()=>{Jt(this,Be)[Be].getFile(e)&&n()})}onCancelAll(e,n){var i=this;this.on("cancel-all",function(){Jt(i,Be)[Be].getFile(e)&&n(...arguments)})}onResumeAll(e,n){this.on("resume-all",()=>{Jt(this,Be)[Be].getFile(e)&&n()})}};function k(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var lE=0;function Qe(t){return"__private_"+lE+++"_"+t}function cE(t){return new Error("Cancelled",{cause:t})}function Yf(t){if(t!=null){var e;let n=()=>this.abort(t.reason);t.addEventListener("abort",n,{once:!0});let i=()=>{t.removeEventListener("abort",n)};(e=this.then)==null||e.call(this,i,i)}return this}var ct=Qe("activeRequests"),qe=Qe("queuedHandlers"),lt=Qe("paused"),ti=Qe("pauseTimer"),Ve=Qe("downLimit"),ni=Qe("upperLimit"),Qt=Qe("rateLimitingTimer"),Vr=Qe("call"),Zt=Qe("queueNext"),ec=Qe("next"),Ql=Qe("queue"),tc=Qe("dequeue"),Zl=Qe("resume"),ii=Qe("increaseLimit"),Fo=class{constructor(e){Object.defineProperty(this,tc,{value:pE}),Object.defineProperty(this,Ql,{value:fE}),Object.defineProperty(this,ec,{value:hE}),Object.defineProperty(this,Zt,{value:dE}),Object.defineProperty(this,Vr,{value:uE}),Object.defineProperty(this,ct,{writable:!0,value:0}),Object.defineProperty(this,qe,{writable:!0,value:[]}),Object.defineProperty(this,lt,{writable:!0,value:!1}),Object.defineProperty(this,ti,{writable:!0,value:void 0}),Object.defineProperty(this,Ve,{writable:!0,value:1}),Object.defineProperty(this,ni,{writable:!0,value:void 0}),Object.defineProperty(this,Qt,{writable:!0,value:void 0}),Object.defineProperty(this,Zl,{writable:!0,value:()=>this.resume()}),Object.defineProperty(this,ii,{writable:!0,value:()=>{if(k(this,lt)[lt]){k(this,Qt)[Qt]=setTimeout(k(this,ii)[ii],0);return}k(this,Ve)[Ve]=this.limit,this.limit=Math.ceil((k(this,ni)[ni]+k(this,Ve)[Ve])/2);for(let n=k(this,Ve)[Ve];n<=this.limit;n++)k(this,Zt)[Zt]();k(this,ni)[ni]-k(this,Ve)[Ve]>3?k(this,Qt)[Qt]=setTimeout(k(this,ii)[ii],2e3):k(this,Ve)[Ve]=Math.floor(k(this,Ve)[Ve]/2)}}),typeof e!="number"||e===0?this.limit=1/0:this.limit=e}run(e,n){return!k(this,lt)[lt]&&k(this,ct)[ct]<this.limit?k(this,Vr)[Vr](e):k(this,Ql)[Ql](e,n)}wrapSyncFunction(e,n){var i=this;return function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];let a=i.run(()=>(e(...s),queueMicrotask(()=>a.done()),()=>{}),n);return{abortOn:Yf,abort(){a.abort()}}}}wrapPromiseFunction(e,n){var i=this;return function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];let a,l=new Promise((c,d)=>{a=i.run(()=>{let u,h;try{h=Promise.resolve(e(...s))}catch(f){h=Promise.reject(f)}return h.then(f=>{u?d(u):(a.done(),c(f))},f=>{u?d(u):(a.done(),d(f))}),f=>{u=cE(f)}},n)});return l.abort=c=>{a.abort(c)},l.abortOn=Yf,l}}resume(){k(this,lt)[lt]=!1,clearTimeout(k(this,ti)[ti]);for(let e=0;e<this.limit;e++)k(this,Zt)[Zt]()}pause(e){e===void 0&&(e=null),k(this,lt)[lt]=!0,clearTimeout(k(this,ti)[ti]),e!=null&&(k(this,ti)[ti]=setTimeout(k(this,Zl)[Zl],e))}rateLimit(e){clearTimeout(k(this,Qt)[Qt]),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(k(this,ni)[ni]=this.limit-1,this.limit=k(this,Ve)[Ve],k(this,Qt)[Qt]=setTimeout(k(this,ii)[ii],e))}get isPaused(){return k(this,lt)[lt]}};function uE(t){k(this,ct)[ct]+=1;let e=!1,n;try{n=t()}catch(i){throw k(this,ct)[ct]-=1,i}return{abort:i=>{e||(e=!0,k(this,ct)[ct]-=1,n?.(i),k(this,Zt)[Zt]())},done:()=>{e||(e=!0,k(this,ct)[ct]-=1,k(this,Zt)[Zt]())}}}function dE(){queueMicrotask(()=>k(this,ec)[ec]())}function hE(){if(k(this,lt)[lt]||k(this,ct)[ct]>=this.limit||k(this,qe)[qe].length===0)return;let t=k(this,qe)[qe].shift();if(t==null)throw new Error("Invariant violation: next is null");let e=k(this,Vr)[Vr](t.fn);t.abort=e.abort,t.done=e.done}function fE(t,e){let n={fn:t,priority:e?.priority||0,abort:()=>{k(this,tc)[tc](n)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},i=k(this,qe)[qe].findIndex(r=>n.priority>r.priority);return i===-1?k(this,qe)[qe].push(n):k(this,qe)[qe].splice(i,0,n),n}function pE(t){let e=k(this,qe)[qe].indexOf(t);e!==-1&&k(this,qe)[qe].splice(e,1)}var YC=Symbol("__queue");function Gf(t){let e=n=>"error"in n&&!!n.error;return t.filter(n=>!e(n))}function Jf(t){return t.filter(e=>{var n;return!((n=e.progress)!=null&&n.uploadStarted)||!e.isRestored})}var{AbortController:Uo}=globalThis,{AbortSignal:ZC}=globalThis,$o=function(t,e){t===void 0&&(t="Aborted");let n=new DOMException(t,"AbortError");return e!=null&&Ur(e,"cause")&&Object.defineProperty(n,"cause",{__proto__:null,configurable:!0,writable:!0,value:e.cause}),n};function Ho(t,e){return t===!0?Object.keys(e):Array.isArray(t)?t:[]}function P(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var gE=0;function Ee(t){return"__private_"+gE+++"_"+t}var mE=1024*1024,Qf={getChunkSize(t){return Math.ceil(t.size/1e4)},onProgress(){},onPartComplete(){},onSuccess(){},onError(t){throw t}};function vE(t){if(typeof t=="string")return parseInt(t,10);if(typeof t=="number")return t;throw new TypeError("Expected a number")}var Yr=Symbol("pausing upload, not an actual error"),Ie=Ee("abortController"),we=Ee("chunks"),We=Ee("chunkState"),ut=Ee("data"),dt=Ee("file"),Gr=Ee("uploadHasStarted"),qr=Ee("onError"),oi=Ee("onSuccess"),en=Ee("shouldUseMultipart"),si=Ee("isRestoring"),Jr=Ee("onReject"),ri=Ee("maxMultipartParts"),zr=Ee("minPartSize"),nc=Ee("initChunks"),ic=Ee("createUpload"),Wr=Ee("resumeUpload"),Kr=Ee("onPartProgress"),Xr=Ee("onPartComplete"),rc=Ee("abortUpload"),sc=class{constructor(e,n){var i,r;Object.defineProperty(this,rc,{value:wE}),Object.defineProperty(this,Wr,{value:yE}),Object.defineProperty(this,ic,{value:bE}),Object.defineProperty(this,nc,{value:_E}),Object.defineProperty(this,Ie,{writable:!0,value:new Uo}),Object.defineProperty(this,we,{writable:!0,value:[]}),Object.defineProperty(this,We,{writable:!0,value:[]}),Object.defineProperty(this,ut,{writable:!0,value:void 0}),Object.defineProperty(this,dt,{writable:!0,value:void 0}),Object.defineProperty(this,Gr,{writable:!0,value:!1}),Object.defineProperty(this,qr,{writable:!0,value:void 0}),Object.defineProperty(this,oi,{writable:!0,value:void 0}),Object.defineProperty(this,en,{writable:!0,value:void 0}),Object.defineProperty(this,si,{writable:!0,value:void 0}),Object.defineProperty(this,Jr,{writable:!0,value:s=>s?.cause===Yr?null:P(this,qr)[qr](s)}),Object.defineProperty(this,ri,{writable:!0,value:1e4}),Object.defineProperty(this,zr,{writable:!0,value:5*mE}),Object.defineProperty(this,Kr,{writable:!0,value:s=>o=>{if(!o.lengthComputable)return;P(this,We)[We][s].uploaded=vE(o.loaded);let a=P(this,We)[We].reduce((l,c)=>l+c.uploaded,0);this.options.onProgress(a,P(this,ut)[ut].size)}}),Object.defineProperty(this,Xr,{writable:!0,value:s=>o=>{P(this,we)[we][s]=null,P(this,We)[We][s].etag=o,P(this,We)[We][s].done=!0;let a={PartNumber:s+1,ETag:o};this.options.onPartComplete(a)}}),this.options={...Qf,...n},(r=(i=this.options).getChunkSize)!=null||(i.getChunkSize=Qf.getChunkSize),P(this,ut)[ut]=e,P(this,dt)[dt]=n.file,P(this,oi)[oi]=this.options.onSuccess,P(this,qr)[qr]=this.options.onError,P(this,en)[en]=this.options.shouldUseMultipart,P(this,si)[si]=n.uploadId&&n.key,P(this,nc)[nc]()}start(){P(this,Gr)[Gr]?(P(this,Ie)[Ie].signal.aborted||P(this,Ie)[Ie].abort(Yr),P(this,Ie)[Ie]=new Uo,P(this,Wr)[Wr]()):P(this,si)[si]?(this.options.companionComm.restoreUploadFile(P(this,dt)[dt],{uploadId:this.options.uploadId,key:this.options.key}),P(this,Wr)[Wr]()):P(this,ic)[ic]()}pause(){P(this,Ie)[Ie].abort(Yr),P(this,Ie)[Ie]=new Uo}abort(e){e!=null&&e.really?P(this,rc)[rc]():this.pause()}[Symbol.for("uppy test: getChunkState")](){return P(this,We)[We]}};function _E(){let t=P(this,ut)[ut].size,e=typeof P(this,en)[en]=="function"?P(this,en)[en](P(this,dt)[dt]):!!P(this,en)[en];if(e&&t>P(this,zr)[zr]){let n=Math.max(this.options.getChunkSize(P(this,ut)[ut]),P(this,zr)[zr]),i=Math.floor(t/n);i>P(this,ri)[ri]&&(i=P(this,ri)[ri],n=t/P(this,ri)[ri]),P(this,we)[we]=Array(i);for(let r=0,s=0;r<t;r+=n,s++){let o=Math.min(t,r+n),a=()=>{let l=r;return P(this,ut)[ut].slice(l,o)};if(P(this,we)[we][s]={getData:a,onProgress:P(this,Kr)[Kr](s),onComplete:P(this,Xr)[Xr](s),shouldUseMultipart:e},P(this,si)[si]){let l=r+n>t?t-r:n;P(this,we)[we][s].setAsUploaded=()=>{P(this,we)[we][s]=null,P(this,We)[We][s].uploaded=l}}}}else P(this,we)[we]=[{getData:()=>P(this,ut)[ut],onProgress:P(this,Kr)[Kr](0),onComplete:P(this,Xr)[Xr](0),shouldUseMultipart:e}];P(this,We)[We]=P(this,we)[we].map(()=>({uploaded:0}))}function bE(){this.options.companionComm.uploadFile(P(this,dt)[dt],P(this,we)[we],P(this,Ie)[Ie].signal).then(P(this,oi)[oi],P(this,Jr)[Jr]),P(this,Gr)[Gr]=!0}function yE(){this.options.companionComm.resumeUploadFile(P(this,dt)[dt],P(this,we)[we],P(this,Ie)[Ie].signal).then(P(this,oi)[oi],P(this,Jr)[Jr])}function wE(){P(this,Ie)[Ie].abort(),this.options.companionComm.abortFileUpload(P(this,dt)[dt]).catch(t=>this.options.log(t))}var Zf=sc;function xe(t){if(t!=null&&t.aborted)throw $o("The operation was aborted",{cause:t.reason})}function EE(t){let{method:e="PUT",CanonicalUri:n="/",CanonicalQueryString:i="",SignedHeaders:r,HashedPayload:s}=t,o=Object.keys(r).map(a=>a.toLowerCase()).sort();return[e,n,i,...o.map(a=>`${a}:${r[a]}`),"",o.join(";"),s].join(`
`)}var oc=new TextEncoder,ac={name:"HMAC",hash:"SHA-256"};async function TE(t){let{subtle:e}=globalThis.crypto;return e.digest(ac.hash,oc.encode(t))}async function SE(t){let{subtle:e}=globalThis.crypto;return e.importKey("raw",typeof t=="string"?oc.encode(t):t,ac,!1,["sign"])}function ep(t){let e=new Uint8Array(t),n="";for(let i=0;i<e.length;i++)n+=e[i].toString(16).padStart(2,"0");return n}async function Qr(t,e){let{subtle:n}=globalThis.crypto;return n.sign(ac,await SE(t),oc.encode(e))}async function lc(t){let{accountKey:e,accountSecret:n,sessionToken:i,bucketName:r,Key:s,Region:o,expires:a,uploadId:l,partNumber:c}=t,d="s3",u=`${d}.${o}.amazonaws.com`,h=`/${r}/${encodeURI(s).replace(/[;?:@&=+$,#!'()*]/g,N=>`%${N.charCodeAt(0).toString(16).toUpperCase()}`)}`,f="UNSIGNED-PAYLOAD",p=new Date().toISOString().replace(/[-:]|\.\d+/g,""),g=p.slice(0,8),m=`${g}/${o}/${d}/aws4_request`,v=new URL(`https://${u}${h}`);v.searchParams.set("X-Amz-Algorithm","AWS4-HMAC-SHA256"),v.searchParams.set("X-Amz-Content-Sha256",f),v.searchParams.set("X-Amz-Credential",`${e}/${m}`),v.searchParams.set("X-Amz-Date",p),v.searchParams.set("X-Amz-Expires",a),v.searchParams.set("X-Amz-Security-Token",i),v.searchParams.set("X-Amz-SignedHeaders","host"),c&&v.searchParams.set("partNumber",c),l&&v.searchParams.set("uploadId",l),v.searchParams.set("x-id",c&&l?"UploadPart":"PutObject");let b=EE({CanonicalUri:h,CanonicalQueryString:v.search.slice(1),SignedHeaders:{host:u},HashedPayload:f}),E=ep(await TE(b)),_=["AWS4-HMAC-SHA256",p,m,E].join(`
`),A=await Qr(`AWS4${n}`,g),w=await Qr(A,o),T=await Qr(w,d),D=await Qr(T,"aws4_request"),O=ep(await Qr(D,_));return v.searchParams.set("X-Amz-Signature",O),v}function F(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var AE=0;function ze(t){return"__private_"+AE+++"_"+t}function xE(t){let e=new URL(t);return e.search="",e.hash="",e.href}var Zr=ze("abortMultipartUpload"),Re=ze("cache"),es=ze("createMultipartUpload"),ts=ze("fetchSignature"),rs=ze("getUploadParameters"),ns=ze("listParts"),ci=ze("previousRetryDelay"),ui=ze("requests"),ai=ze("retryDelays"),li=ze("sendCompletionRequest"),tn=ze("setS3MultipartState"),di=ze("uploadPartBytes"),Le=ze("getFile"),cc=ze("shouldRetry"),is=ze("nonMultipartUpload"),jo=class{constructor(e,n,i,r){Object.defineProperty(this,is,{value:CE}),Object.defineProperty(this,cc,{value:OE}),Object.defineProperty(this,Zr,{writable:!0,value:void 0}),Object.defineProperty(this,Re,{writable:!0,value:new WeakMap}),Object.defineProperty(this,es,{writable:!0,value:void 0}),Object.defineProperty(this,ts,{writable:!0,value:void 0}),Object.defineProperty(this,rs,{writable:!0,value:void 0}),Object.defineProperty(this,ns,{writable:!0,value:void 0}),Object.defineProperty(this,ci,{writable:!0,value:void 0}),Object.defineProperty(this,ui,{writable:!0,value:void 0}),Object.defineProperty(this,ai,{writable:!0,value:void 0}),Object.defineProperty(this,li,{writable:!0,value:void 0}),Object.defineProperty(this,tn,{writable:!0,value:void 0}),Object.defineProperty(this,di,{writable:!0,value:void 0}),Object.defineProperty(this,Le,{writable:!0,value:void 0}),F(this,ui)[ui]=e,F(this,tn)[tn]=i,F(this,Le)[Le]=r,this.setOptions(n)}setOptions(e){let n=F(this,ui)[ui];if("abortMultipartUpload"in e&&(F(this,Zr)[Zr]=n.wrapPromiseFunction(e.abortMultipartUpload,{priority:1})),"createMultipartUpload"in e&&(F(this,es)[es]=n.wrapPromiseFunction(e.createMultipartUpload,{priority:-1})),"signPart"in e&&(F(this,ts)[ts]=n.wrapPromiseFunction(e.signPart)),"listParts"in e&&(F(this,ns)[ns]=n.wrapPromiseFunction(e.listParts)),"completeMultipartUpload"in e&&(F(this,li)[li]=n.wrapPromiseFunction(e.completeMultipartUpload,{priority:1})),"retryDelays"in e){var i;F(this,ai)[ai]=(i=e.retryDelays)!=null?i:[]}"uploadPartBytes"in e&&(F(this,di)[di]=n.wrapPromiseFunction(e.uploadPartBytes,{priority:1/0})),"getUploadParameters"in e&&(F(this,rs)[rs]=n.wrapPromiseFunction(e.getUploadParameters))}async getUploadId(e,n){let i;for(;(i=F(this,Re)[Re].get(e.data))!=null;)try{return await i}catch{}let r=F(this,es)[es](F(this,Le)[Le](e),n),s=()=>{r.abort(n.reason),F(this,Re)[Re].delete(e.data)};return n.addEventListener("abort",s,{once:!0}),F(this,Re)[Re].set(e.data,r),r.then(async o=>{n.removeEventListener("abort",s),F(this,tn)[tn](e,o),F(this,Re)[Re].set(e.data,o)},()=>{n.removeEventListener("abort",s),F(this,Re)[Re].delete(e.data)}),r}async abortFileUpload(e){let n=F(this,Re)[Re].get(e.data);if(n==null)return;F(this,Re)[Re].delete(e.data),F(this,tn)[tn](e,Object.create(null));let i;try{i=await n}catch{return}await F(this,Zr)[Zr](F(this,Le)[Le](e),i)}async uploadFile(e,n,i){if(xe(i),n.length===1&&!n[0].shouldUseMultipart)return F(this,is)[is](e,n[0],i);let{uploadId:r,key:s}=await this.getUploadId(e,i);xe(i);try{let o=await Promise.all(n.map((a,l)=>this.uploadChunk(e,l+1,a,i)));return xe(i),await F(this,li)[li](F(this,Le)[Le](e),{key:s,uploadId:r,parts:o,signal:i},i).abortOn(i)}catch(o){throw o?.cause!==Yr&&o?.name!=="AbortError"&&this.abortFileUpload(e),o}}restoreUploadFile(e,n){F(this,Re)[Re].set(e.data,n)}async resumeUploadFile(e,n,i){if(xe(i),n.length===1&&n[0]!=null&&!n[0].shouldUseMultipart)return F(this,is)[is](e,n[0],i);let{uploadId:r,key:s}=await this.getUploadId(e,i);xe(i);let o=await F(this,ns)[ns](F(this,Le)[Le](e),{uploadId:r,key:s,signal:i},i).abortOn(i);xe(i);let a=await Promise.all(n.map((l,c)=>{let d=c+1,u=o.find(h=>{let{PartNumber:f}=h;return f===d});return u==null?this.uploadChunk(e,d,l,i):(l==null||l.setAsUploaded==null||l.setAsUploaded(),{PartNumber:d,ETag:u.ETag})}));return xe(i),F(this,li)[li](F(this,Le)[Le](e),{key:s,uploadId:r,parts:a,signal:i},i).abortOn(i)}async uploadChunk(e,n,i,r){xe(r);let{uploadId:s,key:o}=await this.getUploadId(e,r),a=F(this,ai)[ai].values(),l=F(this,ai)[ai].values(),c=()=>{let d=a.next();return d==null||d.done?null:d.value};for(;;){xe(r);let d=i.getData(),{onProgress:u,onComplete:h}=i,f;try{f=await F(this,ts)[ts](F(this,Le)[Le](e),{uploadId:s,key:o,partNumber:n,body:d,signal:r}).abortOn(r)}catch(p){let g=c();if(g==null||r.aborted)throw p;await new Promise(m=>setTimeout(m,g));continue}xe(r);try{return{PartNumber:n,...await F(this,di)[di]({signature:f,body:d,size:d.size,onProgress:u,onComplete:h,signal:r}).abortOn(r)}}catch(p){if(!await F(this,cc)[cc](p,l))throw p}}}};async function OE(t,e){var n;let i=F(this,ui)[ui],r=t==null||(n=t.source)==null?void 0:n.status;if(r==null)return!1;if(r===403&&t.message==="Request has expired"){if(!i.isPaused){if(i.limit===1||F(this,ci)[ci]==null){let s=e.next();if(s==null||s.done)return!1;F(this,ci)[ci]=s.value}i.rateLimit(0),await new Promise(s=>setTimeout(s,F(this,ci)[ci]))}}else if(r===429){if(!i.isPaused){let s=e.next();if(s==null||s.done)return!1;i.rateLimit(s.value)}}else{if(r>400&&r<500&&r!==409)return!1;if(typeof navigator<"u"&&navigator.onLine===!1)i.isPaused||(i.pause(),window.addEventListener("online",()=>{i.resume()},{once:!0}));else{let s=e.next();if(s==null||s.done)return!1;await new Promise(o=>setTimeout(o,s.value))}}return!0}async function CE(t,e,n){var i;let{method:r="POST",url:s,fields:o,headers:a}=await F(this,rs)[rs](F(this,Le)[Le](t),{signal:n}).abortOn(n),l,c=e.getData();if(r.toUpperCase()==="POST"){let p=new FormData;Object.entries(o).forEach(g=>{let[m,v]=g;return p.set(m,v)}),p.set("file",c),l=p}else l=c;let{onProgress:d,onComplete:u}=e,h=await F(this,di)[di]({signature:{url:s,headers:a,method:r},body:l,size:c.size,onProgress:d,onComplete:u,signal:n}).abortOn(n),f=o?.key;return F(this,tn)[tn](t,{key:f}),{...h,location:(i=h.location)!=null?i:xE(s),bucket:o?.bucket,key:f}}function L(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var PE=0;function Ze(t){return"__private_"+PE+++"_"+t}var DE={version:"4.2.3"};function qi(t){if(t!=null&&t.error){let e=new Error(t.message);throw Object.assign(e,t.error),e}return t}function np(t){let e=t.Expiration;if(e){let n=Math.floor((new Date(e)-Date.now())/1e3);if(n>9)return n}}function tp(t){let{meta:e,allowedMetaFields:n,querify:i=!1}=t,r=n??Object.keys(e);return e?Object.fromEntries(r.filter(s=>e[s]!=null).map(s=>{let o=i?`metadata[${s}]`:s,a=String(e[s]);return[o,a]})):{}}var NE={allowedMetaFields:!0,limit:6,getTemporarySecurityCredentials:!1,shouldUseMultipart:t=>(t.size||0)>100*1024*1024,retryDelays:[0,1e3,3e3,5e3]},hi=Ze("companionCommunicationQueue"),ee=Ze("client"),ss=Ze("setClient"),Ke=Ze("assertHost"),ke=Ze("cachedTemporaryCredentials"),uc=Ze("getTemporarySecurityCredentials"),dc=Ze("setS3MultipartState"),pi=Ze("getFile"),hc=Ze("uploadLocalFile"),fc=Ze("getCompanionClientArgs"),os=Ze("upload"),fi=Ze("setCompanionHeaders"),nn=Ze("setResumableUploadsCapability"),as=Ze("resetResumableCapability"),Wi=class t extends Tn{constructor(e,n){var i;super(e,{...NE,uploadPartBytes:t.uploadPartBytes,createMultipartUpload:null,listParts:null,abortMultipartUpload:null,completeMultipartUpload:null,signPart:null,getUploadParameters:null,...n}),Object.defineProperty(this,fc,{value:ME}),Object.defineProperty(this,hc,{value:kE}),Object.defineProperty(this,uc,{value:LE}),Object.defineProperty(this,Ke,{value:RE}),Object.defineProperty(this,ss,{value:IE}),Object.defineProperty(this,hi,{writable:!0,value:void 0}),Object.defineProperty(this,ee,{writable:!0,value:void 0}),Object.defineProperty(this,ke,{writable:!0,value:void 0}),Object.defineProperty(this,dc,{writable:!0,value:(s,o)=>{let{key:a,uploadId:l}=o,c=this.uppy.getFile(s.id);c!=null&&this.uppy.setFileState(s.id,{s3Multipart:{...c.s3Multipart,key:a,uploadId:l}})}}),Object.defineProperty(this,pi,{writable:!0,value:s=>this.uppy.getFile(s.id)||s}),Object.defineProperty(this,os,{writable:!0,value:async s=>{if(s.length===0)return;let o=this.uppy.getFilesByIds(s),a=Gf(o),l=Jf(a);this.uppy.emit("upload-start",l);let c=a.map(u=>{if(u.isRemote){let h=()=>this.requests;L(this,nn)[nn](!1);let f=new AbortController,p=m=>{m.id===u.id&&f.abort()};this.uppy.on("file-removed",p);let g=this.uppy.getRequestClientForFile(u).uploadRemoteFile(u,L(this,fc)[fc](u),{signal:f.signal,getQueue:h});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",p)},{priority:-1})(),g}return L(this,hc)[hc](u)}),d=await Promise.allSettled(c);return L(this,nn)[nn](!0),d}}),Object.defineProperty(this,fi,{writable:!0,value:()=>{var s;(s=L(this,ee)[ee])==null||s.setCompanionHeaders(this.opts.headers)}}),Object.defineProperty(this,nn,{writable:!0,value:s=>{let{capabilities:o}=this.uppy.getState();this.uppy.setState({capabilities:{...o,resumableUploads:s}})}}),Object.defineProperty(this,as,{writable:!0,value:()=>{L(this,nn)[nn](!0)}}),this.type="uploader",this.id=this.opts.id||"AwsS3Multipart",L(this,ss)[ss](n);let r={createMultipartUpload:this.createMultipartUpload,listParts:this.listParts,abortMultipartUpload:this.abortMultipartUpload,completeMultipartUpload:this.completeMultipartUpload,signPart:n!=null&&n.getTemporarySecurityCredentials?this.createSignedURL:this.signPart,getUploadParameters:n!=null&&n.getTemporarySecurityCredentials?this.createSignedURL:this.getUploadParameters};for(let s of Object.keys(r))this.opts[s]==null&&(this.opts[s]=r[s].bind(this));this.requests=(i=this.opts.rateLimitedQueue)!=null?i:new Fo(this.opts.limit),L(this,hi)[hi]=new jo(this.requests,this.opts,L(this,dc)[dc],L(this,pi)[pi]),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}[Symbol.for("uppy test: getClient")](){return L(this,ee)[ee]}setOptions(e){L(this,hi)[hi].setOptions(e),super.setOptions(e),L(this,ss)[ss](e)}resetUploaderReferences(e,n){this.uploaders[e]&&(this.uploaders[e].abort({really:n?.abort||!1}),this.uploaders[e]=null),this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null)}createMultipartUpload(e,n){L(this,Ke)[Ke]("createMultipartUpload"),xe(n);let i=Ho(this.opts.allowedMetaFields,e.meta),r=tp({meta:e.meta,allowedMetaFields:i});return L(this,ee)[ee].post("s3/multipart",{filename:e.name,type:e.type,metadata:r},{signal:n}).then(qi)}listParts(e,n,i){var r;let{key:s,uploadId:o,signal:a}=n;(r=a)!=null||(a=i),L(this,Ke)[Ke]("listParts"),xe(a);let l=encodeURIComponent(s);return L(this,ee)[ee].get(`s3/multipart/${encodeURIComponent(o)}?key=${l}`,{signal:a}).then(qi)}completeMultipartUpload(e,n,i){var r;let{key:s,uploadId:o,parts:a,signal:l}=n;(r=l)!=null||(l=i),L(this,Ke)[Ke]("completeMultipartUpload"),xe(l);let c=encodeURIComponent(s),d=encodeURIComponent(o);return L(this,ee)[ee].post(`s3/multipart/${d}/complete?key=${c}`,{parts:a.map(u=>{let{ETag:h,PartNumber:f}=u;return{ETag:h,PartNumber:f}})},{signal:l}).then(qi)}async createSignedURL(e,n){let i=await L(this,uc)[uc](n),r=np(i.credentials)||604800,{uploadId:s,key:o,partNumber:a}=n;return{method:"PUT",expires:r,fields:{},url:`${await lc({accountKey:i.credentials.AccessKeyId,accountSecret:i.credentials.SecretAccessKey,sessionToken:i.credentials.SessionToken,expires:r,bucketName:i.bucket,Region:i.region,Key:o??`${crypto.randomUUID()}-${e.name}`,uploadId:s,partNumber:a})}`,headers:{"Content-Type":e.type}}}signPart(e,n){let{uploadId:i,key:r,partNumber:s,signal:o}=n;if(L(this,Ke)[Ke]("signPart"),xe(o),i==null||r==null||s==null)throw new Error("Cannot sign without a key, an uploadId, and a partNumber");let a=encodeURIComponent(r);return L(this,ee)[ee].get(`s3/multipart/${encodeURIComponent(i)}/${s}?key=${a}`,{signal:o}).then(qi)}abortMultipartUpload(e,n){let{key:i,uploadId:r,signal:s}=n;L(this,Ke)[Ke]("abortMultipartUpload");let o=encodeURIComponent(i),a=encodeURIComponent(r);return L(this,ee)[ee].delete(`s3/multipart/${a}?key=${o}`,void 0,{signal:s}).then(qi)}getUploadParameters(e,n){L(this,Ke)[Ke]("getUploadParameters");let{meta:i}=e,{type:r,name:s}=i,o=Ho(this.opts.allowedMetaFields,e.meta),a=tp({meta:i,allowedMetaFields:o,querify:!0}),l=new URLSearchParams({filename:s,type:r,...a});return L(this,ee)[ee].get(`s3/params?${l}`,n)}static async uploadPartBytes(e){let{signature:{url:n,expires:i,headers:r,method:s="PUT"},body:o,size:a=o.size,onProgress:l,onComplete:c,signal:d}=e;if(xe(d),n==null)throw new Error("Cannot upload to an undefined URL");return new Promise((u,h)=>{let f=new XMLHttpRequest;f.open(s,n,!0),r&&Object.keys(r).forEach(m=>{f.setRequestHeader(m,r[m])}),f.responseType="text",typeof i=="number"&&(f.timeout=i*1e3);function p(){f.abort()}function g(){d?.removeEventListener("abort",p)}d?.addEventListener("abort",p),f.upload.addEventListener("progress",m=>{l(m)}),f.addEventListener("abort",()=>{g(),h($o())}),f.addEventListener("timeout",()=>{g();let m=new Error("Request has expired");m.source={status:403},h(m)}),f.addEventListener("load",()=>{if(g(),f.status===403&&f.responseText.includes("<Message>Request has expired</Message>")){let _=new Error("Request has expired");_.source=f,h(_);return}if(f.status<200||f.status>=300){let _=new Error("Non 2xx");_.source=f,h(_);return}l?.({loaded:a,lengthComputable:!0});let m=f.getAllResponseHeaders().trim().split(/[\r\n]+/),v={__proto__:null};for(let _ of m){let A=_.split(": "),w=A.shift(),T=A.join(": ");v[w]=T}let{etag:b,location:E}=v;if(s.toUpperCase()==="POST"&&E==null&&console.error("@uppy/aws-s3: Could not read the Location header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket"),b==null){console.error("@uppy/aws-s3: Could not read the ETag header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket");return}c?.(b),u({...v,ETag:b})}),f.addEventListener("error",m=>{g();let v=new Error("Unknown error");v.source=m.target,h(v)}),f.send(o)})}install(){L(this,nn)[nn](!0),this.uppy.addPreProcessor(L(this,fi)[fi]),this.uppy.addUploader(L(this,os)[os]),this.uppy.on("cancel-all",L(this,as)[as])}uninstall(){this.uppy.removePreProcessor(L(this,fi)[fi]),this.uppy.removeUploader(L(this,os)[os]),this.uppy.off("cancel-all",L(this,as)[as])}};function IE(t){t==null||!("endpoint"in t||"companionUrl"in t||"headers"in t||"companionHeaders"in t||"cookiesRule"in t||"companionCookiesRule"in t)||("companionUrl"in t&&!("endpoint"in t)&&this.uppy.log("`companionUrl` option has been removed in @uppy/aws-s3, use `endpoint` instead.","warning"),"companionHeaders"in t&&!("headers"in t)&&this.uppy.log("`companionHeaders` option has been removed in @uppy/aws-s3, use `headers` instead.","warning"),"companionCookiesRule"in t&&!("cookiesRule"in t)&&this.uppy.log("`companionCookiesRule` option has been removed in @uppy/aws-s3, use `cookiesRule` instead.","warning"),"endpoint"in t?L(this,ee)[ee]=new Gt(this.uppy,{pluginId:this.id,provider:"AWS",companionUrl:this.opts.endpoint,companionHeaders:this.opts.headers,companionCookiesRule:this.opts.cookiesRule}):("headers"in t&&L(this,fi)[fi](),"cookiesRule"in t&&(L(this,ee)[ee].opts.companionCookiesRule=t.cookiesRule)))}function RE(t){if(!L(this,ee)[ee])throw new Error(`Expected a \`endpoint\` option containing a URL, or if you are not using Companion, a custom \`${t}\` implementation.`)}async function LE(t){if(xe(t?.signal),L(this,ke)[ke]==null){let{getTemporarySecurityCredentials:e}=this.opts;e===!0?(L(this,Ke)[Ke]("getTemporarySecurityCredentials"),L(this,ke)[ke]=L(this,ee)[ee].get("s3/sts",t).then(qi)):L(this,ke)[ke]=e(t),L(this,ke)[ke]=await L(this,ke)[ke],setTimeout(()=>{L(this,ke)[ke]=null},(np(L(this,ke)[ke].credentials)||0)*500)}return L(this,ke)[ke]}function kE(t){var e=this;return new Promise((n,i)=>{let r=(c,d)=>{var u;let h=this.uppy.getFile(t.id);this.uppy.emit("upload-progress",h,{uploadStarted:(u=h.progress.uploadStarted)!=null?u:0,bytesUploaded:c,bytesTotal:d})},s=c=>{this.uppy.log(c),this.uppy.emit("upload-error",t,c),this.resetUploaderReferences(t.id),i(c)},o=c=>{let d={body:{...c},status:200,uploadURL:c.location};this.resetUploaderReferences(t.id),this.uppy.emit("upload-success",L(this,pi)[pi](t),d),c.location&&this.uppy.log(`Download ${t.name} from ${c.location}`),n()},a=new Zf(t.data,{companionComm:L(this,hi)[hi],log:function(){return e.uppy.log(...arguments)},getChunkSize:this.opts.getChunkSize?this.opts.getChunkSize.bind(this):void 0,onProgress:r,onError:s,onSuccess:o,onPartComplete:c=>{this.uppy.emit("s3-multipart:part-uploaded",L(this,pi)[pi](t),c)},file:t,shouldUseMultipart:this.opts.shouldUseMultipart,...t.s3Multipart});this.uploaders[t.id]=a;let l=new Br(this.uppy);this.uploaderEvents[t.id]=l,l.onFileRemove(t.id,c=>{a.abort(),this.resetUploaderReferences(t.id,{abort:!0}),n(`upload ${c} was removed`)}),l.onCancelAll(t.id,()=>{a.abort(),this.resetUploaderReferences(t.id,{abort:!0}),n(`upload ${t.id} was canceled`)}),l.onFilePause(t.id,c=>{c?a.pause():a.start()}),l.onPauseAll(t.id,()=>{a.pause()}),l.onResumeAll(t.id,()=>{a.start()}),a.start()})}function ME(t){var e;return{...(e=t.remote)==null?void 0:e.body,protocol:"s3-multipart",size:t.data.size,metadata:t.meta}}Wi.VERSION=DE.version;function ip(t){t.querySelectorAll("[data-uppy]").forEach(e=>{let n=e.getAttribute("data-uppy-presign-url"),i=new yo({debug:!0,autoProceed:!0});i.use(Qn,{target:e.querySelector("[data-uppy-drag-drop]")}),i.use(Zn,{target:e.querySelector("[data-uppy-status]")}),i.use(Wi,{getUploadParameters(r){return fetch(n,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:r.name,content_type:r.type})}).then(s=>s.json()).then(s=>(i.setFileMeta(r.id,{object_id:s.object_id}),{method:"PUT",url:s.url,headers:{"Content-Type":r.type}}))}}),i.on("complete",r=>{r.successful.forEach(s=>{let o=document.createElement("input");o.type="hidden",o.name="files",o.value=JSON.stringify({object_id:s.meta.object_id,name:s.name,content_type:s.type,size:s.size}),e.appendChild(o)}),e.dispatchEvent(new Event("files-added"))})})}on.config.defaultFocusScroll=!0;on.onLoad(nd);on.onLoad(od);on.onLoad(Gd);on.onLoad(ip);td(document.body);})();
/*! For license information please see app-DRR2BCGE.js.LEGAL.txt */
//# sourceMappingURL=app-DRR2BCGE.js.map
