(()=>{var up=Object.create;var qo=Object.defineProperty;var dp=Object.getOwnPropertyDescriptor;var hp=Object.getOwnPropertyNames;var fp=Object.getPrototypeOf,pp=Object.prototype.hasOwnProperty;var rt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),gp=(e,t)=>{for(var n in t)qo(e,n,{get:t[n],enumerable:!0})},mp=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of hp(t))!pp.call(e,r)&&r!==n&&qo(e,r,{get:()=>t[r],enumerable:!(i=dp(t,r))||i.enumerable});return e};var sn=(e,t,n)=>(n=e!=null?up(fp(e)):{},mp(t||!e||!e.__esModule?qo(n,"default",{value:e,enumerable:!0}):n,e));var th=rt((ux,Zd)=>{Zd.exports=function(){var t={},n=t._fns={};t.emit=function(o,a,l,c,d,u,h){var f=i(o);f.length&&r(o,f,[a,l,c,d,u,h])},t.on=function(o,a){n[o]||(n[o]=[]),n[o].push(a)},t.once=function(o,a){function l(){a.apply(this,arguments),t.off(o,l)}this.on(o,l)},t.off=function(o,a){var l=[];if(o&&a){var c=this._fns[o],d=0,u=c?c.length:0;for(d;d<u;d++)c[d]!==a&&l.push(c[d])}l.length?this._fns[o]=l:delete this._fns[o]};function i(s){var o=n[s]?n[s]:[],a=s.indexOf(":"),l=a===-1?[s]:[s.substring(0,a),s.substring(a+1)],c=Object.keys(n),d=0,u=c.length;for(d;d<u;d++){var h=c[d];if(h==="*"&&(o=o.concat(n[h])),l.length===2&&l[0]===h){o=o.concat(n[h]);break}}return o}function r(s,o,a){var l=0,c=o.length;for(l;l<c&&o[l];l++)o[l].event=s,o[l].apply(o[l],a)}return t}});var po=rt((hx,nh)=>{function oy(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}nh.exports=oy});var rh=rt((fx,ih)=>{var ay=typeof global=="object"&&global&&global.Object===Object&&global;ih.exports=ay});var sl=rt((px,sh)=>{var ly=rh(),cy=typeof self=="object"&&self&&self.Object===Object&&self,uy=ly||cy||Function("return this")();sh.exports=uy});var ah=rt((gx,oh)=>{var dy=sl(),hy=function(){return dy.Date.now()};oh.exports=hy});var ch=rt((mx,lh)=>{var fy=/\s/;function py(e){for(var t=e.length;t--&&fy.test(e.charAt(t)););return t}lh.exports=py});var dh=rt((vx,uh)=>{var gy=ch(),my=/^\s+/;function vy(e){return e&&e.slice(0,gy(e)+1).replace(my,"")}uh.exports=vy});var ol=rt((_x,hh)=>{var _y=sl(),by=_y.Symbol;hh.exports=by});var mh=rt((bx,gh)=>{var fh=ol(),ph=Object.prototype,yy=ph.hasOwnProperty,wy=ph.toString,yr=fh?fh.toStringTag:void 0;function Ey(e){var t=yy.call(e,yr),n=e[yr];try{e[yr]=void 0;var i=!0}catch{}var r=wy.call(e);return i&&(t?e[yr]=n:delete e[yr]),r}gh.exports=Ey});var _h=rt((yx,vh)=>{var Ty=Object.prototype,Sy=Ty.toString;function Ay(e){return Sy.call(e)}vh.exports=Ay});var Eh=rt((wx,wh)=>{var bh=ol(),xy=mh(),Oy=_h(),Cy="[object Null]",Py="[object Undefined]",yh=bh?bh.toStringTag:void 0;function Dy(e){return e==null?e===void 0?Py:Cy:yh&&yh in Object(e)?xy(e):Oy(e)}wh.exports=Dy});var Sh=rt((Ex,Th)=>{function Ny(e){return e!=null&&typeof e=="object"}Th.exports=Ny});var xh=rt((Tx,Ah)=>{var Iy=Eh(),Ry=Sh(),Ly="[object Symbol]";function ky(e){return typeof e=="symbol"||Ry(e)&&Iy(e)==Ly}Ah.exports=ky});var Dh=rt((Sx,Ph)=>{var My=dh(),Oh=po(),Fy=xh(),Ch=NaN,Uy=/^[-+]0x[0-9a-f]+$/i,$y=/^0b[01]+$/i,Hy=/^0o[0-7]+$/i,jy=parseInt;function By(e){if(typeof e=="number")return e;if(Fy(e))return Ch;if(Oh(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Oh(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=My(e);var n=$y.test(e);return n||Hy.test(e)?jy(e.slice(2),n?2:8):Uy.test(e)?Ch:+e}Ph.exports=By});var Rh=rt((Ax,Ih)=>{var Vy=po(),al=ah(),Nh=Dh(),qy="Expected a function",Wy=Math.max,zy=Math.min;function Ky(e,t,n){var i,r,s,o,a,l,c=0,d=!1,u=!1,h=!0;if(typeof e!="function")throw new TypeError(qy);t=Nh(t)||0,Vy(n)&&(d=!!n.leading,u="maxWait"in n,s=u?Wy(Nh(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h);function f(w){var T=i,D=r;return i=r=void 0,c=w,o=e.apply(D,T),o}function p(w){return c=w,a=setTimeout(v,t),d?f(w):o}function g(w){var T=w-l,D=w-c,O=t-T;return u?zy(O,s-D):O}function m(w){var T=w-l,D=w-c;return l===void 0||T>=t||T<0||u&&D>=s}function v(){var w=al();if(m(w))return b(w);a=setTimeout(v,g(w))}function b(w){return a=void 0,h&&i?f(w):(i=r=void 0,o)}function E(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function _(){return a===void 0?o:b(al())}function A(){var w=al(),T=m(w);if(i=arguments,r=this,l=w,T){if(a===void 0)return p(l);if(u)return clearTimeout(a),a=setTimeout(v,t),f(l)}return a===void 0&&(a=setTimeout(v,t)),o}return A.cancel=E,A.flush=_,A}Ih.exports=Ky});var kh=rt((xx,Lh)=>{var Xy=Rh(),Yy=po(),Gy="Expected a function";function Jy(e,t,n){var i=!0,r=!0;if(typeof e!="function")throw new TypeError(Gy);return Yy(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Xy(e,t,{leading:i,maxWait:t,trailing:r})}Lh.exports=Jy});var fl=rt((Hx,Vh)=>{"use strict";Vh.exports=function(t){if(typeof t!="number"||Number.isNaN(t))throw new TypeError(`Expected a number, got ${typeof t}`);let n=t<0,i=Math.abs(t);if(n&&(i=-i),i===0)return"0 B";let r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.min(Math.floor(Math.log(i)/Math.log(1024)),r.length-1),o=Number(i/1024**s),a=r[s];return`${o>=10||o%1===0?Math.round(o):o.toFixed(1)} ${a}`}});var zh=rt((jx,Wh)=>{"use strict";function qh(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}qh.prototype.match=function(e){var t=!0,n=this.parts,i,r=n.length,s;if(typeof e=="string"||e instanceof String)if(!this.hasWild&&this.text!=e)t=!1;else{for(s=(e||"").split(this.separator),i=0;t&&i<r;i++)n[i]!=="*"&&(i<s.length?t=n[i]===s[i]:t=!1);t=t&&s}else if(typeof e.splice=="function")for(t=[],i=e.length;i--;)this.match(e[i])&&(t[t.length]=e[i]);else if(typeof e=="object"){t={};for(var o in e)this.match(o)&&(t[o]=e[o])}return t};Wh.exports=function(e,t,n){var i=new qh(e,n||/[\/\.]/);return typeof t<"u"?i.match(t):i}});var Xh=rt((Bx,Kh)=>{var iw=zh(),rw=/[\/\+\.]/;Kh.exports=function(e,t){function n(i){var r=iw(i,e,rw);return r&&r.length>=2}return t?n(t.split(";")[0]):n}});var Rl=rt((jO,Io)=>{(function(){"use strict";var e={}.hasOwnProperty;function t(){for(var r="",s=0;s<arguments.length;s++){var o=arguments[s];o&&(r=i(r,n(o)))}return r}function n(r){if(typeof r=="string"||typeof r=="number")return r;if(typeof r!="object")return"";if(Array.isArray(r))return t.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var s="";for(var o in r)e.call(r,o)&&r[o]&&(s=i(s,o));return s}function i(r,s){return s?r?r+" "+s:r+s:r}typeof Io<"u"&&Io.exports?(t.default=t,Io.exports=t):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return t}):window.classNames=t})()});var Ff=rt((hC,Mf)=>{function ye(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}Mf.exports=ye;ye.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};ye.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};ye.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},n),this._options.unref&&this._timer.unref(),!0};ye.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};ye.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)};ye.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)};ye.prototype.start=ye.prototype.try;ye.prototype.errors=function(){return this._errors};ye.prototype.attempts=function(){return this._attempts};ye.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,n=0,i=0;i<this._errors.length;i++){var r=this._errors[i],s=r.message,o=(e[s]||0)+1;e[s]=o,o>=n&&(t=r,n=o)}return t}});var Uf=rt(ti=>{var Xw=Ff();ti.operation=function(e){var t=ti.timeouts(e);return new Xw(t,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})};ti.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var n in e)t[n]=e[n];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],r=0;r<t.retries;r++)i.push(this.createTimeout(r,t));return e&&e.forever&&!i.length&&i.push(this.createTimeout(r,t)),i.sort(function(s,o){return s-o}),i};ti.createTimeout=function(e,t){var n=t.randomize?Math.random()+1:1,i=Math.round(n*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return i=Math.min(i,t.maxTimeout),i};ti.wrap=function(e,t,n){if(t instanceof Array&&(n=t,t=null),!n){n=[];for(var i in e)typeof e[i]=="function"&&n.push(i)}for(var r=0;r<n.length;r++){var s=n[r],o=e[s];e[s]=function(l){var c=ti.operation(t),d=Array.prototype.slice.call(arguments,1),u=d.pop();d.push(function(h){c.retry(h)||(h&&(arguments[0]=c.mainError()),u.apply(this,arguments))}),c.attempt(function(){l.apply(e,d)})}.bind(e,o),e[s].options=t}}});var Hf=rt((pC,$f)=>{$f.exports=Uf()});var vp=function(){"use strict";let htmx={onLoad:null,process:null,on:null,off:null,trigger:null,ajax:null,find:null,findAll:null,closest:null,values:function(e,t){return getInputValues(e,t||"post").values},remove:null,addClass:null,removeClass:null,toggleClass:null,takeClass:null,swap:null,defineExtension:null,removeExtension:null,logAll:null,logNone:null,logger:null,config:{historyEnabled:!0,historyCacheSize:10,refreshOnHistoryMiss:!1,defaultSwapStyle:"innerHTML",defaultSwapDelay:0,defaultSettleDelay:20,includeIndicatorStyles:!0,indicatorClass:"htmx-indicator",requestClass:"htmx-request",addedClass:"htmx-added",settlingClass:"htmx-settling",swappingClass:"htmx-swapping",allowEval:!0,allowScriptTags:!0,inlineScriptNonce:"",inlineStyleNonce:"",attributesToSettle:["class","style","width","height"],withCredentials:!1,timeout:0,wsReconnectDelay:"full-jitter",wsBinaryType:"blob",disableSelector:"[hx-disable], [data-hx-disable]",scrollBehavior:"instant",defaultFocusScroll:!1,getCacheBusterParam:!1,globalViewTransitions:!1,methodsThatUseUrlParams:["get","delete"],selfRequestsOnly:!0,ignoreTitle:!1,scrollIntoViewOnBoost:!0,triggerSpecsCache:null,disableInheritance:!1,responseHandling:[{code:"204",swap:!1},{code:"[23]..",swap:!0},{code:"[45]..",swap:!1,error:!0}],allowNestedOobSwaps:!0,historyRestoreAsHxRequest:!0,reportValidityOfForms:!1},parseInterval:null,location,_:null,version:"2.0.7"};htmx.onLoad=onLoadHelper,htmx.process=processNode,htmx.on=addEventListenerImpl,htmx.off=removeEventListenerImpl,htmx.trigger=triggerEvent,htmx.ajax=ajaxHelper,htmx.find=find,htmx.findAll=findAll,htmx.closest=closest,htmx.remove=removeElement,htmx.addClass=addClassToElement,htmx.removeClass=removeClassFromElement,htmx.toggleClass=toggleClassOnElement,htmx.takeClass=takeClassForElement,htmx.swap=swap,htmx.defineExtension=defineExtension,htmx.removeExtension=removeExtension,htmx.logAll=logAll,htmx.logNone=logNone,htmx.parseInterval=parseInterval,htmx._=internalEval;let internalAPI={addTriggerHandler,bodyContains,canAccessLocalStorage,findThisElement,filterValues,swap,hasAttribute,getAttributeValue,getClosestAttributeValue,getClosestMatch,getExpressionVars,getHeaders,getInputValues,getInternalData,getSwapSpecification,getTriggerSpecs,getTarget,makeFragment,mergeObjects,makeSettleInfo,oobSwap,querySelectorExt,settleImmediately,shouldCancel,triggerEvent,triggerErrorEvent,withExtensions},VERBS=["get","post","put","delete","patch"],VERB_SELECTOR=VERBS.map(function(e){return"[hx-"+e+"], [data-hx-"+e+"]"}).join(", ");function parseInterval(e){if(e==null)return;let t=NaN;return e.slice(-2)=="ms"?t=parseFloat(e.slice(0,-2)):e.slice(-1)=="s"?t=parseFloat(e.slice(0,-1))*1e3:e.slice(-1)=="m"?t=parseFloat(e.slice(0,-1))*1e3*60:t=parseFloat(e),isNaN(t)?void 0:t}function getRawAttribute(e,t){return e instanceof Element&&e.getAttribute(t)}function hasAttribute(e,t){return!!e.hasAttribute&&(e.hasAttribute(t)||e.hasAttribute("data-"+t))}function getAttributeValue(e,t){return getRawAttribute(e,t)||getRawAttribute(e,"data-"+t)}function parentElt(e){let t=e.parentElement;return!t&&e.parentNode instanceof ShadowRoot?e.parentNode:t}function getDocument(){return document}function getRootNode(e,t){return e.getRootNode?e.getRootNode({composed:t}):getDocument()}function getClosestMatch(e,t){for(;e&&!t(e);)e=parentElt(e);return e||null}function getAttributeValueWithDisinheritance(e,t,n){let i=getAttributeValue(t,n),r=getAttributeValue(t,"hx-disinherit");var s=getAttributeValue(t,"hx-inherit");if(e!==t){if(htmx.config.disableInheritance)return s&&(s==="*"||s.split(" ").indexOf(n)>=0)?i:null;if(r&&(r==="*"||r.split(" ").indexOf(n)>=0))return"unset"}return i}function getClosestAttributeValue(e,t){let n=null;if(getClosestMatch(e,function(i){return!!(n=getAttributeValueWithDisinheritance(e,asElement(i),t))}),n!=="unset")return n}function matches(e,t){return e instanceof Element&&e.matches(t)}function getStartTag(e){let n=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i.exec(e);return n?n[1].toLowerCase():""}function parseHTML(e){return new DOMParser().parseFromString(e,"text/html")}function takeChildrenFor(e,t){for(;t.childNodes.length>0;)e.append(t.childNodes[0])}function duplicateScript(e){let t=getDocument().createElement("script");return forEach(e.attributes,function(n){t.setAttribute(n.name,n.value)}),t.textContent=e.textContent,t.async=!1,htmx.config.inlineScriptNonce&&(t.nonce=htmx.config.inlineScriptNonce),t}function isJavaScriptScriptNode(e){return e.matches("script")&&(e.type==="text/javascript"||e.type==="module"||e.type==="")}function normalizeScriptTags(e){Array.from(e.querySelectorAll("script")).forEach(t=>{if(isJavaScriptScriptNode(t)){let n=duplicateScript(t),i=t.parentNode;try{i.insertBefore(n,t)}catch(r){logError(r)}finally{t.remove()}}})}function makeFragment(e){let t=e.replace(/<head(\s[^>]*)?>[\s\S]*?<\/head>/i,""),n=getStartTag(t),i;if(n==="html"){i=new DocumentFragment;let s=parseHTML(e);takeChildrenFor(i,s.body),i.title=s.title}else if(n==="body"){i=new DocumentFragment;let s=parseHTML(t);takeChildrenFor(i,s.body),i.title=s.title}else{let s=parseHTML('<body><template class="internal-htmx-wrapper">'+t+"</template></body>");i=s.querySelector("template").content,i.title=s.title;var r=i.querySelector("title");r&&r.parentNode===i&&(r.remove(),i.title=r.innerText)}return i&&(htmx.config.allowScriptTags?normalizeScriptTags(i):i.querySelectorAll("script").forEach(s=>s.remove())),i}function maybeCall(e){e&&e()}function isType(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function isFunction(e){return typeof e=="function"}function isRawObject(e){return isType(e,"Object")}function getInternalData(e){let t="htmx-internal-data",n=e[t];return n||(n=e[t]={}),n}function toArray(e){let t=[];if(e)for(let n=0;n<e.length;n++)t.push(e[n]);return t}function forEach(e,t){if(e)for(let n=0;n<e.length;n++)t(e[n])}function isScrolledIntoView(e){let t=e.getBoundingClientRect(),n=t.top,i=t.bottom;return n<window.innerHeight&&i>=0}function bodyContains(e){return e.getRootNode({composed:!0})===document}function splitOnWhitespace(e){return e.trim().split(/\s+/)}function mergeObjects(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function parseJSON(e){try{return JSON.parse(e)}catch(t){return logError(t),null}}function canAccessLocalStorage(){let e="htmx:sessionStorageTest";try{return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch{return!1}}function normalizePath(e){let t=new URL(e,"http://x");return t&&(e=t.pathname+t.search),e!="/"&&(e=e.replace(/\/+$/,"")),e}function internalEval(str){return maybeEval(getDocument().body,function(){return eval(str)})}function onLoadHelper(e){return htmx.on("htmx:load",function(n){e(n.detail.elt)})}function logAll(){htmx.logger=function(e,t,n){console&&console.log(t,e,n)}}function logNone(){htmx.logger=null}function find(e,t){return typeof e!="string"?e.querySelector(t):find(getDocument(),e)}function findAll(e,t){return typeof e!="string"?e.querySelectorAll(t):findAll(getDocument(),e)}function getWindow(){return window}function removeElement(e,t){e=resolveTarget(e),t?getWindow().setTimeout(function(){removeElement(e),e=null},t):parentElt(e).removeChild(e)}function asElement(e){return e instanceof Element?e:null}function asHtmlElement(e){return e instanceof HTMLElement?e:null}function asString(e){return typeof e=="string"?e:null}function asParentNode(e){return e instanceof Element||e instanceof Document||e instanceof DocumentFragment?e:null}function addClassToElement(e,t,n){e=asElement(resolveTarget(e)),e&&(n?getWindow().setTimeout(function(){addClassToElement(e,t),e=null},n):e.classList&&e.classList.add(t))}function removeClassFromElement(e,t,n){let i=asElement(resolveTarget(e));i&&(n?getWindow().setTimeout(function(){removeClassFromElement(i,t),i=null},n):i.classList&&(i.classList.remove(t),i.classList.length===0&&i.removeAttribute("class")))}function toggleClassOnElement(e,t){e=resolveTarget(e),e.classList.toggle(t)}function takeClassForElement(e,t){e=resolveTarget(e),forEach(e.parentElement.children,function(n){removeClassFromElement(n,t)}),addClassToElement(asElement(e),t)}function closest(e,t){return e=asElement(resolveTarget(e)),e?e.closest(t):null}function startsWith(e,t){return e.substring(0,t.length)===t}function endsWith(e,t){return e.substring(e.length-t.length)===t}function normalizeSelector(e){let t=e.trim();return startsWith(t,"<")&&endsWith(t,"/>")?t.substring(1,t.length-2):t}function querySelectorAllExt(e,t,n){if(t.indexOf("global ")===0)return querySelectorAllExt(e,t.slice(7),!0);e=resolveTarget(e);let i=[];{let o=0,a=0;for(let l=0;l<t.length;l++){let c=t[l];if(c===","&&o===0){i.push(t.substring(a,l)),a=l+1;continue}c==="<"?o++:c==="/"&&l<t.length-1&&t[l+1]===">"&&o--}a<t.length&&i.push(t.substring(a))}let r=[],s=[];for(;i.length>0;){let o=normalizeSelector(i.shift()),a;o.indexOf("closest ")===0?a=closest(asElement(e),normalizeSelector(o.slice(8))):o.indexOf("find ")===0?a=find(asParentNode(e),normalizeSelector(o.slice(5))):o==="next"||o==="nextElementSibling"?a=asElement(e).nextElementSibling:o.indexOf("next ")===0?a=scanForwardQuery(e,normalizeSelector(o.slice(5)),!!n):o==="previous"||o==="previousElementSibling"?a=asElement(e).previousElementSibling:o.indexOf("previous ")===0?a=scanBackwardsQuery(e,normalizeSelector(o.slice(9)),!!n):o==="document"?a=document:o==="window"?a=window:o==="body"?a=document.body:o==="root"?a=getRootNode(e,!!n):o==="host"?a=e.getRootNode().host:s.push(o),a&&r.push(a)}if(s.length>0){let o=s.join(","),a=asParentNode(getRootNode(e,!!n));r.push(...toArray(a.querySelectorAll(o)))}return r}var scanForwardQuery=function(e,t,n){let i=asParentNode(getRootNode(e,n)).querySelectorAll(t);for(let r=0;r<i.length;r++){let s=i[r];if(s.compareDocumentPosition(e)===Node.DOCUMENT_POSITION_PRECEDING)return s}},scanBackwardsQuery=function(e,t,n){let i=asParentNode(getRootNode(e,n)).querySelectorAll(t);for(let r=i.length-1;r>=0;r--){let s=i[r];if(s.compareDocumentPosition(e)===Node.DOCUMENT_POSITION_FOLLOWING)return s}};function querySelectorExt(e,t){return typeof e!="string"?querySelectorAllExt(e,t)[0]:querySelectorAllExt(getDocument().body,e)[0]}function resolveTarget(e,t){return typeof e=="string"?find(asParentNode(t)||document,e):e}function processEventArgs(e,t,n,i){return isFunction(t)?{target:getDocument().body,event:asString(e),listener:t,options:n}:{target:resolveTarget(e),event:asString(t),listener:n,options:i}}function addEventListenerImpl(e,t,n,i){return ready(function(){let s=processEventArgs(e,t,n,i);s.target.addEventListener(s.event,s.listener,s.options)}),isFunction(t)?t:n}function removeEventListenerImpl(e,t,n){return ready(function(){let i=processEventArgs(e,t,n);i.target.removeEventListener(i.event,i.listener)}),isFunction(t)?t:n}let DUMMY_ELT=getDocument().createElement("output");function findAttributeTargets(e,t){let n=getClosestAttributeValue(e,t);if(n){if(n==="this")return[findThisElement(e,t)];{let i=querySelectorAllExt(e,n);if(/(^|,)(\s*)inherit(\s*)($|,)/.test(n)){let s=asElement(getClosestMatch(e,function(o){return o!==e&&hasAttribute(asElement(o),t)}));s&&i.push(...findAttributeTargets(s,t))}return i.length===0?(logError('The selector "'+n+'" on '+t+" returned no matches!"),[DUMMY_ELT]):i}}}function findThisElement(e,t){return asElement(getClosestMatch(e,function(n){return getAttributeValue(asElement(n),t)!=null}))}function getTarget(e){let t=getClosestAttributeValue(e,"hx-target");return t?t==="this"?findThisElement(e,"hx-target"):querySelectorExt(e,t):getInternalData(e).boosted?getDocument().body:e}function shouldSettleAttribute(e){return htmx.config.attributesToSettle.includes(e)}function cloneAttributes(e,t){forEach(Array.from(e.attributes),function(n){!t.hasAttribute(n.name)&&shouldSettleAttribute(n.name)&&e.removeAttribute(n.name)}),forEach(t.attributes,function(n){shouldSettleAttribute(n.name)&&e.setAttribute(n.name,n.value)})}function isInlineSwap(e,t){let n=getExtensions(t);for(let i=0;i<n.length;i++){let r=n[i];try{if(r.isInlineSwap(e))return!0}catch(s){logError(s)}}return e==="outerHTML"}function oobSwap(e,t,n,i){i=i||getDocument();let r="#"+CSS.escape(getRawAttribute(t,"id")),s="outerHTML";e==="true"||(e.indexOf(":")>0?(s=e.substring(0,e.indexOf(":")),r=e.substring(e.indexOf(":")+1)):s=e),t.removeAttribute("hx-swap-oob"),t.removeAttribute("data-hx-swap-oob");let o=querySelectorAllExt(i,r,!1);return o.length?(forEach(o,function(a){let l,c=t.cloneNode(!0);l=getDocument().createDocumentFragment(),l.appendChild(c),isInlineSwap(s,a)||(l=asParentNode(c));let d={shouldSwap:!0,target:a,fragment:l};triggerEvent(a,"htmx:oobBeforeSwap",d)&&(a=d.target,d.shouldSwap&&(handlePreservedElements(l),swapWithStyle(s,a,a,l,n),restorePreservedElements()),forEach(n.elts,function(u){triggerEvent(u,"htmx:oobAfterSwap",d)}))}),t.parentNode.removeChild(t)):(t.parentNode.removeChild(t),triggerErrorEvent(getDocument().body,"htmx:oobErrorNoTarget",{content:t})),e}function restorePreservedElements(){let e=find("#--htmx-preserve-pantry--");if(e){for(let t of[...e.children]){let n=find("#"+t.id);n.parentNode.moveBefore(t,n),n.remove()}e.remove()}}function handlePreservedElements(e){forEach(findAll(e,"[hx-preserve], [data-hx-preserve]"),function(t){let n=getAttributeValue(t,"id"),i=getDocument().getElementById(n);if(i!=null)if(t.moveBefore){let r=find("#--htmx-preserve-pantry--");r==null&&(getDocument().body.insertAdjacentHTML("afterend","<div id='--htmx-preserve-pantry--'></div>"),r=find("#--htmx-preserve-pantry--")),r.moveBefore(i,null)}else t.parentNode.replaceChild(i,t)})}function handleAttributes(e,t,n){forEach(t.querySelectorAll("[id]"),function(i){let r=getRawAttribute(i,"id");if(r&&r.length>0){let s=r.replace("'","\\'"),o=i.tagName.replace(":","\\:"),a=asParentNode(e),l=a&&a.querySelector(o+"[id='"+s+"']");if(l&&l!==a){let c=i.cloneNode();cloneAttributes(i,l),n.tasks.push(function(){cloneAttributes(i,c)})}}})}function makeAjaxLoadTask(e){return function(){removeClassFromElement(e,htmx.config.addedClass),processNode(asElement(e)),processFocus(asParentNode(e)),triggerEvent(e,"htmx:load")}}function processFocus(e){let t="[autofocus]",n=asHtmlElement(matches(e,t)?e:e.querySelector(t));n?.focus()}function insertNodesBefore(e,t,n,i){for(handleAttributes(e,n,i);n.childNodes.length>0;){let r=n.firstChild;addClassToElement(asElement(r),htmx.config.addedClass),e.insertBefore(r,t),r.nodeType!==Node.TEXT_NODE&&r.nodeType!==Node.COMMENT_NODE&&i.tasks.push(makeAjaxLoadTask(r))}}function stringHash(e,t){let n=0;for(;n<e.length;)t=(t<<5)-t+e.charCodeAt(n++)|0;return t}function attributeHash(e){let t=0;for(let n=0;n<e.attributes.length;n++){let i=e.attributes[n];i.value&&(t=stringHash(i.name,t),t=stringHash(i.value,t))}return t}function deInitOnHandlers(e){let t=getInternalData(e);if(t.onHandlers){for(let n=0;n<t.onHandlers.length;n++){let i=t.onHandlers[n];removeEventListenerImpl(e,i.event,i.listener)}delete t.onHandlers}}function deInitNode(e){let t=getInternalData(e);t.timeout&&clearTimeout(t.timeout),t.listenerInfos&&forEach(t.listenerInfos,function(n){n.on&&removeEventListenerImpl(n.on,n.trigger,n.listener)}),deInitOnHandlers(e),forEach(Object.keys(t),function(n){n!=="firstInitCompleted"&&delete t[n]})}function cleanUpElement(e){triggerEvent(e,"htmx:beforeCleanupElement"),deInitNode(e),forEach(e.children,function(t){cleanUpElement(t)})}function swapOuterHTML(e,t,n){if(e.tagName==="BODY")return swapInnerHTML(e,t,n);let i,r=e.previousSibling,s=parentElt(e);if(s){for(insertNodesBefore(s,e,t,n),r==null?i=s.firstChild:i=r.nextSibling,n.elts=n.elts.filter(function(o){return o!==e});i&&i!==e;)i instanceof Element&&n.elts.push(i),i=i.nextSibling;cleanUpElement(e),e.remove()}}function swapAfterBegin(e,t,n){return insertNodesBefore(e,e.firstChild,t,n)}function swapBeforeBegin(e,t,n){return insertNodesBefore(parentElt(e),e,t,n)}function swapBeforeEnd(e,t,n){return insertNodesBefore(e,null,t,n)}function swapAfterEnd(e,t,n){return insertNodesBefore(parentElt(e),e.nextSibling,t,n)}function swapDelete(e){cleanUpElement(e);let t=parentElt(e);if(t)return t.removeChild(e)}function swapInnerHTML(e,t,n){let i=e.firstChild;if(insertNodesBefore(e,i,t,n),i){for(;i.nextSibling;)cleanUpElement(i.nextSibling),e.removeChild(i.nextSibling);cleanUpElement(i),e.removeChild(i)}}function swapWithStyle(e,t,n,i,r){switch(e){case"none":return;case"outerHTML":swapOuterHTML(n,i,r);return;case"afterbegin":swapAfterBegin(n,i,r);return;case"beforebegin":swapBeforeBegin(n,i,r);return;case"beforeend":swapBeforeEnd(n,i,r);return;case"afterend":swapAfterEnd(n,i,r);return;case"delete":swapDelete(n);return;default:var s=getExtensions(t);for(let o=0;o<s.length;o++){let a=s[o];try{let l=a.handleSwap(e,n,i,r);if(l){if(Array.isArray(l))for(let c=0;c<l.length;c++){let d=l[c];d.nodeType!==Node.TEXT_NODE&&d.nodeType!==Node.COMMENT_NODE&&r.tasks.push(makeAjaxLoadTask(d))}return}}catch(l){logError(l)}}e==="innerHTML"?swapInnerHTML(n,i,r):swapWithStyle(htmx.config.defaultSwapStyle,t,n,i,r)}}function findAndSwapOobElements(e,t,n){var i=findAll(e,"[hx-swap-oob], [data-hx-swap-oob]");return forEach(i,function(r){if(htmx.config.allowNestedOobSwaps||r.parentElement===null){let s=getAttributeValue(r,"hx-swap-oob");s!=null&&oobSwap(s,r,t,n)}else r.removeAttribute("hx-swap-oob"),r.removeAttribute("data-hx-swap-oob")}),i.length>0}function swap(e,t,n,i){i||(i={});let r=null,s=null,o=function(){maybeCall(i.beforeSwapCallback),e=resolveTarget(e);let c=i.contextElement?getRootNode(i.contextElement,!1):getDocument(),d=document.activeElement,u={};u={elt:d,start:d?d.selectionStart:null,end:d?d.selectionEnd:null};let h=makeSettleInfo(e);if(n.swapStyle==="textContent")e.textContent=t;else{let p=makeFragment(t);if(h.title=i.title||p.title,i.historyRequest&&(p=p.querySelector("[hx-history-elt],[data-hx-history-elt]")||p),i.selectOOB){let g=i.selectOOB.split(",");for(let m=0;m<g.length;m++){let v=g[m].split(":",2),b=v[0].trim();b.indexOf("#")===0&&(b=b.substring(1));let E=v[1]||"true",_=p.querySelector("#"+b);_&&oobSwap(E,_,h,c)}}if(findAndSwapOobElements(p,h,c),forEach(findAll(p,"template"),function(g){g.content&&findAndSwapOobElements(g.content,h,c)&&g.remove()}),i.select){let g=getDocument().createDocumentFragment();forEach(p.querySelectorAll(i.select),function(m){g.appendChild(m)}),p=g}handlePreservedElements(p),swapWithStyle(n.swapStyle,i.contextElement,e,p,h),restorePreservedElements()}if(u.elt&&!bodyContains(u.elt)&&getRawAttribute(u.elt,"id")){let p=document.getElementById(getRawAttribute(u.elt,"id")),g={preventScroll:n.focusScroll!==void 0?!n.focusScroll:!htmx.config.defaultFocusScroll};if(p){if(u.start&&p.setSelectionRange)try{p.setSelectionRange(u.start,u.end)}catch{}p.focus(g)}}e.classList.remove(htmx.config.swappingClass),forEach(h.elts,function(p){p.classList&&p.classList.add(htmx.config.settlingClass),triggerEvent(p,"htmx:afterSwap",i.eventInfo)}),maybeCall(i.afterSwapCallback),n.ignoreTitle||handleTitle(h.title);let f=function(){if(forEach(h.tasks,function(p){p.call()}),forEach(h.elts,function(p){p.classList&&p.classList.remove(htmx.config.settlingClass),triggerEvent(p,"htmx:afterSettle",i.eventInfo)}),i.anchor){let p=asElement(resolveTarget("#"+i.anchor));p&&p.scrollIntoView({block:"start",behavior:"auto"})}updateScrollState(h.elts,n),maybeCall(i.afterSettleCallback),maybeCall(r)};n.settleDelay>0?getWindow().setTimeout(f,n.settleDelay):f()},a=htmx.config.globalViewTransitions;n.hasOwnProperty("transition")&&(a=n.transition);let l=i.contextElement||getDocument();if(a&&triggerEvent(l,"htmx:beforeTransition",i.eventInfo)&&typeof Promise<"u"&&document.startViewTransition){let c=new Promise(function(u,h){r=u,s=h}),d=o;o=function(){document.startViewTransition(function(){return d(),c})}}try{n?.swapDelay&&n.swapDelay>0?getWindow().setTimeout(o,n.swapDelay):o()}catch(c){throw triggerErrorEvent(l,"htmx:swapError",i.eventInfo),maybeCall(s),c}}function handleTriggerHeader(e,t,n){let i=e.getResponseHeader(t);if(i.indexOf("{")===0){let r=parseJSON(i);for(let s in r)if(r.hasOwnProperty(s)){let o=r[s];isRawObject(o)?n=o.target!==void 0?o.target:n:o={value:o},triggerEvent(n,s,o)}}else{let r=i.split(",");for(let s=0;s<r.length;s++)triggerEvent(n,r[s].trim(),[])}}let WHITESPACE=/\s/,WHITESPACE_OR_COMMA=/[\s,]/,SYMBOL_START=/[_$a-zA-Z]/,SYMBOL_CONT=/[_$a-zA-Z0-9]/,STRINGISH_START=['"',"'","/"],NOT_WHITESPACE=/[^\s]/,COMBINED_SELECTOR_START=/[{(]/,COMBINED_SELECTOR_END=/[})]/;function tokenizeString(e){let t=[],n=0;for(;n<e.length;){if(SYMBOL_START.exec(e.charAt(n))){for(var i=n;SYMBOL_CONT.exec(e.charAt(n+1));)n++;t.push(e.substring(i,n+1))}else if(STRINGISH_START.indexOf(e.charAt(n))!==-1){let r=e.charAt(n);var i=n;for(n++;n<e.length&&e.charAt(n)!==r;)e.charAt(n)==="\\"&&n++,n++;t.push(e.substring(i,n+1))}else{let r=e.charAt(n);t.push(r)}n++}return t}function isPossibleRelativeReference(e,t,n){return SYMBOL_START.exec(e.charAt(0))&&e!=="true"&&e!=="false"&&e!=="this"&&e!==n&&t!=="."}function maybeGenerateConditional(e,t,n){if(t[0]==="["){t.shift();let i=1,r=" return (function("+n+"){ return (",s=null;for(;t.length>0;){let o=t[0];if(o==="]"){if(i--,i===0){s===null&&(r=r+"true"),t.shift(),r+=")})";try{let a=maybeEval(e,function(){return Function(r)()},function(){return!0});return a.source=r,a}catch(a){return triggerErrorEvent(getDocument().body,"htmx:syntax:error",{error:a,source:r}),null}}}else o==="["&&i++;isPossibleRelativeReference(o,s,n)?r+="(("+n+"."+o+") ? ("+n+"."+o+") : (window."+o+"))":r=r+o,s=t.shift()}}}function consumeUntil(e,t){let n="";for(;e.length>0&&!t.test(e[0]);)n+=e.shift();return n}function consumeCSSSelector(e){let t;return e.length>0&&COMBINED_SELECTOR_START.test(e[0])?(e.shift(),t=consumeUntil(e,COMBINED_SELECTOR_END).trim(),e.shift()):t=consumeUntil(e,WHITESPACE_OR_COMMA),t}let INPUT_SELECTOR="input, textarea, select";function parseAndCacheTrigger(e,t,n){let i=[],r=tokenizeString(t);do{consumeUntil(r,NOT_WHITESPACE);let a=r.length,l=consumeUntil(r,/[,\[\s]/);if(l!=="")if(l==="every"){let c={trigger:"every"};consumeUntil(r,NOT_WHITESPACE),c.pollInterval=parseInterval(consumeUntil(r,/[,\[\s]/)),consumeUntil(r,NOT_WHITESPACE);var s=maybeGenerateConditional(e,r,"event");s&&(c.eventFilter=s),i.push(c)}else{let c={trigger:l};var s=maybeGenerateConditional(e,r,"event");for(s&&(c.eventFilter=s),consumeUntil(r,NOT_WHITESPACE);r.length>0&&r[0]!==",";){let u=r.shift();if(u==="changed")c.changed=!0;else if(u==="once")c.once=!0;else if(u==="consume")c.consume=!0;else if(u==="delay"&&r[0]===":")r.shift(),c.delay=parseInterval(consumeUntil(r,WHITESPACE_OR_COMMA));else if(u==="from"&&r[0]===":"){if(r.shift(),COMBINED_SELECTOR_START.test(r[0]))var o=consumeCSSSelector(r);else{var o=consumeUntil(r,WHITESPACE_OR_COMMA);if(o==="closest"||o==="find"||o==="next"||o==="previous"){r.shift();let f=consumeCSSSelector(r);f.length>0&&(o+=" "+f)}}c.from=o}else u==="target"&&r[0]===":"?(r.shift(),c.target=consumeCSSSelector(r)):u==="throttle"&&r[0]===":"?(r.shift(),c.throttle=parseInterval(consumeUntil(r,WHITESPACE_OR_COMMA))):u==="queue"&&r[0]===":"?(r.shift(),c.queue=consumeUntil(r,WHITESPACE_OR_COMMA)):u==="root"&&r[0]===":"?(r.shift(),c[u]=consumeCSSSelector(r)):u==="threshold"&&r[0]===":"?(r.shift(),c[u]=consumeUntil(r,WHITESPACE_OR_COMMA)):triggerErrorEvent(e,"htmx:syntax:error",{token:r.shift()});consumeUntil(r,NOT_WHITESPACE)}i.push(c)}r.length===a&&triggerErrorEvent(e,"htmx:syntax:error",{token:r.shift()}),consumeUntil(r,NOT_WHITESPACE)}while(r[0]===","&&r.shift());return n&&(n[t]=i),i}function getTriggerSpecs(e){let t=getAttributeValue(e,"hx-trigger"),n=[];if(t){let i=htmx.config.triggerSpecsCache;n=i&&i[t]||parseAndCacheTrigger(e,t,i)}return n.length>0?n:matches(e,"form")?[{trigger:"submit"}]:matches(e,'input[type="button"], input[type="submit"]')?[{trigger:"click"}]:matches(e,INPUT_SELECTOR)?[{trigger:"change"}]:[{trigger:"click"}]}function cancelPolling(e){getInternalData(e).cancelled=!0}function processPolling(e,t,n){let i=getInternalData(e);i.timeout=getWindow().setTimeout(function(){bodyContains(e)&&i.cancelled!==!0&&(maybeFilterEvent(n,e,makeEvent("hx:poll:trigger",{triggerSpec:n,target:e}))||t(e),processPolling(e,t,n))},n.pollInterval)}function isLocalLink(e){return location.hostname===e.hostname&&getRawAttribute(e,"href")&&getRawAttribute(e,"href").indexOf("#")!==0}function eltIsDisabled(e){return closest(e,htmx.config.disableSelector)}function boostElement(e,t,n){if(e instanceof HTMLAnchorElement&&isLocalLink(e)&&(e.target===""||e.target==="_self")||e.tagName==="FORM"&&String(getRawAttribute(e,"method")).toLowerCase()!=="dialog"){t.boosted=!0;let i,r;if(e.tagName==="A")i="get",r=getRawAttribute(e,"href");else{let s=getRawAttribute(e,"method");i=s?s.toLowerCase():"get",r=getRawAttribute(e,"action"),(r==null||r==="")&&(r=location.href),i==="get"&&r.includes("?")&&(r=r.replace(/\?[^#]+/,""))}n.forEach(function(s){addEventListener(e,function(o,a){let l=asElement(o);if(eltIsDisabled(l)){cleanUpElement(l);return}issueAjaxRequest(i,r,l,a)},t,s,!0)})}}function shouldCancel(e,t){if(e.type==="submit"&&t.tagName==="FORM")return!0;if(e.type==="click"){let n=t.closest('input[type="submit"], button');if(n&&n.form&&n.type==="submit")return!0;let i=t.closest("a"),r=/^#.+/;if(i&&i.href&&!r.test(i.getAttribute("href")))return!0}return!1}function ignoreBoostedAnchorCtrlClick(e,t){return getInternalData(e).boosted&&e instanceof HTMLAnchorElement&&t.type==="click"&&(t.ctrlKey||t.metaKey)}function maybeFilterEvent(e,t,n){let i=e.eventFilter;if(i)try{return i.call(t,n)!==!0}catch(r){let s=i.source;return triggerErrorEvent(getDocument().body,"htmx:eventFilter:error",{error:r,source:s}),!0}return!1}function addEventListener(e,t,n,i,r){let s=getInternalData(e),o;i.from?o=querySelectorAllExt(e,i.from):o=[e],i.changed&&("lastValue"in s||(s.lastValue=new WeakMap),o.forEach(function(a){s.lastValue.has(i)||s.lastValue.set(i,new WeakMap),s.lastValue.get(i).set(a,a.value)})),forEach(o,function(a){let l=function(c){if(!bodyContains(e)){a.removeEventListener(i.trigger,l);return}if(ignoreBoostedAnchorCtrlClick(e,c)||((r||shouldCancel(c,a))&&c.preventDefault(),maybeFilterEvent(i,e,c)))return;let d=getInternalData(c);if(d.triggerSpec=i,d.handledFor==null&&(d.handledFor=[]),d.handledFor.indexOf(e)<0){if(d.handledFor.push(e),i.consume&&c.stopPropagation(),i.target&&c.target&&!matches(asElement(c.target),i.target))return;if(i.once){if(s.triggeredOnce)return;s.triggeredOnce=!0}if(i.changed){let u=c.target,h=u.value,f=s.lastValue.get(i);if(f.has(u)&&f.get(u)===h)return;f.set(u,h)}if(s.delayed&&clearTimeout(s.delayed),s.throttle)return;i.throttle>0?s.throttle||(triggerEvent(e,"htmx:trigger"),t(e,c),s.throttle=getWindow().setTimeout(function(){s.throttle=null},i.throttle)):i.delay>0?s.delayed=getWindow().setTimeout(function(){triggerEvent(e,"htmx:trigger"),t(e,c)},i.delay):(triggerEvent(e,"htmx:trigger"),t(e,c))}};n.listenerInfos==null&&(n.listenerInfos=[]),n.listenerInfos.push({trigger:i.trigger,listener:l,on:a}),a.addEventListener(i.trigger,l)})}let windowIsScrolling=!1,scrollHandler=null;function initScrollHandler(){scrollHandler||(scrollHandler=function(){windowIsScrolling=!0},window.addEventListener("scroll",scrollHandler),window.addEventListener("resize",scrollHandler),setInterval(function(){windowIsScrolling&&(windowIsScrolling=!1,forEach(getDocument().querySelectorAll("[hx-trigger*='revealed'],[data-hx-trigger*='revealed']"),function(e){maybeReveal(e)}))},200))}function maybeReveal(e){!hasAttribute(e,"data-hx-revealed")&&isScrolledIntoView(e)&&(e.setAttribute("data-hx-revealed","true"),getInternalData(e).initHash?triggerEvent(e,"revealed"):e.addEventListener("htmx:afterProcessNode",function(){triggerEvent(e,"revealed")},{once:!0}))}function loadImmediately(e,t,n,i){let r=function(){n.loaded||(n.loaded=!0,triggerEvent(e,"htmx:trigger"),t(e))};i>0?getWindow().setTimeout(r,i):r()}function processVerbs(e,t,n){let i=!1;return forEach(VERBS,function(r){if(hasAttribute(e,"hx-"+r)){let s=getAttributeValue(e,"hx-"+r);i=!0,t.path=s,t.verb=r,n.forEach(function(o){addTriggerHandler(e,o,t,function(a,l){let c=asElement(a);if(eltIsDisabled(c)){cleanUpElement(c);return}issueAjaxRequest(r,s,c,l)})})}}),i}function addTriggerHandler(e,t,n,i){if(t.trigger==="revealed")initScrollHandler(),addEventListener(e,i,n,t),maybeReveal(asElement(e));else if(t.trigger==="intersect"){let r={};t.root&&(r.root=querySelectorExt(e,t.root)),t.threshold&&(r.threshold=parseFloat(t.threshold)),new IntersectionObserver(function(o){for(let a=0;a<o.length;a++)if(o[a].isIntersecting){triggerEvent(e,"intersect");break}},r).observe(asElement(e)),addEventListener(asElement(e),i,n,t)}else!n.firstInitCompleted&&t.trigger==="load"?maybeFilterEvent(t,e,makeEvent("load",{elt:e}))||loadImmediately(asElement(e),i,n,t.delay):t.pollInterval>0?(n.polling=!0,processPolling(asElement(e),i,t)):addEventListener(e,i,n,t)}function shouldProcessHxOn(e){let t=asElement(e);if(!t)return!1;let n=t.attributes;for(let i=0;i<n.length;i++){let r=n[i].name;if(startsWith(r,"hx-on:")||startsWith(r,"data-hx-on:")||startsWith(r,"hx-on-")||startsWith(r,"data-hx-on-"))return!0}return!1}let HX_ON_QUERY=new XPathEvaluator().createExpression('.//*[@*[ starts-with(name(), "hx-on:") or starts-with(name(), "data-hx-on:") or starts-with(name(), "hx-on-") or starts-with(name(), "data-hx-on-") ]]');function processHXOnRoot(e,t){shouldProcessHxOn(e)&&t.push(asElement(e));let n=HX_ON_QUERY.evaluate(e),i=null;for(;i=n.iterateNext();)t.push(asElement(i))}function findHxOnWildcardElements(e){let t=[];if(e instanceof DocumentFragment)for(let n of e.childNodes)processHXOnRoot(n,t);else processHXOnRoot(e,t);return t}function findElementsToProcess(e){if(e.querySelectorAll){let n=", [hx-boost] a, [data-hx-boost] a, a[hx-boost], a[data-hx-boost]",i=[];for(let s in extensions){let o=extensions[s];if(o.getSelectors){var t=o.getSelectors();t&&i.push(t)}}return e.querySelectorAll(VERB_SELECTOR+n+", form, [type='submit'], [hx-ext], [data-hx-ext], [hx-trigger], [data-hx-trigger]"+i.flat().map(s=>", "+s).join(""))}else return[]}function maybeSetLastButtonClicked(e){let t=getTargetButton(e.target),n=getRelatedFormData(e);n&&(n.lastButtonClicked=t)}function maybeUnsetLastButtonClicked(e){let t=getRelatedFormData(e);t&&(t.lastButtonClicked=null)}function getTargetButton(e){return closest(asElement(e),"button, input[type='submit']")}function getRelatedForm(e){return e.form||closest(e,"form")}function getRelatedFormData(e){let t=getTargetButton(e.target);if(!t)return;let n=getRelatedForm(t);if(n)return getInternalData(n)}function initButtonTracking(e){e.addEventListener("click",maybeSetLastButtonClicked),e.addEventListener("focusin",maybeSetLastButtonClicked),e.addEventListener("focusout",maybeUnsetLastButtonClicked)}function addHxOnEventHandler(e,t,n){let i=getInternalData(e);Array.isArray(i.onHandlers)||(i.onHandlers=[]);let r,s=function(o){maybeEval(e,function(){eltIsDisabled(e)||(r||(r=new Function("event",n)),r.call(e,o))})};e.addEventListener(t,s),i.onHandlers.push({event:t,listener:s})}function processHxOnWildcard(e){deInitOnHandlers(e);for(let t=0;t<e.attributes.length;t++){let n=e.attributes[t].name,i=e.attributes[t].value;if(startsWith(n,"hx-on")||startsWith(n,"data-hx-on")){let r=n.indexOf("-on")+3,s=n.slice(r,r+1);if(s==="-"||s===":"){let o=n.slice(r+1);startsWith(o,":")?o="htmx"+o:startsWith(o,"-")?o="htmx:"+o.slice(1):startsWith(o,"htmx-")&&(o="htmx:"+o.slice(5)),addHxOnEventHandler(e,o,i)}}}}function initNode(e){triggerEvent(e,"htmx:beforeProcessNode");let t=getInternalData(e),n=getTriggerSpecs(e);processVerbs(e,t,n)||(getClosestAttributeValue(e,"hx-boost")==="true"?boostElement(e,t,n):hasAttribute(e,"hx-trigger")&&n.forEach(function(r){addTriggerHandler(e,r,t,function(){})})),(e.tagName==="FORM"||getRawAttribute(e,"type")==="submit"&&hasAttribute(e,"form"))&&initButtonTracking(e),t.firstInitCompleted=!0,triggerEvent(e,"htmx:afterProcessNode")}function maybeDeInitAndHash(e){if(!(e instanceof Element))return!1;let t=getInternalData(e),n=attributeHash(e);return t.initHash!==n?(deInitNode(e),t.initHash=n,!0):!1}function processNode(e){if(e=resolveTarget(e),eltIsDisabled(e)){cleanUpElement(e);return}let t=[];maybeDeInitAndHash(e)&&t.push(e),forEach(findElementsToProcess(e),function(n){if(eltIsDisabled(n)){cleanUpElement(n);return}maybeDeInitAndHash(n)&&t.push(n)}),forEach(findHxOnWildcardElements(e),processHxOnWildcard),forEach(t,initNode)}function kebabEventName(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function makeEvent(e,t){return new CustomEvent(e,{bubbles:!0,cancelable:!0,composed:!0,detail:t})}function triggerErrorEvent(e,t,n){triggerEvent(e,t,mergeObjects({error:t},n))}function ignoreEventForLogging(e){return e==="htmx:afterProcessNode"}function withExtensions(e,t,n){forEach(getExtensions(e,[],n),function(i){try{t(i)}catch(r){logError(r)}})}function logError(e){console.error(e)}function triggerEvent(e,t,n){e=resolveTarget(e),n==null&&(n={}),n.elt=e;let i=makeEvent(t,n);htmx.logger&&!ignoreEventForLogging(t)&&htmx.logger(e,t,n),n.error&&(logError(n.error),triggerEvent(e,"htmx:error",{errorInfo:n}));let r=e.dispatchEvent(i),s=kebabEventName(t);if(r&&s!==t){let o=makeEvent(s,i.detail);r=r&&e.dispatchEvent(o)}return withExtensions(asElement(e),function(o){r=r&&o.onEvent(t,i)!==!1&&!i.defaultPrevented}),r}let currentPathForHistory=location.pathname+location.search;function setCurrentPathForHistory(e){currentPathForHistory=e,canAccessLocalStorage()&&sessionStorage.setItem("htmx-current-path-for-history",e)}function getHistoryElement(){return getDocument().querySelector("[hx-history-elt],[data-hx-history-elt]")||getDocument().body}function saveToHistoryCache(e,t){if(!canAccessLocalStorage())return;let n=cleanInnerHtmlForHistory(t),i=getDocument().title,r=window.scrollY;if(htmx.config.historyCacheSize<=0){sessionStorage.removeItem("htmx-history-cache");return}e=normalizePath(e);let s=parseJSON(sessionStorage.getItem("htmx-history-cache"))||[];for(let a=0;a<s.length;a++)if(s[a].url===e){s.splice(a,1);break}let o={url:e,content:n,title:i,scroll:r};for(triggerEvent(getDocument().body,"htmx:historyItemCreated",{item:o,cache:s}),s.push(o);s.length>htmx.config.historyCacheSize;)s.shift();for(;s.length>0;)try{sessionStorage.setItem("htmx-history-cache",JSON.stringify(s));break}catch(a){triggerErrorEvent(getDocument().body,"htmx:historyCacheError",{cause:a,cache:s}),s.shift()}}function getCachedHistory(e){if(!canAccessLocalStorage())return null;e=normalizePath(e);let t=parseJSON(sessionStorage.getItem("htmx-history-cache"))||[];for(let n=0;n<t.length;n++)if(t[n].url===e)return t[n];return null}function cleanInnerHtmlForHistory(e){let t=htmx.config.requestClass,n=e.cloneNode(!0);return forEach(findAll(n,"."+t),function(i){removeClassFromElement(i,t)}),forEach(findAll(n,"[data-disabled-by-htmx]"),function(i){i.removeAttribute("disabled")}),n.innerHTML}function saveCurrentPageToHistory(){let e=getHistoryElement(),t=currentPathForHistory;canAccessLocalStorage()&&(t=sessionStorage.getItem("htmx-current-path-for-history")),t=t||location.pathname+location.search,getDocument().querySelector('[hx-history="false" i],[data-hx-history="false" i]')||(triggerEvent(getDocument().body,"htmx:beforeHistorySave",{path:t,historyElt:e}),saveToHistoryCache(t,e)),htmx.config.historyEnabled&&history.replaceState({htmx:!0},getDocument().title,location.href)}function pushUrlIntoHistory(e){htmx.config.getCacheBusterParam&&(e=e.replace(/org\.htmx\.cache-buster=[^&]*&?/,""),(endsWith(e,"&")||endsWith(e,"?"))&&(e=e.slice(0,-1))),htmx.config.historyEnabled&&history.pushState({htmx:!0},"",e),setCurrentPathForHistory(e)}function replaceUrlInHistory(e){htmx.config.historyEnabled&&history.replaceState({htmx:!0},"",e),setCurrentPathForHistory(e)}function settleImmediately(e){forEach(e,function(t){t.call(void 0)})}function loadHistoryFromServer(e){let t=new XMLHttpRequest,n={swapStyle:"innerHTML",swapDelay:0,settleDelay:0},i={path:e,xhr:t,historyElt:getHistoryElement(),swapSpec:n};t.open("GET",e,!0),htmx.config.historyRestoreAsHxRequest&&t.setRequestHeader("HX-Request","true"),t.setRequestHeader("HX-History-Restore-Request","true"),t.setRequestHeader("HX-Current-URL",location.href),t.onload=function(){this.status>=200&&this.status<400?(i.response=this.response,triggerEvent(getDocument().body,"htmx:historyCacheMissLoad",i),swap(i.historyElt,i.response,n,{contextElement:i.historyElt,historyRequest:!0}),setCurrentPathForHistory(i.path),triggerEvent(getDocument().body,"htmx:historyRestore",{path:e,cacheMiss:!0,serverResponse:i.response})):triggerErrorEvent(getDocument().body,"htmx:historyCacheMissLoadError",i)},triggerEvent(getDocument().body,"htmx:historyCacheMiss",i)&&t.send()}function restoreHistory(e){saveCurrentPageToHistory(),e=e||location.pathname+location.search;let t=getCachedHistory(e);if(t){let n={swapStyle:"innerHTML",swapDelay:0,settleDelay:0,scroll:t.scroll},i={path:e,item:t,historyElt:getHistoryElement(),swapSpec:n};triggerEvent(getDocument().body,"htmx:historyCacheHit",i)&&(swap(i.historyElt,t.content,n,{contextElement:i.historyElt,title:t.title}),setCurrentPathForHistory(i.path),triggerEvent(getDocument().body,"htmx:historyRestore",i))}else htmx.config.refreshOnHistoryMiss?htmx.location.reload(!0):loadHistoryFromServer(e)}function addRequestIndicatorClasses(e){let t=findAttributeTargets(e,"hx-indicator");return t==null&&(t=[e]),forEach(t,function(n){let i=getInternalData(n);i.requestCount=(i.requestCount||0)+1,n.classList.add.call(n.classList,htmx.config.requestClass)}),t}function disableElements(e){let t=findAttributeTargets(e,"hx-disabled-elt");return t==null&&(t=[]),forEach(t,function(n){let i=getInternalData(n);i.requestCount=(i.requestCount||0)+1,n.setAttribute("disabled",""),n.setAttribute("data-disabled-by-htmx","")}),t}function removeRequestIndicators(e,t){forEach(e.concat(t),function(n){let i=getInternalData(n);i.requestCount=(i.requestCount||1)-1}),forEach(e,function(n){getInternalData(n).requestCount===0&&n.classList.remove.call(n.classList,htmx.config.requestClass)}),forEach(t,function(n){getInternalData(n).requestCount===0&&(n.removeAttribute("disabled"),n.removeAttribute("data-disabled-by-htmx"))})}function haveSeenNode(e,t){for(let n=0;n<e.length;n++)if(e[n].isSameNode(t))return!0;return!1}function shouldInclude(e){let t=e;return t.name===""||t.name==null||t.disabled||closest(t,"fieldset[disabled]")||t.type==="button"||t.type==="submit"||t.tagName==="image"||t.tagName==="reset"||t.tagName==="file"?!1:t.type==="checkbox"||t.type==="radio"?t.checked:!0}function addValueToFormData(e,t,n){e!=null&&t!=null&&(Array.isArray(t)?t.forEach(function(i){n.append(e,i)}):n.append(e,t))}function removeValueFromFormData(e,t,n){if(e!=null&&t!=null){let i=n.getAll(e);Array.isArray(t)?i=i.filter(r=>t.indexOf(r)<0):i=i.filter(r=>r!==t),n.delete(e),forEach(i,r=>n.append(e,r))}}function getValueFromInput(e){return e instanceof HTMLSelectElement&&e.multiple?toArray(e.querySelectorAll("option:checked")).map(function(t){return t.value}):e instanceof HTMLInputElement&&e.files?toArray(e.files):e.value}function processInputValue(e,t,n,i,r){if(!(i==null||haveSeenNode(e,i))){if(e.push(i),shouldInclude(i)){let s=getRawAttribute(i,"name");addValueToFormData(s,getValueFromInput(i),t),r&&validateElement(i,n)}i instanceof HTMLFormElement&&(forEach(i.elements,function(s){e.indexOf(s)>=0?removeValueFromFormData(s.name,getValueFromInput(s),t):e.push(s),r&&validateElement(s,n)}),new FormData(i).forEach(function(s,o){s instanceof File&&s.name===""||addValueToFormData(o,s,t)}))}}function validateElement(e,t){let n=e;n.willValidate&&(triggerEvent(n,"htmx:validation:validate"),n.checkValidity()||(triggerEvent(n,"htmx:validation:failed",{message:n.validationMessage,validity:n.validity})&&!t.length&&htmx.config.reportValidityOfForms&&n.reportValidity(),t.push({elt:n,message:n.validationMessage,validity:n.validity})))}function overrideFormData(e,t){for(let n of t.keys())e.delete(n);return t.forEach(function(n,i){e.append(i,n)}),e}function getInputValues(e,t){let n=[],i=new FormData,r=new FormData,s=[],o=getInternalData(e);o.lastButtonClicked&&!bodyContains(o.lastButtonClicked)&&(o.lastButtonClicked=null);let a=e instanceof HTMLFormElement&&e.noValidate!==!0||getAttributeValue(e,"hx-validate")==="true";if(o.lastButtonClicked&&(a=a&&o.lastButtonClicked.formNoValidate!==!0),t!=="get"&&processInputValue(n,r,s,getRelatedForm(e),a),processInputValue(n,i,s,e,a),o.lastButtonClicked||e.tagName==="BUTTON"||e.tagName==="INPUT"&&getRawAttribute(e,"type")==="submit"){let c=o.lastButtonClicked||e,d=getRawAttribute(c,"name");addValueToFormData(d,c.value,r)}let l=findAttributeTargets(e,"hx-include");return forEach(l,function(c){processInputValue(n,i,s,asElement(c),a),matches(c,"form")||forEach(asParentNode(c).querySelectorAll(INPUT_SELECTOR),function(d){processInputValue(n,i,s,d,a)})}),overrideFormData(i,r),{errors:s,formData:i,values:formDataProxy(i)}}function appendParam(e,t,n){e!==""&&(e+="&"),String(n)==="[object Object]"&&(n=JSON.stringify(n));let i=encodeURIComponent(n);return e+=encodeURIComponent(t)+"="+i,e}function urlEncode(e){e=formDataFromObject(e);let t="";return e.forEach(function(n,i){t=appendParam(t,i,n)}),t}function getHeaders(e,t,n){let i={"HX-Request":"true","HX-Trigger":getRawAttribute(e,"id"),"HX-Trigger-Name":getRawAttribute(e,"name"),"HX-Target":getAttributeValue(t,"id"),"HX-Current-URL":location.href};return getValuesForElement(e,"hx-headers",!1,i),n!==void 0&&(i["HX-Prompt"]=n),getInternalData(e).boosted&&(i["HX-Boosted"]="true"),i}function filterValues(e,t){let n=getClosestAttributeValue(t,"hx-params");if(n){if(n==="none")return new FormData;if(n==="*")return e;if(n.indexOf("not ")===0)return forEach(n.slice(4).split(","),function(i){i=i.trim(),e.delete(i)}),e;{let i=new FormData;return forEach(n.split(","),function(r){r=r.trim(),e.has(r)&&e.getAll(r).forEach(function(s){i.append(r,s)})}),i}}else return e}function isAnchorLink(e){return!!getRawAttribute(e,"href")&&getRawAttribute(e,"href").indexOf("#")>=0}function getSwapSpecification(e,t){let n=t||getClosestAttributeValue(e,"hx-swap"),i={swapStyle:getInternalData(e).boosted?"innerHTML":htmx.config.defaultSwapStyle,swapDelay:htmx.config.defaultSwapDelay,settleDelay:htmx.config.defaultSettleDelay};if(htmx.config.scrollIntoViewOnBoost&&getInternalData(e).boosted&&!isAnchorLink(e)&&(i.show="top"),n){let o=splitOnWhitespace(n);if(o.length>0)for(let a=0;a<o.length;a++){let l=o[a];if(l.indexOf("swap:")===0)i.swapDelay=parseInterval(l.slice(5));else if(l.indexOf("settle:")===0)i.settleDelay=parseInterval(l.slice(7));else if(l.indexOf("transition:")===0)i.transition=l.slice(11)==="true";else if(l.indexOf("ignoreTitle:")===0)i.ignoreTitle=l.slice(12)==="true";else if(l.indexOf("scroll:")===0){var r=l.slice(7).split(":");let d=r.pop();var s=r.length>0?r.join(":"):null;i.scroll=d,i.scrollTarget=s}else if(l.indexOf("show:")===0){var r=l.slice(5).split(":");let u=r.pop();var s=r.length>0?r.join(":"):null;i.show=u,i.showTarget=s}else if(l.indexOf("focus-scroll:")===0){let c=l.slice(13);i.focusScroll=c=="true"}else a==0?i.swapStyle=l:logError("Unknown modifier in hx-swap: "+l)}}return i}function usesFormData(e){return getClosestAttributeValue(e,"hx-encoding")==="multipart/form-data"||matches(e,"form")&&getRawAttribute(e,"enctype")==="multipart/form-data"}function encodeParamsForBody(e,t,n){let i=null;return withExtensions(t,function(r){i==null&&(i=r.encodeParameters(e,n,t))}),i??(usesFormData(t)?overrideFormData(new FormData,formDataFromObject(n)):urlEncode(n))}function makeSettleInfo(e){return{tasks:[],elts:[e]}}function updateScrollState(e,t){let n=e[0],i=e[e.length-1];if(t.scroll){var r=null;t.scrollTarget&&(r=asElement(querySelectorExt(n,t.scrollTarget))),t.scroll==="top"&&(n||r)&&(r=r||n,r.scrollTop=0),t.scroll==="bottom"&&(i||r)&&(r=r||i,r.scrollTop=r.scrollHeight),typeof t.scroll=="number"&&getWindow().setTimeout(function(){window.scrollTo(0,t.scroll)},0)}if(t.show){var r=null;if(t.showTarget){let o=t.showTarget;t.showTarget==="window"&&(o="body"),r=asElement(querySelectorExt(n,o))}t.show==="top"&&(n||r)&&(r=r||n,r.scrollIntoView({block:"start",behavior:htmx.config.scrollBehavior})),t.show==="bottom"&&(i||r)&&(r=r||i,r.scrollIntoView({block:"end",behavior:htmx.config.scrollBehavior}))}}function getValuesForElement(e,t,n,i,r){if(i==null&&(i={}),e==null)return i;let s=getAttributeValue(e,t);if(s){let o=s.trim(),a=n;if(o==="unset")return null;o.indexOf("javascript:")===0?(o=o.slice(11),a=!0):o.indexOf("js:")===0&&(o=o.slice(3),a=!0),o.indexOf("{")!==0&&(o="{"+o+"}");let l;a?l=maybeEval(e,function(){return r?Function("event","return ("+o+")").call(e,r):Function("return ("+o+")").call(e)},{}):l=parseJSON(o);for(let c in l)l.hasOwnProperty(c)&&i[c]==null&&(i[c]=l[c])}return getValuesForElement(asElement(parentElt(e)),t,n,i,r)}function maybeEval(e,t,n){return htmx.config.allowEval?t():(triggerErrorEvent(e,"htmx:evalDisallowedError"),n)}function getHXVarsForElement(e,t,n){return getValuesForElement(e,"hx-vars",!0,n,t)}function getHXValsForElement(e,t,n){return getValuesForElement(e,"hx-vals",!1,n,t)}function getExpressionVars(e,t){return mergeObjects(getHXVarsForElement(e,t),getHXValsForElement(e,t))}function safelySetHeaderValue(e,t,n){if(n!==null)try{e.setRequestHeader(t,n)}catch{e.setRequestHeader(t,encodeURIComponent(n)),e.setRequestHeader(t+"-URI-AutoEncoded","true")}}function getPathFromResponse(e){if(e.responseURL)try{let t=new URL(e.responseURL);return t.pathname+t.search}catch{triggerErrorEvent(getDocument().body,"htmx:badResponseUrl",{url:e.responseURL})}}function hasHeader(e,t){return t.test(e.getAllResponseHeaders())}function ajaxHelper(e,t,n){if(e=e.toLowerCase(),n){if(n instanceof Element||typeof n=="string")return issueAjaxRequest(e,t,null,null,{targetOverride:resolveTarget(n)||DUMMY_ELT,returnPromise:!0});{let i=resolveTarget(n.target);return(n.target&&!i||n.source&&!i&&!resolveTarget(n.source))&&(i=DUMMY_ELT),issueAjaxRequest(e,t,resolveTarget(n.source),n.event,{handler:n.handler,headers:n.headers,values:n.values,targetOverride:i,swapOverride:n.swap,select:n.select,returnPromise:!0})}}else return issueAjaxRequest(e,t,null,null,{returnPromise:!0})}function hierarchyForElt(e){let t=[];for(;e;)t.push(e),e=e.parentElement;return t}function verifyPath(e,t,n){let i=new URL(t,location.protocol!=="about:"?location.href:window.origin),s=(location.protocol!=="about:"?location.origin:window.origin)===i.origin;return htmx.config.selfRequestsOnly&&!s?!1:triggerEvent(e,"htmx:validateUrl",mergeObjects({url:i,sameHost:s},n))}function formDataFromObject(e){if(e instanceof FormData)return e;let t=new FormData;for(let n in e)e.hasOwnProperty(n)&&(e[n]&&typeof e[n].forEach=="function"?e[n].forEach(function(i){t.append(n,i)}):typeof e[n]=="object"&&!(e[n]instanceof Blob)?t.append(n,JSON.stringify(e[n])):t.append(n,e[n]));return t}function formDataArrayProxy(e,t,n){return new Proxy(n,{get:function(i,r){return typeof r=="number"?i[r]:r==="length"?i.length:r==="push"?function(s){i.push(s),e.append(t,s)}:typeof i[r]=="function"?function(){i[r].apply(i,arguments),e.delete(t),i.forEach(function(s){e.append(t,s)})}:i[r]&&i[r].length===1?i[r][0]:i[r]},set:function(i,r,s){return i[r]=s,e.delete(t),i.forEach(function(o){e.append(t,o)}),!0}})}function formDataProxy(e){return new Proxy(e,{get:function(t,n){if(typeof n=="symbol"){let r=Reflect.get(t,n);return typeof r=="function"?function(){return r.apply(e,arguments)}:r}if(n==="toJSON")return()=>Object.fromEntries(e);if(n in t&&typeof t[n]=="function")return function(){return e[n].apply(e,arguments)};let i=e.getAll(n);if(i.length!==0)return i.length===1?i[0]:formDataArrayProxy(t,n,i)},set:function(t,n,i){return typeof n!="string"?!1:(t.delete(n),i&&typeof i.forEach=="function"?i.forEach(function(r){t.append(n,r)}):typeof i=="object"&&!(i instanceof Blob)?t.append(n,JSON.stringify(i)):t.append(n,i),!0)},deleteProperty:function(t,n){return typeof n=="string"&&t.delete(n),!0},ownKeys:function(t){return Reflect.ownKeys(Object.fromEntries(t))},getOwnPropertyDescriptor:function(t,n){return Reflect.getOwnPropertyDescriptor(Object.fromEntries(t),n)}})}function issueAjaxRequest(e,t,n,i,r,s){let o=null,a=null;if(r=r??{},r.returnPromise&&typeof Promise<"u")var l=new Promise(function(V,J){o=V,a=J});n==null&&(n=getDocument().body);let c=r.handler||handleAjaxResponse,d=r.select||null;if(!bodyContains(n))return maybeCall(o),l;let u=r.targetOverride||asElement(getTarget(n));if(u==null||u==DUMMY_ELT)return triggerErrorEvent(n,"htmx:targetError",{target:getClosestAttributeValue(n,"hx-target")}),maybeCall(a),l;let h=getInternalData(n),f=h.lastButtonClicked;if(f){let V=getRawAttribute(f,"formaction");V!=null&&(t=V);let J=getRawAttribute(f,"formmethod");if(J!=null)if(VERBS.includes(J.toLowerCase()))e=J;else return maybeCall(o),l}let p=getClosestAttributeValue(n,"hx-confirm");if(s===void 0&&triggerEvent(n,"htmx:confirm",{target:u,elt:n,path:t,verb:e,triggeringEvent:i,etc:r,issueRequest:function(Tt){return issueAjaxRequest(e,t,n,i,r,!!Tt)},question:p})===!1)return maybeCall(o),l;let g=n,m=getClosestAttributeValue(n,"hx-sync"),v=null,b=!1;if(m){let V=m.split(":"),J=V[0].trim();if(J==="this"?g=findThisElement(n,"hx-sync"):g=asElement(querySelectorExt(n,J)),m=(V[1]||"drop").trim(),h=getInternalData(g),m==="drop"&&h.xhr&&h.abortable!==!0)return maybeCall(o),l;if(m==="abort"){if(h.xhr)return maybeCall(o),l;b=!0}else m==="replace"?triggerEvent(g,"htmx:abort"):m.indexOf("queue")===0&&(v=(m.split(" ")[1]||"last").trim())}if(h.xhr)if(h.abortable)triggerEvent(g,"htmx:abort");else{if(v==null){if(i){let V=getInternalData(i);V&&V.triggerSpec&&V.triggerSpec.queue&&(v=V.triggerSpec.queue)}v==null&&(v="last")}return h.queuedRequests==null&&(h.queuedRequests=[]),v==="first"&&h.queuedRequests.length===0?h.queuedRequests.push(function(){issueAjaxRequest(e,t,n,i,r)}):v==="all"?h.queuedRequests.push(function(){issueAjaxRequest(e,t,n,i,r)}):v==="last"&&(h.queuedRequests=[],h.queuedRequests.push(function(){issueAjaxRequest(e,t,n,i,r)})),maybeCall(o),l}let E=new XMLHttpRequest;h.xhr=E,h.abortable=b;let _=function(){h.xhr=null,h.abortable=!1,h.queuedRequests!=null&&h.queuedRequests.length>0&&h.queuedRequests.shift()()},A=getClosestAttributeValue(n,"hx-prompt");if(A){var w=prompt(A);if(w===null||!triggerEvent(n,"htmx:prompt",{prompt:w,target:u}))return maybeCall(o),_(),l}if(p&&!s&&!confirm(p))return maybeCall(o),_(),l;let T=getHeaders(n,u,w);e!=="get"&&!usesFormData(n)&&(T["Content-Type"]="application/x-www-form-urlencoded"),r.headers&&(T=mergeObjects(T,r.headers));let D=getInputValues(n,e),O=D.errors,N=D.formData;r.values&&overrideFormData(N,formDataFromObject(r.values));let I=formDataFromObject(getExpressionVars(n,i)),$=overrideFormData(N,I),H=filterValues($,n);htmx.config.getCacheBusterParam&&e==="get"&&H.set("org.htmx.cache-buster",getRawAttribute(u,"id")||"true"),(t==null||t==="")&&(t=location.href);let z=getValuesForElement(n,"hx-request"),ut=getInternalData(n).boosted,q=htmx.config.methodsThatUseUrlParams.indexOf(e)>=0,B={boosted:ut,useUrlParams:q,formData:H,parameters:formDataProxy(H),unfilteredFormData:$,unfilteredParameters:formDataProxy($),headers:T,elt:n,target:u,verb:e,errors:O,withCredentials:r.credentials||z.credentials||htmx.config.withCredentials,timeout:r.timeout||z.timeout||htmx.config.timeout,path:t,triggeringEvent:i};if(!triggerEvent(n,"htmx:configRequest",B))return maybeCall(o),_(),l;if(t=B.path,e=B.verb,T=B.headers,H=formDataFromObject(B.parameters),O=B.errors,q=B.useUrlParams,O&&O.length>0)return triggerEvent(n,"htmx:validation:halted",B),maybeCall(o),_(),l;let dt=t.split("#"),ht=dt[0],Ot=dt[1],vt=t;if(q&&(vt=ht,!H.keys().next().done&&(vt.indexOf("?")<0?vt+="?":vt+="&",vt+=urlEncode(H),Ot&&(vt+="#"+Ot))),!verifyPath(n,vt,B))return triggerErrorEvent(n,"htmx:invalidPath",B),maybeCall(a),_(),l;if(E.open(e.toUpperCase(),vt,!0),E.overrideMimeType("text/html"),E.withCredentials=B.withCredentials,E.timeout=B.timeout,!z.noHeaders){for(let V in T)if(T.hasOwnProperty(V)){let J=T[V];safelySetHeaderValue(E,V,J)}}let Y={xhr:E,target:u,requestConfig:B,etc:r,boosted:ut,select:d,pathInfo:{requestPath:t,finalRequestPath:vt,responsePath:null,anchor:Ot}};if(E.onload=function(){try{let V=hierarchyForElt(n);if(Y.pathInfo.responsePath=getPathFromResponse(E),c(n,Y),Y.keepIndicators!==!0&&removeRequestIndicators(we,te),triggerEvent(n,"htmx:afterRequest",Y),triggerEvent(n,"htmx:afterOnLoad",Y),!bodyContains(n)){let J=null;for(;V.length>0&&J==null;){let Tt=V.shift();bodyContains(Tt)&&(J=Tt)}J&&(triggerEvent(J,"htmx:afterRequest",Y),triggerEvent(J,"htmx:afterOnLoad",Y))}maybeCall(o)}catch(V){throw triggerErrorEvent(n,"htmx:onLoadError",mergeObjects({error:V},Y)),V}finally{_()}},E.onerror=function(){removeRequestIndicators(we,te),triggerErrorEvent(n,"htmx:afterRequest",Y),triggerErrorEvent(n,"htmx:sendError",Y),maybeCall(a),_()},E.onabort=function(){removeRequestIndicators(we,te),triggerErrorEvent(n,"htmx:afterRequest",Y),triggerErrorEvent(n,"htmx:sendAbort",Y),maybeCall(a),_()},E.ontimeout=function(){removeRequestIndicators(we,te),triggerErrorEvent(n,"htmx:afterRequest",Y),triggerErrorEvent(n,"htmx:timeout",Y),maybeCall(a),_()},!triggerEvent(n,"htmx:beforeRequest",Y))return maybeCall(o),_(),l;var we=addRequestIndicatorClasses(n),te=disableElements(n);forEach(["loadstart","loadend","progress","abort"],function(V){forEach([E,E.upload],function(J){J.addEventListener(V,function(Tt){triggerEvent(n,"htmx:xhr:"+V,{lengthComputable:Tt.lengthComputable,loaded:Tt.loaded,total:Tt.total})})})}),triggerEvent(n,"htmx:beforeSend",Y);let ee=q?null:encodeParamsForBody(E,n,H);return E.send(ee),l}function determineHistoryUpdates(e,t){let n=t.xhr,i=null,r=null;if(hasHeader(n,/HX-Push:/i)?(i=n.getResponseHeader("HX-Push"),r="push"):hasHeader(n,/HX-Push-Url:/i)?(i=n.getResponseHeader("HX-Push-Url"),r="push"):hasHeader(n,/HX-Replace-Url:/i)&&(i=n.getResponseHeader("HX-Replace-Url"),r="replace"),i)return i==="false"?{}:{type:r,path:i};let s=t.pathInfo.finalRequestPath,o=t.pathInfo.responsePath,a=getClosestAttributeValue(e,"hx-push-url"),l=getClosestAttributeValue(e,"hx-replace-url"),c=getInternalData(e).boosted,d=null,u=null;return a?(d="push",u=a):l?(d="replace",u=l):c&&(d="push",u=o||s),u?u==="false"?{}:(u==="true"&&(u=o||s),t.pathInfo.anchor&&u.indexOf("#")===-1&&(u=u+"#"+t.pathInfo.anchor),{type:d,path:u}):{}}function codeMatches(e,t){var n=new RegExp(e.code);return n.test(t.toString(10))}function resolveResponseHandling(e){for(var t=0;t<htmx.config.responseHandling.length;t++){var n=htmx.config.responseHandling[t];if(codeMatches(n,e.status))return n}return{swap:!1}}function handleTitle(e){if(e){let t=find("title");t?t.textContent=e:window.document.title=e}}function resolveRetarget(e,t){if(t==="this")return e;let n=asElement(querySelectorExt(e,t));if(n==null)throw triggerErrorEvent(e,"htmx:targetError",{target:t}),new Error(`Invalid re-target ${t}`);return n}function handleAjaxResponse(e,t){let n=t.xhr,i=t.target,r=t.etc,s=t.select;if(!triggerEvent(e,"htmx:beforeOnLoad",t))return;if(hasHeader(n,/HX-Trigger:/i)&&handleTriggerHeader(n,"HX-Trigger",e),hasHeader(n,/HX-Location:/i)){saveCurrentPageToHistory();let b=n.getResponseHeader("HX-Location");var o;b.indexOf("{")===0&&(o=parseJSON(b),b=o.path,delete o.path),ajaxHelper("get",b,o).then(function(){pushUrlIntoHistory(b)});return}let a=hasHeader(n,/HX-Refresh:/i)&&n.getResponseHeader("HX-Refresh")==="true";if(hasHeader(n,/HX-Redirect:/i)){t.keepIndicators=!0,htmx.location.href=n.getResponseHeader("HX-Redirect"),a&&htmx.location.reload();return}if(a){t.keepIndicators=!0,htmx.location.reload();return}let l=determineHistoryUpdates(e,t),c=resolveResponseHandling(n),d=c.swap,u=!!c.error,h=htmx.config.ignoreTitle||c.ignoreTitle,f=c.select;c.target&&(t.target=resolveRetarget(e,c.target));var p=r.swapOverride;p==null&&c.swapOverride&&(p=c.swapOverride),hasHeader(n,/HX-Retarget:/i)&&(t.target=resolveRetarget(e,n.getResponseHeader("HX-Retarget"))),hasHeader(n,/HX-Reswap:/i)&&(p=n.getResponseHeader("HX-Reswap"));var g=n.response,m=mergeObjects({shouldSwap:d,serverResponse:g,isError:u,ignoreTitle:h,selectOverride:f,swapOverride:p},t);if(!(c.event&&!triggerEvent(i,c.event,m))&&triggerEvent(i,"htmx:beforeSwap",m)){if(i=m.target,g=m.serverResponse,u=m.isError,h=m.ignoreTitle,f=m.selectOverride,p=m.swapOverride,t.target=i,t.failed=u,t.successful=!u,m.shouldSwap){n.status===286&&cancelPolling(e),withExtensions(e,function(_){g=_.transformResponse(g,n,e)}),l.type&&saveCurrentPageToHistory();var v=getSwapSpecification(e,p);v.hasOwnProperty("ignoreTitle")||(v.ignoreTitle=h),i.classList.add(htmx.config.swappingClass),s&&(f=s),hasHeader(n,/HX-Reselect:/i)&&(f=n.getResponseHeader("HX-Reselect"));let b=getClosestAttributeValue(e,"hx-select-oob"),E=getClosestAttributeValue(e,"hx-select");swap(i,g,v,{select:f==="unset"?null:f||E,selectOOB:b,eventInfo:t,anchor:t.pathInfo.anchor,contextElement:e,afterSwapCallback:function(){if(hasHeader(n,/HX-Trigger-After-Swap:/i)){let _=e;bodyContains(e)||(_=getDocument().body),handleTriggerHeader(n,"HX-Trigger-After-Swap",_)}},afterSettleCallback:function(){if(hasHeader(n,/HX-Trigger-After-Settle:/i)){let _=e;bodyContains(e)||(_=getDocument().body),handleTriggerHeader(n,"HX-Trigger-After-Settle",_)}},beforeSwapCallback:function(){l.type&&(triggerEvent(getDocument().body,"htmx:beforeHistoryUpdate",mergeObjects({history:l},t)),l.type==="push"?(pushUrlIntoHistory(l.path),triggerEvent(getDocument().body,"htmx:pushedIntoHistory",{path:l.path})):(replaceUrlInHistory(l.path),triggerEvent(getDocument().body,"htmx:replacedInHistory",{path:l.path})))}})}u&&triggerErrorEvent(e,"htmx:responseError",mergeObjects({error:"Response Status Error Code "+n.status+" from "+t.pathInfo.requestPath},t))}}let extensions={};function extensionBase(){return{init:function(e){return null},getSelectors:function(){return null},onEvent:function(e,t){return!0},transformResponse:function(e,t,n){return e},isInlineSwap:function(e){return!1},handleSwap:function(e,t,n,i){return!1},encodeParameters:function(e,t,n){return null}}}function defineExtension(e,t){t.init&&t.init(internalAPI),extensions[e]=mergeObjects(extensionBase(),t)}function removeExtension(e){delete extensions[e]}function getExtensions(e,t,n){if(t==null&&(t=[]),e==null)return t;n==null&&(n=[]);let i=getAttributeValue(e,"hx-ext");return i&&forEach(i.split(","),function(r){if(r=r.replace(/ /g,""),r.slice(0,7)=="ignore:"){n.push(r.slice(7));return}if(n.indexOf(r)<0){let s=extensions[r];s&&t.indexOf(s)<0&&t.push(s)}}),getExtensions(asElement(parentElt(e)),t,n)}var isReady=!1;getDocument().addEventListener("DOMContentLoaded",function(){isReady=!0});function ready(e){isReady||getDocument().readyState==="complete"?e():getDocument().addEventListener("DOMContentLoaded",e)}function insertIndicatorStyles(){if(htmx.config.includeIndicatorStyles!==!1){let e=htmx.config.inlineStyleNonce?` nonce="${htmx.config.inlineStyleNonce}"`:"",t=htmx.config.indicatorClass,n=htmx.config.requestClass;getDocument().head.insertAdjacentHTML("beforeend",`<style${e}>.${t}{opacity:0;visibility: hidden} .${n} .${t}, .${n}.${t}{opacity:1;visibility: visible;transition: opacity 200ms ease-in}</style>`)}}function getMetaConfig(){let e=getDocument().querySelector('meta[name="htmx-config"]');return e?parseJSON(e.content):null}function mergeMetaConfig(){let e=getMetaConfig();e&&(htmx.config=mergeObjects(htmx.config,e))}return ready(function(){mergeMetaConfig(),insertIndicatorStyles();let e=getDocument().body;processNode(e);let t=getDocument().querySelectorAll("[hx-trigger='restored'],[data-hx-trigger='restored']");e.addEventListener("htmx:abort",function(i){let r=i.target,s=getInternalData(r);s&&s.xhr&&s.xhr.abort()});let n=window.onpopstate?window.onpopstate.bind(window):null;window.onpopstate=function(i){i.state&&i.state.htmx?(restoreHistory(),forEach(t,function(r){triggerEvent(r,"htmx:restored",{document:getDocument(),triggerEvent})})):n&&n(i)},getWindow().setTimeout(function(){triggerEvent(e,"htmx:load",{}),e=null},0)}),htmx}(),on=vp;var _s={};gp(_s,{afterMain:()=>Cc,afterRead:()=>Ac,afterWrite:()=>Nc,applyStyles:()=>mi,arrow:()=>us,auto:()=>zi,basePlacements:()=>Ie,beforeMain:()=>xc,beforeRead:()=>Tc,beforeWrite:()=>Pc,bottom:()=>pt,clippingParents:()=>Wo,computeStyles:()=>_i,createPopper:()=>er,createPopperBase:()=>Hc,createPopperLite:()=>jc,detectOverflow:()=>$t,end:()=>an,eventListeners:()=>bi,flip:()=>ps,hide:()=>gs,left:()=>lt,main:()=>Oc,modifierPhases:()=>Ko,offset:()=>ms,placements:()=>Xi,popper:()=>An,popperGenerator:()=>Rn,popperOffsets:()=>Ei,preventOverflow:()=>vs,read:()=>Sc,reference:()=>zo,right:()=>ft,start:()=>De,top:()=>st,variationPlacements:()=>cs,viewport:()=>Ki,write:()=>Dc});var st="top",pt="bottom",ft="right",lt="left",zi="auto",Ie=[st,pt,ft,lt],De="start",an="end",Wo="clippingParents",Ki="viewport",An="popper",zo="reference",cs=Ie.reduce(function(e,t){return e.concat([t+"-"+De,t+"-"+an])},[]),Xi=[].concat(Ie,[zi]).reduce(function(e,t){return e.concat([t,t+"-"+De,t+"-"+an])},[]),Tc="beforeRead",Sc="read",Ac="afterRead",xc="beforeMain",Oc="main",Cc="afterMain",Pc="beforeWrite",Dc="write",Nc="afterWrite",Ko=[Tc,Sc,Ac,xc,Oc,Cc,Pc,Dc,Nc];function St(e){return e?(e.nodeName||"").toLowerCase():null}function et(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function he(e){var t=et(e).Element;return e instanceof t||e instanceof Element}function _t(e){var t=et(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function gi(e){if(typeof ShadowRoot>"u")return!1;var t=et(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function _p(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var i=t.styles[n]||{},r=t.attributes[n]||{},s=t.elements[n];!_t(s)||!St(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function bp(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(i){var r=t.elements[i],s=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:n[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!_t(r)||!St(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}var mi={name:"applyStyles",enabled:!0,phase:"write",fn:_p,effect:bp,requires:["computeStyles"]};function At(e){return e.split("-")[0]}var Ee=Math.max,xn=Math.min,Re=Math.round;function vi(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Yi(){return!/^((?!chrome|android).)*safari/i.test(vi())}function fe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=e.getBoundingClientRect(),r=1,s=1;t&&_t(e)&&(r=e.offsetWidth>0&&Re(i.width)/e.offsetWidth||1,s=e.offsetHeight>0&&Re(i.height)/e.offsetHeight||1);var o=he(e)?et(e):window,a=o.visualViewport,l=!Yi()&&n,c=(i.left+(l&&a?a.offsetLeft:0))/r,d=(i.top+(l&&a?a.offsetTop:0))/s,u=i.width/r,h=i.height/s;return{width:u,height:h,top:d,right:c+u,bottom:d+h,left:c,x:c,y:d}}function On(e){var t=fe(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function Gi(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&gi(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Ut(e){return et(e).getComputedStyle(e)}function Xo(e){return["table","td","th"].indexOf(St(e))>=0}function Ct(e){return((he(e)?e.ownerDocument:e.document)||window.document).documentElement}function Le(e){return St(e)==="html"?e:e.assignedSlot||e.parentNode||(gi(e)?e.host:null)||Ct(e)}function Ic(e){return!_t(e)||Ut(e).position==="fixed"?null:e.offsetParent}function yp(e){var t=/firefox/i.test(vi()),n=/Trident/i.test(vi());if(n&&_t(e)){var i=Ut(e);if(i.position==="fixed")return null}var r=Le(e);for(gi(r)&&(r=r.host);_t(r)&&["html","body"].indexOf(St(r))<0;){var s=Ut(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function Te(e){for(var t=et(e),n=Ic(e);n&&Xo(n)&&Ut(n).position==="static";)n=Ic(n);return n&&(St(n)==="html"||St(n)==="body"&&Ut(n).position==="static")?t:n||yp(e)||t}function Cn(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Pn(e,t,n){return Ee(e,xn(t,n))}function Rc(e,t,n){var i=Pn(e,t,n);return i>n?n:i}function Ji(){return{top:0,right:0,bottom:0,left:0}}function Qi(e){return Object.assign({},Ji(),e)}function Zi(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}var wp=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,Qi(typeof t!="number"?t:Zi(t,Ie))};function Ep(e){var t,n=e.state,i=e.name,r=e.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=At(n.placement),l=Cn(a),c=[lt,ft].indexOf(a)>=0,d=c?"height":"width";if(!(!s||!o)){var u=wp(r.padding,n),h=On(s),f=l==="y"?st:lt,p=l==="y"?pt:ft,g=n.rects.reference[d]+n.rects.reference[l]-o[l]-n.rects.popper[d],m=o[l]-n.rects.reference[l],v=Te(s),b=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,E=g/2-m/2,_=u[f],A=b-h[d]-u[p],w=b/2-h[d]/2+E,T=Pn(_,w,A),D=l;n.modifiersData[i]=(t={},t[D]=T,t.centerOffset=T-w,t)}}function Tp(e){var t=e.state,n=e.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||Gi(t.elements.popper,r)&&(t.elements.arrow=r))}var us={name:"arrow",enabled:!0,phase:"main",fn:Ep,effect:Tp,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function pe(e){return e.split("-")[1]}var Sp={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ap(e,t){var n=e.x,i=e.y,r=t.devicePixelRatio||1;return{x:Re(n*r)/r||0,y:Re(i*r)/r||0}}function Lc(e){var t,n=e.popper,i=e.popperRect,r=e.placement,s=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,u=e.isFixed,h=o.x,f=h===void 0?0:h,p=o.y,g=p===void 0?0:p,m=typeof d=="function"?d({x:f,y:g}):{x:f,y:g};f=m.x,g=m.y;var v=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),E=lt,_=st,A=window;if(c){var w=Te(n),T="clientHeight",D="clientWidth";if(w===et(n)&&(w=Ct(n),Ut(w).position!=="static"&&a==="absolute"&&(T="scrollHeight",D="scrollWidth")),w=w,r===st||(r===lt||r===ft)&&s===an){_=pt;var O=u&&w===A&&A.visualViewport?A.visualViewport.height:w[T];g-=O-i.height,g*=l?1:-1}if(r===lt||(r===st||r===pt)&&s===an){E=ft;var N=u&&w===A&&A.visualViewport?A.visualViewport.width:w[D];f-=N-i.width,f*=l?1:-1}}var I=Object.assign({position:a},c&&Sp),$=d===!0?Ap({x:f,y:g},et(n)):{x:f,y:g};if(f=$.x,g=$.y,l){var H;return Object.assign({},I,(H={},H[_]=b?"0":"",H[E]=v?"0":"",H.transform=(A.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",H))}return Object.assign({},I,(t={},t[_]=b?g+"px":"",t[E]=v?f+"px":"",t.transform="",t))}function xp(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=i===void 0?!0:i,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:At(t.placement),variation:pe(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Lc(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Lc(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var _i={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:xp,data:{}};var ds={passive:!0};function Op(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,a=o===void 0?!0:o,l=et(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&c.forEach(function(d){d.addEventListener("scroll",n.update,ds)}),a&&l.addEventListener("resize",n.update,ds),function(){s&&c.forEach(function(d){d.removeEventListener("scroll",n.update,ds)}),a&&l.removeEventListener("resize",n.update,ds)}}var bi={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Op,data:{}};var Cp={left:"right",right:"left",bottom:"top",top:"bottom"};function yi(e){return e.replace(/left|right|bottom|top/g,function(t){return Cp[t]})}var Pp={start:"end",end:"start"};function hs(e){return e.replace(/start|end/g,function(t){return Pp[t]})}function Dn(e){var t=et(e),n=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Nn(e){return fe(Ct(e)).left+Dn(e).scrollLeft}function Yo(e,t){var n=et(e),i=Ct(e),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=Yi();(c||!c&&t==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+Nn(e),y:l}}function Go(e){var t,n=Ct(e),i=Dn(e),r=(t=e.ownerDocument)==null?void 0:t.body,s=Ee(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Ee(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+Nn(e),l=-i.scrollTop;return Ut(r||n).direction==="rtl"&&(a+=Ee(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function In(e){var t=Ut(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function fs(e){return["html","body","#document"].indexOf(St(e))>=0?e.ownerDocument.body:_t(e)&&In(e)?e:fs(Le(e))}function ln(e,t){var n;t===void 0&&(t=[]);var i=fs(e),r=i===((n=e.ownerDocument)==null?void 0:n.body),s=et(i),o=r?[s].concat(s.visualViewport||[],In(i)?i:[]):i,a=t.concat(o);return r?a:a.concat(ln(Le(o)))}function wi(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Dp(e,t){var n=fe(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function kc(e,t,n){return t===Ki?wi(Yo(e,n)):he(t)?Dp(t,n):wi(Go(Ct(e)))}function Np(e){var t=ln(Le(e)),n=["absolute","fixed"].indexOf(Ut(e).position)>=0,i=n&&_t(e)?Te(e):e;return he(i)?t.filter(function(r){return he(r)&&Gi(r,i)&&St(r)!=="body"}):[]}function Jo(e,t,n,i){var r=t==="clippingParents"?Np(e):[].concat(t),s=[].concat(r,[n]),o=s[0],a=s.reduce(function(l,c){var d=kc(e,c,i);return l.top=Ee(d.top,l.top),l.right=xn(d.right,l.right),l.bottom=xn(d.bottom,l.bottom),l.left=Ee(d.left,l.left),l},kc(e,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function tr(e){var t=e.reference,n=e.element,i=e.placement,r=i?At(i):null,s=i?pe(i):null,o=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,l;switch(r){case st:l={x:o,y:t.y-n.height};break;case pt:l={x:o,y:t.y+t.height};break;case ft:l={x:t.x+t.width,y:a};break;case lt:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var c=r?Cn(r):null;if(c!=null){var d=c==="y"?"height":"width";switch(s){case De:l[c]=l[c]-(t[d]/2-n[d]/2);break;case an:l[c]=l[c]+(t[d]/2-n[d]/2);break;default:}}return l}function $t(e,t){t===void 0&&(t={});var n=t,i=n.placement,r=i===void 0?e.placement:i,s=n.strategy,o=s===void 0?e.strategy:s,a=n.boundary,l=a===void 0?Wo:a,c=n.rootBoundary,d=c===void 0?Ki:c,u=n.elementContext,h=u===void 0?An:u,f=n.altBoundary,p=f===void 0?!1:f,g=n.padding,m=g===void 0?0:g,v=Qi(typeof m!="number"?m:Zi(m,Ie)),b=h===An?zo:An,E=e.rects.popper,_=e.elements[p?b:h],A=Jo(he(_)?_:_.contextElement||Ct(e.elements.popper),l,d,o),w=fe(e.elements.reference),T=tr({reference:w,element:E,strategy:"absolute",placement:r}),D=wi(Object.assign({},E,T)),O=h===An?D:w,N={top:A.top-O.top+v.top,bottom:O.bottom-A.bottom+v.bottom,left:A.left-O.left+v.left,right:O.right-A.right+v.right},I=e.modifiersData.offset;if(h===An&&I){var $=I[r];Object.keys(N).forEach(function(H){var z=[ft,pt].indexOf(H)>=0?1:-1,ut=[st,pt].indexOf(H)>=0?"y":"x";N[H]+=$[ut]*z})}return N}function Qo(e,t){t===void 0&&(t={});var n=t,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?Xi:l,d=pe(i),u=d?a?cs:cs.filter(function(p){return pe(p)===d}):Ie,h=u.filter(function(p){return c.indexOf(p)>=0});h.length===0&&(h=u);var f=h.reduce(function(p,g){return p[g]=$t(e,{placement:g,boundary:r,rootBoundary:s,padding:o})[At(g)],p},{});return Object.keys(f).sort(function(p,g){return f[p]-f[g]})}function Ip(e){if(At(e)===zi)return[];var t=yi(e);return[hs(e),t,hs(t)]}function Rp(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,d=n.boundary,u=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=f===void 0?!0:f,g=n.allowedAutoPlacements,m=t.options.placement,v=At(m),b=v===m,E=l||(b||!p?[yi(m)]:Ip(m)),_=[m].concat(E).reduce(function(te,ee){return te.concat(At(ee)===zi?Qo(t,{placement:ee,boundary:d,rootBoundary:u,padding:c,flipVariations:p,allowedAutoPlacements:g}):ee)},[]),A=t.rects.reference,w=t.rects.popper,T=new Map,D=!0,O=_[0],N=0;N<_.length;N++){var I=_[N],$=At(I),H=pe(I)===De,z=[st,pt].indexOf($)>=0,ut=z?"width":"height",q=$t(t,{placement:I,boundary:d,rootBoundary:u,altBoundary:h,padding:c}),B=z?H?ft:lt:H?pt:st;A[ut]>w[ut]&&(B=yi(B));var dt=yi(B),ht=[];if(s&&ht.push(q[$]<=0),a&&ht.push(q[B]<=0,q[dt]<=0),ht.every(function(te){return te})){O=I,D=!1;break}T.set(I,ht)}if(D)for(var Ot=p?3:1,vt=function(ee){var V=_.find(function(J){var Tt=T.get(J);if(Tt)return Tt.slice(0,ee).every(function(rn){return rn})});if(V)return O=V,"break"},Y=Ot;Y>0;Y--){var we=vt(Y);if(we==="break")break}t.placement!==O&&(t.modifiersData[i]._skip=!0,t.placement=O,t.reset=!0)}}var ps={name:"flip",enabled:!0,phase:"main",fn:Rp,requiresIfExists:["offset"],data:{_skip:!1}};function Mc(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Fc(e){return[st,ft,pt,lt].some(function(t){return e[t]>=0})}function Lp(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,s=t.modifiersData.preventOverflow,o=$t(t,{elementContext:"reference"}),a=$t(t,{altBoundary:!0}),l=Mc(o,i),c=Mc(a,r,s),d=Fc(l),u=Fc(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}var gs={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Lp};function kp(e,t,n){var i=At(e),r=[lt,st].indexOf(i)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[lt,ft].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function Mp(e){var t=e.state,n=e.options,i=e.name,r=n.offset,s=r===void 0?[0,0]:r,o=Xi.reduce(function(d,u){return d[u]=kp(u,t.rects,s),d},{}),a=o[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=o}var ms={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Mp};function Fp(e){var t=e.state,n=e.name;t.modifiersData[n]=tr({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var Ei={name:"popperOffsets",enabled:!0,phase:"read",fn:Fp,data:{}};function Zo(e){return e==="x"?"y":"x"}function Up(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,u=n.padding,h=n.tether,f=h===void 0?!0:h,p=n.tetherOffset,g=p===void 0?0:p,m=$t(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),v=At(t.placement),b=pe(t.placement),E=!b,_=Cn(v),A=Zo(_),w=t.modifiersData.popperOffsets,T=t.rects.reference,D=t.rects.popper,O=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,N=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),I=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,$={x:0,y:0};if(w){if(s){var H,z=_==="y"?st:lt,ut=_==="y"?pt:ft,q=_==="y"?"height":"width",B=w[_],dt=B+m[z],ht=B-m[ut],Ot=f?-D[q]/2:0,vt=b===De?T[q]:D[q],Y=b===De?-D[q]:-T[q],we=t.elements.arrow,te=f&&we?On(we):{width:0,height:0},ee=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Ji(),V=ee[z],J=ee[ut],Tt=Pn(0,T[q],te[q]),rn=E?T[q]/2-Ot-Tt-V-N.mainAxis:vt-Tt-V-N.mainAxis,rp=E?-T[q]/2+Ot+Tt+J+N.mainAxis:Y+Tt+J+N.mainAxis,Bo=t.elements.arrow&&Te(t.elements.arrow),sp=Bo?_==="y"?Bo.clientTop||0:Bo.clientLeft||0:0,pc=(H=I?.[_])!=null?H:0,op=B+rn-pc-sp,ap=B+rp-pc,gc=Pn(f?xn(dt,op):dt,B,f?Ee(ht,ap):ht);w[_]=gc,$[_]=gc-B}if(a){var mc,lp=_==="x"?st:lt,cp=_==="x"?pt:ft,Sn=w[A],ls=A==="y"?"height":"width",vc=Sn+m[lp],_c=Sn-m[cp],Vo=[st,lt].indexOf(v)!==-1,bc=(mc=I?.[A])!=null?mc:0,yc=Vo?vc:Sn-T[ls]-D[ls]-bc+N.altAxis,wc=Vo?Sn+T[ls]+D[ls]-bc-N.altAxis:_c,Ec=f&&Vo?Rc(yc,Sn,wc):Pn(f?yc:vc,Sn,f?wc:_c);w[A]=Ec,$[A]=Ec-Sn}t.modifiersData[i]=$}}var vs={name:"preventOverflow",enabled:!0,phase:"main",fn:Up,requiresIfExists:["offset"]};function ta(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function ea(e){return e===et(e)||!_t(e)?Dn(e):ta(e)}function $p(e){var t=e.getBoundingClientRect(),n=Re(t.width)/e.offsetWidth||1,i=Re(t.height)/e.offsetHeight||1;return n!==1||i!==1}function na(e,t,n){n===void 0&&(n=!1);var i=_t(t),r=_t(t)&&$p(t),s=Ct(t),o=fe(e,r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((St(t)!=="body"||In(s))&&(a=ea(t)),_t(t)?(l=fe(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=Nn(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Hp(e){var t=new Map,n=new Set,i=[];e.forEach(function(s){t.set(s.name,s)});function r(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&r(l)}}),i.push(s)}return e.forEach(function(s){n.has(s.name)||r(s)}),i}function ia(e){var t=Hp(e);return Ko.reduce(function(n,i){return n.concat(t.filter(function(r){return r.phase===i}))},[])}function ra(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function sa(e){var t=e.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}var Uc={placement:"bottom",modifiers:[],strategy:"absolute"};function $c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Rn(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,i=n===void 0?[]:n,r=t.defaultOptions,s=r===void 0?Uc:r;return function(a,l,c){c===void 0&&(c=s);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Uc,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},u=[],h=!1,f={state:d,setOptions:function(v){var b=typeof v=="function"?v(d.options):v;g(),d.options=Object.assign({},s,d.options,b),d.scrollParents={reference:he(a)?ln(a):a.contextElement?ln(a.contextElement):[],popper:ln(l)};var E=ia(sa([].concat(i,d.options.modifiers)));return d.orderedModifiers=E.filter(function(_){return _.enabled}),p(),f.update()},forceUpdate:function(){if(!h){var v=d.elements,b=v.reference,E=v.popper;if($c(b,E)){d.rects={reference:na(b,Te(E),d.options.strategy==="fixed"),popper:On(E)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(N){return d.modifiersData[N.name]=Object.assign({},N.data)});for(var _=0;_<d.orderedModifiers.length;_++){if(d.reset===!0){d.reset=!1,_=-1;continue}var A=d.orderedModifiers[_],w=A.fn,T=A.options,D=T===void 0?{}:T,O=A.name;typeof w=="function"&&(d=w({state:d,options:D,name:O,instance:f})||d)}}}},update:ra(function(){return new Promise(function(m){f.forceUpdate(),m(d)})}),destroy:function(){g(),h=!0}};if(!$c(a,l))return f;f.setOptions(c).then(function(m){!h&&c.onFirstUpdate&&c.onFirstUpdate(m)});function p(){d.orderedModifiers.forEach(function(m){var v=m.name,b=m.options,E=b===void 0?{}:b,_=m.effect;if(typeof _=="function"){var A=_({state:d,name:v,instance:f,options:E}),w=function(){};u.push(A||w)}})}function g(){u.forEach(function(m){return m()}),u=[]}return f}}var Hc=Rn();var jp=[bi,Ei,_i,mi],jc=Rn({defaultModifiers:jp});var Bp=[bi,Ei,_i,mi,ms,ps,vs,us,gs],er=Rn({defaultModifiers:Bp});var cn=new Map,oa={set(e,t,n){cn.has(e)||cn.set(e,new Map);let i=cn.get(e);if(!i.has(t)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(t,n)},get(e,t){return cn.has(e)&&cn.get(e).get(t)||null},remove(e,t){if(!cn.has(e))return;let n=cn.get(e);n.delete(t),n.size===0&&cn.delete(e)}},Vp=1e6,qp=1e3,wa="transitionend",mu=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(t,n)=>`#${CSS.escape(n)}`)),e),Wp=e=>e==null?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),zp=e=>{do e+=Math.floor(Math.random()*Vp);while(document.getElementById(e));return e},Kp=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e),i=Number.parseFloat(t),r=Number.parseFloat(n);return!i&&!r?0:(t=t.split(",")[0],n=n.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(n))*qp)},vu=e=>{e.dispatchEvent(new Event(wa))},ke=e=>!e||typeof e!="object"?!1:(typeof e.jquery<"u"&&(e=e[0]),typeof e.nodeType<"u"),un=e=>ke(e)?e.jquery?e[0]:e:typeof e=="string"&&e.length>0?document.querySelector(mu(e)):null,Di=e=>{if(!ke(e)||e.getClientRects().length===0)return!1;let t=getComputedStyle(e).getPropertyValue("visibility")==="visible",n=e.closest("details:not([open])");if(!n)return t;if(n!==e){let i=e.closest("summary");if(i&&i.parentNode!==n||i===null)return!1}return t},dn=e=>!e||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains("disabled")?!0:typeof e.disabled<"u"?e.disabled:e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false",_u=e=>{if(!document.documentElement.attachShadow)return null;if(typeof e.getRootNode=="function"){let t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?_u(e.parentNode):null},Os=()=>{},ar=e=>{e.offsetHeight},bu=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,aa=[],Xp=e=>{document.readyState==="loading"?(aa.length||document.addEventListener("DOMContentLoaded",()=>{for(let t of aa)t()}),aa.push(e)):e()},ge=()=>document.documentElement.dir==="rtl",ve=e=>{Xp(()=>{let t=bu();if(t){let n=e.NAME,i=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=i,e.jQueryInterface)}})},Xt=(e,t=[],n=e)=>typeof e=="function"?e.call(...t):n,yu=(e,t,n=!0)=>{if(!n){Xt(e);return}let r=Kp(t)+5,s=!1,o=({target:a})=>{a===t&&(s=!0,t.removeEventListener(wa,o),Xt(e))};t.addEventListener(wa,o),setTimeout(()=>{s||vu(t)},r)},xa=(e,t,n,i)=>{let r=e.length,s=e.indexOf(t);return s===-1?!n&&i?e[r-1]:e[0]:(s+=n?1:-1,i&&(s=(s+r)%r),e[Math.max(0,Math.min(s,r-1))])},Yp=/[^.]*(?=\..*)\.|.*/,Gp=/\..*/,Jp=/::\d+$/,la={},Bc=1,wu={mouseenter:"mouseover",mouseleave:"mouseout"},Qp=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Eu(e,t){return t&&`${t}::${Bc++}`||e.uidEvent||Bc++}function Tu(e){let t=Eu(e);return e.uidEvent=t,la[t]=la[t]||{},la[t]}function Zp(e,t){return function n(i){return Oa(i,{delegateTarget:e}),n.oneOff&&y.off(e,i.type,t),t.apply(e,[i])}}function tg(e,t,n){return function i(r){let s=e.querySelectorAll(t);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(let a of s)if(a===o)return Oa(r,{delegateTarget:o}),i.oneOff&&y.off(e,r.type,t,n),n.apply(o,[r])}}function Su(e,t,n=null){return Object.values(e).find(i=>i.callable===t&&i.delegationSelector===n)}function Au(e,t,n){let i=typeof t=="string",r=i?n:t||n,s=xu(e);return Qp.has(s)||(s=e),[i,r,s]}function Vc(e,t,n,i,r){if(typeof t!="string"||!e)return;let[s,o,a]=Au(t,n,i);t in wu&&(o=(p=>function(g){if(!g.relatedTarget||g.relatedTarget!==g.delegateTarget&&!g.delegateTarget.contains(g.relatedTarget))return p.call(this,g)})(o));let l=Tu(e),c=l[a]||(l[a]={}),d=Su(c,o,s?n:null);if(d){d.oneOff=d.oneOff&&r;return}let u=Eu(o,t.replace(Yp,"")),h=s?tg(e,n,o):Zp(e,o);h.delegationSelector=s?n:null,h.callable=o,h.oneOff=r,h.uidEvent=u,c[u]=h,e.addEventListener(a,h,s)}function Ea(e,t,n,i,r){let s=Su(t[n],i,r);s&&(e.removeEventListener(n,s,!!r),delete t[n][s.uidEvent])}function eg(e,t,n,i){let r=t[n]||{};for(let[s,o]of Object.entries(r))s.includes(i)&&Ea(e,t,n,o.callable,o.delegationSelector)}function xu(e){return e=e.replace(Gp,""),wu[e]||e}var y={on(e,t,n,i){Vc(e,t,n,i,!1)},one(e,t,n,i){Vc(e,t,n,i,!0)},off(e,t,n,i){if(typeof t!="string"||!e)return;let[r,s,o]=Au(t,n,i),a=o!==t,l=Tu(e),c=l[o]||{},d=t.startsWith(".");if(typeof s<"u"){if(!Object.keys(c).length)return;Ea(e,l,o,s,r?n:null);return}if(d)for(let u of Object.keys(l))eg(e,l,u,t.slice(1));for(let[u,h]of Object.entries(c)){let f=u.replace(Jp,"");(!a||t.includes(f))&&Ea(e,l,o,h.callable,h.delegationSelector)}},trigger(e,t,n){if(typeof t!="string"||!e)return null;let i=bu(),r=xu(t),s=t!==r,o=null,a=!0,l=!0,c=!1;s&&i&&(o=i.Event(t,n),i(e).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),c=o.isDefaultPrevented());let d=Oa(new Event(t,{bubbles:a,cancelable:!0}),n);return c&&d.preventDefault(),l&&e.dispatchEvent(d),d.defaultPrevented&&o&&o.preventDefault(),d}};function Oa(e,t={}){for(let[n,i]of Object.entries(t))try{e[n]=i}catch{Object.defineProperty(e,n,{configurable:!0,get(){return i}})}return e}function qc(e){if(e==="true")return!0;if(e==="false")return!1;if(e===Number(e).toString())return Number(e);if(e===""||e==="null")return null;if(typeof e!="string")return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function ca(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}var Me={setDataAttribute(e,t,n){e.setAttribute(`data-bs-${ca(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${ca(t)}`)},getDataAttributes(e){if(!e)return{};let t={},n=Object.keys(e.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(let i of n){let r=i.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1),t[r]=qc(e.dataset[i])}return t},getDataAttribute(e,t){return qc(e.getAttribute(`data-bs-${ca(t)}`))}},Mn=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,n){let i=ke(n)?Me.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...ke(n)?Me.getDataAttributes(n):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,n=this.constructor.DefaultType){for(let[i,r]of Object.entries(n)){let s=t[i],o=ke(s)?"element":Wp(s);if(!new RegExp(r).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${r}".`)}}},ng="5.3.5",ne=class extends Mn{constructor(t,n){super(),t=un(t),t&&(this._element=t,this._config=this._getConfig(n),oa.set(this._element,this.constructor.DATA_KEY,this))}dispose(){oa.remove(this._element,this.constructor.DATA_KEY),y.off(this._element,this.constructor.EVENT_KEY);for(let t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,n,i=!0){yu(t,n,i)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return oa.get(un(t),this.DATA_KEY)}static getOrCreateInstance(t,n={}){return this.getInstance(t)||new this(t,typeof n=="object"?n:null)}static get VERSION(){return ng}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}},ua=e=>{let t=e.getAttribute("data-bs-target");if(!t||t==="#"){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&n!=="#"?n.trim():null}return t?t.split(",").map(n=>mu(n)).join(","):null},R={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(n=>n.matches(t))},parents(e,t){let n=[],i=e.parentNode.closest(t);for(;i;)n.push(i),i=i.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){let t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(n=>!dn(n)&&Di(n))},getSelectorFromElement(e){let t=ua(e);return t&&R.findOne(t)?t:null},getElementFromSelector(e){let t=ua(e);return t?R.findOne(t):null},getMultipleElementsFromSelector(e){let t=ua(e);return t?R.find(t):[]}},Fs=(e,t="hide")=>{let n=`click.dismiss${e.EVENT_KEY}`,i=e.NAME;y.on(document,n,`[data-bs-dismiss="${i}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),dn(this))return;let s=R.getElementFromSelector(this)||this.closest(`.${i}`);e.getOrCreateInstance(s)[t]()})},ig="alert",rg="bs.alert",Ou=`.${rg}`,sg=`close${Ou}`,og=`closed${Ou}`,ag="fade",lg="show",Cs=class e extends ne{static get NAME(){return ig}close(){if(y.trigger(this._element,sg).defaultPrevented)return;this._element.classList.remove(lg);let n=this._element.classList.contains(ag);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),y.trigger(this._element,og),this.dispose()}static jQueryInterface(t){return this.each(function(){let n=e.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}};Fs(Cs,"close");ve(Cs);var cg="button",ug="bs.button",dg=`.${ug}`,hg=".data-api",fg="active",Wc='[data-bs-toggle="button"]',pg=`click${dg}${hg}`,Ps=class e extends ne{static get NAME(){return cg}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(fg))}static jQueryInterface(t){return this.each(function(){let n=e.getOrCreateInstance(this);t==="toggle"&&n[t]()})}};y.on(document,pg,Wc,e=>{e.preventDefault();let t=e.target.closest(Wc);Ps.getOrCreateInstance(t).toggle()});ve(Ps);var gg="swipe",Ni=".bs.swipe",mg=`touchstart${Ni}`,vg=`touchmove${Ni}`,_g=`touchend${Ni}`,bg=`pointerdown${Ni}`,yg=`pointerup${Ni}`,wg="touch",Eg="pen",Tg="pointer-event",Sg=40,Ag={endCallback:null,leftCallback:null,rightCallback:null},xg={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"},Ds=class e extends Mn{constructor(t,n){super(),this._element=t,!(!t||!e.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Ag}static get DefaultType(){return xg}static get NAME(){return gg}dispose(){y.off(this._element,Ni)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Xt(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){let t=Math.abs(this._deltaX);if(t<=Sg)return;let n=t/this._deltaX;this._deltaX=0,n&&Xt(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(y.on(this._element,bg,t=>this._start(t)),y.on(this._element,yg,t=>this._end(t)),this._element.classList.add(Tg)):(y.on(this._element,mg,t=>this._start(t)),y.on(this._element,vg,t=>this._move(t)),y.on(this._element,_g,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===Eg||t.pointerType===wg)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}},Og="carousel",Cg="bs.carousel",pn=`.${Cg}`,Cu=".data-api",Pg="ArrowLeft",Dg="ArrowRight",Ng=500,nr="next",Ti="prev",Ai="left",As="right",Ig=`slide${pn}`,da=`slid${pn}`,Rg=`keydown${pn}`,Lg=`mouseenter${pn}`,kg=`mouseleave${pn}`,Mg=`dragstart${pn}`,Fg=`load${pn}${Cu}`,Ug=`click${pn}${Cu}`,Pu="carousel",bs="active",$g="slide",Hg="carousel-item-end",jg="carousel-item-start",Bg="carousel-item-next",Vg="carousel-item-prev",Du=".active",Nu=".carousel-item",qg=Du+Nu,Wg=".carousel-item img",zg=".carousel-indicators",Kg="[data-bs-slide], [data-bs-slide-to]",Xg='[data-bs-ride="carousel"]',Yg={[Pg]:As,[Dg]:Ai},Gg={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Jg={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"},rr=class e extends ne{constructor(t,n){super(t,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=R.findOne(zg,this._element),this._addEventListeners(),this._config.ride===Pu&&this.cycle()}static get Default(){return Gg}static get DefaultType(){return Jg}static get NAME(){return Og}next(){this._slide(nr)}nextWhenVisible(){!document.hidden&&Di(this._element)&&this.next()}prev(){this._slide(Ti)}pause(){this._isSliding&&vu(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){y.one(this._element,da,()=>this.cycle());return}this.cycle()}}to(t){let n=this._getItems();if(t>n.length-1||t<0)return;if(this._isSliding){y.one(this._element,da,()=>this.to(t));return}let i=this._getItemIndex(this._getActive());if(i===t)return;let r=t>i?nr:Ti;this._slide(r,n[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&y.on(this._element,Rg,t=>this._keydown(t)),this._config.pause==="hover"&&(y.on(this._element,Lg,()=>this.pause()),y.on(this._element,kg,()=>this._maybeEnableCycle())),this._config.touch&&Ds.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(let i of R.find(Wg,this._element))y.on(i,Mg,r=>r.preventDefault());let n={leftCallback:()=>this._slide(this._directionToOrder(Ai)),rightCallback:()=>this._slide(this._directionToOrder(As)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Ng+this._config.interval))}};this._swipeHelper=new Ds(this._element,n)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;let n=Yg[t.key];n&&(t.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;let n=R.findOne(Du,this._indicatorsElement);n.classList.remove(bs),n.removeAttribute("aria-current");let i=R.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);i&&(i.classList.add(bs),i.setAttribute("aria-current","true"))}_updateInterval(){let t=this._activeElement||this._getActive();if(!t)return;let n=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(t,n=null){if(this._isSliding)return;let i=this._getActive(),r=t===nr,s=n||xa(this._getItems(),i,r,this._config.wrap);if(s===i)return;let o=this._getItemIndex(s),a=f=>y.trigger(this._element,f,{relatedTarget:s,direction:this._orderToDirection(t),from:this._getItemIndex(i),to:o});if(a(Ig).defaultPrevented||!i||!s)return;let c=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=s;let d=r?jg:Hg,u=r?Bg:Vg;s.classList.add(u),ar(s),i.classList.add(d),s.classList.add(d);let h=()=>{s.classList.remove(d,u),s.classList.add(bs),i.classList.remove(bs,u,d),this._isSliding=!1,a(da)};this._queueCallback(h,i,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains($g)}_getActive(){return R.findOne(qg,this._element)}_getItems(){return R.find(Nu,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return ge()?t===Ai?Ti:nr:t===Ai?nr:Ti}_orderToDirection(t){return ge()?t===Ti?Ai:As:t===Ti?As:Ai}static jQueryInterface(t){return this.each(function(){let n=e.getOrCreateInstance(this,t);if(typeof t=="number"){n.to(t);return}if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}};y.on(document,Ug,Kg,function(e){let t=R.getElementFromSelector(this);if(!t||!t.classList.contains(Pu))return;e.preventDefault();let n=rr.getOrCreateInstance(t),i=this.getAttribute("data-bs-slide-to");if(i){n.to(i),n._maybeEnableCycle();return}if(Me.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});y.on(window,Fg,()=>{let e=R.find(Xg);for(let t of e)rr.getOrCreateInstance(t)});ve(rr);var Qg="collapse",Zg="bs.collapse",lr=`.${Zg}`,tm=".data-api",em=`show${lr}`,nm=`shown${lr}`,im=`hide${lr}`,rm=`hidden${lr}`,sm=`click${lr}${tm}`,ha="show",Oi="collapse",ys="collapsing",om="collapsed",am=`:scope .${Oi} .${Oi}`,lm="collapse-horizontal",cm="width",um="height",dm=".collapse.show, .collapse.collapsing",Ta='[data-bs-toggle="collapse"]',hm={parent:null,toggle:!0},fm={parent:"(null|element)",toggle:"boolean"},Ns=class e extends ne{constructor(t,n){super(t,n),this._isTransitioning=!1,this._triggerArray=[];let i=R.find(Ta);for(let r of i){let s=R.getSelectorFromElement(r),o=R.find(s).filter(a=>a===this._element);s!==null&&o.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return hm}static get DefaultType(){return fm}static get NAME(){return Qg}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(dm).filter(a=>a!==this._element).map(a=>e.getOrCreateInstance(a,{toggle:!1}))),t.length&&t[0]._isTransitioning||y.trigger(this._element,em).defaultPrevented)return;for(let a of t)a.hide();let i=this._getDimension();this._element.classList.remove(Oi),this._element.classList.add(ys),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let r=()=>{this._isTransitioning=!1,this._element.classList.remove(ys),this._element.classList.add(Oi,ha),this._element.style[i]="",y.trigger(this._element,nm)},o=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[i]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||y.trigger(this._element,im).defaultPrevented)return;let n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,ar(this._element),this._element.classList.add(ys),this._element.classList.remove(Oi,ha);for(let r of this._triggerArray){let s=R.getElementFromSelector(r);s&&!this._isShown(s)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;let i=()=>{this._isTransitioning=!1,this._element.classList.remove(ys),this._element.classList.add(Oi),y.trigger(this._element,rm)};this._element.style[n]="",this._queueCallback(i,this._element,!0)}_isShown(t=this._element){return t.classList.contains(ha)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=un(t.parent),t}_getDimension(){return this._element.classList.contains(lm)?cm:um}_initializeChildren(){if(!this._config.parent)return;let t=this._getFirstLevelChildren(Ta);for(let n of t){let i=R.getElementFromSelector(n);i&&this._addAriaAndCollapsedClass([n],this._isShown(i))}}_getFirstLevelChildren(t){let n=R.find(am,this._config.parent);return R.find(t,this._config.parent).filter(i=>!n.includes(i))}_addAriaAndCollapsedClass(t,n){if(t.length)for(let i of t)i.classList.toggle(om,!n),i.setAttribute("aria-expanded",n)}static jQueryInterface(t){let n={};return typeof t=="string"&&/show|hide/.test(t)&&(n.toggle=!1),this.each(function(){let i=e.getOrCreateInstance(this,n);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t]()}})}};y.on(document,sm,Ta,function(e){(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A")&&e.preventDefault();for(let t of R.getMultipleElementsFromSelector(this))Ns.getOrCreateInstance(t,{toggle:!1}).toggle()});ve(Ns);var zc="dropdown",pm="bs.dropdown",Fn=`.${pm}`,Ca=".data-api",gm="Escape",Kc="Tab",mm="ArrowUp",Xc="ArrowDown",vm=2,_m=`hide${Fn}`,bm=`hidden${Fn}`,ym=`show${Fn}`,wm=`shown${Fn}`,Iu=`click${Fn}${Ca}`,Ru=`keydown${Fn}${Ca}`,Em=`keyup${Fn}${Ca}`,xi="show",Tm="dropup",Sm="dropend",Am="dropstart",xm="dropup-center",Om="dropdown-center",Ln='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Cm=`${Ln}.${xi}`,xs=".dropdown-menu",Pm=".navbar",Dm=".navbar-nav",Nm=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Im=ge()?"top-end":"top-start",Rm=ge()?"top-start":"top-end",Lm=ge()?"bottom-end":"bottom-start",km=ge()?"bottom-start":"bottom-end",Mm=ge()?"left-start":"right-start",Fm=ge()?"right-start":"left-start",Um="top",$m="bottom",Hm={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},jm={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"},hn=class e extends ne{constructor(t,n){super(t,n),this._popper=null,this._parent=this._element.parentNode,this._menu=R.next(this._element,xs)[0]||R.prev(this._element,xs)[0]||R.findOne(xs,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Hm}static get DefaultType(){return jm}static get NAME(){return zc}toggle(){return this._isShown()?this.hide():this.show()}show(){if(dn(this._element)||this._isShown())return;let t={relatedTarget:this._element};if(!y.trigger(this._element,ym,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Dm))for(let i of[].concat(...document.body.children))y.on(i,"mouseover",Os);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(xi),this._element.classList.add(xi),y.trigger(this._element,wm,t)}}hide(){if(dn(this._element)||!this._isShown())return;let t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!y.trigger(this._element,_m,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(let i of[].concat(...document.body.children))y.off(i,"mouseover",Os);this._popper&&this._popper.destroy(),this._menu.classList.remove(xi),this._element.classList.remove(xi),this._element.setAttribute("aria-expanded","false"),Me.removeDataAttribute(this._menu,"popper"),y.trigger(this._element,bm,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!ke(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${zc.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof _s>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let t=this._element;this._config.reference==="parent"?t=this._parent:ke(this._config.reference)?t=un(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);let n=this._getPopperConfig();this._popper=er(t,this._menu,n)}_isShown(){return this._menu.classList.contains(xi)}_getPlacement(){let t=this._parent;if(t.classList.contains(Sm))return Mm;if(t.classList.contains(Am))return Fm;if(t.classList.contains(xm))return Um;if(t.classList.contains(Om))return $m;let n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(Tm)?n?Rm:Im:n?km:Lm}_detectNavbar(){return this._element.closest(Pm)!==null}_getOffset(){let{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_getPopperConfig(){let t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Me.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Xt(this._config.popperConfig,[void 0,t])}}_selectMenuItem({key:t,target:n}){let i=R.find(Nm,this._menu).filter(r=>Di(r));i.length&&xa(i,n,t===Xc,!i.includes(n)).focus()}static jQueryInterface(t){return this.each(function(){let n=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}static clearMenus(t){if(t.button===vm||t.type==="keyup"&&t.key!==Kc)return;let n=R.find(Cm);for(let i of n){let r=e.getInstance(i);if(!r||r._config.autoClose===!1)continue;let s=t.composedPath(),o=s.includes(r._menu);if(s.includes(r._element)||r._config.autoClose==="inside"&&!o||r._config.autoClose==="outside"&&o||r._menu.contains(t.target)&&(t.type==="keyup"&&t.key===Kc||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;let a={relatedTarget:r._element};t.type==="click"&&(a.clickEvent=t),r._completeHide(a)}}static dataApiKeydownHandler(t){let n=/input|textarea/i.test(t.target.tagName),i=t.key===gm,r=[mm,Xc].includes(t.key);if(!r&&!i||n&&!i)return;t.preventDefault();let s=this.matches(Ln)?this:R.prev(this,Ln)[0]||R.next(this,Ln)[0]||R.findOne(Ln,t.delegateTarget.parentNode),o=e.getOrCreateInstance(s);if(r){t.stopPropagation(),o.show(),o._selectMenuItem(t);return}o._isShown()&&(t.stopPropagation(),o.hide(),s.focus())}};y.on(document,Ru,Ln,hn.dataApiKeydownHandler);y.on(document,Ru,xs,hn.dataApiKeydownHandler);y.on(document,Iu,hn.clearMenus);y.on(document,Em,hn.clearMenus);y.on(document,Iu,Ln,function(e){e.preventDefault(),hn.getOrCreateInstance(this).toggle()});ve(hn);var Lu="backdrop",Bm="fade",Yc="show",Gc=`mousedown.bs.${Lu}`,Vm={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},qm={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"},Is=class extends Mn{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Vm}static get DefaultType(){return qm}static get NAME(){return Lu}show(t){if(!this._config.isVisible){Xt(t);return}this._append();let n=this._getElement();this._config.isAnimated&&ar(n),n.classList.add(Yc),this._emulateAnimation(()=>{Xt(t)})}hide(t){if(!this._config.isVisible){Xt(t);return}this._getElement().classList.remove(Yc),this._emulateAnimation(()=>{this.dispose(),Xt(t)})}dispose(){this._isAppended&&(y.off(this._element,Gc),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(Bm),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=un(t.rootElement),t}_append(){if(this._isAppended)return;let t=this._getElement();this._config.rootElement.append(t),y.on(t,Gc,()=>{Xt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){yu(t,this._getElement(),this._config.isAnimated)}},Wm="focustrap",zm="bs.focustrap",Rs=`.${zm}`,Km=`focusin${Rs}`,Xm=`keydown.tab${Rs}`,Ym="Tab",Gm="forward",Jc="backward",Jm={autofocus:!0,trapElement:null},Qm={autofocus:"boolean",trapElement:"element"},Ls=class extends Mn{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Jm}static get DefaultType(){return Qm}static get NAME(){return Wm}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),y.off(document,Rs),y.on(document,Km,t=>this._handleFocusin(t)),y.on(document,Xm,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,y.off(document,Rs))}_handleFocusin(t){let{trapElement:n}=this._config;if(t.target===document||t.target===n||n.contains(t.target))return;let i=R.focusableChildren(n);i.length===0?n.focus():this._lastTabNavDirection===Jc?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){t.key===Ym&&(this._lastTabNavDirection=t.shiftKey?Jc:Gm)}},Qc=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Zc=".sticky-top",ws="padding-right",tu="margin-right",sr=class{constructor(){this._element=document.body}getWidth(){let t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){let t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ws,n=>n+t),this._setElementAttributes(Qc,ws,n=>n+t),this._setElementAttributes(Zc,tu,n=>n-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ws),this._resetElementAttributes(Qc,ws),this._resetElementAttributes(Zc,tu)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,n,i){let r=this.getWidth(),s=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+r)return;this._saveInitialAttribute(o,n);let a=window.getComputedStyle(o).getPropertyValue(n);o.style.setProperty(n,`${i(Number.parseFloat(a))}px`)};this._applyManipulationCallback(t,s)}_saveInitialAttribute(t,n){let i=t.style.getPropertyValue(n);i&&Me.setDataAttribute(t,n,i)}_resetElementAttributes(t,n){let i=r=>{let s=Me.getDataAttribute(r,n);if(s===null){r.style.removeProperty(n);return}Me.removeDataAttribute(r,n),r.style.setProperty(n,s)};this._applyManipulationCallback(t,i)}_applyManipulationCallback(t,n){if(ke(t)){n(t);return}for(let i of R.find(t,this._element))n(i)}},Zm="modal",tv="bs.modal",me=`.${tv}`,ev=".data-api",nv="Escape",iv=`hide${me}`,rv=`hidePrevented${me}`,ku=`hidden${me}`,Mu=`show${me}`,sv=`shown${me}`,ov=`resize${me}`,av=`click.dismiss${me}`,lv=`mousedown.dismiss${me}`,cv=`keydown.dismiss${me}`,uv=`click${me}${ev}`,eu="modal-open",dv="fade",nu="show",fa="modal-static",hv=".modal.show",fv=".modal-dialog",pv=".modal-body",gv='[data-bs-toggle="modal"]',mv={backdrop:!0,focus:!0,keyboard:!0},vv={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"},Ci=class e extends ne{constructor(t,n){super(t,n),this._dialog=R.findOne(fv,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new sr,this._addEventListeners()}static get Default(){return mv}static get DefaultType(){return vv}static get NAME(){return Zm}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||y.trigger(this._element,Mu,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(eu),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||y.trigger(this._element,iv).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(nu),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){y.off(window,me),y.off(this._dialog,me),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Is({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ls({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;let n=R.findOne(pv,this._dialog);n&&(n.scrollTop=0),ar(this._element),this._element.classList.add(nu);let i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,y.trigger(this._element,sv,{relatedTarget:t})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){y.on(this._element,cv,t=>{if(t.key===nv){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),y.on(window,ov,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),y.on(this._element,lv,t=>{y.one(this._element,av,n=>{if(!(this._element!==t.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(eu),this._resetAdjustments(),this._scrollBar.reset(),y.trigger(this._element,ku)})}_isAnimated(){return this._element.classList.contains(dv)}_triggerBackdropTransition(){if(y.trigger(this._element,rv).defaultPrevented)return;let n=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(fa)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(fa),this._queueCallback(()=>{this._element.classList.remove(fa),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let t=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),i=n>0;if(i&&!t){let r=ge()?"paddingLeft":"paddingRight";this._element.style[r]=`${n}px`}if(!i&&t){let r=ge()?"paddingRight":"paddingLeft";this._element.style[r]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,n){return this.each(function(){let i=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof i[t]>"u")throw new TypeError(`No method named "${t}"`);i[t](n)}})}};y.on(document,uv,gv,function(e){let t=R.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),y.one(t,Mu,r=>{r.defaultPrevented||y.one(t,ku,()=>{Di(this)&&this.focus()})});let n=R.findOne(hv);n&&Ci.getInstance(n).hide(),Ci.getOrCreateInstance(t).toggle(this)});Fs(Ci);ve(Ci);var _v="offcanvas",bv="bs.offcanvas",Fe=`.${bv}`,Fu=".data-api",yv=`load${Fe}${Fu}`,wv="Escape",iu="show",ru="showing",su="hiding",Ev="offcanvas-backdrop",Uu=".offcanvas.show",Tv=`show${Fe}`,Sv=`shown${Fe}`,Av=`hide${Fe}`,ou=`hidePrevented${Fe}`,$u=`hidden${Fe}`,xv=`resize${Fe}`,Ov=`click${Fe}${Fu}`,Cv=`keydown.dismiss${Fe}`,Pv='[data-bs-toggle="offcanvas"]',Dv={backdrop:!0,keyboard:!0,scroll:!1},Nv={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"},fn=class e extends ne{constructor(t,n){super(t,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Dv}static get DefaultType(){return Nv}static get NAME(){return _v}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||y.trigger(this._element,Tv,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new sr().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(ru);let i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(iu),this._element.classList.remove(ru),y.trigger(this._element,Sv,{relatedTarget:t})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||y.trigger(this._element,Av).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(su),this._backdrop.hide();let n=()=>{this._element.classList.remove(iu,su),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new sr().reset(),y.trigger(this._element,$u)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){let t=()=>{if(this._config.backdrop==="static"){y.trigger(this._element,ou);return}this.hide()},n=!!this._config.backdrop;return new Is({className:Ev,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?t:null})}_initializeFocusTrap(){return new Ls({trapElement:this._element})}_addEventListeners(){y.on(this._element,Cv,t=>{if(t.key===wv){if(this._config.keyboard){this.hide();return}y.trigger(this._element,ou)}})}static jQueryInterface(t){return this.each(function(){let n=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}};y.on(document,Ov,Pv,function(e){let t=R.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),dn(this))return;y.one(t,$u,()=>{Di(this)&&this.focus()});let n=R.findOne(Uu);n&&n!==t&&fn.getInstance(n).hide(),fn.getOrCreateInstance(t).toggle(this)});y.on(window,yv,()=>{for(let e of R.find(Uu))fn.getOrCreateInstance(e).show()});y.on(window,xv,()=>{for(let e of R.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(e).position!=="fixed"&&fn.getOrCreateInstance(e).hide()});Fs(fn);ve(fn);var Iv=/^aria-[\w-]*$/i,Hu={"*":["class","dir","id","lang","role",Iv],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Rv=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Lv=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,kv=(e,t)=>{let n=e.nodeName.toLowerCase();return t.includes(n)?Rv.has(n)?!!Lv.test(e.nodeValue):!0:t.filter(i=>i instanceof RegExp).some(i=>i.test(n))};function Mv(e,t,n){if(!e.length)return e;if(n&&typeof n=="function")return n(e);let r=new window.DOMParser().parseFromString(e,"text/html"),s=[].concat(...r.body.querySelectorAll("*"));for(let o of s){let a=o.nodeName.toLowerCase();if(!Object.keys(t).includes(a)){o.remove();continue}let l=[].concat(...o.attributes),c=[].concat(t["*"]||[],t[a]||[]);for(let d of l)kv(d,c)||o.removeAttribute(d.nodeName)}return r.body.innerHTML}var Fv="TemplateFactory",Uv={allowList:Hu,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},$v={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Hv={entry:"(string|element|function|null)",selector:"(string|element)"},Sa=class extends Mn{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Uv}static get DefaultType(){return $v}static get NAME(){return Fv}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){let t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(let[r,s]of Object.entries(this._config.content))this._setContent(t,s,r);let n=t.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&n.classList.add(...i.split(" ")),n}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(let[n,i]of Object.entries(t))super._typeCheckConfig({selector:n,entry:i},Hv)}_setContent(t,n,i){let r=R.findOne(i,t);if(r){if(n=this._resolvePossibleFunction(n),!n){r.remove();return}if(ke(n)){this._putElementInTemplate(un(n),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(n);return}r.textContent=n}}_maybeSanitize(t){return this._config.sanitize?Mv(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Xt(t,[void 0,this])}_putElementInTemplate(t,n){if(this._config.html){n.innerHTML="",n.append(t);return}n.textContent=t.textContent}},jv="tooltip",Bv=new Set(["sanitize","allowList","sanitizeFn"]),pa="fade",Vv="modal",Es="show",qv=".tooltip-inner",au=`.${Vv}`,lu="hide.bs.modal",ir="hover",ga="focus",Wv="click",zv="manual",Kv="hide",Xv="hidden",Yv="show",Gv="shown",Jv="inserted",Qv="click",Zv="focusin",t_="focusout",e_="mouseenter",n_="mouseleave",i_={AUTO:"auto",TOP:"top",RIGHT:ge()?"left":"right",BOTTOM:"bottom",LEFT:ge()?"right":"left"},r_={allowList:Hu,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},s_={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"},Pi=class e extends ne{constructor(t,n){if(typeof _s>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(t,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return r_}static get DefaultType(){return s_}static get NAME(){return jv}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),y.off(this._element.closest(au),lu,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;let t=y.trigger(this._element,this.constructor.eventName(Yv)),i=(_u(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!i)return;this._disposePopper();let r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));let{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(r),y.trigger(this._element,this.constructor.eventName(Jv))),this._popper=this._createPopper(r),r.classList.add(Es),"ontouchstart"in document.documentElement)for(let a of[].concat(...document.body.children))y.on(a,"mouseover",Os);let o=()=>{y.trigger(this._element,this.constructor.eventName(Gv)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||y.trigger(this._element,this.constructor.eventName(Kv)).defaultPrevented)return;if(this._getTipElement().classList.remove(Es),"ontouchstart"in document.documentElement)for(let r of[].concat(...document.body.children))y.off(r,"mouseover",Os);this._activeTrigger[Wv]=!1,this._activeTrigger[ga]=!1,this._activeTrigger[ir]=!1,this._isHovered=null;let i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),y.trigger(this._element,this.constructor.eventName(Xv)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){let n=this._getTemplateFactory(t).toHtml();if(!n)return null;n.classList.remove(pa,Es),n.classList.add(`bs-${this.constructor.NAME}-auto`);let i=zp(this.constructor.NAME).toString();return n.setAttribute("id",i),this._isAnimated()&&n.classList.add(pa),n}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Sa({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[qv]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(pa)}_isShown(){return this.tip&&this.tip.classList.contains(Es)}_createPopper(t){let n=Xt(this._config.placement,[this,t,this._element]),i=i_[n.toUpperCase()];return er(this._element,t,this._getPopperConfig(i))}_getOffset(){let{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_resolvePossibleFunction(t){return Xt(t,[this._element,this._element])}_getPopperConfig(t){let n={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...n,...Xt(this._config.popperConfig,[void 0,n])}}_setListeners(){let t=this._config.trigger.split(" ");for(let n of t)if(n==="click")y.on(this._element,this.constructor.eventName(Qv),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if(n!==zv){let i=n===ir?this.constructor.eventName(e_):this.constructor.eventName(Zv),r=n===ir?this.constructor.eventName(n_):this.constructor.eventName(t_);y.on(this._element,i,this._config.selector,s=>{let o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusin"?ga:ir]=!0,o._enter()}),y.on(this._element,r,this._config.selector,s=>{let o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusout"?ga:ir]=o._element.contains(s.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},y.on(this._element.closest(au),lu,this._hideModalHandler)}_fixTitle(){let t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,n){clearTimeout(this._timeout),this._timeout=setTimeout(t,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){let n=Me.getDataAttributes(this._element);for(let i of Object.keys(n))Bv.has(i)&&delete n[i];return t={...n,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:un(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){let t={};for(let[n,i]of Object.entries(this._config))this.constructor.Default[n]!==i&&(t[n]=i);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){let n=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}};ve(Pi);var o_="popover",a_=".popover-header",l_=".popover-body",c_={...Pi.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},u_={...Pi.DefaultType,content:"(null|string|element|function)"},Aa=class e extends Pi{static get Default(){return c_}static get DefaultType(){return u_}static get NAME(){return o_}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[a_]:this._getTitle(),[l_]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){let n=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}};ve(Aa);var d_="scrollspy",h_="bs.scrollspy",Pa=`.${h_}`,f_=".data-api",p_=`activate${Pa}`,cu=`click${Pa}`,g_=`load${Pa}${f_}`,m_="dropdown-item",Si="active",v_='[data-bs-spy="scroll"]',ma="[href]",__=".nav, .list-group",uu=".nav-link",b_=".nav-item",y_=".list-group-item",w_=`${uu}, ${b_} > ${uu}, ${y_}`,E_=".dropdown",T_=".dropdown-toggle",S_={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},A_={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"},ks=class e extends ne{constructor(t,n){super(t,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return S_}static get DefaultType(){return A_}static get NAME(){return d_}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(let t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=un(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(n=>Number.parseFloat(n))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(y.off(this._config.target,cu),y.on(this._config.target,cu,ma,t=>{let n=this._observableSections.get(t.target.hash);if(n){t.preventDefault();let i=this._rootElement||window,r=n.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:r,behavior:"smooth"});return}i.scrollTop=r}}))}_getNewObserver(){let t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),t)}_observerCallback(t){let n=o=>this._targetLinks.get(`#${o.target.id}`),i=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(n(o))},r=(this._rootElement||document.documentElement).scrollTop,s=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(let o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(o));continue}let a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&a){if(i(o),!r)return;continue}!s&&!a&&i(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;let t=R.find(ma,this._config.target);for(let n of t){if(!n.hash||dn(n))continue;let i=R.findOne(decodeURI(n.hash),this._element);Di(i)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,i))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Si),this._activateParents(t),y.trigger(this._element,p_,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(m_)){R.findOne(T_,t.closest(E_)).classList.add(Si);return}for(let n of R.parents(t,__))for(let i of R.prev(n,w_))i.classList.add(Si)}_clearActiveClass(t){t.classList.remove(Si);let n=R.find(`${ma}.${Si}`,t);for(let i of n)i.classList.remove(Si)}static jQueryInterface(t){return this.each(function(){let n=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}};y.on(window,g_,()=>{for(let e of R.find(v_))ks.getOrCreateInstance(e)});ve(ks);var x_="tab",O_="bs.tab",Un=`.${O_}`,C_=`hide${Un}`,P_=`hidden${Un}`,D_=`show${Un}`,N_=`shown${Un}`,I_=`click${Un}`,R_=`keydown${Un}`,L_=`load${Un}`,k_="ArrowLeft",du="ArrowRight",M_="ArrowUp",hu="ArrowDown",va="Home",fu="End",kn="active",pu="fade",_a="show",F_="dropdown",ju=".dropdown-toggle",U_=".dropdown-menu",ba=`:not(${ju})`,$_='.list-group, .nav, [role="tablist"]',H_=".nav-item, .list-group-item",j_=`.nav-link${ba}, .list-group-item${ba}, [role="tab"]${ba}`,Bu='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ya=`${j_}, ${Bu}`,B_=`.${kn}[data-bs-toggle="tab"], .${kn}[data-bs-toggle="pill"], .${kn}[data-bs-toggle="list"]`,or=class e extends ne{constructor(t){super(t),this._parent=this._element.closest($_),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),y.on(this._element,R_,n=>this._keydown(n)))}static get NAME(){return x_}show(){let t=this._element;if(this._elemIsActive(t))return;let n=this._getActiveElem(),i=n?y.trigger(n,C_,{relatedTarget:t}):null;y.trigger(t,D_,{relatedTarget:n}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(n,t),this._activate(t,n))}_activate(t,n){if(!t)return;t.classList.add(kn),this._activate(R.getElementFromSelector(t));let i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(_a);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),y.trigger(t,N_,{relatedTarget:n})};this._queueCallback(i,t,t.classList.contains(pu))}_deactivate(t,n){if(!t)return;t.classList.remove(kn),t.blur(),this._deactivate(R.getElementFromSelector(t));let i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(_a);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),y.trigger(t,P_,{relatedTarget:n})};this._queueCallback(i,t,t.classList.contains(pu))}_keydown(t){if(![k_,du,M_,hu,va,fu].includes(t.key))return;t.stopPropagation(),t.preventDefault();let n=this._getChildren().filter(r=>!dn(r)),i;if([va,fu].includes(t.key))i=n[t.key===va?0:n.length-1];else{let r=[du,hu].includes(t.key);i=xa(n,t.target,r,!0)}i&&(i.focus({preventScroll:!0}),e.getOrCreateInstance(i).show())}_getChildren(){return R.find(ya,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,n){this._setAttributeIfNotExists(t,"role","tablist");for(let i of n)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);let n=this._elemIsActive(t),i=this._getOuterElement(t);t.setAttribute("aria-selected",n),i!==t&&this._setAttributeIfNotExists(i,"role","presentation"),n||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){let n=R.getElementFromSelector(t);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,n){let i=this._getOuterElement(t);if(!i.classList.contains(F_))return;let r=(s,o)=>{let a=R.findOne(s,i);a&&a.classList.toggle(o,n)};r(ju,kn),r(U_,_a),i.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(t,n,i){t.hasAttribute(n)||t.setAttribute(n,i)}_elemIsActive(t){return t.classList.contains(kn)}_getInnerElement(t){return t.matches(ya)?t:R.findOne(ya,t)}_getOuterElement(t){return t.closest(H_)||t}static jQueryInterface(t){return this.each(function(){let n=e.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}};y.on(document,I_,Bu,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),!dn(this)&&or.getOrCreateInstance(this).show()});y.on(window,L_,()=>{for(let e of R.find(B_))or.getOrCreateInstance(e)});ve(or);var V_="toast",q_="bs.toast",gn=`.${q_}`,W_=`mouseover${gn}`,z_=`mouseout${gn}`,K_=`focusin${gn}`,X_=`focusout${gn}`,Y_=`hide${gn}`,G_=`hidden${gn}`,J_=`show${gn}`,Q_=`shown${gn}`,Z_="fade",gu="hide",Ts="show",Ss="showing",tb={animation:"boolean",autohide:"boolean",delay:"number"},eb={animation:!0,autohide:!0,delay:5e3},Ms=class e extends ne{constructor(t,n){super(t,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return eb}static get DefaultType(){return tb}static get NAME(){return V_}show(){if(y.trigger(this._element,J_).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Z_);let n=()=>{this._element.classList.remove(Ss),y.trigger(this._element,Q_),this._maybeScheduleHide()};this._element.classList.remove(gu),ar(this._element),this._element.classList.add(Ts,Ss),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||y.trigger(this._element,Y_).defaultPrevented)return;let n=()=>{this._element.classList.add(gu),this._element.classList.remove(Ss,Ts),y.trigger(this._element,G_)};this._element.classList.add(Ss),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ts),super.dispose()}isShown(){return this._element.classList.contains(Ts)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,n){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}let i=t.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){y.on(this._element,W_,t=>this._onInteraction(t,!0)),y.on(this._element,z_,t=>this._onInteraction(t,!1)),y.on(this._element,K_,t=>this._onInteraction(t,!0)),y.on(this._element,X_,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){let n=e.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](this)}})}};Fs(Ms);ve(Ms);function Mt(e,t,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(i.next(d))}catch(u){o(u)}}function l(d){try{c(i.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((i=i.apply(e,t||[])).next())})}function nb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ua={exports:{}},Ii=typeof Reflect=="object"?Reflect:null,Vu=Ii&&typeof Ii.apply=="function"?Ii.apply:function(t,n,i){return Function.prototype.apply.call(t,n,i)},Us;Ii&&typeof Ii.ownKeys=="function"?Us=Ii.ownKeys:Object.getOwnPropertySymbols?Us=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Us=function(t){return Object.getOwnPropertyNames(t)};function ib(e){console&&console.warn&&console.warn(e)}var Wu=Number.isNaN||function(t){return t!==t};function X(){X.init.call(this)}Ua.exports=X;Ua.exports.once=ab;X.EventEmitter=X;X.prototype._events=void 0;X.prototype._eventsCount=0;X.prototype._maxListeners=void 0;var qu=10;function Ws(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(X,"defaultMaxListeners",{enumerable:!0,get:function(){return qu},set:function(e){if(typeof e!="number"||e<0||Wu(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");qu=e}});X.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};X.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Wu(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function zu(e){return e._maxListeners===void 0?X.defaultMaxListeners:e._maxListeners}X.prototype.getMaxListeners=function(){return zu(this)};X.prototype.emit=function(t){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=t==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[t];if(l===void 0)return!1;if(typeof l=="function")Vu(l,this,n);else for(var c=l.length,d=Ju(l,c),i=0;i<c;++i)Vu(d[i],this,n);return!0};function Ku(e,t,n,i){var r,s,o;if(Ws(n),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),o===void 0)o=s[t]=n,++e._eventsCount;else if(typeof o=="function"?o=s[t]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=zu(e),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,ib(a)}return e}X.prototype.addListener=function(t,n){return Ku(this,t,n,!1)};X.prototype.on=X.prototype.addListener;X.prototype.prependListener=function(t,n){return Ku(this,t,n,!0)};function rb(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Xu(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=rb.bind(i);return r.listener=n,i.wrapFn=r,r}X.prototype.once=function(t,n){return Ws(n),this.on(t,Xu(this,t,n)),this};X.prototype.prependOnceListener=function(t,n){return Ws(n),this.prependListener(t,Xu(this,t,n)),this};X.prototype.removeListener=function(t,n){var i,r,s,o,a;if(Ws(n),r=this._events,r===void 0)return this;if(i=r[t],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():sb(i,s),i.length===1&&(r[t]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",t,a||n)}return this};X.prototype.off=X.prototype.removeListener;X.prototype.removeAllListeners=function(t){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(t,n[r]);return this};function Yu(e,t,n){var i=e._events;if(i===void 0)return[];var r=i[t];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?ob(r):Ju(r,r.length)}X.prototype.listeners=function(t){return Yu(this,t,!0)};X.prototype.rawListeners=function(t){return Yu(this,t,!1)};X.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Gu.call(e,t)};X.prototype.listenerCount=Gu;function Gu(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}X.prototype.eventNames=function(){return this._eventsCount>0?Us(this._events):[]};function Ju(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function sb(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function ob(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function ab(e,t){return new Promise(function(n,i){function r(o){e.removeListener(t,s),i(o)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",r),n([].slice.call(arguments))}Qu(e,t,s,{once:!0}),t!=="error"&&lb(e,r,{once:!0})})}function lb(e,t,n){typeof e.on=="function"&&Qu(e,"error",t,n)}function Qu(e,t,n,i){if(typeof e.on=="function")i.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function r(s){i.once&&e.removeEventListener(t,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var cb=Ua.exports,Zu=nb(cb),Q;(function(e){e[e.timeout=1]="timeout",e[e.transportClosed=2]="transportClosed",e[e.clientDisconnected=3]="clientDisconnected",e[e.clientClosed=4]="clientClosed",e[e.clientConnectToken=5]="clientConnectToken",e[e.clientRefreshToken=6]="clientRefreshToken",e[e.subscriptionUnsubscribed=7]="subscriptionUnsubscribed",e[e.subscriptionSubscribeToken=8]="subscriptionSubscribeToken",e[e.subscriptionRefreshToken=9]="subscriptionRefreshToken",e[e.transportWriteError=10]="transportWriteError",e[e.connectionClosed=11]="connectionClosed",e[e.badConfiguration=12]="badConfiguration"})(Q||(Q={}));var mn;(function(e){e[e.connectCalled=0]="connectCalled",e[e.transportClosed=1]="transportClosed",e[e.noPing=2]="noPing",e[e.subscribeTimeout=3]="subscribeTimeout",e[e.unsubscribeError=4]="unsubscribeError"})(mn||(mn={}));var cr;(function(e){e[e.disconnectCalled=0]="disconnectCalled",e[e.unauthorized=1]="unauthorized",e[e.badProtocol=2]="badProtocol",e[e.messageSizeLimit=3]="messageSizeLimit"})(cr||(cr={}));var $s;(function(e){e[e.subscribeCalled=0]="subscribeCalled",e[e.transportClosed=1]="transportClosed"})($s||($s={}));var Hs;(function(e){e[e.unsubscribeCalled=0]="unsubscribeCalled",e[e.unauthorized=1]="unauthorized",e[e.clientClosed=2]="clientClosed"})(Hs||(Hs={}));var Da;(function(e){e[e.channelCompaction=1]="channelCompaction"})(Da||(Da={}));var gt;(function(e){e.Disconnected="disconnected",e.Connecting="connecting",e.Connected="connected"})(gt||(gt={}));var Ht;(function(e){e.Unsubscribed="unsubscribed",e.Subscribing="subscribing",e.Subscribed="subscribed"})(Ht||(Ht={}));function ub(e,t){return e.lastIndexOf(t,0)===0}function td(e){return e==null?!1:typeof e=="function"}function db(e,t){if(globalThis.console){let n=globalThis.console[e];td(n)&&n.apply(globalThis.console,t)}}function hb(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function js(e,t,n){e>31&&(e=31);let i=hb(0,Math.min(n,t*Math.pow(2,e)));return Math.min(n,t+i)}function fb(e){return"error"in e&&e.error!==null}function Bs(e){return Math.min(e*1e3,2147483647)}var Na=class extends Zu{constructor(t,n,i){super(),this._resubscribeTimeout=null,this._refreshTimeout=null,this.channel=n,this.state=Ht.Unsubscribed,this._centrifuge=t,this._token="",this._getToken=null,this._data=null,this._getData=null,this._recover=!1,this._offset=null,this._epoch=null,this._id=0,this._recoverable=!1,this._positioned=!1,this._joinLeave=!1,this._minResubscribeDelay=500,this._maxResubscribeDelay=2e4,this._resubscribeTimeout=null,this._resubscribeAttempts=0,this._promises={},this._promiseId=0,this._inflight=!1,this._refreshTimeout=null,this._delta="",this._delta_negotiated=!1,this._tagsFilter=null,this._prevValue=null,this._unsubPromise=Promise.resolve(),this._setOptions(i),this._centrifuge._debugEnabled?(this.on("state",r=>{this._debug("subscription state",n,r.oldState,"->",r.newState)}),this.on("error",r=>{this._debug("subscription error",n,r)})):this.on("error",function(){Function.prototype()})}ready(t){return this.state===Ht.Unsubscribed?Promise.reject({code:Q.subscriptionUnsubscribed,message:this.state}):this.state===Ht.Subscribed?Promise.resolve():new Promise((n,i)=>{let r={resolve:n,reject:i};t&&(r.timeout=setTimeout(function(){i({code:Q.timeout,message:"timeout"})},t)),this._promises[this._nextPromiseId()]=r})}subscribe(){this._isSubscribed()||(this._resubscribeAttempts=0,this._setSubscribing($s.subscribeCalled,"subscribe called"))}unsubscribe(){this._unsubPromise=this._setUnsubscribed(Hs.unsubscribeCalled,"unsubscribe called",!0)}publish(t){return Mt(this,void 0,void 0,function*(){return yield this._methodCall(),this._centrifuge.publish(this.channel,t)})}presence(){return Mt(this,void 0,void 0,function*(){return yield this._methodCall(),this._centrifuge.presence(this.channel)})}presenceStats(){return Mt(this,void 0,void 0,function*(){return yield this._methodCall(),this._centrifuge.presenceStats(this.channel)})}history(t){return Mt(this,void 0,void 0,function*(){return yield this._methodCall(),this._centrifuge.history(this.channel,t)})}setTagsFilter(t){if(t&&this._delta)throw new Error("cannot use delta and tagsFilter together");this._tagsFilter=t}setData(t){this._data=t}_methodCall(){return this._isSubscribed()?Promise.resolve():this._isUnsubscribed()?Promise.reject({code:Q.subscriptionUnsubscribed,message:this.state}):new Promise((t,n)=>{let i=this._centrifuge._config.timeout,r=setTimeout(()=>{n({code:Q.timeout,message:"timeout"})},i);this._promises[this._nextPromiseId()]={timeout:r,resolve:t,reject:n}})}_nextPromiseId(){return++this._promiseId}_needRecover(){return this._recover===!0}_isUnsubscribed(){return this.state===Ht.Unsubscribed}_isSubscribing(){return this.state===Ht.Subscribing}_isSubscribed(){return this.state===Ht.Subscribed}_setState(t){if(this.state!==t){let n=this.state;return this.state=t,this.emit("state",{newState:t,oldState:n,channel:this.channel}),!0}return!1}_usesToken(){return this._token!==""||this._getToken!==null}_clearSubscribingState(){this._resubscribeAttempts=0,this._clearResubscribeTimeout()}_clearSubscribedState(){this._clearRefreshTimeout()}_setSubscribed(t){if(!this._isSubscribing())return;this._clearSubscribingState(),t.id&&(this._id=t.id),t.recoverable&&(this._recover=!0,this._offset=t.offset||0,this._epoch=t.epoch||""),t.delta?this._delta_negotiated=!0:this._delta_negotiated=!1,this._setState(Ht.Subscribed);let n=this._centrifuge._getSubscribeContext(this.channel,t);this.emit("subscribed",n),this._resolvePromises();let i=t.publications;if(i&&i.length>0)for(let r in i)i.hasOwnProperty(r)&&this._handlePublication(i[r]);t.expires===!0&&(this._refreshTimeout=setTimeout(()=>this._refresh(),Bs(t.ttl)))}_setSubscribing(t,n){return Mt(this,void 0,void 0,function*(){this._isSubscribing()||(this._isSubscribed()&&this._clearSubscribedState(),this._setState(Ht.Subscribing)&&this.emit("subscribing",{channel:this.channel,code:t,reason:n}),this._centrifuge._transport&&this._centrifuge._transport.emulation()&&(yield this._unsubPromise),this._isSubscribing()&&this._subscribe())})}_subscribe(){return this._debug("subscribing on",this.channel),this._isTransportOpen()?this._inflight?null:(this._inflight=!0,this._canSubscribeWithoutGettingToken()?this._subscribeWithoutToken():(this._getSubscriptionToken().then(t=>this._handleTokenResponse(t)).catch(t=>this._handleTokenError(t)),null)):(this._debug("delay subscribe on",this.channel,"till connected"),null)}_isTransportOpen(){return this._centrifuge._transportIsOpen}_canSubscribeWithoutGettingToken(){return!this._usesToken()||!!this._token}_subscribeWithoutToken(){return this._getData?(this._getDataAndSubscribe(this._token),null):this._sendSubscribe(this._token)}_getDataAndSubscribe(t){if(!this._getData){this._inflight=!1;return}this._getData({channel:this.channel}).then(n=>{if(!this._isSubscribing()){this._inflight=!1;return}this._data=n,this._sendSubscribe(t)}).catch(n=>this._handleGetDataError(n))}_handleGetDataError(t){if(!this._isSubscribing()){this._inflight=!1;return}if(t instanceof Se){this._inflight=!1,this._failUnauthorized();return}this.emit("error",{type:"subscribeData",channel:this.channel,error:{code:Q.badConfiguration,message:t?.toString()||""}}),this._inflight=!1,this._scheduleResubscribe()}_handleTokenResponse(t){if(!this._isSubscribing()){this._inflight=!1;return}if(!t){this._inflight=!1,this._failUnauthorized();return}this._token=t,this._getData?this._getDataAndSubscribe(t):this._sendSubscribe(t)}_handleTokenError(t){if(!this._isSubscribing()){this._inflight=!1;return}if(t instanceof Se){this._inflight=!1,this._failUnauthorized();return}this.emit("error",{type:"subscribeToken",channel:this.channel,error:{code:Q.subscriptionSubscribeToken,message:t?.toString()||""}}),this._inflight=!1,this._scheduleResubscribe()}_sendSubscribe(t){if(!this._isTransportOpen())return this._inflight=!1,null;let n=this._buildSubscribeCommand(t);return this._centrifuge._call(n).then(i=>{this._inflight=!1;let r=i.reply.subscribe;this._handleSubscribeResponse(r),i.next&&i.next()},i=>{this._inflight=!1,this._handleSubscribeError(i.error),i.next&&i.next()}),n}_buildSubscribeCommand(t){let n={channel:this.channel};if(t&&(n.token=t),this._data&&(n.data=this._data),this._positioned&&(n.positioned=!0),this._recoverable&&(n.recoverable=!0),this._joinLeave&&(n.join_leave=!0),n.flag=Da.channelCompaction,this._needRecover()){n.recover=!0;let i=this._getOffset();i&&(n.offset=i);let r=this._getEpoch();r&&(n.epoch=r)}return this._delta&&(n.delta=this._delta),this._tagsFilter&&(n.tf=this._tagsFilter),{subscribe:n}}_debug(...t){this._centrifuge._debug(...t)}_handleSubscribeError(t){if(this._isSubscribing()){if(t.code===Q.timeout){this._centrifuge._disconnect(mn.subscribeTimeout,"subscribe timeout",!0);return}this._subscribeError(t)}}_handleSubscribeResponse(t){this._isSubscribing()&&this._setSubscribed(t)}_setUnsubscribed(t,n,i){if(this._isUnsubscribed())return Promise.resolve();let r=Promise.resolve();return this._isSubscribed()?(i&&(r=this._centrifuge._unsubscribe(this)),this._clearSubscribedState()):this._isSubscribing()&&(this._inflight&&i&&(r=this._centrifuge._unsubscribe(this)),this._clearSubscribingState()),this._inflight=!1,this._setState(Ht.Unsubscribed)&&this.emit("unsubscribed",{channel:this.channel,code:t,reason:n}),this._rejectPromises({code:Q.subscriptionUnsubscribed,message:this.state}),r}_handlePublication(t){if(this._delta&&this._delta_negotiated){let{newData:i,newPrevValue:r}=this._centrifuge._codec.applyDeltaIfNeeded(t,this._prevValue);t.data=i,this._prevValue=r}let n=this._centrifuge._getPublicationContext(this.channel,t);this.emit("publication",n),t.offset&&(this._offset=t.offset)}_handleJoin(t){let n=this._centrifuge._getJoinLeaveContext(t.info);this.emit("join",{channel:this.channel,info:n})}_handleLeave(t){let n=this._centrifuge._getJoinLeaveContext(t.info);this.emit("leave",{channel:this.channel,info:n})}_resolvePromises(){for(let t in this._promises)this._promises.hasOwnProperty(t)&&(this._promises[t].timeout&&clearTimeout(this._promises[t].timeout),this._promises[t].resolve(),delete this._promises[t])}_rejectPromises(t){for(let n in this._promises)this._promises.hasOwnProperty(n)&&(this._promises[n].timeout&&clearTimeout(this._promises[n].timeout),this._promises[n].reject(t),delete this._promises[n])}_scheduleResubscribe(){if(!this._isSubscribing()){this._debug("not in subscribing state, skip resubscribe scheduling",this.channel);return}let t=this,n=this._getResubscribeDelay();this._resubscribeTimeout=setTimeout(function(){t._isSubscribing()&&t._subscribe()},n),this._debug("resubscribe scheduled after "+n,this.channel)}_subscribeError(t){if(this._isSubscribing())if(t.code<100||t.code===109||t.temporary===!0){t.code===109&&(this._token="");let n={channel:this.channel,type:"subscribe",error:t};this._centrifuge.state===gt.Connected&&this.emit("error",n),this._scheduleResubscribe()}else this._setUnsubscribed(t.code,t.message,!1)}_getResubscribeDelay(){let t=js(this._resubscribeAttempts,this._minResubscribeDelay,this._maxResubscribeDelay);return this._resubscribeAttempts++,t}_setOptions(t){if(t){if(t.since&&(this._offset=t.since.offset||0,this._epoch=t.since.epoch||"",this._recover=!0),t.data&&(this._data=t.data),t.getData&&(this._getData=t.getData),t.minResubscribeDelay!==void 0&&(this._minResubscribeDelay=t.minResubscribeDelay),t.maxResubscribeDelay!==void 0&&(this._maxResubscribeDelay=t.maxResubscribeDelay),t.token&&(this._token=t.token),t.getToken&&(this._getToken=t.getToken),t.positioned===!0&&(this._positioned=!0),t.recoverable===!0&&(this._recoverable=!0),t.joinLeave===!0&&(this._joinLeave=!0),t.delta){if(t.delta!=="fossil")throw new Error("unsupported delta format");this._delta=t.delta}if(t.tagsFilter&&(this._tagsFilter=t.tagsFilter),this._tagsFilter&&this._delta)throw new Error("cannot use delta and tagsFilter together")}}_getOffset(){let t=this._offset;return t!==null?t:0}_getEpoch(){let t=this._epoch;return t!==null?t:""}_clearRefreshTimeout(){this._refreshTimeout!==null&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null)}_clearResubscribeTimeout(){this._resubscribeTimeout!==null&&(clearTimeout(this._resubscribeTimeout),this._resubscribeTimeout=null)}_getSubscriptionToken(){this._debug("get subscription token for channel",this.channel);let t={channel:this.channel},n=this._getToken;return n===null?(this.emit("error",{type:"configuration",channel:this.channel,error:{code:Q.badConfiguration,message:"provide a function to get channel subscription token"}}),Promise.reject(new Se(""))):n(t)}_refresh(){this._clearRefreshTimeout();let t=this;this._getSubscriptionToken().then(function(n){if(!t._isSubscribed())return;if(!n){t._failUnauthorized();return}t._token=n;let r={sub_refresh:{channel:t.channel,token:n}};t._centrifuge._call(r).then(s=>{let o=s.reply.sub_refresh;t._refreshResponse(o),s.next&&s.next()},s=>{t._refreshError(s.error),s.next&&s.next()})}).catch(function(n){if(n instanceof Se){t._failUnauthorized();return}t.emit("error",{type:"refreshToken",channel:t.channel,error:{code:Q.subscriptionRefreshToken,message:n!==void 0?n.toString():""}}),t._refreshTimeout=setTimeout(()=>t._refresh(),t._getRefreshRetryDelay())})}_refreshResponse(t){this._isSubscribed()&&(this._debug("subscription token refreshed, channel",this.channel),this._clearRefreshTimeout(),t.expires===!0&&(this._refreshTimeout=setTimeout(()=>this._refresh(),Bs(t.ttl))))}_refreshError(t){this._isSubscribed()&&(t.code<100||t.temporary===!0?(this.emit("error",{type:"refresh",channel:this.channel,error:t}),this._refreshTimeout=setTimeout(()=>this._refresh(),this._getRefreshRetryDelay())):this._setUnsubscribed(t.code,t.message,!0))}_getRefreshRetryDelay(){return js(0,1e4,2e4)}_failUnauthorized(){this._setUnsubscribed(Hs.unauthorized,"unauthorized",!0)}},Ia=class{constructor(t,n){this.endpoint=t,this.options=n,this._transport=null}name(){return"sockjs"}subName(){return"sockjs-"+this._transport.transport}emulation(){return!1}supported(){return this.options.sockjs!==null}initialize(t,n){this._transport=new this.options.sockjs(this.endpoint,null,this.options.sockjsOptions),this._transport.onopen=()=>{n.onOpen()},this._transport.onerror=i=>{n.onError(i)},this._transport.onclose=i=>{n.onClose(i)},this._transport.onmessage=i=>{n.onMessage(i.data)}}close(){this._transport.close()}send(t){this._transport.send(t)}},Vs=class{constructor(t,n){this.endpoint=t,this.options=n,this._transport=null}name(){return"websocket"}subName(){return"websocket"}emulation(){return!1}supported(){return this.options.websocket!==void 0&&this.options.websocket!==null}initialize(t,n){let i="";t==="protobuf"&&(i="centrifuge-protobuf"),i!==""?this._transport=new this.options.websocket(this.endpoint,i):this._transport=new this.options.websocket(this.endpoint),t==="protobuf"&&(this._transport.binaryType="arraybuffer"),this._transport.onopen=()=>{n.onOpen()},this._transport.onerror=r=>{n.onError(r)},this._transport.onclose=r=>{n.onClose(r)},this._transport.onmessage=r=>{n.onMessage(r.data)}}close(){this._transport.close()}send(t){this._transport.send(t)}},Ra=class{constructor(t,n){this.endpoint=t,this.options=n,this._abortController=null,this._utf8decoder=new TextDecoder,this._protocol="json"}name(){return"http_stream"}subName(){return"http_stream"}emulation(){return!0}_handleErrors(t){if(!t.ok)throw new Error(t.status);return t}_fetchEventTarget(t,n,i){let r=new EventTarget,s=t.options.fetch;return s(n,i).then(t._handleErrors).then(o=>{r.dispatchEvent(new Event("open"));let a="",l=0,c=new Uint8Array,d=o.body.getReader();return new t.options.readableStream({start(u){function h(){return d.read().then(({done:f,value:p})=>{if(f){r.dispatchEvent(new Event("close")),u.close();return}try{if(t._protocol==="json")for(a+=t._utf8decoder.decode(p);l<a.length;)if(a[l]===`
`){let g=a.substring(0,l);r.dispatchEvent(new MessageEvent("message",{data:g})),a=a.substring(l+1),l=0}else++l;else{let g=new Uint8Array(c.length+p.length);for(g.set(c),g.set(p,c.length),c=g;;){let m=t.options.decoder.decodeReply(c);if(m.ok){let v=c.slice(0,m.pos);r.dispatchEvent(new MessageEvent("message",{data:v})),c=c.slice(m.pos);continue}break}}}catch(g){r.dispatchEvent(new Event("error",{detail:g})),r.dispatchEvent(new Event("close")),u.close();return}h()}).catch(function(f){r.dispatchEvent(new Event("error",{detail:f})),r.dispatchEvent(new Event("close")),u.close()})}return h()}})}).catch(o=>{r.dispatchEvent(new Event("error",{detail:o})),r.dispatchEvent(new Event("close"))}),r}supported(){return this.options.fetch!==null&&this.options.readableStream!==null&&typeof TextDecoder<"u"&&typeof AbortController<"u"&&typeof EventTarget<"u"&&typeof Event<"u"&&typeof MessageEvent<"u"&&typeof Error<"u"}initialize(t,n,i){this._protocol=t,this._abortController=new AbortController;let r,s;t==="json"?(r={Accept:"application/json","Content-Type":"application/json"},s=i):(r={Accept:"application/octet-stream","Content-Type":"application/octet-stream"},s=i);let o={method:"POST",headers:r,body:s,mode:"cors",credentials:"same-origin",signal:this._abortController.signal},a=this._fetchEventTarget(this,this.endpoint,o);a.addEventListener("open",()=>{n.onOpen()}),a.addEventListener("error",l=>{this._abortController.abort(),n.onError(l)}),a.addEventListener("close",()=>{this._abortController.abort(),n.onClose({code:4,reason:"connection closed"})}),a.addEventListener("message",l=>{n.onMessage(l.data)})}close(){this._abortController.abort()}send(t,n,i){let r,s,o={session:n,node:i,data:t};this._protocol==="json"?(r={"Content-Type":"application/json"},s=JSON.stringify(o)):(r={"Content-Type":"application/octet-stream"},s=this.options.encoder.encodeEmulationRequest(o));let a=this.options.fetch,l={method:"POST",headers:r,body:s,mode:"cors",credentials:"same-origin"};a(this.options.emulationEndpoint,l)}},La=class{constructor(t,n){this.endpoint=t,this.options=n,this._protocol="json",this._transport=null,this._onClose=null}name(){return"sse"}subName(){return"sse"}emulation(){return!0}supported(){return this.options.eventsource!==null&&this.options.fetch!==null}initialize(t,n,i){let r;globalThis&&globalThis.document&&globalThis.document.baseURI?r=new URL(this.endpoint,globalThis.document.baseURI):r=new URL(this.endpoint),r.searchParams.append("cf_connect",i);let s={},o=new this.options.eventsource(r.toString(),s);this._transport=o;let a=this;o.onopen=function(){n.onOpen()},o.onerror=function(l){o.close(),n.onError(l),n.onClose({code:4,reason:"connection closed"})},o.onmessage=function(l){n.onMessage(l.data)},a._onClose=function(){n.onClose({code:4,reason:"connection closed"})}}close(){this._transport.close(),this._onClose!==null&&this._onClose()}send(t,n,i){let r={session:n,node:i,data:t},s={"Content-Type":"application/json"},o=JSON.stringify(r),a=this.options.fetch,l={method:"POST",headers:s,body:o,mode:"cors",credentials:"same-origin"};a(this.options.emulationEndpoint,l)}},ka=class{constructor(t,n){this.endpoint=t,this.options=n,this._transport=null,this._stream=null,this._writer=null,this._utf8decoder=new TextDecoder,this._protocol="json"}name(){return"webtransport"}subName(){return"webtransport"}emulation(){return!1}supported(){return this.options.webtransport!==void 0&&this.options.webtransport!==null}initialize(t,n){return Mt(this,void 0,void 0,function*(){let i;globalThis&&globalThis.document&&globalThis.document.baseURI?i=new URL(this.endpoint,globalThis.document.baseURI):i=new URL(this.endpoint),t==="protobuf"&&i.searchParams.append("cf_protocol","protobuf"),this._protocol=t;let r=new EventTarget;this._transport=new this.options.webtransport(i.toString()),this._transport.closed.then(()=>{n.onClose({code:4,reason:"connection closed"})}).catch(()=>{n.onClose({code:4,reason:"connection closed"})});try{yield this._transport.ready}catch{this.close();return}let s;try{s=yield this._transport.createBidirectionalStream()}catch{this.close();return}this._stream=s,this._writer=this._stream.writable.getWriter(),r.addEventListener("close",()=>{n.onClose({code:4,reason:"connection closed"})}),r.addEventListener("message",o=>{n.onMessage(o.data)}),this._startReading(r),n.onOpen()})}_startReading(t){return Mt(this,void 0,void 0,function*(){let n=this._stream.readable.getReader(),i="",r=0,s=new Uint8Array;try{for(;;){let{done:o,value:a}=yield n.read();if(a.length>0)if(this._protocol==="json")for(i+=this._utf8decoder.decode(a);r<i.length;)if(i[r]===`
`){let l=i.substring(0,r);t.dispatchEvent(new MessageEvent("message",{data:l})),i=i.substring(r+1),r=0}else++r;else{let l=new Uint8Array(s.length+a.length);for(l.set(s),l.set(a,s.length),s=l;;){let c=this.options.decoder.decodeReply(s);if(c.ok){let d=s.slice(0,c.pos);t.dispatchEvent(new MessageEvent("message",{data:d})),s=s.slice(c.pos);continue}break}}if(o)break}}catch{t.dispatchEvent(new Event("close"))}})}close(){return Mt(this,void 0,void 0,function*(){try{this._writer&&(yield this._writer.close()),this._transport.close()}catch{}})}send(t){return Mt(this,void 0,void 0,function*(){let n;this._protocol==="json"?n=new TextEncoder().encode(t+`
`):n=t;try{yield this._writer.write(n)}catch{this.close()}})}},pb=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,36,-1,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,-1,-1,-1,63,-1],Ma=class{constructor(t){this.a=t,this.pos=0}haveBytes(){return this.pos<this.a.length}getByte(){let t=this.a[this.pos];if(this.pos++,this.pos>this.a.length)throw new RangeError("out of bounds");return t}getChar(){return String.fromCharCode(this.getByte())}getInt(){let t=0,n;for(;this.haveBytes()&&(n=pb[127&this.getByte()])>=0;)t=(t<<6)+n;return this.pos--,t>>>0}},Fa=class{constructor(){this.a=[]}toByteArray(t){return Array.isArray(t)?this.a:new Uint8Array(this.a)}putArray(t,n,i){for(let r=n;r<i;r++)this.a.push(t[r])}};function gb(e){let t=0,n=0,i=0,r=0,s=0,o=e.length;for(;o>=16;)t=t+e[s+0]|0,n=n+e[s+1]|0,i=i+e[s+2]|0,r=r+e[s+3]|0,t=t+e[s+4]|0,n=n+e[s+5]|0,i=i+e[s+6]|0,r=r+e[s+7]|0,t=t+e[s+8]|0,n=n+e[s+9]|0,i=i+e[s+10]|0,r=r+e[s+11]|0,t=t+e[s+12]|0,n=n+e[s+13]|0,i=i+e[s+14]|0,r=r+e[s+15]|0,s+=16,o-=16;for(;o>=4;)t=t+e[s+0]|0,n=n+e[s+1]|0,i=i+e[s+2]|0,r=r+e[s+3]|0,s+=4,o-=4;switch(r=((r+(i<<8)|0)+(n<<16)|0)+(t<<24)|0,o){case 3:r=r+(e[s+2]<<8)|0;case 2:r=r+(e[s+1]<<16)|0;case 1:r=r+(e[s+0]<<24)|0}return r>>>0}function mb(e,t){let n=0,i=new Ma(t),r=e.length,s=t.length,o=i.getInt();if(i.getChar()!==`
`)throw new Error("size integer not terminated by '\\n'");let a=new Fa;for(;i.haveBytes();){let l=i.getInt(),c;switch(i.getChar()){case"@":if(c=i.getInt(),i.haveBytes()&&i.getChar()!==",")throw new Error("copy command not terminated by ','");if(n+=l,n>o)throw new Error("copy exceeds output file size");if(c+l>r)throw new Error("copy extends past end of input");a.putArray(e,c,c+l);break;case":":if(n+=l,n>o)throw new Error("insert command gives an output larger than predicted");if(l>s)throw new Error("insert count exceeds size of delta");a.putArray(i.a,i.pos,i.pos+l),i.pos+=l;break;case";":{let d=a.toByteArray(e);if(l!==gb(d))throw new Error("bad checksum");if(n!==o)throw new Error("generated size does not match predicted size");return d}default:throw new Error("unknown delta operator")}}throw new Error("unterminated delta")}var qs=class{name(){return"json"}encodeCommands(t){return t.map(n=>JSON.stringify(n)).join(`
`)}decodeReplies(t){return t.trim().split(`
`).map(n=>JSON.parse(n))}applyDeltaIfNeeded(t,n){let i,r;if(t.delta){let s=mb(n,new TextEncoder().encode(t.data));i=JSON.parse(new TextDecoder().decode(s)),r=s}else i=JSON.parse(t.data),r=new TextEncoder().encode(t.data);return{newData:i,newPrevValue:r}}},vb={headers:{},token:"",getToken:null,data:null,getData:null,debug:!1,name:"js",version:"",fetch:null,readableStream:null,websocket:null,eventsource:null,sockjs:null,sockjsOptions:{},emulationEndpoint:"/emulation",minReconnectDelay:500,maxReconnectDelay:2e4,timeout:5e3,maxServerPingDelay:1e4,networkEventTarget:null},Se=class extends Error{constructor(t){super(t),this.name=this.constructor.name}},$n=class extends Zu{constructor(t,n){super(),this._reconnectTimeout=null,this._refreshTimeout=null,this._serverPingTimeout=null,this.state=gt.Disconnected,this._transportIsOpen=!1,this._endpoint=t,this._emulation=!1,this._transports=[],this._currentTransportIndex=0,this._triedAllTransports=!1,this._transportWasOpen=!1,this._transport=null,this._transportId=0,this._deviceWentOffline=!1,this._transportClosed=!0,this._codec=new qs,this._reconnecting=!1,this._reconnectTimeout=null,this._reconnectAttempts=0,this._client=null,this._session="",this._node="",this._subs={},this._serverSubs={},this._commandId=0,this._commands=[],this._batching=!1,this._refreshRequired=!1,this._refreshTimeout=null,this._callbacks={},this._token="",this._data=null,this._dispatchPromise=Promise.resolve(),this._serverPing=0,this._serverPingTimeout=null,this._sendPong=!1,this._promises={},this._promiseId=0,this._debugEnabled=!1,this._networkEventsSet=!1,this._config=Object.assign(Object.assign({},vb),n),this._configure(),this._debugEnabled?(this.on("state",i=>{this._debug("client state",i.oldState,"->",i.newState)}),this.on("error",i=>{this._debug("client error",i)})):this.on("error",function(){Function.prototype()})}newSubscription(t,n){if(this.getSubscription(t)!==null)throw new Error("Subscription to the channel "+t+" already exists");let i=new Na(this,t,n);return this._subs[t]=i,i}getSubscription(t){return this._getSub(t)}removeSubscription(t){t&&(t.state!==Ht.Unsubscribed&&t.unsubscribe(),this._removeSubscription(t))}subscriptions(){return this._subs}ready(t){return Mt(this,void 0,void 0,function*(){switch(this.state){case gt.Disconnected:throw{code:Q.clientDisconnected,message:"client disconnected"};case gt.Connected:return;default:return new Promise((n,i)=>{let r={resolve:n,reject:i};t&&(r.timeout=setTimeout(()=>{i({code:Q.timeout,message:"timeout"})},t)),this._promises[this._nextPromiseId()]=r})}})}connect(){if(this._isConnected()){this._debug("connect called when already connected");return}if(this._isConnecting()){this._debug("connect called when already connecting");return}this._debug("connect called"),this._reconnectAttempts=0,this._startConnecting()}disconnect(){this._disconnect(cr.disconnectCalled,"disconnect called",!1)}setToken(t){this._token=t}setData(t){this._data=t}setHeaders(t){this._config.headers=t}send(t){return Mt(this,void 0,void 0,function*(){let n={send:{data:t}};if(yield this._methodCall(),!this._transportSendCommands([n]))throw this._createErrorObject(Q.transportWriteError,"transport write error")})}rpc(t,n){return Mt(this,void 0,void 0,function*(){let i={rpc:{method:t,data:n}};return yield this._methodCall(),{data:(yield this._callPromise(i,s=>s.rpc)).data}})}publish(t,n){return Mt(this,void 0,void 0,function*(){let i={publish:{channel:t,data:n}};return yield this._methodCall(),yield this._callPromise(i,()=>({})),{}})}history(t,n){return Mt(this,void 0,void 0,function*(){let i={history:this._getHistoryRequest(t,n)};yield this._methodCall();let r=yield this._callPromise(i,o=>o.history),s=[];if(r.publications)for(let o=0;o<r.publications.length;o++)s.push(this._getPublicationContext(t,r.publications[o]));return{publications:s,epoch:r.epoch||"",offset:r.offset||0}})}presence(t){return Mt(this,void 0,void 0,function*(){let n={presence:{channel:t}};yield this._methodCall();let r=(yield this._callPromise(n,s=>s.presence)).presence;for(let s in r)if(Object.prototype.hasOwnProperty.call(r,s)){let o=r[s],a=o.conn_info,l=o.chan_info;a&&(o.connInfo=a),l&&(o.chanInfo=l)}return{clients:r}})}presenceStats(t){return Mt(this,void 0,void 0,function*(){let n={presence_stats:{channel:t}};yield this._methodCall();let i=yield this._callPromise(n,r=>r.presence_stats);return{numUsers:i.num_users,numClients:i.num_clients}})}startBatching(){this._batching=!0}stopBatching(){let t=this;Promise.resolve().then(function(){Promise.resolve().then(function(){t._batching=!1,t._flush()})})}_debug(...t){this._debugEnabled&&db("debug",t)}_codecName(){return this._codec.name()}_formatOverride(){}_configure(){if(!("Promise"in globalThis))throw new Error("Promise polyfill required");if(!this._endpoint)throw new Error("endpoint configuration required");if(this._config.token!==null&&(this._token=this._config.token),this._config.data!==null&&(this._data=this._config.data),this._codec=new qs,this._formatOverride(),(this._config.debug===!0||typeof localStorage<"u"&&localStorage.getItem("centrifuge.debug"))&&(this._debugEnabled=!0),this._debug("config",this._config),typeof this._endpoint!="string")if(typeof this._endpoint=="object"&&this._endpoint instanceof Array){this._transports=this._endpoint,this._emulation=!0;for(let t in this._transports)if(this._transports.hasOwnProperty(t)){let n=this._transports[t];if(!n.endpoint||!n.transport)throw new Error("malformed transport configuration");let i=n.transport;if(["websocket","http_stream","sse","sockjs","webtransport"].indexOf(i)<0)throw new Error("unsupported transport name: "+i)}}else throw new Error("unsupported url configuration type: only string or array of objects are supported")}_setState(t){if(this.state!==t){this._reconnecting=!1;let n=this.state;return this.state=t,this.emit("state",{newState:t,oldState:n}),!0}return!1}_isDisconnected(){return this.state===gt.Disconnected}_isConnecting(){return this.state===gt.Connecting}_isConnected(){return this.state===gt.Connected}_nextCommandId(){return++this._commandId}_setNetworkEvents(){if(this._networkEventsSet)return;let t=null;this._config.networkEventTarget!==null?t=this._config.networkEventTarget:typeof globalThis.addEventListener<"u"&&(t=globalThis),t&&(t.addEventListener("offline",()=>{this._debug("offline event triggered"),(this.state===gt.Connected||this.state===gt.Connecting)&&(this._disconnect(mn.transportClosed,"transport closed",!0),this._deviceWentOffline=!0)}),t.addEventListener("online",()=>{this._debug("online event triggered"),this.state===gt.Connecting&&(this._deviceWentOffline&&!this._transportClosed&&(this._deviceWentOffline=!1,this._transportClosed=!0),this._clearReconnectTimeout(),this._startReconnecting())}),this._networkEventsSet=!0)}_getReconnectDelay(){let t=js(this._reconnectAttempts,this._config.minReconnectDelay,this._config.maxReconnectDelay);return this._reconnectAttempts+=1,t}_clearOutgoingRequests(){for(let t in this._callbacks)if(this._callbacks.hasOwnProperty(t)){let n=this._callbacks[t];clearTimeout(n.timeout);let i=n.errback;if(!i)continue;i({error:this._createErrorObject(Q.connectionClosed,"connection closed")})}this._callbacks={}}_clearConnectedState(){this._client=null,this._clearServerPingTimeout(),this._clearRefreshTimeout();for(let t in this._subs){if(!this._subs.hasOwnProperty(t))continue;let n=this._subs[t];n.state===Ht.Subscribed&&n._setSubscribing($s.transportClosed,"transport closed")}for(let t in this._serverSubs)this._serverSubs.hasOwnProperty(t)&&this.emit("subscribing",{channel:t})}_handleWriteError(t){for(let n of t){let i=n.id;if(!(i in this._callbacks))continue;let r=this._callbacks[i];clearTimeout(this._callbacks[i].timeout),delete this._callbacks[i];let s=r.errback;s({error:this._createErrorObject(Q.transportWriteError,"transport write error")})}}_transportSendCommands(t){if(!t.length)return!0;if(!this._transport)return!1;try{this._transport.send(this._codec.encodeCommands(t),this._session,this._node)}catch(n){return this._debug("error writing commands",n),this._handleWriteError(t),!1}return!0}_initializeTransport(){let t;this._config.websocket!==null?t=this._config.websocket:typeof globalThis.WebSocket!="function"&&typeof globalThis.WebSocket!="object"||(t=globalThis.WebSocket);let n=null;this._config.sockjs!==null?n=this._config.sockjs:typeof globalThis.SockJS<"u"&&(n=globalThis.SockJS);let i=null;this._config.eventsource!==null?i=this._config.eventsource:typeof globalThis.EventSource<"u"&&(i=globalThis.EventSource);let r=null;this._config.fetch!==null?r=this._config.fetch:typeof globalThis.fetch<"u"&&(r=globalThis.fetch);let s=null;if(this._config.readableStream!==null?s=this._config.readableStream:typeof globalThis.ReadableStream<"u"&&(s=globalThis.ReadableStream),this._emulation){this._currentTransportIndex>=this._transports.length&&(this._triedAllTransports=!0,this._currentTransportIndex=0);let f=0;for(;;){if(f>=this._transports.length)throw new Error("no supported transport found");let p=this._transports[this._currentTransportIndex],g=p.transport,m=p.endpoint;if(g==="websocket"){if(this._debug("trying websocket transport"),this._transport=new Vs(m,{websocket:t}),!this._transport.supported()){this._debug("websocket transport not available"),this._currentTransportIndex++,f++;continue}}else if(g==="webtransport"){if(this._debug("trying webtransport transport"),this._transport=new ka(m,{webtransport:globalThis.WebTransport,decoder:this._codec,encoder:this._codec}),!this._transport.supported()){this._debug("webtransport transport not available"),this._currentTransportIndex++,f++;continue}}else if(g==="http_stream"){if(this._debug("trying http_stream transport"),this._transport=new Ra(m,{fetch:r,readableStream:s,emulationEndpoint:this._config.emulationEndpoint,decoder:this._codec,encoder:this._codec}),!this._transport.supported()){this._debug("http_stream transport not available"),this._currentTransportIndex++,f++;continue}}else if(g==="sse"){if(this._debug("trying sse transport"),this._transport=new La(m,{eventsource:i,fetch:r,emulationEndpoint:this._config.emulationEndpoint}),!this._transport.supported()){this._debug("sse transport not available"),this._currentTransportIndex++,f++;continue}}else if(g==="sockjs"){if(this._debug("trying sockjs"),this._transport=new Ia(m,{sockjs:n,sockjsOptions:this._config.sockjsOptions}),!this._transport.supported()){this._debug("sockjs transport not available"),this._currentTransportIndex++,f++;continue}}else throw new Error("unknown transport "+g);break}}else{if(ub(this._endpoint,"http"))throw new Error("Provide explicit transport endpoints configuration in case of using HTTP (i.e. using array of TransportEndpoint instead of a single string), or use ws(s):// scheme in an endpoint if you aimed using WebSocket transport");if(this._debug("client will use websocket"),this._transport=new Vs(this._endpoint,{websocket:t}),!this._transport.supported())throw new Error("WebSocket constructor not found, make sure it is available globally or passed as a dependency in Centrifuge options")}let o=this,a=this._transport,l=this._nextTransportId();o._debug("id of transport",l);let c=!1,d=[];if(this._transport.emulation()){let f=o._sendConnect(!0);d.push(f)}this._setNetworkEvents();let u=this._codec.encodeCommands(d);this._transportClosed=!1;let h;h=setTimeout(function(){a.close()},this._config.timeout),this._transport.initialize(this._codecName(),{onOpen:function(){if(h&&(clearTimeout(h),h=null),o._transportId!=l){o._debug("open callback from non-actual transport"),a.close();return}c=!0,o._debug(a.subName(),"transport open"),!a.emulation()&&(o._transportIsOpen=!0,o._transportWasOpen=!0,o.startBatching(),o._sendConnect(!1),o._sendSubscribeCommands(),o.stopBatching(),o.emit("__centrifuge_debug:connect_frame_sent",{}))},onError:function(f){if(o._transportId!=l){o._debug("error callback from non-actual transport");return}o._debug("transport level error",f)},onClose:function(f){if(h&&(clearTimeout(h),h=null),o._transportId!=l){o._debug("close callback from non-actual transport");return}o._debug(a.subName(),"transport closed"),o._transportClosed=!0,o._transportIsOpen=!1;let p="connection closed",g=!0,m=0;if(f&&"code"in f&&f.code&&(m=f.code),f&&f.reason)try{let v=JSON.parse(f.reason);p=v.reason,g=v.reconnect}catch{p=f.reason,(m>=3500&&m<4e3||m>=4500&&m<5e3)&&(g=!1)}m<3e3?(m===1009?(m=cr.messageSizeLimit,p="message size limit exceeded",g=!1):(m=mn.transportClosed,p="transport closed"),o._emulation&&!o._transportWasOpen&&(o._currentTransportIndex++,o._currentTransportIndex>=o._transports.length&&(o._triedAllTransports=!0,o._currentTransportIndex=0))):o._transportWasOpen=!0,o._isConnecting()&&!c&&o.emit("error",{type:"transport",error:{code:Q.transportClosed,message:"transport closed"},transport:a.name()}),o._reconnecting=!1,o._disconnect(m,p,g)},onMessage:function(f){o._dataReceived(f)}},u),o.emit("__centrifuge_debug:transport_initialized",{})}_sendConnect(t){let n=this._constructConnectCommand(),i=this;return this._call(n,t).then(r=>{let s=r.reply.connect;i._connectResponse(s),r.next&&r.next()},r=>{i._connectError(r.error),r.next&&r.next()}),n}_startReconnecting(){if(this._debug("start reconnecting"),!this._isConnecting()){this._debug("stop reconnecting: client not in connecting state");return}if(this._reconnecting){this._debug("reconnect already in progress, return from reconnect routine");return}if(this._transportClosed===!1){this._debug("waiting for transport close");return}this._reconnecting=!0;let t=this._token==="";if(!(this._refreshRequired||t&&this._config.getToken!==null)){this._config.getData?this._config.getData().then(r=>{this._isConnecting()&&(this._data=r,this._initializeTransport())}).catch(r=>this._handleGetDataError(r)):this._initializeTransport();return}let i=this;this._getToken().then(function(r){if(i._isConnecting()){if(r==null||r==null){i._failUnauthorized();return}i._token=r,i._debug("connection token refreshed"),i._config.getData?i._config.getData().then(function(s){i._isConnecting()&&(i._data=s,i._initializeTransport())}).catch(s=>i._handleGetDataError(s)):i._initializeTransport()}}).catch(function(r){if(!i._isConnecting())return;if(r instanceof Se){i._failUnauthorized();return}i.emit("error",{type:"connectToken",error:{code:Q.clientConnectToken,message:r!==void 0?r.toString():""}});let s=i._getReconnectDelay();i._debug("error on getting connection token, reconnect after "+s+" milliseconds",r),i._reconnecting=!1,i._reconnectTimeout=setTimeout(()=>{i._startReconnecting()},s)})}_handleGetDataError(t){if(t instanceof Se){this._failUnauthorized();return}this.emit("error",{type:"connectData",error:{code:Q.badConfiguration,message:t?.toString()||""}});let n=this._getReconnectDelay();this._debug("error on getting connect data, reconnect after "+n+" milliseconds",t),this._reconnecting=!1,this._reconnectTimeout=setTimeout(()=>{this._startReconnecting()},n)}_connectError(t){this.state===gt.Connecting&&(t.code===109&&(this._refreshRequired=!0),t.code<100||t.temporary===!0||t.code===109?(this.emit("error",{type:"connect",error:t}),this._debug("closing transport due to connect error"),this._disconnect(t.code,t.message,!0)):this._disconnect(t.code,t.message,!1))}_scheduleReconnect(){if(!this._isConnecting())return;let t=!1;this._emulation&&!this._transportWasOpen&&!this._triedAllTransports&&(t=!0);let n=this._getReconnectDelay();t&&(n=0),this._debug("reconnect after "+n+" milliseconds"),this._clearReconnectTimeout(),this._reconnectTimeout=setTimeout(()=>{this._startReconnecting()},n)}_constructConnectCommand(){let t={};this._token&&(t.token=this._token),this._data&&(t.data=this._data),this._config.name&&(t.name=this._config.name),this._config.version&&(t.version=this._config.version),Object.keys(this._config.headers).length>0&&(t.headers=this._config.headers);let n={},i=!1;for(let r in this._serverSubs)if(this._serverSubs.hasOwnProperty(r)&&this._serverSubs[r].recoverable){i=!0;let s={recover:!0};this._serverSubs[r].offset&&(s.offset=this._serverSubs[r].offset),this._serverSubs[r].epoch&&(s.epoch=this._serverSubs[r].epoch),n[r]=s}return i&&(t.subs=n),{connect:t}}_getHistoryRequest(t,n){let i={channel:t};return n!==void 0&&(n.since&&(i.since={offset:n.since.offset},n.since.epoch&&(i.since.epoch=n.since.epoch)),n.limit!==void 0&&(i.limit=n.limit),n.reverse===!0&&(i.reverse=!0)),i}_methodCall(){return this._isConnected()?Promise.resolve():new Promise((t,n)=>{let i=setTimeout(function(){n({code:Q.timeout,message:"timeout"})},this._config.timeout);this._promises[this._nextPromiseId()]={timeout:i,resolve:t,reject:n}})}_callPromise(t,n){return new Promise((i,r)=>{this._call(t,!1).then(s=>{var o;let a=n(s.reply);i(a),(o=s.next)===null||o===void 0||o.call(s)},s=>{var o;r(s.error),(o=s.next)===null||o===void 0||o.call(s)})})}_dataReceived(t){this._serverPing>0&&this._waitServerPing();let n=this._codec.decodeReplies(t);this._dispatchPromise=this._dispatchPromise.then(()=>{let i;this._dispatchPromise=new Promise(r=>{i=r}),this._dispatchSynchronized(n,i)})}_dispatchSynchronized(t,n){let i=Promise.resolve();for(let r in t)t.hasOwnProperty(r)&&(i=i.then(()=>this._dispatchReply(t[r])));i=i.then(()=>{n()})}_dispatchReply(t){let n,i=new Promise(s=>{n=s});if(t==null)return this._debug("dispatch: got undefined or null reply"),n(),i;let r=t.id;return r&&r>0?this._handleReply(t,n):t.push?this._handlePush(t.push,n):this._handleServerPing(n),i}_call(t,n){return new Promise((i,r)=>{t.id=this._nextCommandId(),this._registerCall(t.id,i,r),n||this._addCommand(t)})}_startConnecting(){this._debug("start connecting"),this._setState(gt.Connecting)&&this.emit("connecting",{code:mn.connectCalled,reason:"connect called"}),this._client=null,this._startReconnecting()}_disconnect(t,n,i){if(this._isDisconnected())return;this._transportIsOpen=!1;let r=this.state;this._reconnecting=!1;let s={code:t,reason:n},o=!1;if(i?o=this._setState(gt.Connecting):(o=this._setState(gt.Disconnected),this._rejectPromises({code:Q.clientDisconnected,message:"disconnected"})),this._clearOutgoingRequests(),r===gt.Connecting&&this._clearReconnectTimeout(),r===gt.Connected&&this._clearConnectedState(),o&&(this._isConnecting()?this.emit("connecting",s):this.emit("disconnected",s)),this._transport){this._debug("closing existing transport");let a=this._transport;this._transport=null,a.close(),this._transportClosed=!0,this._nextTransportId()}else this._debug("no transport to close");this._scheduleReconnect()}_failUnauthorized(){this._disconnect(cr.unauthorized,"unauthorized",!1)}_getToken(){return this._debug("get connection token"),this._config.getToken?this._config.getToken({}):(this.emit("error",{type:"configuration",error:{code:Q.badConfiguration,message:"token expired but no getToken function set in the configuration"}}),Promise.reject(new Se("")))}_refresh(){let t=this._client,n=this;this._getToken().then(function(i){if(t!==n._client)return;if(!i){n._failUnauthorized();return}if(n._token=i,n._debug("connection token refreshed"),!n._isConnected())return;let r={refresh:{token:n._token}};n._call(r,!1).then(s=>{let o=s.reply.refresh;n._refreshResponse(o),s.next&&s.next()},s=>{n._refreshError(s.error),s.next&&s.next()})}).catch(function(i){if(n._isConnected()){if(i instanceof Se){n._failUnauthorized();return}n.emit("error",{type:"refreshToken",error:{code:Q.clientRefreshToken,message:i!==void 0?i.toString():""}}),n._refreshTimeout=setTimeout(()=>n._refresh(),n._getRefreshRetryDelay())}})}_refreshError(t){t.code<100||t.temporary===!0?(this.emit("error",{type:"refresh",error:t}),this._refreshTimeout=setTimeout(()=>this._refresh(),this._getRefreshRetryDelay())):this._disconnect(t.code,t.message,!1)}_getRefreshRetryDelay(){return js(0,5e3,1e4)}_refreshResponse(t){this._refreshTimeout&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null),t.expires&&(this._client=t.client,this._refreshTimeout=setTimeout(()=>this._refresh(),Bs(t.ttl)))}_removeSubscription(t){t!==null&&delete this._subs[t.channel]}_unsubscribe(t){if(!this._transportIsOpen)return Promise.resolve();let i={unsubscribe:{channel:t.channel}},r=this;return new Promise((o,a)=>{this._call(i,!1).then(l=>{o(),l.next&&l.next()},l=>{o(),l.next&&l.next(),r._disconnect(mn.unsubscribeError,"unsubscribe error",!0)})})}_getSub(t,n){if(n&&n>0){for(let r in this._subs)if(this._subs.hasOwnProperty(r)){let s=this._subs[r];if(s._id===n)return s}return null}let i=this._subs[t];return i||null}_isServerSub(t){return this._serverSubs[t]!==void 0}_sendSubscribeCommands(){let t=[];for(let n in this._subs){if(!this._subs.hasOwnProperty(n))continue;let i=this._subs[n];if(i._inflight!==!0&&i.state===Ht.Subscribing){let r=i._subscribe();r&&t.push(r)}}return t}_connectResponse(t){if(this._transportIsOpen=!0,this._transportWasOpen=!0,this._reconnectAttempts=0,this._refreshRequired=!1,this._isConnected())return;this._client=t.client,this._setState(gt.Connected),this._refreshTimeout&&clearTimeout(this._refreshTimeout),t.expires&&(this._refreshTimeout=setTimeout(()=>this._refresh(),Bs(t.ttl))),this._session=t.session,this._node=t.node,this.startBatching(),this._sendSubscribeCommands(),this.stopBatching();let n={client:t.client,transport:this._transport.subName()};t.data&&(n.data=t.data),this.emit("connected",n),this._resolvePromises(),this._processServerSubs(t.subs||{}),t.ping&&t.ping>0?(this._serverPing=t.ping*1e3,this._sendPong=t.pong===!0,this._waitServerPing()):this._serverPing=0}_processServerSubs(t){for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];this._serverSubs[n]={offset:i.offset,epoch:i.epoch,recoverable:i.recoverable||!1};let r=this._getSubscribeContext(n,i);this.emit("subscribed",r)}for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];if(i.recovered){let r=i.publications;if(r&&r.length>0)for(let s in r)r.hasOwnProperty(s)&&this._handlePublication(n,r[s])}}for(let n in this._serverSubs)this._serverSubs.hasOwnProperty(n)&&(t[n]||(this.emit("unsubscribed",{channel:n}),delete this._serverSubs[n]))}_clearRefreshTimeout(){this._refreshTimeout!==null&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null)}_clearReconnectTimeout(){this._reconnectTimeout!==null&&(clearTimeout(this._reconnectTimeout),this._reconnectTimeout=null)}_clearServerPingTimeout(){this._serverPingTimeout!==null&&(clearTimeout(this._serverPingTimeout),this._serverPingTimeout=null)}_waitServerPing(){this._config.maxServerPingDelay!==0&&this._isConnected()&&(this._clearServerPingTimeout(),this._serverPingTimeout=setTimeout(()=>{this._isConnected()&&this._disconnect(mn.noPing,"no ping",!0)},this._serverPing+this._config.maxServerPingDelay))}_getSubscribeContext(t,n){let i={channel:t,positioned:!1,recoverable:!1,wasRecovering:!1,recovered:!1,hasRecoveredPublications:!1};n.recovered&&(i.recovered=!0),n.positioned&&(i.positioned=!0),n.recoverable&&(i.recoverable=!0),n.was_recovering&&(i.wasRecovering=!0);let r="";"epoch"in n&&(r=n.epoch);let s=0;return"offset"in n&&(s=n.offset),(i.positioned||i.recoverable)&&(i.streamPosition={offset:s,epoch:r}),Array.isArray(n.publications)&&n.publications.length>0&&(i.hasRecoveredPublications=!0),n.data&&(i.data=n.data),i}_handleReply(t,n){let i=t.id;if(!(i in this._callbacks)){n();return}let r=this._callbacks[i];if(clearTimeout(this._callbacks[i].timeout),delete this._callbacks[i],fb(t)){let s=r.errback;if(!s){n();return}let o={code:t.error.code,message:t.error.message||"",temporary:t.error.temporary||!1};s({error:o,next:n})}else{let s=r.callback;if(!s)return;s({reply:t,next:n})}}_handleJoin(t,n,i){let r=this._getSub(t,i);if(!r&&t){if(this._isServerSub(t)){let s={channel:t,info:this._getJoinLeaveContext(n.info)};this.emit("join",s)}return}r._handleJoin(n)}_handleLeave(t,n,i){let r=this._getSub(t,i);if(!r&&t){if(this._isServerSub(t)){let s={channel:t,info:this._getJoinLeaveContext(n.info)};this.emit("leave",s)}return}r._handleLeave(n)}_handleUnsubscribe(t,n){let i=this._getSub(t,0);if(!i&&t){this._isServerSub(t)&&(delete this._serverSubs[t],this.emit("unsubscribed",{channel:t}));return}n.code<2500?i._setUnsubscribed(n.code,n.reason,!1):i._setSubscribing(n.code,n.reason)}_handleSubscribe(t,n){this._serverSubs[t]={offset:n.offset,epoch:n.epoch,recoverable:n.recoverable||!1},this.emit("subscribed",this._getSubscribeContext(t,n))}_handleDisconnect(t){let n=t.code,i=!0;(n>=3500&&n<4e3||n>=4500&&n<5e3)&&(i=!1),this._disconnect(n,t.reason,i)}_getPublicationContext(t,n){let i={channel:t,data:n.data};return n.offset&&(i.offset=n.offset),n.info&&(i.info=this._getJoinLeaveContext(n.info)),n.tags&&(i.tags=n.tags),i}_getJoinLeaveContext(t){let n={client:t.client,user:t.user},i=t.conn_info;i&&(n.connInfo=i);let r=t.chan_info;return r&&(n.chanInfo=r),n}_handlePublication(t,n,i){let r=this._getSub(t,i);if(!r&&t){if(this._isServerSub(t)){let s=this._getPublicationContext(t,n);this.emit("publication",s),n.offset!==void 0&&(this._serverSubs[t].offset=n.offset)}return}r._handlePublication(n)}_handleMessage(t){this.emit("message",{data:t.data})}_handleServerPing(t){if(this._sendPong){let n={};this._transportSendCommands([n])}t()}_handlePush(t,n){let i=t.channel,r=t.id;t.pub?this._handlePublication(i,t.pub,r):t.message?this._handleMessage(t.message):t.join?this._handleJoin(i,t.join,r):t.leave?this._handleLeave(i,t.leave,r):t.unsubscribe?this._handleUnsubscribe(i,t.unsubscribe):t.subscribe?this._handleSubscribe(i,t.subscribe):t.disconnect&&this._handleDisconnect(t.disconnect),n()}_flush(){let t=this._commands.slice(0);this._commands=[],this._transportSendCommands(t)}_createErrorObject(t,n,i){let r={code:t,message:n};return i&&(r.temporary=!0),r}_registerCall(t,n,i){this._callbacks[t]={callback:n,errback:i,timeout:null},this._callbacks[t].timeout=setTimeout(()=>{delete this._callbacks[t],td(i)&&i({error:this._createErrorObject(Q.timeout,"timeout")})},this._config.timeout)}_addCommand(t){this._batching?this._commands.push(t):this._transportSendCommands([t])}_nextPromiseId(){return++this._promiseId}_nextTransportId(){return++this._transportId}_resolvePromises(){for(let t in this._promises)this._promises.hasOwnProperty(t)&&(this._promises[t].timeout&&clearTimeout(this._promises[t].timeout),this._promises[t].resolve(),delete this._promises[t])}_rejectPromises(t){for(let n in this._promises)this._promises.hasOwnProperty(n)&&(this._promises[n].timeout&&clearTimeout(this._promises[n].timeout),this._promises[n].reject(t),delete this._promises[n])}};$n.SubscriptionState=Ht;$n.State=gt;$n.UnauthorizedError=Se;function ed(e){if(!e.hasAttribute("data-centrifuge"))return;let t=e.getAttribute("data-centrifuge-url"),n=e.getAttribute("data-centrifuge-token"),i=new $n(t,{token:n});i.on("publication",function(r){on.swap("body",r.data.content,{swapStyle:"none"})}),i.connect()}function nd(e){e.querySelectorAll("[data-clipboard]").forEach(t=>{t.addEventListener("click",()=>{navigator.clipboard.writeText(t.dataset.clipboard).then(()=>{let n=t.querySelector(".if"),i=t.querySelector(".btn-text"),r=t.className,s=n.className,o=i.className,a=i.innerText;t.classList.remove("btn-outline-secondary"),t.classList.add("btn-outline-success"),n.classList.remove("if-copy","text-muted"),n.classList.add("if-check","text-success"),i.classList.remove("text-muted"),i.classList.add("text-success"),i.setAttribute("aria-live","polite"),i.innerText="Copied",setTimeout(function(){t.className=r,n.className=s,i.className=o,i.innerText=a},1500)})})})}function od(e){e.matches("[data-repeatable]")&&id(e),e.querySelectorAll("[data-repeatable]").forEach(t=>id(t))}function id(e){e.querySelectorAll("[data-repeatable-field]").forEach(t=>{ad(e,t)})}function ad(e,t){t.querySelectorAll("[data-repeatable-remove]").forEach(n=>{n.addEventListener("click",()=>{e.querySelectorAll("[data-repeatable-field]").length==1?rd(t):(t.remove(),sd(e))})}),t.querySelectorAll("[data-repeatable-add]").forEach(n=>{n.addEventListener("click",()=>{let i=t.cloneNode(!0);rd(i),t.after(i),sd(e),ad(e,i)})})}function rd(e){e.querySelectorAll("[data-repeatable-clear]").forEach(t=>{t.value=""}),e.querySelectorAll(".is-invalid").forEach(t=>{t.classList.remove("is-invalid")})}function sd(e){let t=e.getAttribute("data-repeatable-name"),n=e.getAttribute("data-repeatable-id");e.querySelectorAll("[data-repeatable-field]").forEach((i,r)=>{i.querySelectorAll(`[name^='${t}[']`).forEach(s=>{let o=s.getAttribute("name"),a=o.slice(0,t.length+1),l=o.slice(t.length+1).replace(/^[0-9]+/,""),c=a+r.toString()+l;s.setAttribute("name",c)}),i.querySelectorAll(`[id^='${n}-']`).forEach(s=>{let o=s.getAttribute("id"),a=o.slice(0,n.length+1),l=o.slice(n.length+1).replace(/^[0-9]+/,""),c=a+r.toString()+l;s.setAttribute("id",c)}),i.querySelectorAll(`[for^='${n}-']`).forEach(s=>{let o=s.getAttribute("for"),a=o.slice(0,n.length+1),l=o.slice(n.length+1).replace(/^[0-9]+/,""),c=a+r.toString()+l;s.setAttribute("for",c)})})}var ld="&#8203;";function $a(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function cd(e){return function(t){if(Array.isArray(t))return $a(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,n){if(t){if(typeof t=="string")return $a(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return $a(t,n)}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _n={isEnabled:function(){var e;return(e=window.TAGIFY_DEBUG)===null||e===void 0||e},log:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i;this.isEnabled()&&(i=console).log.apply(i,["[Tagify]:"].concat(cd(t)))},warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i;this.isEnabled()&&(i=console).warn.apply(i,["[Tagify]:"].concat(cd(t)))}},dr=function(e,t,n,i){return e=""+e,t=""+t,i&&(e=e.trim(),t=t.trim()),n?e==t:e.toLowerCase()==t.toLowerCase()},ud=function(e,t){return e&&Array.isArray(e)&&e.map(function(n){return za(n,t)})};function za(e,t){var n,i={};for(n in e)t.indexOf(n)<0&&(i[n]=e[n]);return i}function Ha(e){return new DOMParser().parseFromString(e.trim(),"text/html").body.firstElementChild}function dd(e,t){for(t=t||"previous";e=e[t+"Sibling"];)if(e.nodeType==3)return e}function jn(e){return typeof e=="string"?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/`|'/g,"&#039;"):e}function Ae(e){var t=Object.prototype.toString.call(e).split(" ")[1].slice(0,-1);return e===Object(e)&&t!="Array"&&t!="Function"&&t!="RegExp"&&t!="HTMLUnknownElement"}function bt(e,t,n){var i,r;function s(o,a){for(var l in a)if(a.hasOwnProperty(l)){if(Ae(a[l])){Ae(o[l])?s(o[l],a[l]):o[l]=Object.assign({},a[l]);continue}if(Array.isArray(a[l])){o[l]=Object.assign([],a[l]);continue}o[l]=a[l]}}return i=e,((r=Object)!=null&&typeof Symbol<"u"&&r[Symbol.hasInstance]?r[Symbol.hasInstance](i):i instanceof r)||(e={}),s(e,t),n&&s(e,n),e}function hd(){var e=[],t={},n=!0,i=!1,r=void 0;try{for(var s,o=arguments[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var a=s.value,l=!0,c=!1,d=void 0;try{for(var u,h=a[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var f=u.value;Ae(f)?t[f.value]||(e.push(f),t[f.value]=1):e.includes(f)||e.push(f)}}catch(p){c=!0,d=p}finally{try{l||h.return==null||h.return()}finally{if(c)throw d}}}}catch(p){i=!0,r=p}finally{try{n||o.return==null||o.return()}finally{if(i)throw r}}return e}function zs(e){return String.prototype.normalize?typeof e=="string"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):void 0:e}var fd=function(){return/(?=.*chrome)(?=.*android)/i.test(navigator.userAgent)};function pd(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}function Bn(e){var t,n=yd.call(this,e),i=e==null||(t=e.classList)===null||t===void 0?void 0:t.contains(this.settings.classNames.tag);return n&&i}function gd(e){return yd.call(this,e)&&e?.closest(this.settings.classNames.tagSelector)}function yd(e){var t;return(e==null||(t=e.closest)===null||t===void 0?void 0:t.call(e,this.settings.classNames.namespaceSelector))===this.DOM.scope}function wd(e,t){var n=window.getSelection();return t=t||n.getRangeAt(0),typeof e=="string"&&(e=document.createTextNode(e)),t&&(t.deleteContents(),t.insertNode(e)),e}function Z(e,t,n){return e?(t&&(e.__tagifyTagData=n?t:bt({},e.__tagifyTagData||{},t)),e.__tagifyTagData):(_n.warn("tag element doesn't exist",{tagElm:e,data:t}),t)}function vn(e){if(e&&e.parentNode){var t=e,n=window.getSelection(),i=n.getRangeAt(0);n.rangeCount&&(i.setStartAfter(t),i.collapse(!0),n.removeAllRanges(),n.addRange(i))}}function Ed(e,t){e.forEach(function(n){if(Z(n.previousSibling)||!n.previousSibling){var i=document.createTextNode("\u200B");n.before(i),t&&vn(i)}})}var ja={delimiters:",",pattern:null,tagTextProp:"value",maxTags:1/0,callbacks:{},addTagOnBlur:!0,addTagOn:["blur","tab","enter"],onChangeAfterBlur:!0,duplicates:!1,whitelist:[],blacklist:[],enforceWhitelist:!1,userInput:!0,focusable:!0,focusInputOnRemove:!0,keepInvalidTags:!1,createInvalidTags:!0,mixTagsAllowedAfter:/,|\.|\:|\s/,mixTagsInterpolator:["[[","]]"],backspace:!0,skipInvalid:!1,pasteAsTags:!0,editTags:{clicks:2,keepInvalid:!0},transformTag:function(){},trim:!0,a11y:{focusableTags:!1},mixMode:{insertAfterTag:"\xA0"},autoComplete:{enabled:!0,rightKey:!1,tabKey:!1},classNames:{namespace:"tagify",mixMode:"tagify--mix",selectMode:"tagify--select",input:"tagify__input",focus:"tagify--focus",tagNoAnimation:"tagify--noAnim",tagInvalid:"tagify--invalid",tagNotAllowed:"tagify--notAllowed",scopeLoading:"tagify--loading",hasMaxTags:"tagify--hasMaxTags",hasNoTags:"tagify--noTags",empty:"tagify--empty",inputInvalid:"tagify__input--invalid",dropdown:"tagify__dropdown",dropdownWrapper:"tagify__dropdown__wrapper",dropdownHeader:"tagify__dropdown__header",dropdownFooter:"tagify__dropdown__footer",dropdownItem:"tagify__dropdown__item",dropdownItemActive:"tagify__dropdown__item--active",dropdownItemHidden:"tagify__dropdown__item--hidden",dropdownItemSelected:"tagify__dropdown__item--selected",dropdownInital:"tagify__dropdown--initial",tag:"tagify__tag",tagText:"tagify__tag-text",tagX:"tagify__tag__removeBtn",tagLoading:"tagify__tag--loading",tagEditing:"tagify__tag--editable",tagFlash:"tagify__tag--flash",tagHide:"tagify__tag--hide"},dropdown:{classname:"",enabled:2,maxItems:10,searchKeys:["value","searchBy"],fuzzySearch:!0,caseSensitive:!1,accentedSearch:!0,includeSelectedTags:!1,escapeHTML:!0,highlightFirst:!0,closeOnSelect:!0,clearOnSelect:!0,position:"all",appendTarget:null},hooks:{beforeRemoveTag:function(){return Promise.resolve()},beforePaste:function(){return Promise.resolve()},suggestionClick:function(){return Promise.resolve()},beforeKeyDown:function(){return Promise.resolve()}}};function _b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),i.forEach(function(r){_b(e,r,n[r])})}return e}function yb(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(n,i){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);i&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,s)}return r}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Ba(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function wb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eb(e){return function(t){if(Array.isArray(t))return Ba(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,n){if(t){if(typeof t=="string")return Ba(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ba(t,n)}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tb(){for(var e in this.dropdown={},this._dropdown)this.dropdown[e]=typeof this._dropdown[e]=="function"?this._dropdown[e].bind(this):this._dropdown[e];this.dropdown.refs(),this.DOM.dropdown.__tagify=this}var Ks,Ri,Sb=(Ks=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),i.forEach(function(r){wb(e,r,n[r])})}return e}({},{events:{binding:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],t=this.dropdown.events.callbacks,n=this.listeners.dropdown=this.listeners.dropdown||{position:this.dropdown.position.bind(this,null),onKeyDown:t.onKeyDown.bind(this),onMouseOver:t.onMouseOver.bind(this),onMouseLeave:t.onMouseLeave.bind(this),onClick:t.onClick.bind(this),onScroll:t.onScroll.bind(this)},i=e?"addEventListener":"removeEventListener";this.settings.dropdown.position!="manual"&&(document[i]("scroll",n.position,!0),window[i]("resize",n.position),window[i]("keydown",n.onKeyDown)),this.DOM.dropdown[i]("mouseover",n.onMouseOver),this.DOM.dropdown[i]("mouseleave",n.onMouseLeave),this.DOM.dropdown[i]("mousedown",n.onClick),this.DOM.dropdown.content[i]("scroll",n.onScroll)},callbacks:{onKeyDown:function(e){var t=this;if(this.state.hasFocus&&!this.state.composing){var n=this.settings,i=n.dropdown.includeSelectedTags,r=this.DOM.dropdown.querySelector(n.classNames.dropdownItemActiveSelector),s=this.dropdown.getSuggestionDataByNode(r),o=n.mode=="mix",a=n.mode=="select";n.hooks.beforeKeyDown(e,{tagify:this}).then(function(l){switch(e.key){case"ArrowDown":case"ArrowUp":case"Down":case"Up":e.preventDefault();var c=t.dropdown.getAllSuggestionsRefs(),d=e.key=="ArrowUp"||e.key=="Up";r&&(r=t.dropdown.getNextOrPrevOption(r,!d)),r&&r.matches(n.classNames.dropdownItemSelector)||(r=c[d?c.length-1:0]),t.dropdown.highlightOption(r,!0);break;case"PageUp":case"PageDown":var u;e.preventDefault();var h=t.dropdown.getAllSuggestionsRefs(),f=Math.floor(t.DOM.dropdown.content.clientHeight/((u=h[0])===null||u===void 0?void 0:u.offsetHeight))||1,p=e.key==="PageUp";if(r){var g=h.indexOf(r),m=p?Math.max(0,g-f):Math.min(h.length-1,g+f);r=h[m]}else r=h[0];t.dropdown.highlightOption(r,!0);break;case"Home":case"End":e.preventDefault();var v=t.dropdown.getAllSuggestionsRefs();r=v[e.key==="Home"?0:v.length-1],t.dropdown.highlightOption(r,!0);break;case"Escape":case"Esc":t.dropdown.hide();break;case"ArrowRight":if(t.state.actions.ArrowLeft||n.autoComplete.rightKey)return;case"Tab":var b=!n.autoComplete.rightKey||!n.autoComplete.tabKey;if(!o&&!a&&r&&b&&!t.state.editing&&s){e.preventDefault();var E=t.dropdown.getMappedValue(s);return t.state.autoCompleteData=s,t.input.autocomplete.set.call(t,E),!1}return!0;case"Enter":e.preventDefault(),t.state.actions.selectOption=!0,setTimeout(function(){return t.state.actions.selectOption=!1},100),n.hooks.suggestionClick(e,{tagify:t,tagData:s,suggestionElm:r}).then(function(){if(r){var A=i?r:t.dropdown.getNextOrPrevOption(r,!d);t.dropdown.selectOption(r,e,function(){if(A){var w=A.getAttribute("value");A=t.dropdown.getSuggestionNodeByValue(w),t.dropdown.highlightOption(A)}})}else t.dropdown.hide(),o||t.addTags(t.state.inputText.trim(),!0)}).catch(function(A){return _n.warn(A)});break;case"Backspace":if(o||t.state.editing.scope)return;var _=t.input.raw.call(t);_!=""&&_.charCodeAt(0)!=8203||(n.backspace===!0?t.removeTags():n.backspace=="edit"&&setTimeout(t.editTag.bind(t),0))}})}},onMouseOver:function(e){var t=e.target.closest(this.settings.classNames.dropdownItemSelector);this.dropdown.highlightOption(t)},onMouseLeave:function(e){this.dropdown.highlightOption()},onClick:function(e){var t=this;if(e.button==0&&e.target!=this.DOM.dropdown&&e.target!=this.DOM.dropdown.content){var n=e.target.closest(this.settings.classNames.dropdownItemSelector),i=this.dropdown.getSuggestionDataByNode(n);this.state.actions.selectOption=!0,setTimeout(function(){return t.state.actions.selectOption=!1},100),this.settings.hooks.suggestionClick(e,{tagify:this,tagData:i,suggestionElm:n}).then(function(){n?t.dropdown.selectOption(n,e):t.dropdown.hide()}).catch(function(r){return _n.warn(r)})}},onScroll:function(e){var t=e.target,n=t.scrollTop/(t.scrollHeight-t.parentNode.clientHeight)*100;this.trigger("dropdown:scroll",{percentage:Math.round(n)})}}},refilter:function(e){e=e||this.state.dropdown.query||"",this.suggestedListItems=this.dropdown.filterListItems(e),this.dropdown.fill(),this.suggestedListItems.length||this.dropdown.hide(),this.trigger("dropdown:updated",this.DOM.dropdown)},getSuggestionDataByNode:function(e){for(var t,n=e&&e.getAttribute("value"),i=this.suggestedListItems.length;i--;){if(Ae(t=this.suggestedListItems[i])&&t.value==n)return t;if(t==n)return{value:t}}},getSuggestionNodeByValue:function(e){return this.dropdown.getAllSuggestionsRefs().find(function(t){return t.getAttribute("value")===e})},getNextOrPrevOption:function(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this.dropdown.getAllSuggestionsRefs(),i=n.findIndex(function(r){return r===e});return t?n[i+1]:n[i-1]},highlightOption:function(e,t){var n,i=this.settings.classNames.dropdownItemActive;if(this.state.ddItemElm&&(this.state.ddItemElm.classList.remove(i),this.state.ddItemElm.removeAttribute("aria-selected")),!e)return this.state.ddItemData=null,this.state.ddItemElm=null,void this.input.autocomplete.suggest.call(this);n=this.dropdown.getSuggestionDataByNode(e),this.state.ddItemData=n,this.state.ddItemElm=e,e.classList.add(i),e.setAttribute("aria-selected",!0),t&&(e.parentNode.scrollTop=e.clientHeight+e.offsetTop-e.parentNode.clientHeight),this.settings.autoComplete&&(this.input.autocomplete.suggest.call(this,n),this.dropdown.position())},selectOption:function(e,t,n){var i=this,r=this.settings,s=r.dropdown.includeSelectedTags,o=r.dropdown,a=o.clearOnSelect,l=o.closeOnSelect;if(!e)return this.addTags(this.state.inputText,!0),void(l&&this.dropdown.hide());t=t||{};var c=e.getAttribute("value"),d=c=="noMatch",u=r.mode=="mix",h=this.suggestedListItems.find(function(p){var g;return((g=p.value)!==null&&g!==void 0?g:p)==c});if(this.trigger("dropdown:select",{data:h,elm:e,event:t}),h||d){if(this.state.editing){var f=this.normalizeTags([h])[0];h=r.transformTag.call(this,f)||f,this.onEditTagDone(null,bt({__isValid:!0},h))}else this[u?"addMixTags":"addTags"]([h||this.input.raw.call(this)],a);(u||this.DOM.input.parentNode)&&(setTimeout(function(){i.DOM.input.focus(),i.toggleFocusClass(!0)}),l&&setTimeout(this.dropdown.hide.bind(this)),s?n&&n():(e.addEventListener("transitionend",function(){i.dropdown.fillHeaderFooter(),setTimeout(function(){e.remove(),i.dropdown.refilter(),n&&n()},100)},{once:!0}),e.classList.add(this.settings.classNames.dropdownItemHidden)))}else l&&setTimeout(this.dropdown.hide.bind(this))},selectAll:function(e){this.suggestedListItems.length=0,this.dropdown.hide(),this.dropdown.filterListItems("");var t=this.dropdown.filterListItems("");return e||(t=this.state.dropdown.suggestions),this.addTags(t,!0),this},filterListItems:function(e,t){var n,i,r,s,o,a,l=function(){var A,w,T=void 0,D=void 0;A=p[E],i=((w=Object)!=null&&typeof Symbol<"u"&&w[Symbol.hasInstance]?w[Symbol.hasInstance](A):A instanceof w)?p[E]:{value:p[E]};var O,N=Object.keys(i).some(function(I){return b.includes(I)})?b:["value"];u.fuzzySearch&&!t.exact?(s=N.reduce(function(I,$){return I+" "+(i[$]||"")},"").toLowerCase().trim(),u.accentedSearch&&(s=zs(s),a=zs(a)),T=s.indexOf(a)==0,D=s===a,O=s,r=a.toLowerCase().split(" ").every(function(I){return O.includes(I.toLowerCase())})):(T=!0,r=N.some(function(I){var $=""+(i[I]||"");return u.accentedSearch&&($=zs($),a=zs(a)),u.caseSensitive||($=$.toLowerCase()),D=$===a,t.exact?$===a:$.indexOf(a)==0})),o=!u.includeSelectedTags&&n.isTagDuplicate(Ae(i)?i.value:i),r&&!o&&(D&&T?f.push(i):u.sortby=="startsWith"&&T?h.unshift(i):h.push(i))},c=this,d=this.settings,u=d.dropdown,h=(t=t||{},[]),f=[],p=d.whitelist,g=u.maxItems>=0?u.maxItems:1/0,m=u.includeSelectedTags,v=typeof u.sortby=="function",b=u.searchKeys,E=0;if(!(e=d.mode=="select"&&this.value.length&&this.value[0][d.tagTextProp]==e?"":e)||!b.length){h=m?p:p.filter(function(A){return!c.isTagDuplicate(Ae(A)?A.value:A)});var _=v?u.sortby(h,a):h.slice(0,g);return this.state.dropdown.suggestions=_,_}for(a=u.caseSensitive?""+e:(""+e).toLowerCase();E<p.length;E++)n=this,l();return this.state.dropdown.suggestions=f.concat(h),_=v?u.sortby(f.concat(h),a):f.concat(h).slice(0,g),this.state.dropdown.suggestions=_,_},getMappedValue:function(e){var t=this.settings.dropdown.mapValueTo;return t?typeof t=="function"?t(e):e[t]||e.value:e.value},createListHTML:function(e){var t=this;return bt([],e).map(function(n,i){typeof n!="string"&&typeof n!="number"||(n={value:n});var r=t.dropdown.getMappedValue(n);return r=typeof r=="string"&&t.settings.dropdown.escapeHTML?jn(r):r,t.settings.templates.dropdownItem.apply(t,[yb(bb({},n),{mappedValue:r}),t])}).join("")}}),Ri=(Ri={refs:function(){this.DOM.dropdown=this.parseTemplate("dropdown",[this.settings]),this.DOM.dropdown.content=this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-wrapper']")},getHeaderRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-header']")},getFooterRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-footer']")},getAllSuggestionsRefs:function(){return Eb(this.DOM.dropdown.content.querySelectorAll(this.settings.classNames.dropdownItemSelector))},show:function(e){var t,n,i,r=this,s=this.settings,o=s.mode=="mix"&&!s.enforceWhitelist,a=!s.whitelist||!s.whitelist.length,l=s.dropdown.position=="manual";if(e=e===void 0?this.state.inputText:e,!(a&&!o&&!s.templates.dropdownItemNoMatch||s.dropdown.enabled===!1||this.state.isLoading||this.settings.readonly)){if(clearTimeout(this.dropdownHide__bindEventsTimeout),this.suggestedListItems=this.dropdown.filterListItems(e),e&&!this.suggestedListItems.length&&(this.trigger("dropdown:noMatch",e),s.templates.dropdownItemNoMatch&&(i=s.templates.dropdownItemNoMatch.call(this,{value:e}))),!i){if(this.suggestedListItems.length)e&&o&&!this.state.editing.scope&&!dr(this.suggestedListItems[0].value,e)&&this.suggestedListItems.unshift({value:e});else{if(!e||!o||this.state.editing.scope)return this.input.autocomplete.suggest.call(this),void this.dropdown.hide();this.suggestedListItems=[{value:e}]}n=""+(Ae(t=this.suggestedListItems[0])?t.value:t),s.autoComplete&&n&&n.indexOf(e)==0&&this.input.autocomplete.suggest.call(this,t)}this.dropdown.fill(i),s.dropdown.highlightFirst&&this.dropdown.highlightOption(this.DOM.dropdown.content.querySelector(s.classNames.dropdownItemSelector)),this.state.dropdown.visible||setTimeout(this.dropdown.events.binding.bind(this)),this.state.dropdown.visible=e||!0,this.state.dropdown.query=e,this.setStateSelection(),l||setTimeout(function(){r.dropdown.position(),r.dropdown.render()}),setTimeout(function(){r.trigger("dropdown:show",r.DOM.dropdown)})}},hide:function(e){var t=this,n=this.DOM,i=n.scope,r=n.dropdown,s=this.settings.dropdown.position=="manual"&&!e;if(r&&document.body.contains(r)&&!s)return window.removeEventListener("resize",this.dropdown.position),this.dropdown.events.binding.call(this,!1),i.setAttribute("aria-expanded",!1),r.parentNode.removeChild(r),setTimeout(function(){t.state.dropdown.visible=!1},100),this.state.dropdown.query=this.state.ddItemData=this.state.ddItemElm=this.state.selection=null,this.state.tag&&this.state.tag.value.length&&(this.state.flaggedTags[this.state.tag.baseOffset]=this.state.tag),this.trigger("dropdown:hide",r),this},toggle:function(e){this.dropdown[this.state.dropdown.visible&&!e?"hide":"show"]()},getAppendTarget:function(){var e=this.settings.dropdown;return typeof e.appendTarget=="function"?e.appendTarget():e.appendTarget},render:function(){var e,t,n,i=this,r=(e=this.DOM.dropdown,(n=e.cloneNode(!0)).style.cssText="position:fixed; top:-9999px; opacity:0",document.body.appendChild(n),t=n.clientHeight,n.parentNode.removeChild(n),t),s=this.settings,o=this.dropdown.getAppendTarget();return s.dropdown.enabled===!1||(this.DOM.scope.setAttribute("aria-expanded",!0),document.body.contains(this.DOM.dropdown)||(this.DOM.dropdown.classList.add(s.classNames.dropdownInital),this.dropdown.position(r),o.appendChild(this.DOM.dropdown),setTimeout(function(){return i.DOM.dropdown.classList.remove(s.classNames.dropdownInital)}))),this},fill:function(e){e=typeof e=="string"?e:this.dropdown.createListHTML(e||this.suggestedListItems);var t,n=this.settings.templates.dropdownContent.call(this,e);this.DOM.dropdown.content.innerHTML=(t=n)?t.replace(/\>[\r\n ]+\</g,"><").split(/>\s+</).join("><").trim():""},fillHeaderFooter:function(){var e=this.dropdown.filterListItems(this.state.dropdown.query),t=this.parseTemplate("dropdownHeader",[e]),n=this.parseTemplate("dropdownFooter",[e]),i=this.dropdown.getHeaderRef(),r=this.dropdown.getFooterRef();t&&i?.parentNode.replaceChild(t,i),n&&r?.parentNode.replaceChild(n,r)},position:function(e){var t=this.settings.dropdown,n=this.dropdown.getAppendTarget();if(t.position!="manual"&&n){var i,r,s,o,a,l,c,d,u,h,f=this.DOM.dropdown,p=t.RTL,g=n===document.body,m=n===this.DOM.scope,v=g?window.pageYOffset:n.scrollTop,b=document.fullscreenElement||document.webkitFullscreenElement||document.documentElement,E=b.clientHeight,_=Math.max(b.clientWidth||0,window.innerWidth||0),A=_>480?t.position:"all",w=this.DOM[A=="input"?"input":"scope"];if(e=e||f.clientHeight,this.state.dropdown.visible){if(A=="text"?(s=(i=function(){var O=document.getSelection();if(O.rangeCount){var N,I,$=O.getRangeAt(0),H=$.startContainer,z=$.startOffset;if(z>0)return(I=document.createRange()).setStart(H,z-1),I.setEnd(H,z),{left:(N=I.getBoundingClientRect()).right,top:N.top,bottom:N.bottom};if(H.getBoundingClientRect)return H.getBoundingClientRect()}return{left:-9999,top:-9999}}()).bottom,r=i.top,o=i.left,a="auto"):(l=function(O){var N=0,I=0;for(O=O.parentNode;O&&O!=b;)N+=O.offsetTop||0,I+=O.offsetLeft||0,O=O.parentNode;return{top:N,left:I}}(n),i=w.getBoundingClientRect(),r=m?-1:i.top-l.top,s=(m?i.height:i.bottom-l.top)-1,o=m?-1:i.left-l.left,a=i.width+"px"),!g){var T=function(){for(var O=0,N=t.appendTarget.parentNode;N;)O+=N.scrollTop||0,N=N.parentNode;return O}();r+=T,s+=T}var D;r=Math.floor(r),s=Math.ceil(s),d=_-o<120,u=((c=(D=t.placeAbove)!==null&&D!==void 0?D:E-i.bottom<e)?r:s)+v,h=o+(p&&i.width||0)+window.pageXOffset,h=A=="text"&&d?"right: 0;":"left: ".concat(h,"px;"),f.style.cssText="".concat(h," top: ").concat(u,"px; min-width: ").concat(a,"; max-width: ").concat(a),f.setAttribute("placement",c?"top":"bottom"),f.setAttribute("position",A)}}}})!=null?Ri:{},Object.getOwnPropertyDescriptors?Object.defineProperties(Ks,Object.getOwnPropertyDescriptors(Ri)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}(Object(Ri)).forEach(function(e){Object.defineProperty(Ks,e,Object.getOwnPropertyDescriptor(Ri,e))}),Ks),ur="@yaireo/tagify/",Ab={empty:"empty",exceed:"number of tags exceeded",pattern:"pattern mismatch",duplicate:"already exists",notAllowed:"not allowed"},xb={wrapper:function(e,t){return'<tags class="'.concat(t.classNames.namespace," ").concat(t.mode?"".concat(t.classNames[t.mode+"Mode"]):""," ").concat(e.className,`"
                    `).concat(t.readonly?"readonly":"",`
                    `).concat(t.disabled?"disabled":"",`
                    `).concat(t.required?"required":"",`
                    `).concat(t.mode==="select"?"spellcheck='false'":"",`
                    tabIndex="-1">
                    `).concat(this.settings.templates.input.call(this),`
                `).concat(ld,`
        </tags>`)},input:function(){var e=this.settings,t=e.placeholder||ld;return"<span ".concat(!e.readonly&&e.userInput?"contenteditable":"",' data-can-editable tabIndex="0" data-placeholder="').concat(t,'" aria-placeholder="').concat(e.placeholder||"",`"
                    class="`).concat(e.classNames.input,`"
                    role="textbox"
                    autocapitalize="false"
                    autocorrect="off"
                    aria-autocomplete="both"
                    aria-multiline="`).concat(e.mode=="mix",'"></span>')},tag:function(e,t){var n=t.settings;return'<tag title="'.concat(e.title||e.value,`"
                    contenteditable='false'
                    tabIndex="`).concat(n.a11y.focusableTags?0:-1,`"
                    class="`).concat(n.classNames.tag," ").concat(e.class||"",`"
                    `).concat(this.getAttributes(e),`>
            <x title='' tabIndex="`).concat(n.a11y.focusableTags?0:-1,'" class="').concat(n.classNames.tagX,`" role='button' aria-label='remove tag'></x>
            <div>
                <span `).concat(n.mode==="select"&&n.userInput?"contenteditable='true'":"",` autocapitalize="false" autocorrect="off" spellcheck='false' class="`).concat(n.classNames.tagText,'">').concat(e[n.tagTextProp]||e.value,`</span>
            </div>
        </tag>`)},dropdown:function(e){var t=e.dropdown,n=t.position=="manual";return'<div class="'.concat(n?"":e.classNames.dropdown," ").concat(t.classname,'" role="listbox" aria-labelledby="dropdown" dir="').concat(t.RTL?"rtl":"",`">
                    <div data-selector='tagify-suggestions-wrapper' class="`).concat(e.classNames.dropdownWrapper,`"></div>
                </div>`)},dropdownContent:function(e){var t=this.settings.templates,n=this.state.dropdown.suggestions;return`
            `.concat(t.dropdownHeader.call(this,n),`
            `).concat(e,`
            `).concat(t.dropdownFooter.call(this,n),`
        `)},dropdownItem:function(e){return"<div ".concat(this.getAttributes(e),`
                    class='`).concat(this.settings.classNames.dropdownItem," ").concat(this.isTagDuplicate(e.value)?this.settings.classNames.dropdownItemSelected:""," ").concat(e.class||"",`'
                    tabindex="0"
                    role="option">`).concat(e.mappedValue||e.value,"</div>")},dropdownHeader:function(e){return`<header data-selector='tagify-suggestions-header' class="`.concat(this.settings.classNames.dropdownHeader,'"></header>')},dropdownFooter:function(e){var t=e.length-this.settings.dropdown.maxItems;return t>0?`<footer data-selector='tagify-suggestions-footer' class="`.concat(this.settings.classNames.dropdownFooter,`">
                `).concat(t,` more items. Refine your search.
            </footer>`):""},dropdownItemNoMatch:null};function md(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function vd(e,t){return t!=null&&typeof Symbol<"u"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function Ob(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,i){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var s,o,a=[],l=!0,c=!1;try{for(r=r.call(n);!(l=(s=r.next()).done)&&(a.push(s.value),!i||a.length!==i);l=!0);}catch(d){c=!0,o=d}finally{try{l||r.return==null||r.return()}finally{if(c)throw o}}return a}}(e,t)||function(n,i){if(n){if(typeof n=="string")return md(n,i);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return md(n,i)}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Va(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _d(e,t){return t!=null&&typeof Symbol<"u"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function Cb(e,t){return t=t??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(n,i){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);i&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,s)}return r}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function qa(e){return function(t){if(Array.isArray(t))return Va(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,n){if(t){if(typeof t=="string")return Va(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Va(t,n)}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Pb={customBinding:function(){var e=this;this.customEventsList.forEach(function(t){e.on(t,e.settings.callbacks[t])})},binding:function(){var e,t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],n=this.settings,i=this.events.callbacks,r=t?"addEventListener":"removeEventListener";if(!(this.state.mainEvents&&t||n.disabled||n.readonly)){for(var s in this.state.mainEvents=t,t&&!this.listeners.main&&(this.events.bindGlobal.call(this),this.settings.isJQueryPlugin&&jQuery(this.DOM.originalInput).on("tagify.removeAllTags",this.removeAllTags.bind(this))),e=this.listeners.main=this.listeners.main||{keydown:["input",i.onKeydown.bind(this)],click:["scope",i.onClickScope.bind(this)],dblclick:n.mode!="select"&&["scope",i.onDoubleClickScope.bind(this)],paste:["input",i.onPaste.bind(this)],drop:["input",i.onDrop.bind(this)],compositionstart:["input",i.onCompositionStart.bind(this)],compositionend:["input",i.onCompositionEnd.bind(this)]})e[s]&&this.DOM[e[s][0]][r](s,e[s][1]);var o=this.listeners.main.inputMutationObserver||new MutationObserver(i.onInputDOMChange.bind(this));o.disconnect(),n.mode=="mix"&&o.observe(this.DOM.input,{childList:!0}),this.events.bindOriginaInputListener.call(this)}},bindOriginaInputListener:function(e){var t=(e||0)+500;this.listeners.main&&(clearInterval(this.listeners.main.originalInputValueObserverInterval),this.listeners.main.originalInputValueObserverInterval=setInterval(this.events.callbacks.observeOriginalInputValue.bind(this),t))},bindGlobal:function(e){var t,n=this.events.callbacks,i=e?"removeEventListener":"addEventListener";if(this.listeners&&(e||!this.listeners.global)){this.listeners.global=this.listeners.global||[{type:this.isIE?"keydown":"input",target:this.DOM.input,cb:n[this.isIE?"onInputIE":"onInput"].bind(this)},{type:"keydown",target:window,cb:n.onWindowKeyDown.bind(this)},{type:"focusin",target:this.DOM.scope,cb:n.onFocusBlur.bind(this)},{type:"focusout",target:this.DOM.scope,cb:n.onFocusBlur.bind(this)},{type:"click",target:document,cb:n.onClickAnywhere.bind(this),useCapture:!0}];var r=!0,s=!1,o=void 0;try{for(var a,l=this.listeners.global[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)(t=a.value).target[i](t.type,t.cb,!!t.useCapture)}catch(c){s=!0,o=c}finally{try{r||l.return==null||l.return()}finally{if(s)throw o}}}},unbindGlobal:function(){this.events.bindGlobal.call(this,!0)},callbacks:{onFocusBlur:function(e){var t,n,i=this.settings,r=gd.call(this,e.relatedTarget),s=Bn.call(this,e.target),o=e.target.classList.contains(i.classNames.tagX),a=e.type=="focusin",l=e.type=="focusout";o&&i.mode!="mix"&&i.focusInputOnRemove&&this.DOM.input.focus(),r&&a&&!s&&!o&&this.toggleFocusClass(this.state.hasFocus=+new Date);var c=e.target?this.trim(this.DOM.input.textContent):"",d=(n=this.value)===null||n===void 0||(t=n[0])===null||t===void 0?void 0:t[i.tagTextProp],u=i.dropdown.enabled>=0,h={relatedTarget:e.relatedTarget},f=this.state.actions.selectOption&&(u||!i.dropdown.closeOnSelect),p=this.state.actions.addNew&&u;if(l){if(e.relatedTarget===this.DOM.scope)return this.dropdown.hide(),void this.DOM.input.focus();this.postUpdate(),i.onChangeAfterBlur&&this.triggerChangeEvent()}if(!(f||p||o))if(this.state.hasFocus=!(!a&&!r)&&+new Date,this.toggleFocusClass(this.state.hasFocus),i.mode!="mix"){if(a){if(!i.focusable)return;var g=i.dropdown.enabled===0&&!this.state.dropdown.visible,m=this.DOM.scope.querySelector(this.settings.classNames.tagTextSelector);return this.trigger("focus",h),void(g&&!s&&(this.dropdown.show(this.value.length?"":void 0),i.mode==="select"&&this.setRangeAtStartEnd(!1,m)))}if(l){if(this.trigger("blur",h),this.loading(!1),i.mode=="select"){if(this.value.length){var v=this.getTagElms()[0];c=this.trim(v.textContent)}d===c&&(c="")}c&&!this.state.actions.selectOption&&i.addTagOnBlur&&i.addTagOn.includes("blur")&&this.addTags(c,!0)}r||(this.DOM.input.removeAttribute("style"),this.dropdown.hide())}else a?this.trigger("focus",h):l&&(this.trigger("blur",h),this.loading(!1),this.dropdown.hide(),this.state.dropdown.visible=void 0,this.setStateSelection())},onCompositionStart:function(e){this.state.composing=!0},onCompositionEnd:function(e){this.state.composing=!1},onWindowKeyDown:function(e){var t,n=this.settings,i=document.activeElement,r=gd.call(this,i)&&this.DOM.scope.contains(i),s=i===this.DOM.input,o=r&&i.hasAttribute("readonly"),a=this.DOM.scope.querySelector(this.settings.classNames.tagTextSelector),l=this.state.dropdown.visible;if((e.key==="Tab"&&l||this.state.hasFocus||r&&!o)&&!s){t=i.nextElementSibling;var c=e.target.classList.contains(n.classNames.tagX);switch(e.key){case"Backspace":n.readonly||this.state.editing||(this.removeTags(i),(t||this.DOM.input).focus());break;case"Enter":if(c)return void this.removeTags(e.target.parentNode);n.a11y.focusableTags&&Bn.call(this,i)&&setTimeout(this.editTag.bind(this),0,i);break;case"ArrowDown":this.state.dropdown.visible||n.mode=="mix"||this.dropdown.show();break;case"Tab":a?.focus()}}},onKeydown:function(e){var t=this,n=this.settings;if(!this.state.composing&&n.userInput){n.mode=="select"&&n.enforceWhitelist&&this.value.length&&e.key!="Tab"&&e.preventDefault();var i=this.trim(e.target.textContent);this.trigger("keydown",{event:e}),n.hooks.beforeKeyDown(e,{tagify:this}).then(function(r){if(n.mode=="mix"){switch(e.key){case"Left":case"ArrowLeft":t.state.actions.ArrowLeft=!0;break;case"Delete":case"Backspace":if(t.state.editing)return;var s=document.getSelection(),o=e.key=="Delete"&&s.anchorOffset==(s.anchorNode.length||0),a=s.anchorNode.previousSibling,l=s.anchorNode.nodeType==1||!s.anchorOffset&&a&&a.nodeType==1&&s.anchorNode.previousSibling;(function(v){var b=document.createElement("div");v.replace(/\&#?[0-9a-z]+;/gi,function(E){return b.innerHTML=E,b.innerText})})(t.DOM.input.innerHTML);var c,d,u,h=t.getTagElms(),f=s.anchorNode.length===1&&s.anchorNode.nodeValue=="\u200B";if(n.backspace=="edit"&&l)return c=s.anchorNode.nodeType==1?null:s.anchorNode.previousElementSibling,setTimeout(t.editTag.bind(t),0,c),void e.preventDefault();if(fd()&&_d(l,Element))return u=dd(l),l.hasAttribute("readonly")||l.remove(),t.DOM.input.focus(),void setTimeout(function(){vn(u),t.DOM.input.click()});if(s.anchorNode.nodeName=="BR")return;if((o||l)&&s.anchorNode.nodeType==1?d=s.anchorOffset==0?o?h[0]:null:h[Math.min(h.length,s.anchorOffset)-1]:o?d=s.anchorNode.nextElementSibling:_d(l,Element)&&(d=l),s.anchorNode.nodeType==3&&!s.anchorNode.nodeValue&&s.anchorNode.previousElementSibling&&e.preventDefault(),(l||o)&&!n.backspace||s.type!="Range"&&!s.anchorOffset&&s.anchorNode==t.DOM.input&&e.key!="Delete")return void e.preventDefault();if(s.type!="Range"&&d&&d.hasAttribute("readonly"))return void vn(dd(d));e.key=="Delete"&&f&&Z(s.anchorNode.nextSibling)&&t.removeTags(s.anchorNode.nextSibling)}return!0}var p=n.dropdown.position=="manual";switch(e.key){case"Backspace":n.mode=="select"&&n.enforceWhitelist&&t.value.length?t.removeTags():t.state.dropdown.visible&&n.dropdown.position!="manual"||e.target.textContent!=""&&i.charCodeAt(0)!=8203||(n.backspace===!0?t.removeTags():n.backspace=="edit"&&setTimeout(t.editTag.bind(t),0));break;case"Esc":case"Escape":if(t.state.dropdown.visible)return;e.target.blur();break;case"Down":case"ArrowDown":t.state.dropdown.visible||t.dropdown.show();break;case"ArrowRight":var g=t.state.inputSuggestion||t.state.ddItemData;if(g&&n.autoComplete.rightKey)return void t.addTags([g],!0);break;case"Tab":return!0;case"Enter":if(t.state.dropdown.visible&&!p)return;e.preventDefault();var m=t.state.autoCompleteData||i;setTimeout(function(){t.state.dropdown.visible&&!p||t.state.actions.selectOption||!n.addTagOn.includes(e.key.toLowerCase())||(t.addTags([m],!0),t.state.autoCompleteData=null)})}}).catch(function(r){return r})}},onInput:function(e){this.postUpdate();var t=this.settings;if(t.mode=="mix")return this.events.callbacks.onMixTagsInput.call(this,e);var n=this.input.normalize.call(this,void 0,{trim:!1}),i=n.length>=t.dropdown.enabled,r={value:n,inputElm:this.DOM.input},s=this.validateTag({value:n});t.mode=="select"&&this.toggleScopeValidation(s),r.isValid=s,this.state.inputText!=n&&(this.input.set.call(this,n,!1),n.search(t.delimiters)!=-1?this.addTags(n)&&this.input.set.call(this):t.dropdown.enabled>=0&&this.dropdown[i?"show":"hide"](n),this.trigger("input",r))},onMixTagsInput:function(e){var t,n,i,r,s,o,a,l,c=this,d=this.settings,u=this.value.length,h=this.getTagElms(),f=document.createDocumentFragment(),p=window.getSelection().getRangeAt(0),g=[].map.call(h,function(m){return Z(m).value});if(e.inputType=="deleteContentBackward"&&fd()&&this.events.callbacks.onKeydown.call(this,{target:e.target,key:"Backspace"}),Ed(this.getTagElms()),this.value.slice().forEach(function(m){m.readonly&&!g.includes(m.value)&&f.appendChild(c.createTagElem(m))}),f.childNodes.length&&(p.insertNode(f),this.setRangeAtStartEnd(!1,f.lastChild)),h.length!=u)return this.value=[].map.call(this.getTagElms(),function(m){return Z(m)}),void this.update({withoutChangeEvent:!0});if(this.hasMaxTags())return!0;if(window.getSelection&&(o=window.getSelection()).rangeCount>0&&o.anchorNode.nodeType==3){if((p=o.getRangeAt(0).cloneRange()).collapse(!0),p.setStart(o.focusNode,0),i=(t=p.toString().slice(0,p.endOffset)).split(d.pattern).length-1,(n=t.match(d.pattern))&&(r=t.slice(t.lastIndexOf(n[n.length-1]))),r){if(this.state.actions.ArrowLeft=!1,this.state.tag={prefix:r.match(d.pattern)[0],value:r.replace(d.pattern,"")},this.state.tag.baseOffset=o.baseOffset-this.state.tag.value.length,l=this.state.tag.value.match(d.delimiters))return this.state.tag.value=this.state.tag.value.replace(d.delimiters,""),this.state.tag.delimiters=l[0],this.addTags(this.state.tag.value,d.dropdown.clearOnSelect),void this.dropdown.hide();s=this.state.tag.value.length>=d.dropdown.enabled;try{a=(a=this.state.flaggedTags[this.state.tag.baseOffset]).prefix==this.state.tag.prefix&&a.value[0]==this.state.tag.value[0],this.state.flaggedTags[this.state.tag.baseOffset]&&!this.state.tag.value&&delete this.state.flaggedTags[this.state.tag.baseOffset]}catch{}(a||i<this.state.mixMode.matchedPatternCount)&&(s=!1)}else this.state.flaggedTags={};this.state.mixMode.matchedPatternCount=i}setTimeout(function(){c.update({withoutChangeEvent:!0}),c.trigger("input",bt({},c.state.tag,{textContent:c.DOM.input.textContent})),c.state.tag&&c.dropdown[s?"show":"hide"](c.state.tag.value)},10)},onInputIE:function(e){var t=this;setTimeout(function(){t.events.callbacks.onInput.call(t,e)})},observeOriginalInputValue:function(){this.DOM.originalInput.parentNode||this.destroy(),this.DOM.originalInput.value!=this.DOM.originalInput.tagifyValue&&this.loadOriginalValues()},onClickAnywhere:function(e){if(e.target!=this.DOM.scope&&!this.DOM.scope.contains(e.target)){this.toggleFocusClass(!1),this.state.hasFocus=!1;var t=e.target.closest(this.settings.classNames.dropdownSelector);t?.__tagify!=this&&this.dropdown.hide()}},onClickScope:function(e){var t=this.settings,n=e.target.closest("."+t.classNames.tag);e.target,this.DOM.scope;var i=+new Date-this.state.hasFocus;if(!e.target.classList.contains(t.classNames.tagX))return n&&!this.state.editing?(this.trigger("click",{tag:n,index:this.getNodeIndex(n),data:Z(n),event:e}),void(t.editTags!==1&&t.editTags.clicks!==1&&t.mode!="select"||this.events.callbacks.onDoubleClickScope.call(this,e))):void(e.target==this.DOM.input&&(t.mode=="mix"&&this.fixFirefoxLastTagNoCaret(),i>500||!t.focusable)?this.state.dropdown.visible?this.dropdown.hide():t.dropdown.enabled===0&&t.mode!="mix"&&this.dropdown.show(this.value.length?"":void 0):t.mode!="select"||t.dropdown.enabled!==0||this.state.dropdown.visible||(this.events.callbacks.onDoubleClickScope.call(this,Cb(function(r){for(var s=1;s<arguments.length;s++){var o=arguments[s]!=null?arguments[s]:{},a=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable}))),a.forEach(function(l){Hn(r,l,o[l])})}return r}({},e),{target:this.getTagElms()[0]})),!t.userInput&&this.dropdown.show()));this.removeTags(e.target.parentNode)},onPaste:function(e){var t=this;e.preventDefault();var n,i,r,s=this.settings;if(!s.userInput)return!1;s.readonly||(i=e.clipboardData||window.clipboardData,r=i.getData("Text"),s.hooks.beforePaste(e,{tagify:this,pastedText:r,clipboardData:i}).then(function(o){o===void 0&&(o=r),o&&(t.injectAtCaret(o,window.getSelection().getRangeAt(0)),t.settings.mode=="mix"?t.events.callbacks.onMixTagsInput.call(t,e):t.settings.pasteAsTags?n=t.addTags(t.state.inputText+o,!0):(t.state.inputText=o,t.dropdown.show(o))),t.trigger("paste",{event:e,pastedText:r,clipboardData:i,tagsElems:n})}).catch(function(o){return o}))},onDrop:function(e){e.preventDefault()},onEditTagInput:function(e,t){var n,i=e.closest("."+this.settings.classNames.tag),r=this.getNodeIndex(i),s=Z(i),o=this.input.normalize.call(this,e),a=(Hn(n={},this.settings.tagTextProp,o),Hn(n,"__tagId",s.__tagId),n),l=this.validateTag(a);this.editTagChangeDetected(bt(s,a))||e.originalIsValid!==!0||(l=!0),i.classList.toggle(this.settings.classNames.tagInvalid,l!==!0),s.__isValid=l,i.title=l===!0?s.title||s.value:l,o.length>=this.settings.dropdown.enabled&&(this.state.editing&&(this.state.editing.value=o),this.dropdown.show(o)),this.trigger("edit:input",{tag:i,index:r,data:bt({},this.value[r],{newValue:o}),event:t})},onEditTagPaste:function(e,t){var n=(t.clipboardData||window.clipboardData).getData("Text");t.preventDefault();var i=wd(n);this.setRangeAtStartEnd(!1,i)},onEditTagClick:function(e,t){this.events.callbacks.onClickScope.call(this,t)},onEditTagFocus:function(e){this.state.editing={scope:e,input:e.querySelector("[contenteditable]")}},onEditTagBlur:function(e,t){var n=Bn.call(this,t.relatedTarget);if(this.settings.mode=="select"&&n&&t.relatedTarget.contains(t.target))this.dropdown.hide();else if(this.state.editing&&(this.state.hasFocus||this.toggleFocusClass(),this.DOM.scope.contains(document.activeElement)||this.trigger("blur",{}),this.DOM.scope.contains(e))){var i,r,s,o=this.settings,a=e.closest("."+o.classNames.tag),l=Z(a),c=this.input.normalize.call(this,e),d=(Hn(i={},o.tagTextProp,c),Hn(i,"__tagId",l.__tagId),i),u=l.__originalData,h=this.editTagChangeDetected(bt(l,d)),f=this.validateTag(d);if(c)if(h){var p;if(r=this.hasMaxTags(),s=bt({},u,(Hn(p={},o.tagTextProp,this.trim(c)),Hn(p,"__isValid",f),p)),o.transformTag.call(this,s,u),(f=(!r||u.__isValid===!0)&&this.validateTag(s))!==!0){if(this.trigger("invalid",{data:s,tag:a,message:f}),o.editTags.keepInvalid)return;o.keepInvalidTags?s.__isValid=f:s=u}else o.keepInvalidTags&&(delete s.title,delete s["aria-invalid"],delete s.class);this.onEditTagDone(a,s)}else this.onEditTagDone(a,u);else this.onEditTagDone(a)}},onEditTagkeydown:function(e,t){if(!this.state.composing)switch(this.trigger("edit:keydown",{event:e}),e.key){case"Esc":case"Escape":this.state.editing=!1,t.__tagifyTagData.__originalData.value?t.parentNode.replaceChild(t.__tagifyTagData.__originalHTML,t):t.remove();break;case"Enter":case"Tab":e.preventDefault(),setTimeout(function(){return e.target.blur()},0)}},onDoubleClickScope:function(e){var t=e.target.closest("."+this.settings.classNames.tag);if(t){var n,i,r=Z(t),s=this.settings;r?.editable!==!1&&(n=t.classList.contains(this.settings.classNames.tagEditing),i=t.hasAttribute("readonly"),s.readonly||n||i||!this.settings.editTags||!s.userInput||(this.events.callbacks.onEditTagFocus.call(this,t),this.editTag(t)),this.toggleFocusClass(!0),s.mode!="select"&&this.trigger("dblclick",{tag:t,index:this.getNodeIndex(t),data:Z(t)}))}},onInputDOMChange:function(e){var t=this;e.forEach(function(i){i.addedNodes.forEach(function(r){if(r.outerHTML=="<div><br></div>")r.replaceWith(document.createElement("br"));else if(r.nodeType==1&&r.querySelector(t.settings.classNames.tagSelector)){var s,o=document.createTextNode("");r.childNodes[0].nodeType==3&&r.previousSibling.nodeName!="BR"&&(o=document.createTextNode(`
`)),(s=r).replaceWith.apply(s,qa([o].concat(qa(qa(r.childNodes).slice(0,-1))))),vn(o)}else if(Bn.call(t,r)){var a;if(((a=r.previousSibling)===null||a===void 0?void 0:a.nodeType)!=3||r.previousSibling.textContent||r.previousSibling.remove(),r.previousSibling&&r.previousSibling.nodeName=="BR"){r.previousSibling.replaceWith(`
\u200B`);for(var l=r.nextSibling,c="";l;)c+=l.textContent,l=l.nextSibling;c.trim()&&vn(r.previousSibling)}else r.previousSibling&&!Z(r.previousSibling)||r.before("\u200B")}}),i.removedNodes.forEach(function(r){r&&r.nodeName=="BR"&&Bn.call(t,n)&&(t.removeTags(n),t.fixFirefoxLastTagNoCaret())})});var n=this.DOM.input.lastChild;n&&n.nodeValue==""&&n.remove(),n&&n.nodeName=="BR"||this.DOM.input.appendChild(document.createElement("br"))}}};function Wa(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ka(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ue(e,t){return t!=null&&typeof Symbol<"u"&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function bd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),i.forEach(function(r){Ka(e,r,n[r])})}return e}function Xs(e){return function(t){if(Array.isArray(t))return Wa(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,n){if(t){if(typeof t=="string")return Wa(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Wa(t,n)}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hr(e,t){if(!e){_n.warn("input element not found",e);var n=new Proxy(this,{get:function(){return function(){return n}}});return n}if(e.__tagify)return _n.warn("input element is already Tagified - Same instance is returned.",e),e.__tagify;var i;bt(this,function(r){var s=document.createTextNode(""),o={};function a(l,c,d){d&&c.split(/\s+/g).forEach(function(u){return s[l+"EventListener"].call(s,u,d)})}return{removeAllCustomListeners:function(){Object.entries(o).forEach(function(l){var c=Ob(l,2),d=c[0];c[1].forEach(function(u){return a("remove",d,u)})}),o={}},off:function(l,c){return l&&(c?a("remove",l,c):l.split(/\s+/g).forEach(function(d){var u;(u=o[d])===null||u===void 0||u.forEach(function(h){return a("remove",d,h)}),delete o[d]})),this},on:function(l,c){return c&&typeof c=="function"&&(l.split(/\s+/g).forEach(function(d){Array.isArray(o[d])?o[d].push(c):o[d]=[c]}),a("add",l,c)),this},trigger:function(l,c,d){var u;if(d=d||{cloneData:!0},l)if(r.settings.isJQueryPlugin)l=="remove"&&(l="removeTag"),jQuery(r.DOM.originalInput).triggerHandler(l,[c]);else{try{var h=typeof c=="object"?c:{value:c};if((h=d.cloneData?bt({},h):h).tagify=this,c.event&&(h.event=this.cloneEvent(c.event)),vd(c,Object))for(var f in c)vd(c[f],HTMLElement)&&(h[f]=c[f]);u=new CustomEvent(l,{detail:h})}catch(p){_n.warn(p)}s.dispatchEvent(u)}}}}(this)),this.isFirefox=/firefox|fxios/i.test(navigator.userAgent)&&!/seamonkey/i.test(navigator.userAgent),this.isIE=window.document.documentMode,t=t||{},this.getPersistedData=(i=t.id,function(r){var s;if(i){var o,a="/"+r;if(((s=localStorage)===null||s===void 0?void 0:s.getItem(ur+i+"/v"))===1)try{o=JSON.parse(localStorage[ur+i+a])}catch{}return o}}),this.setPersistedData=function(r){var s;return r?((s=localStorage)===null||s===void 0||s.setItem(ur+r+"/v",1),function(o,a){var l,c="/"+a,d=JSON.stringify(o);o&&a&&((l=localStorage)===null||l===void 0||l.setItem(ur+r+c,d),dispatchEvent(new Event("storage")))}):function(){}}(t.id),this.clearPersistedData=function(r){return function(s){var o=ur+"/"+r+"/";if(s)localStorage.removeItem(o+s);else for(var a in localStorage)a.includes(o)&&localStorage.removeItem(a)}}(t.id),this.applySettings(e,t),this.state={inputText:"",editing:!1,composing:!1,actions:{},mixMode:{},dropdown:{},flaggedTags:{}},this.value=[],this.listeners={},this.DOM={},this.build(e),Tb.call(this),this.getCSSVars(),this.loadOriginalValues(),this.events.customBinding.call(this),this.events.binding.call(this),e.autofocus&&this.DOM.input.focus(),e.__tagify=this}hr.prototype={_dropdown:Sb,placeCaretAfterNode:vn,getSetTagData:Z,helpers:{sameStr:dr,removeCollectionProp:ud,omit:za,isObject:Ae,parseHTML:Ha,escapeHTML:jn,extend:bt,concatWithoutDups:hd,getUID:pd,isNodeTag:Bn},customEventsList:["change","add","remove","invalid","input","paste","click","keydown","focus","blur","edit:input","edit:beforeUpdate","edit:updated","edit:start","edit:keydown","dropdown:show","dropdown:hide","dropdown:select","dropdown:updated","dropdown:noMatch","dropdown:scroll"],dataProps:["__isValid","__removed","__originalData","__originalHTML","__tagId"],trim:function(e){return this.settings.trim&&e&&typeof e=="string"?e.trim():e},parseHTML:Ha,templates:xb,parseTemplate:function(e,t){return Ha((e=this.settings.templates[e]||e).apply(this,t))},set whitelist(e){var t=e&&Array.isArray(e);this.settings.whitelist=t?e:[],this.setPersistedData(t?e:[],"whitelist")},get whitelist(){return this.settings.whitelist},set userInput(e){this.settings.userInput=!!e,this.setContentEditable(!!e)},get userInput(){return this.settings.userInput},generateClassSelectors:function(e){var t=function(i){var r=i;Object.defineProperty(e,r+"Selector",{get:function(){return"."+this[r].split(" ")[0]}})};for(var n in e)t(n)},applySettings:function(e,t){var n,i;ja.templates=this.templates;var r=bt({},ja,t.mode=="mix"?{dropdown:{position:"text"}}:{}),s=this.settings=bt({},r,t);if(s.disabled=e.hasAttribute("disabled"),s.readonly=s.readonly||e.hasAttribute("readonly"),s.placeholder=jn(e.getAttribute("placeholder")||s.placeholder||""),s.required=e.hasAttribute("required"),this.generateClassSelectors(s.classNames),this.isIE&&(s.autoComplete=!1),["whitelist","blacklist"].forEach(function(a){var l=e.getAttribute("data-"+a);l&&Ue(l=l.split(s.delimiters),Array)&&(s[a]=l)}),"autoComplete"in t&&!Ae(t.autoComplete)&&(s.autoComplete=ja.autoComplete,s.autoComplete.enabled=t.autoComplete),s.mode=="mix"&&(s.pattern=s.pattern||/@/,s.autoComplete.rightKey=!0,s.delimiters=t.delimiters||null,s.tagTextProp&&!s.dropdown.searchKeys.includes(s.tagTextProp)&&s.dropdown.searchKeys.push(s.tagTextProp)),e.pattern)try{s.pattern=new RegExp(e.pattern)}catch{}if(s.delimiters){s._delimiters=s.delimiters;try{s.delimiters=new RegExp(this.settings.delimiters,"g")}catch{}}(s.disabled||s.readonly)&&(s.userInput=!1),this.TEXTS=bd({},Ab,s.texts||{}),s.mode=="select"&&(s.dropdown.includeSelectedTags=!0),(s.mode!="select"||!((n=t.dropdown)===null||n===void 0)&&n.enabled)&&s.userInput||(s.dropdown.enabled=0),s.disabled&&(s.dropdown.enabled=!1),s.dropdown.appendTarget=((i=t.dropdown)===null||i===void 0?void 0:i.appendTarget)||document.body,s.dropdown.includeSelectedTags===void 0&&(s.dropdown.includeSelectedTags=s.duplicates);var o=this.getPersistedData("whitelist");Array.isArray(o)&&(this.whitelist=Array.isArray(s.whitelist)?hd(s.whitelist,o):o)},getAttributes:function(e){var t,n=this.getCustomAttributes(e),i="";for(t in n)i+=" "+t+(e[t]!==void 0?'="'.concat(n[t],'"'):"");return i},getCustomAttributes:function(e){if(!Ae(e))return"";var t,n={};for(t in e)t.slice(0,2)!="__"&&t!="class"&&e.hasOwnProperty(t)&&e[t]!==void 0&&(n[t]=jn(e[t]));return n},setStateSelection:function(){var e=window.getSelection(),t={anchorOffset:e.anchorOffset,anchorNode:e.anchorNode,range:e.getRangeAt&&e.rangeCount&&e.getRangeAt(0)};return this.state.selection=t,t},getCSSVars:function(){var e,t,n,i=getComputedStyle(this.DOM.scope,null);this.CSSVars={tagHideTransition:(e=function(r){if(!r)return{};var s=(r=r.trim().split(" ")[0]).split(/\d+/g).filter(function(o){return o}).pop().trim();return{value:+r.split(s).filter(function(o){return o})[0].trim(),unit:s}}((n="tag-hide-transition",i.getPropertyValue("--"+n))),t=e.value,e.unit=="s"?1e3*t:t)}},build:function(e){var t=this.DOM,n=e.closest("label");this.settings.mixMode.integrated?(t.originalInput=null,t.scope=e,t.input=e):(t.originalInput=e,t.originalInput_tabIndex=e.tabIndex,t.scope=this.parseTemplate("wrapper",[e,this.settings]),t.input=t.scope.querySelector(this.settings.classNames.inputSelector),e.parentNode.insertBefore(t.scope,e),e.tabIndex=-1),n&&n.setAttribute("for","")},destroy:function(){var e;this.events.unbindGlobal.call(this),(e=this.DOM.scope.parentNode)===null||e===void 0||e.removeChild(this.DOM.scope),this.DOM.originalInput.tabIndex=this.DOM.originalInput_tabIndex,delete this.DOM.originalInput.__tagify,this.dropdown.hide(!0),this.removeAllCustomListeners(),clearTimeout(this.dropdownHide__bindEventsTimeout),clearInterval(this.listeners.main.originalInputValueObserverInterval)},loadOriginalValues:function(e){var t,n=this.settings;if(this.state.blockChangeEvent=!0,e===void 0){var i=this.getPersistedData("value");e=i&&!this.DOM.originalInput.value?i:n.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value}if(this.removeAllTags(),e)if(n.mode=="mix")this.parseMixTags(e),(t=this.DOM.input.lastChild)&&t.tagName=="BR"||this.DOM.input.insertAdjacentHTML("beforeend","<br>");else{try{Ue(JSON.parse(e),Array)&&(e=JSON.parse(e))}catch{}this.addTags(e,!0).forEach(function(r){return r&&r.classList.add(n.classNames.tagNoAnimation)})}else this.postUpdate();this.state.lastOriginalValueReported=n.mixMode.integrated?"":this.DOM.originalInput.value},cloneEvent:function(e){var t={};for(var n in e)n!="path"&&(t[n]=e[n]);return t},loading:function(e){return this.state.isLoading=e,this.DOM.scope.classList[e?"add":"remove"](this.settings.classNames.scopeLoading),this},tagLoading:function(e,t){return e&&e.classList[t?"add":"remove"](this.settings.classNames.tagLoading),this},toggleClass:function(e,t){typeof e=="string"&&this.DOM.scope.classList.toggle(e,t)},toggleScopeValidation:function(e){var t=e===!0||e===void 0;!this.settings.required&&e&&e===this.TEXTS.empty&&(t=!0),this.toggleClass(this.settings.classNames.tagInvalid,!t),this.DOM.scope.title=t?"":e},toggleFocusClass:function(e){this.toggleClass(this.settings.classNames.focus,!!e)},setPlaceholder:function(e){var t=this;["data","aria"].forEach(function(n){return t.DOM.input.setAttribute("".concat(n,"-placeholder"),e)})},triggerChangeEvent:function(){if(!this.settings.mixMode.integrated){var e=this.DOM.originalInput,t=this.state.lastOriginalValueReported!==e.value,n=new CustomEvent("change",{bubbles:!0});t&&(this.state.lastOriginalValueReported=e.value,n.simulated=!0,e._valueTracker&&e._valueTracker.setValue(Math.random()),e.dispatchEvent(n),this.trigger("change",this.state.lastOriginalValueReported),e.value=this.state.lastOriginalValueReported)}},events:Pb,fixFirefoxLastTagNoCaret:function(){},setRangeAtStartEnd:function(e,t){if(t){e=typeof e=="number"?e:!!e,t=t.lastChild||t;var n=document.getSelection();if(Ue(n.focusNode,Element)&&!this.DOM.input.contains(n.focusNode))return!0;try{n.rangeCount>=1&&["Start","End"].forEach(function(i){return n.getRangeAt(0)["set"+i](t,e||t.length)})}catch(i){console.warn(i)}}},insertAfterTag:function(e,t){if(t=t||this.settings.mixMode.insertAfterTag,e&&e.parentNode&&t)return t=typeof t=="string"?document.createTextNode(t):t,e.parentNode.insertBefore(t,e.nextSibling),t},editTagChangeDetected:function(e){var t=e.__originalData;for(var n in t)if(!this.dataProps.includes(n)&&e[n]!=t[n])return!0;return!1},getTagTextNode:function(e){return e.querySelector(this.settings.classNames.tagTextSelector)},setTagTextNode:function(e,t){this.getTagTextNode(e).innerHTML=jn(t)},editTag:function(e,t){var n=this;e=e||this.getLastTag(),t=t||{};var i=this.settings,r=this.getTagTextNode(e),s=this.getNodeIndex(e),o=Z(e),a=this.events.callbacks,l=!0,c=i.mode=="select";if(!c&&this.dropdown.hide(),r){if(!Ue(o,Object)||!("editable"in o)||o.editable)return o=Z(e,{__originalData:bt({},o),__originalHTML:e.cloneNode(!0)}),Z(o.__originalHTML,o.__originalData),r.setAttribute("contenteditable",!0),e.classList.add(i.classNames.tagEditing),this.events.callbacks.onEditTagFocus.call(this,e),r.addEventListener("click",a.onEditTagClick.bind(this,e)),r.addEventListener("blur",a.onEditTagBlur.bind(this,this.getTagTextNode(e))),r.addEventListener("input",a.onEditTagInput.bind(this,r)),r.addEventListener("paste",a.onEditTagPaste.bind(this,r)),r.addEventListener("keydown",function(d){return a.onEditTagkeydown.call(n,d,e)}),r.addEventListener("compositionstart",a.onCompositionStart.bind(this)),r.addEventListener("compositionend",a.onCompositionEnd.bind(this)),t.skipValidation||(l=this.editTagToggleValidity(e)),r.originalIsValid=l,this.trigger("edit:start",{tag:e,index:s,data:o,isValid:l}),r.focus(),!c&&this.setRangeAtStartEnd(!1,r),i.dropdown.enabled===0&&!c&&this.dropdown.show(),this.state.hasFocus=!0,this}else _n.warn("Cannot find element in Tag template: .",i.classNames.tagTextSelector)},editTagToggleValidity:function(e,t){var n;if(t=t||Z(e))return(n=!("__isValid"in t)||t.__isValid===!0)||this.removeTagsFromValue(e),this.update(),e.classList.toggle(this.settings.classNames.tagNotAllowed,!n),t.__isValid=n,t.__isValid;_n.warn("tag has no data: ",e,t)},onEditTagDone:function(e,t){e=e||this.state.editing.scope,t=t||{};var n,i,r=this.settings,s={tag:e,index:this.getNodeIndex(e),previousData:Z(e),data:t};this.trigger("edit:beforeUpdate",s,{cloneData:!1}),this.state.editing=!1,delete t.__originalData,delete t.__originalHTML,e&&e.parentNode&&(((i=t[r.tagTextProp])!==void 0?!((n=(i+="").trim)===null||n===void 0)&&n.call(i):!(r.tagTextProp in t)&&t.value)?(e=this.replaceTag(e,t),this.editTagToggleValidity(e,t),r.a11y.focusableTags?e.focus():r.mode!="select"&&vn(e)):this.removeTags(e)),this.trigger("edit:updated",s),r.dropdown.closeOnSelect&&this.dropdown.hide(),this.settings.keepInvalidTags&&this.reCheckInvalidTags()},replaceTag:function(e,t){t&&t.value!==""&&t.value!==void 0||(t=e.__tagifyTagData),t.__isValid&&t.__isValid!=1&&bt(t,this.getInvalidTagAttrs(t,t.__isValid));var n=this.createTagElem(t);return e.parentNode.replaceChild(n,e),this.updateValueByDOMTags(),n},updateValueByDOMTags:function(){var e=this;this.value.length=0;var t=this.settings.classNames,n=[t.tagNotAllowed.split(" ")[0],t.tagHide];[].forEach.call(this.getTagElms(),function(i){Xs(i.classList).some(function(r){return n.includes(r)})||e.value.push(Z(i))}),this.update(),this.dropdown.refilter()},injectAtCaret:function(e,t){var n;if(t=t||((n=this.state.selection)===null||n===void 0?void 0:n.range),typeof e=="string"&&(e=document.createTextNode(e)),!t&&e)return this.appendMixTags(e),this;var i=wd(e,t);return this.setRangeAtStartEnd(!1,i),this.updateValueByDOMTags(),this.update(),this},input:{set:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this.settings,i=n.dropdown.closeOnSelect;this.state.inputText=e,t&&(this.DOM.input.innerHTML=jn(""+e),e&&this.toggleClass(n.classNames.empty,!this.DOM.input.innerHTML)),!e&&i&&this.dropdown.hide.bind(this),this.input.autocomplete.suggest.call(this),this.input.validate.call(this)},raw:function(){return this.DOM.input.textContent},validate:function(){var e=!this.state.inputText||this.validateTag({value:this.state.inputText})===!0;return this.DOM.input.classList.toggle(this.settings.classNames.inputInvalid,!e),e},normalize:function(e,t){var n=e||this.DOM.input,i=[];n.childNodes.forEach(function(r){return r.nodeType==3&&i.push(r.nodeValue)}),i=i.join(`
`);try{i=i.replace(/(?:\r\n|\r|\n)/g,this.settings.delimiters.source.charAt(0))}catch{}return i=i.replace(/\s/g," "),t?.trim?this.trim(i):i},autocomplete:{suggest:function(e){if(this.settings.autoComplete.enabled){typeof(e=e||{value:""})!="object"&&(e={value:e});var t=this.dropdown.getMappedValue(e);if(typeof t!="number"){var n=this.state.inputText.toLowerCase(),i=t.substr(0,this.state.inputText.length).toLowerCase(),r=t.substring(this.state.inputText.length);t&&this.state.inputText&&i==n?(this.DOM.input.setAttribute("data-suggest",r),this.state.inputSuggestion=e):(this.DOM.input.removeAttribute("data-suggest"),delete this.state.inputSuggestion)}}},set:function(e){var t=this.DOM.input.getAttribute("data-suggest"),n=e||(t?this.state.inputText+t:null);return!!n&&(this.settings.mode=="mix"?this.replaceTextWithNode(document.createTextNode(this.state.tag.prefix+n)):(this.input.set.call(this,n),this.setRangeAtStartEnd(!1,this.DOM.input)),this.input.autocomplete.suggest.call(this),this.dropdown.hide(),!0)}}},getTagIdx:function(e){return this.value.findIndex(function(t){return t.__tagId==(e||{}).__tagId})},getNodeIndex:function(e){var t=0;if(e)for(;e=e.previousElementSibling;)t++;return t},getTagElms:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i="."+Xs(this.settings.classNames.tag.split(" ")).concat(Xs(t)).join(".");return[].slice.call(this.DOM.scope.querySelectorAll(i))},getLastTag:function(){var e=this.settings.classNames,t=this.DOM.scope.querySelectorAll("".concat(e.tagSelector,":not(.").concat(e.tagHide,"):not([readonly])"));return t[t.length-1]},isTagDuplicate:function(e,t,n){var i=0,r=!0,s=!1,o=void 0;try{for(var a,l=this.value[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;dr(this.trim(""+e),c.value,t)&&n!=c.__tagId&&i++}}catch(d){s=!0,o=d}finally{try{r||l.return==null||l.return()}finally{if(s)throw o}}return i},getTagIndexByValue:function(e){var t=this,n=[],i=this.settings.dropdown.caseSensitive;return this.getTagElms().forEach(function(r,s){r.__tagifyTagData&&dr(t.trim(r.__tagifyTagData.value),e,i)&&n.push(s)}),n},getTagElmByValue:function(e){var t=this.getTagIndexByValue(e)[0];return this.getTagElms()[t]},flashTag:function(e){var t=this;e&&(e.classList.add(this.settings.classNames.tagFlash),setTimeout(function(){e.classList.remove(t.settings.classNames.tagFlash)},100))},isTagBlacklisted:function(e){return e=this.trim(e.toLowerCase()),this.settings.blacklist.filter(function(t){return(""+t).toLowerCase()==e}).length},isTagWhitelisted:function(e){return!!this.getWhitelistItem(e)},getWhitelistItem:function(e,t,n){t=t||"value";var i,r=this.settings;return(n=n||r.whitelist).some(function(s){var o=typeof s=="object"?s[t]||s.value:s;if(dr(o,e,r.dropdown.caseSensitive,r.trim))return i=typeof s=="object"?s:{value:s},!0}),i||t!="value"||r.tagTextProp=="value"||(i=this.getWhitelistItem(e,r.tagTextProp,n)),i},validateTag:function(e){var t=this.settings,n="value"in e?"value":t.tagTextProp,i=this.trim(e[n]+"");return(e[n]+"").trim()?t.mode!="mix"&&t.pattern&&Ue(t.pattern,RegExp)&&!t.pattern.test(i)?this.TEXTS.pattern:!t.duplicates&&this.isTagDuplicate(i,t.dropdown.caseSensitive,e.__tagId)?this.TEXTS.duplicate:this.isTagBlacklisted(i)||t.enforceWhitelist&&!this.isTagWhitelisted(i)?this.TEXTS.notAllowed:!t.validate||t.validate(e):this.TEXTS.empty},getInvalidTagAttrs:function(e,t){return{"aria-invalid":!0,class:"".concat(e.class||""," ").concat(this.settings.classNames.tagNotAllowed).trim(),title:t}},hasMaxTags:function(){return this.value.length>=this.settings.maxTags&&this.TEXTS.exceed},setReadonly:function(e,t){var n=this.settings;this.DOM.scope.contains(document.activeElement)&&document.activeElement.blur(),n[t||"readonly"]=e,this.DOM.scope[(e?"set":"remove")+"Attribute"](t||"readonly",!0),this.settings.userInput=!0,this.setContentEditable(!e)},setContentEditable:function(e){this.DOM.scope.querySelectorAll("[data-can-editable]").forEach(function(t){t.contentEditable=e,t.tabIndex=e?0:-1})},setDisabled:function(e){this.setReadonly(e,"disabled")},normalizeTags:function(e){var t=this,n=this.settings,i=n.whitelist,r=n.delimiters,s=n.mode,o=n.tagTextProp,a=[],l=!!i&&Ue(i[0],Object),c=Array.isArray(e),d=c&&e[0].value,u=function(h){return(h+"").split(r).reduce(function(f,p){var g,m=t.trim(p);return m&&f.push((Ka(g={},o,m),Ka(g,"value",m),g)),f},[])};if(typeof e=="number"&&(e=e.toString()),typeof e=="string"){if(!e.trim())return[];e=u(e)}else c&&(e=e.reduce(function(h,f){if(Ae(f)){var p=bt({},f);o in p||(o="value"),p[o]=t.trim(p[o]),(p[o]||p[o]===0)&&h.push(p)}else if(f!=null&&f!==""&&f!==void 0){var g;(g=h).push.apply(g,Xs(u(f)))}return h},[]));return l&&!d&&(e.forEach(function(h){var f=a.map(function(m){return m.value}),p=t.dropdown.filterListItems.call(t,h[o],{exact:!0});t.settings.duplicates||(p=p.filter(function(m){return!f.includes(m.value)}));var g=p.length>1?t.getWhitelistItem(h[o],o,p):p[0];g&&Ue(g,Object)?a.push(g):s!="mix"&&(h.value==null&&(h.value=h[o]),a.push(h))}),a.length&&(e=a)),e},parseMixTags:function(e){var t=this,n=this.settings,i=n.mixTagsInterpolator,r=n.duplicates,s=n.transformTag,o=n.enforceWhitelist,a=n.maxTags,l=n.tagTextProp,c=[];e=e.split(i[0]).map(function(u,h){var f,p,g,m=u.split(i[1]),v=m[0],b=c.length==a;try{if(v==+v)throw Error;p=JSON.parse(v)}catch{p=t.normalizeTags(v)[0]||{value:v}}if(s.call(t,p),b||!(m.length>1)||o&&!t.isTagWhitelisted(p.value)||!r&&t.isTagDuplicate(p.value)){if(u)return h?i[0]+u:u}else p[f=p[l]?l:"value"]=t.trim(p[f]),g=t.createTagElem(p),c.push(p),g.classList.add(t.settings.classNames.tagNoAnimation),m[0]=g.outerHTML,t.value.push(p);return m.join("")}).join(""),this.DOM.input.innerHTML=e,this.DOM.input.appendChild(document.createTextNode("")),this.DOM.input.normalize();var d=this.getTagElms();return d.forEach(function(u,h){return Z(u,c[h])}),this.update({withoutChangeEvent:!0}),Ed(d,this.state.hasFocus),e},replaceTextWithNode:function(e,t){if(this.state.tag||t){t=t||this.state.tag.prefix+this.state.tag.value;var n,i,r=this.state.selection||window.getSelection(),s=r.anchorNode,o=this.state.tag.delimiters?this.state.tag.delimiters.length:0;return s.splitText(r.anchorOffset-o),(n=s.nodeValue.lastIndexOf(t))==-1||(i=s.splitText(n),e&&s.parentNode.replaceChild(e,i)),!0}},prepareNewTagNode:function(e,t){t=t||{};var n=this.settings,i=[],r={},s=Object.assign({},e,{value:e.value+""});if(e=Object.assign({},s),n.transformTag.call(this,e),e.__isValid=this.hasMaxTags()||this.validateTag(e),e.__isValid!==!0){if(t.skipInvalid)return;if(bt(r,this.getInvalidTagAttrs(e,e.__isValid),{__preInvalidData:s}),e.__isValid==this.TEXTS.duplicate&&this.flashTag(this.getTagElmByValue(e.value)),!n.createInvalidTags)return void i.push(e.value)}return"readonly"in e&&(e.readonly?r["aria-readonly"]=!0:delete e.readonly),{tagElm:this.createTagElem(e,r),tagData:e,aggregatedInvalidInput:i}},postProcessNewTagNode:function(e,t){var n=this,i=this.settings,r=t.__isValid;r&&r===!0?this.value.push(t):(this.trigger("invalid",{data:t,index:this.value.length,tag:e,message:r}),i.keepInvalidTags||setTimeout(function(){return n.removeTags(e,!0)},1e3)),this.dropdown.position()},selectTag:function(e,t){var n=this;if(!this.settings.enforceWhitelist||this.isTagWhitelisted(t.value)){this.state.actions.selectOption&&setTimeout(function(){return n.setRangeAtStartEnd(!1,n.DOM.input)});var i=this.getLastTag();return i?this.replaceTag(i,t):this.appendTag(e),this.value[0]=t,this.update(),this.trigger("add",{tag:e,data:t}),[e]}},addEmptyTag:function(e){var t=bt({value:""},e||{}),n=this.createTagElem(t);Z(n,t),this.appendTag(n),this.editTag(n,{skipValidation:!0}),this.toggleFocusClass(!0)},addTags:function(e,t,n){var i=this,r=[],s=this.settings,o=[],a=document.createDocumentFragment(),l=[];if(!e||e.length==0)return r;switch(e=this.normalizeTags(e),s.mode){case"mix":return this.addMixTags(e);case"select":t=!1,this.removeAllTags()}return this.DOM.input.removeAttribute("style"),e.forEach(function(c){var d=i.prepareNewTagNode(c,{skipInvalid:n||s.skipInvalid});if(d){var u=d.tagElm;if(c=d.tagData,o=d.aggregatedInvalidInput,r.push(u),s.mode=="select")return i.selectTag(u,c);a.appendChild(u),i.postProcessNewTagNode(u,c),l.push({tagElm:u,tagData:c})}}),this.appendTag(a),l.forEach(function(c){var d=c.tagElm,u=c.tagData;return i.trigger("add",{tag:d,index:i.getTagIdx(u),data:u})}),this.update(),e.length&&t&&(this.input.set.call(this,s.createInvalidTags?"":o.join(s._delimiters)),this.setRangeAtStartEnd(!1,this.DOM.input)),this.dropdown.refilter(),r},addMixTags:function(e){var t=this;if((e=this.normalizeTags(e))[0].prefix||this.state.tag)return this.prefixedTextToTag(e[0]);var n=document.createDocumentFragment();return e.forEach(function(i){var r=t.prepareNewTagNode(i);n.appendChild(r.tagElm),t.insertAfterTag(r.tagElm),t.postProcessNewTagNode(r.tagElm,r.tagData)}),this.appendMixTags(n),n.children},appendMixTags:function(e){var t=!!this.state.selection;t?this.injectAtCaret(e):(this.DOM.input.focus(),(t=this.setStateSelection()).range.setStart(this.DOM.input,t.range.endOffset),t.range.setEnd(this.DOM.input,t.range.endOffset),this.DOM.input.appendChild(e),this.updateValueByDOMTags(),this.update())},prefixedTextToTag:function(e){var t,n,i,r=this,s=this.settings,o=(t=this.state.tag)===null||t===void 0?void 0:t.delimiters;if(e.prefix=e.prefix||this.state.tag?this.state.tag.prefix:(s.pattern.source||s.pattern)[0],i=this.prepareNewTagNode(e),n=i.tagElm,this.replaceTextWithNode(n)||this.DOM.input.appendChild(n),setTimeout(function(){return n.classList.add(r.settings.classNames.tagNoAnimation)},300),this.update(),!o){var a=this.insertAfterTag(n)||n;setTimeout(vn,0,a)}return this.state.tag=null,this.postProcessNewTagNode(n,i.tagData),n},appendTag:function(e){var t=this.DOM,n=t.input;t.scope.insertBefore(e,n)},createTagElem:function(e,t){e.__tagId=pd();var n,i=bt({},e,bd({value:jn(e.value+"")},t));return function(r){for(var s,o=document.createNodeIterator(r,NodeFilter.SHOW_TEXT,null,!1);s=o.nextNode();)s.textContent.trim()||s.parentNode.removeChild(s)}(n=this.parseTemplate("tag",[i,this])),Z(n,e),n},reCheckInvalidTags:function(){var e=this,t=this.settings;this.getTagElms(t.classNames.tagNotAllowed).forEach(function(n,i){var r=Z(n),s=e.hasMaxTags(),o=e.validateTag(r),a=o===!0&&!s;if(t.mode=="select"&&e.toggleScopeValidation(o),a)return r=r.__preInvalidData?r.__preInvalidData:{value:r.value},e.replaceTag(n,r);n.title=s||o})},removeTags:function(e,t,n){var i,r=this,s=this.settings;if(e=e&&Ue(e,HTMLElement)?[e]:Ue(e,Array)?e:e?[e]:[this.getLastTag()].filter(function(o){return o}),i=e.reduce(function(o,a){a&&typeof a=="string"&&(a=r.getTagElmByValue(a));var l=Z(a);return a&&l&&!l.readonly&&o.push({node:a,idx:r.getTagIdx(l),data:Z(a,{__removed:!0})}),o},[]),n=typeof n=="number"?n:this.CSSVars.tagHideTransition,s.mode=="select"&&(n=0,this.input.set.call(this)),i.length==1&&s.mode!="select"&&i[0].node.classList.contains(s.classNames.tagNotAllowed)&&(t=!0),i.length)return s.hooks.beforeRemoveTag(i,{tagify:this}).then(function(){var o=function(a){a.node.parentNode&&(a.node.parentNode.removeChild(a.node),t?s.keepInvalidTags&&this.trigger("remove",{tag:a.node,index:a.idx}):(this.trigger("remove",{tag:a.node,index:a.idx,data:a.data}),this.dropdown.refilter(),this.dropdown.position(),this.DOM.input.normalize(),s.keepInvalidTags&&this.reCheckInvalidTags()))};n&&n>10&&i.length==1?function(a){a.node.style.width=parseFloat(window.getComputedStyle(a.node).width)+"px",document.body.clientTop,a.node.classList.add(s.classNames.tagHide),setTimeout(o.bind(this),n,a)}.call(r,i[0]):i.forEach(o.bind(r)),t||(r.removeTagsFromValue(i.map(function(a){return a.node})),r.update(),s.mode=="select"&&s.userInput&&r.setContentEditable(!0))}).catch(function(o){})},removeTagsFromDOM:function(){this.getTagElms().forEach(function(e){return e.remove()})},removeTagsFromValue:function(e){var t=this;(e=Array.isArray(e)?e:[e]).forEach(function(n){var i=Z(n),r=t.getTagIdx(i);r>-1&&t.value.splice(r,1)})},removeAllTags:function(e){var t=this;e=e||{},this.value=[],this.settings.mode=="mix"?this.DOM.input.innerHTML="":this.removeTagsFromDOM(),this.dropdown.refilter(),this.dropdown.position(),this.state.dropdown.visible&&setTimeout(function(){t.DOM.input.focus()}),this.settings.mode=="select"&&(this.input.set.call(this),this.settings.userInput&&this.setContentEditable(!0)),this.update(e)},postUpdate:function(){this.state.blockChangeEvent=!1;var e,t,n=this.settings,i=n.classNames,r=n.mode=="mix"?n.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value.trim():this.value.length+this.input.raw.call(this).length;this.toggleClass(i.hasMaxTags,this.value.length>=n.maxTags),this.toggleClass(i.hasNoTags,!this.value.length),this.toggleClass(i.empty,!r),n.mode=="select"&&this.toggleScopeValidation((t=this.value)===null||t===void 0||(e=t[0])===null||e===void 0?void 0:e.__isValid)},setOriginalInputValue:function(e){var t=this.DOM.originalInput;this.settings.mixMode.integrated||(t.value=e,t.tagifyValue=t.value,this.setPersistedData(e,"value"))},update:function(e){clearTimeout(this.debouncedUpdateTimeout),this.debouncedUpdateTimeout=setTimeout(function(){var t=this.getInputValue();this.setOriginalInputValue(t),this.settings.onChangeAfterBlur&&(e||{}).withoutChangeEvent||this.state.blockChangeEvent||this.triggerChangeEvent(),this.postUpdate()}.bind(this),100),this.events.bindOriginaInputListener.call(this,100)},getInputValue:function(){var e=this.getCleanValue();return this.settings.mode=="mix"?this.getMixedTagsAsString(e):e.length?this.settings.originalInputValueFormat?this.settings.originalInputValueFormat(e):JSON.stringify(e):""},getCleanValue:function(e){return ud(e||this.value,this.dataProps)},getMixedTagsAsString:function(){var e="",t=this,n=this.settings,i=n.originalInputValueFormat||JSON.stringify,r=n.mixTagsInterpolator;return function s(o){o.childNodes.forEach(function(a){if(a.nodeType==1){var l=Z(a);if(a.tagName=="BR"&&(e+=`\r
`),l&&Bn.call(t,a)){if(l.__removed)return;e+=r[0]+i(za(l,t.dataProps))+r[1]}else a.getAttribute("style")||["B","I","U"].includes(a.tagName)?e+=a.textContent:a.tagName!="DIV"&&a.tagName!="P"||(e+=`\r
`,s(a))}else e+=a.textContent})}(this.DOM.input),e}},hr.prototype.removeTag=hr.prototype.removeTags;function Td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Td(Object(n),!0).forEach(function(i){Db(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Td(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function to(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?to=function(t){return typeof t}:to=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},to(e)}function Db(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wn(){return wn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},wn.apply(this,arguments)}function Nb(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,s;for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function Ib(e,t){if(e==null)return{};var n=Nb(e,t),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)i=s[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}var Rb="1.15.6";function $e(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var En=$e(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),uo=$e(/Edge/i),Sd=$e(/firefox/i),eo=$e(/safari/i)&&!$e(/chrome/i)&&!$e(/android/i),il=$e(/iP(ad|od|hone)/i),Rd=$e(/chrome/i)&&$e(/android/i),Ld={capture:!1,passive:!1};function K(e,t,n){e.addEventListener(t,n,!En&&Ld)}function W(e,t,n){e.removeEventListener(t,n,!En&&Ld)}function so(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function kd(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Oe(e,t,n,i){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&so(e,t):so(e,t))||i&&e===n)return e;if(e===n)break}while(e=kd(e))}return null}var Ad=/\s+/g;function ie(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(Ad," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(Ad," ")}}function M(e,t,n){var i=e&&e.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in i)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),i[t]=n+(typeof n=="string"?"":"px")}}function Ui(e,t){var n="";if(typeof e=="string")n=e;else do{var i=M(e,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function Md(e,t,n){if(e){var i=e.getElementsByTagName(t),r=0,s=i.length;if(n)for(;r<s;r++)n(i[r],r);return i}return[]}function He(){var e=document.scrollingElement;return e||document.documentElement}function mt(e,t,n,i,r){if(!(!e.getBoundingClientRect&&e!==window)){var s,o,a,l,c,d,u;if(e!==window&&e.parentNode&&e!==He()?(s=e.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,d=s.height,u=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!En))do if(r&&r.getBoundingClientRect&&(M(r,"transform")!=="none"||n&&M(r,"position")!=="static")){var h=r.getBoundingClientRect();o-=h.top+parseInt(M(r,"border-top-width")),a-=h.left+parseInt(M(r,"border-left-width")),l=o+s.height,c=a+s.width;break}while(r=r.parentNode);if(i&&e!==window){var f=Ui(r||e),p=f&&f.a,g=f&&f.d;f&&(o/=g,a/=p,u/=p,d/=g,l=o+d,c=a+u)}return{top:o,left:a,bottom:l,right:c,width:u,height:d}}}function xd(e,t,n){for(var i=oo(e,!0),r=mt(e)[t];i;){var s=mt(i)[n],o=void 0;if(n==="top"||n==="left"?o=r>=s:o=r<=s,!o)return i;if(i===He())break;i=oo(i,!1)}return!1}function $i(e,t,n,i){for(var r=0,s=0,o=e.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==U.ghost&&(i||o[s]!==U.dragged)&&Oe(o[s],n.draggable,e,!1)){if(r===t)return o[s];r++}s++}return null}function rl(e,t){for(var n=e.lastElementChild;n&&(n===U.ghost||M(n,"display")==="none"||t&&!so(n,t));)n=n.previousElementSibling;return n||null}function _e(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==U.clone&&(!t||so(e,t))&&n++;return n}function Od(e){var t=0,n=0,i=He();if(e)do{var r=Ui(e),s=r.a,o=r.d;t+=e.scrollLeft*s,n+=e.scrollTop*o}while(e!==i&&(e=e.parentNode));return[t,n]}function Lb(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var i in t)if(t.hasOwnProperty(i)&&t[i]===e[n][i])return Number(n)}return-1}function oo(e,t){if(!e||!e.getBoundingClientRect)return He();var n=e,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=M(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return He();if(i||t)return n;i=!0}}while(n=n.parentNode);return He()}function kb(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Xa(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Ya;function Fd(e,t){return function(){if(!Ya){var n=arguments,i=this;n.length===1?e.call(i,n[0]):e.apply(i,n),Ya=setTimeout(function(){Ya=void 0},t)}}}function Ud(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function $d(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function Hd(e,t,n){var i={};return Array.from(e.children).forEach(function(r){var s,o,a,l;if(!(!Oe(r,t.draggable,e,!1)||r.animated||r===n)){var c=mt(r);i.left=Math.min((s=i.left)!==null&&s!==void 0?s:1/0,c.left),i.top=Math.min((o=i.top)!==null&&o!==void 0?o:1/0,c.top),i.right=Math.max((a=i.right)!==null&&a!==void 0?a:-1/0,c.right),i.bottom=Math.max((l=i.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var Gt="Sortable"+new Date().getTime();function Mb(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(r){if(!(M(r,"display")==="none"||r===U.ghost)){e.push({target:r,rect:mt(r)});var s=Ne({},e[e.length-1].rect);if(r.thisAnimationDuration){var o=Ui(r,!0);o&&(s.top-=o.f,s.left-=o.e)}r.fromRect=s}})}},addAnimationState:function(i){e.push(i)},removeAnimationState:function(i){e.splice(Lb(e,{target:i}),1)},animateAll:function(i){var r=this;if(!this.options.animation){clearTimeout(t),typeof i=="function"&&i();return}var s=!1,o=0;e.forEach(function(a){var l=0,c=a.target,d=c.fromRect,u=mt(c),h=c.prevFromRect,f=c.prevToRect,p=a.rect,g=Ui(c,!0);g&&(u.top-=g.f,u.left-=g.e),c.toRect=u,c.thisAnimationDuration&&Xa(h,u)&&!Xa(d,u)&&(p.top-u.top)/(p.left-u.left)===(d.top-u.top)/(d.left-u.left)&&(l=Ub(p,h,f,r.options)),Xa(u,d)||(c.prevFromRect=d,c.prevToRect=u,l||(l=r.options.animation),r.animate(c,p,u,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(t),s?t=setTimeout(function(){typeof i=="function"&&i()},o):typeof i=="function"&&i(),e=[]},animate:function(i,r,s,o){if(o){M(i,"transition",""),M(i,"transform","");var a=Ui(this.el),l=a&&a.a,c=a&&a.d,d=(r.left-s.left)/(l||1),u=(r.top-s.top)/(c||1);i.animatingX=!!d,i.animatingY=!!u,M(i,"transform","translate3d("+d+"px,"+u+"px,0)"),this.forRepaintDummy=Fb(i),M(i,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),M(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){M(i,"transition",""),M(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},o)}}}}function Fb(e){return e.offsetWidth}function Ub(e,t,n,i){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*i.animation}var Li=[],Ga={initializeByDefault:!0},vr={mount:function(t){for(var n in Ga)Ga.hasOwnProperty(n)&&!(n in t)&&(t[n]=Ga[n]);Li.forEach(function(i){if(i.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Li.push(t)},pluginEvent:function(t,n,i){var r=this;this.eventCanceled=!1,i.cancel=function(){r.eventCanceled=!0};var s=t+"Global";Li.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](Ne({sortable:n},i)),n.options[o.pluginName]&&n[o.pluginName][t]&&n[o.pluginName][t](Ne({sortable:n},i)))})},initializePlugins:function(t,n,i,r){Li.forEach(function(a){var l=a.pluginName;if(!(!t.options[l]&&!a.initializeByDefault)){var c=new a(t,n,t.options);c.sortable=t,c.options=t.options,t[l]=c,wn(i,c.defaults)}});for(var s in t.options)if(t.options.hasOwnProperty(s)){var o=this.modifyOption(t,s,t.options[s]);typeof o<"u"&&(t.options[s]=o)}},getEventProperties:function(t,n){var i={};return Li.forEach(function(r){typeof r.eventProperties=="function"&&wn(i,r.eventProperties.call(n[r.pluginName],t))}),i},modifyOption:function(t,n,i){var r;return Li.forEach(function(s){t[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(r=s.optionListeners[n].call(t[s.pluginName],i))}),r}};function $b(e){var t=e.sortable,n=e.rootEl,i=e.name,r=e.targetEl,s=e.cloneEl,o=e.toEl,a=e.fromEl,l=e.oldIndex,c=e.newIndex,d=e.oldDraggableIndex,u=e.newDraggableIndex,h=e.originalEvent,f=e.putSortable,p=e.extraEventProperties;if(t=t||n&&n[Gt],!!t){var g,m=t.options,v="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!En&&!uo?g=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(i,!0,!0)),g.to=o||n,g.from=a||n,g.item=r||n,g.clone=s,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=d,g.newDraggableIndex=u,g.originalEvent=h,g.pullMode=f?f.lastPutMode:void 0;var b=Ne(Ne({},p),vr.getEventProperties(i,t));for(var E in b)g[E]=b[E];n&&n.dispatchEvent(g),m[v]&&m[v].call(t,g)}}var Hb=["evt"],Yt=function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=i.evt,s=Ib(i,Hb);vr.pluginEvent.bind(U)(t,n,Ne({dragEl:S,parentEl:ct,ghostEl:j,rootEl:nt,nextEl:Wn,lastDownEl:no,cloneEl:ot,cloneHidden:yn,dragStarted:fr,putSortable:Pt,activeSortable:U.active,originalEvent:r,oldIndex:Fi,oldDraggableIndex:pr,newIndex:re,newDraggableIndex:bn,hideGhostForTarget:qd,unhideGhostForTarget:Wd,cloneNowHidden:function(){yn=!0},cloneNowShown:function(){yn=!1},dispatchSortableEvent:function(a){jt({sortable:n,name:a,originalEvent:r})}},s))};function jt(e){$b(Ne({putSortable:Pt,cloneEl:ot,targetEl:S,rootEl:nt,oldIndex:Fi,oldDraggableIndex:pr,newIndex:re,newDraggableIndex:bn},e))}var S,ct,j,nt,Wn,no,ot,yn,Fi,re,pr,bn,Ys,Pt,Mi=!1,ao=!1,lo=[],Vn,xe,Ja,Qa,Cd,Pd,fr,ki,gr,mr=!1,Gs=!1,io,Ft,Za=[],el=!1,co=[],ho=typeof document<"u",Js=il,Dd=uo||En?"cssFloat":"float",jb=ho&&!Rd&&!il&&"draggable"in document.createElement("div"),jd=function(){if(ho){if(En)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Bd=function(t,n){var i=M(t),r=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),s=$i(t,0,n),o=$i(t,1,n),a=s&&M(s),l=o&&M(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+mt(s).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+mt(o).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var u=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=r&&i[Dd]==="none"||o&&i[Dd]==="none"&&c+d>r)?"vertical":"horizontal"},Bb=function(t,n,i){var r=i?t.left:t.top,s=i?t.right:t.bottom,o=i?t.width:t.height,a=i?n.left:n.top,l=i?n.right:n.bottom,c=i?n.width:n.height;return r===a||s===l||r+o/2===a+c/2},Vb=function(t,n){var i;return lo.some(function(r){var s=r[Gt].options.emptyInsertThreshold;if(!(!s||rl(r))){var o=mt(r),a=t>=o.left-s&&t<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return i=r}}),i},Vd=function(t){function n(s,o){return function(a,l,c,d){var u=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||u))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,d),o)(a,l,c,d);var h=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===h||s.join&&s.indexOf(h)>-1}}var i={},r=t.group;(!r||to(r)!="object")&&(r={name:r}),i.name=r.name,i.checkPull=n(r.pull,!0),i.checkPut=n(r.put),i.revertClone=r.revertClone,t.group=i},qd=function(){!jd&&j&&M(j,"display","none")},Wd=function(){!jd&&j&&M(j,"display","")};ho&&!Rd&&document.addEventListener("click",function(e){if(ao)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ao=!1,!1},!0);var qn=function(t){if(S){t=t.touches?t.touches[0]:t;var n=Vb(t.clientX,t.clientY);if(n){var i={};for(var r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[Gt]._onDragOver(i)}}},qb=function(t){S&&S.parentNode[Gt]._isOutsideThisEl(t.target)};function U(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=wn({},t),e[Gt]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Bd(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:U.supportPointer!==!1&&"PointerEvent"in window&&(!eo||il),emptyInsertThreshold:5};vr.initializePlugins(this,e,n);for(var i in n)!(i in t)&&(t[i]=n[i]);Vd(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:jb,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?K(e,"pointerdown",this._onTapStart):(K(e,"mousedown",this._onTapStart),K(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(K(e,"dragover",this),K(e,"dragenter",this)),lo.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),wn(this,Mb())}U.prototype={constructor:U,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(ki=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,S):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,i=this.el,r=this.options,s=r.preventOnFilter,o=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(a||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,d=r.filter;if(Qb(i),!S&&!(/mousedown|pointerdown/.test(o)&&t.button!==0||r.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&eo&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Oe(l,r.draggable,i,!1),!(l&&l.animated)&&no!==l)){if(Fi=_e(l),pr=_e(l,r.draggable),typeof d=="function"){if(d.call(this,t,l,this)){jt({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:i,fromEl:i}),Yt("filter",n,{evt:t}),s&&t.preventDefault();return}}else if(d&&(d=d.split(",").some(function(u){if(u=Oe(c,u.trim(),i,!1),u)return jt({sortable:n,rootEl:u,name:"filter",targetEl:l,fromEl:i,toEl:i}),Yt("filter",n,{evt:t}),!0}),d)){s&&t.preventDefault();return}r.handle&&!Oe(c,r.handle,i,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,n,i){var r=this,s=r.el,o=r.options,a=s.ownerDocument,l;if(i&&!S&&i.parentNode===s){var c=mt(i);if(nt=s,S=i,ct=S.parentNode,Wn=S.nextSibling,no=i,Ys=o.group,U.dragged=S,Vn={target:S,clientX:(n||t).clientX,clientY:(n||t).clientY},Cd=Vn.clientX-c.left,Pd=Vn.clientY-c.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,S.style["will-change"]="all",l=function(){if(Yt("delayEnded",r,{evt:t}),U.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Sd&&r.nativeDraggable&&(S.draggable=!0),r._triggerDragStart(t,n),jt({sortable:r,name:"choose",originalEvent:t}),ie(S,o.chosenClass,!0)},o.ignore.split(",").forEach(function(d){Md(S,d.trim(),tl)}),K(a,"dragover",qn),K(a,"mousemove",qn),K(a,"touchmove",qn),o.supportPointer?(K(a,"pointerup",r._onDrop),!this.nativeDraggable&&K(a,"pointercancel",r._onDrop)):(K(a,"mouseup",r._onDrop),K(a,"touchend",r._onDrop),K(a,"touchcancel",r._onDrop)),Sd&&this.nativeDraggable&&(this.options.touchStartThreshold=4,S.draggable=!0),Yt("delayStart",this,{evt:t}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(uo||En))){if(U.eventCanceled){this._onDrop();return}o.supportPointer?(K(a,"pointerup",r._disableDelayedDrag),K(a,"pointercancel",r._disableDelayedDrag)):(K(a,"mouseup",r._disableDelayedDrag),K(a,"touchend",r._disableDelayedDrag),K(a,"touchcancel",r._disableDelayedDrag)),K(a,"mousemove",r._delayedDragTouchMoveHandler),K(a,"touchmove",r._delayedDragTouchMoveHandler),o.supportPointer&&K(a,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){S&&tl(S),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;W(t,"mouseup",this._disableDelayedDrag),W(t,"touchend",this._disableDelayedDrag),W(t,"touchcancel",this._disableDelayedDrag),W(t,"pointerup",this._disableDelayedDrag),W(t,"pointercancel",this._disableDelayedDrag),W(t,"mousemove",this._delayedDragTouchMoveHandler),W(t,"touchmove",this._delayedDragTouchMoveHandler),W(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?K(document,"pointermove",this._onTouchMove):n?K(document,"touchmove",this._onTouchMove):K(document,"mousemove",this._onTouchMove):(K(S,"dragend",this),K(nt,"dragstart",this._onDragStart));try{document.selection?ro(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(Mi=!1,nt&&S){Yt("dragStarted",this,{evt:n}),this.nativeDraggable&&K(document,"dragover",qb);var i=this.options;!t&&ie(S,i.dragClass,!1),ie(S,i.ghostClass,!0),U.active=this,t&&this._appendGhost(),jt({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(xe){this._lastX=xe.clientX,this._lastY=xe.clientY,qd();for(var t=document.elementFromPoint(xe.clientX,xe.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(xe.clientX,xe.clientY),t!==n);)n=t;if(S.parentNode[Gt]._isOutsideThisEl(t),n)do{if(n[Gt]){var i=void 0;if(i=n[Gt]._onDragOver({clientX:xe.clientX,clientY:xe.clientY,target:t,rootEl:n}),i&&!this.options.dragoverBubble)break}t=n}while(n=kd(n));Wd()}},_onTouchMove:function(t){if(Vn){var n=this.options,i=n.fallbackTolerance,r=n.fallbackOffset,s=t.touches?t.touches[0]:t,o=j&&Ui(j,!0),a=j&&o&&o.a,l=j&&o&&o.d,c=Js&&Ft&&Od(Ft),d=(s.clientX-Vn.clientX+r.x)/(a||1)+(c?c[0]-Za[0]:0)/(a||1),u=(s.clientY-Vn.clientY+r.y)/(l||1)+(c?c[1]-Za[1]:0)/(l||1);if(!U.active&&!Mi){if(i&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(j){o?(o.e+=d-(Ja||0),o.f+=u-(Qa||0)):o={a:1,b:0,c:0,d:1,e:d,f:u};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");M(j,"webkitTransform",h),M(j,"mozTransform",h),M(j,"msTransform",h),M(j,"transform",h),Ja=d,Qa=u,xe=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!j){var t=this.options.fallbackOnBody?document.body:nt,n=mt(S,!0,Js,!0,t),i=this.options;if(Js){for(Ft=t;M(Ft,"position")==="static"&&M(Ft,"transform")==="none"&&Ft!==document;)Ft=Ft.parentNode;Ft!==document.body&&Ft!==document.documentElement?(Ft===document&&(Ft=He()),n.top+=Ft.scrollTop,n.left+=Ft.scrollLeft):Ft=He(),Za=Od(Ft)}j=S.cloneNode(!0),ie(j,i.ghostClass,!1),ie(j,i.fallbackClass,!0),ie(j,i.dragClass,!0),M(j,"transition",""),M(j,"transform",""),M(j,"box-sizing","border-box"),M(j,"margin",0),M(j,"top",n.top),M(j,"left",n.left),M(j,"width",n.width),M(j,"height",n.height),M(j,"opacity","0.8"),M(j,"position",Js?"absolute":"fixed"),M(j,"zIndex","100000"),M(j,"pointerEvents","none"),U.ghost=j,t.appendChild(j),M(j,"transform-origin",Cd/parseInt(j.style.width)*100+"% "+Pd/parseInt(j.style.height)*100+"%")}},_onDragStart:function(t,n){var i=this,r=t.dataTransfer,s=i.options;if(Yt("dragStart",this,{evt:t}),U.eventCanceled){this._onDrop();return}Yt("setupClone",this),U.eventCanceled||(ot=$d(S),ot.removeAttribute("id"),ot.draggable=!1,ot.style["will-change"]="",this._hideClone(),ie(ot,this.options.chosenClass,!1),U.clone=ot),i.cloneId=ro(function(){Yt("clone",i),!U.eventCanceled&&(i.options.removeCloneOnHide||nt.insertBefore(ot,S),i._hideClone(),jt({sortable:i,name:"clone"}))}),!n&&ie(S,s.dragClass,!0),n?(ao=!0,i._loopId=setInterval(i._emulateDragOver,50)):(W(document,"mouseup",i._onDrop),W(document,"touchend",i._onDrop),W(document,"touchcancel",i._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(i,r,S)),K(document,"drop",i),M(S,"transform","translateZ(0)")),Mi=!0,i._dragStartId=ro(i._dragStarted.bind(i,n,t)),K(document,"selectstart",i),fr=!0,window.getSelection().removeAllRanges(),eo&&M(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,i=t.target,r,s,o,a=this.options,l=a.group,c=U.active,d=Ys===l,u=a.sort,h=Pt||c,f,p=this,g=!1;if(el)return;function m(dt,ht){Yt(dt,p,Ne({evt:t,isOwner:d,axis:f?"vertical":"horizontal",revert:o,dragRect:r,targetRect:s,canSort:u,fromSortable:h,target:i,completed:b,onMove:function(vt,Y){return Qs(nt,n,S,r,vt,mt(vt),t,Y)},changed:E},ht))}function v(){m("dragOverAnimationCapture"),p.captureAnimationState(),p!==h&&h.captureAnimationState()}function b(dt){return m("dragOverCompleted",{insertion:dt}),dt&&(d?c._hideClone():c._showClone(p),p!==h&&(ie(S,Pt?Pt.options.ghostClass:c.options.ghostClass,!1),ie(S,a.ghostClass,!0)),Pt!==p&&p!==U.active?Pt=p:p===U.active&&Pt&&(Pt=null),h===p&&(p._ignoreWhileAnimating=i),p.animateAll(function(){m("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(i===S&&!S.animated||i===n&&!i.animated)&&(ki=null),!a.dragoverBubble&&!t.rootEl&&i!==document&&(S.parentNode[Gt]._isOutsideThisEl(t.target),!dt&&qn(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function E(){re=_e(S),bn=_e(S,a.draggable),jt({sortable:p,name:"change",toEl:n,newIndex:re,newDraggableIndex:bn,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),i=Oe(i,a.draggable,n,!0),m("dragOver"),U.eventCanceled)return g;if(S.contains(t.target)||i.animated&&i.animatingX&&i.animatingY||p._ignoreWhileAnimating===i)return b(!1);if(ao=!1,c&&!a.disabled&&(d?u||(o=ct!==nt):Pt===this||(this.lastPutMode=Ys.checkPull(this,c,S,t))&&l.checkPut(this,c,S,t))){if(f=this._getDirection(t,i)==="vertical",r=mt(S),m("dragOverValid"),U.eventCanceled)return g;if(o)return ct=nt,v(),this._hideClone(),m("revert"),U.eventCanceled||(Wn?nt.insertBefore(S,Wn):nt.appendChild(S)),b(!0);var _=rl(n,a.draggable);if(!_||Xb(t,f,this)&&!_.animated){if(_===S)return b(!1);if(_&&n===t.target&&(i=_),i&&(s=mt(i)),Qs(nt,n,S,r,i,s,t,!!i)!==!1)return v(),_&&_.nextSibling?n.insertBefore(S,_.nextSibling):n.appendChild(S),ct=n,E(),b(!0)}else if(_&&Kb(t,f,this)){var A=$i(n,0,a,!0);if(A===S)return b(!1);if(i=A,s=mt(i),Qs(nt,n,S,r,i,s,t,!1)!==!1)return v(),n.insertBefore(S,A),ct=n,E(),b(!0)}else if(i.parentNode===n){s=mt(i);var w=0,T,D=S.parentNode!==n,O=!Bb(S.animated&&S.toRect||r,i.animated&&i.toRect||s,f),N=f?"top":"left",I=xd(i,"top","top")||xd(S,"top","top"),$=I?I.scrollTop:void 0;ki!==i&&(T=s[N],mr=!1,Gs=!O&&a.invertSwap||D),w=Yb(t,i,s,f,O?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,Gs,ki===i);var H;if(w!==0){var z=_e(S);do z-=w,H=ct.children[z];while(H&&(M(H,"display")==="none"||H===j))}if(w===0||H===i)return b(!1);ki=i,gr=w;var ut=i.nextElementSibling,q=!1;q=w===1;var B=Qs(nt,n,S,r,i,s,t,q);if(B!==!1)return(B===1||B===-1)&&(q=B===1),el=!0,setTimeout(zb,30),v(),q&&!ut?n.appendChild(S):i.parentNode.insertBefore(S,q?ut:i),I&&Ud(I,0,$-I.scrollTop),ct=S.parentNode,T!==void 0&&!Gs&&(io=Math.abs(T-mt(i)[N])),E(),b(!0)}if(n.contains(S))return b(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){W(document,"mousemove",this._onTouchMove),W(document,"touchmove",this._onTouchMove),W(document,"pointermove",this._onTouchMove),W(document,"dragover",qn),W(document,"mousemove",qn),W(document,"touchmove",qn)},_offUpEvents:function(){var t=this.el.ownerDocument;W(t,"mouseup",this._onDrop),W(t,"touchend",this._onDrop),W(t,"pointerup",this._onDrop),W(t,"pointercancel",this._onDrop),W(t,"touchcancel",this._onDrop),W(document,"selectstart",this)},_onDrop:function(t){var n=this.el,i=this.options;if(re=_e(S),bn=_e(S,i.draggable),Yt("drop",this,{evt:t}),ct=S&&S.parentNode,re=_e(S),bn=_e(S,i.draggable),U.eventCanceled){this._nulling();return}Mi=!1,Gs=!1,mr=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),nl(this.cloneId),nl(this._dragStartId),this.nativeDraggable&&(W(document,"drop",this),W(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),eo&&M(document.body,"user-select",""),M(S,"transform",""),t&&(fr&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),j&&j.parentNode&&j.parentNode.removeChild(j),(nt===ct||Pt&&Pt.lastPutMode!=="clone")&&ot&&ot.parentNode&&ot.parentNode.removeChild(ot),S&&(this.nativeDraggable&&W(S,"dragend",this),tl(S),S.style["will-change"]="",fr&&!Mi&&ie(S,Pt?Pt.options.ghostClass:this.options.ghostClass,!1),ie(S,this.options.chosenClass,!1),jt({sortable:this,name:"unchoose",toEl:ct,newIndex:null,newDraggableIndex:null,originalEvent:t}),nt!==ct?(re>=0&&(jt({rootEl:ct,name:"add",toEl:ct,fromEl:nt,originalEvent:t}),jt({sortable:this,name:"remove",toEl:ct,originalEvent:t}),jt({rootEl:ct,name:"sort",toEl:ct,fromEl:nt,originalEvent:t}),jt({sortable:this,name:"sort",toEl:ct,originalEvent:t})),Pt&&Pt.save()):re!==Fi&&re>=0&&(jt({sortable:this,name:"update",toEl:ct,originalEvent:t}),jt({sortable:this,name:"sort",toEl:ct,originalEvent:t})),U.active&&((re==null||re===-1)&&(re=Fi,bn=pr),jt({sortable:this,name:"end",toEl:ct,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Yt("nulling",this),nt=S=ct=j=Wn=ot=no=yn=Vn=xe=fr=re=bn=Fi=pr=ki=gr=Pt=Ys=U.dragged=U.ghost=U.clone=U.active=null,co.forEach(function(t){t.checked=!0}),co.length=Ja=Qa=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":S&&(this._onDragOver(t),Wb(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,i=this.el.children,r=0,s=i.length,o=this.options;r<s;r++)n=i[r],Oe(n,o.draggable,this.el,!1)&&t.push(n.getAttribute(o.dataIdAttr)||Jb(n));return t},sort:function(t,n){var i={},r=this.el;this.toArray().forEach(function(s,o){var a=r.children[o];Oe(a,this.options.draggable,r,!1)&&(i[s]=a)},this),n&&this.captureAnimationState(),t.forEach(function(s){i[s]&&(r.removeChild(i[s]),r.appendChild(i[s]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return Oe(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var i=this.options;if(n===void 0)return i[t];var r=vr.modifyOption(this,t,n);typeof r<"u"?i[t]=r:i[t]=n,t==="group"&&Vd(i)},destroy:function(){Yt("destroy",this);var t=this.el;t[Gt]=null,W(t,"mousedown",this._onTapStart),W(t,"touchstart",this._onTapStart),W(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(W(t,"dragover",this),W(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),lo.splice(lo.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!yn){if(Yt("hideClone",this),U.eventCanceled)return;M(ot,"display","none"),this.options.removeCloneOnHide&&ot.parentNode&&ot.parentNode.removeChild(ot),yn=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(yn){if(Yt("showClone",this),U.eventCanceled)return;S.parentNode==nt&&!this.options.group.revertClone?nt.insertBefore(ot,S):Wn?nt.insertBefore(ot,Wn):nt.appendChild(ot),this.options.group.revertClone&&this.animate(S,ot),M(ot,"display",""),yn=!1}}};function Wb(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Qs(e,t,n,i,r,s,o,a){var l,c=e[Gt],d=c.options.onMove,u;return window.CustomEvent&&!En&&!uo?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=e,l.dragged=n,l.draggedRect=i,l.related=r||t,l.relatedRect=s||mt(t),l.willInsertAfter=a,l.originalEvent=o,e.dispatchEvent(l),d&&(u=d.call(c,l,o)),u}function tl(e){e.draggable=!1}function zb(){el=!1}function Kb(e,t,n){var i=mt($i(n.el,0,n.options,!0)),r=Hd(n.el,n.options,j),s=10;return t?e.clientX<r.left-s||e.clientY<i.top&&e.clientX<i.right:e.clientY<r.top-s||e.clientY<i.bottom&&e.clientX<i.left}function Xb(e,t,n){var i=mt(rl(n.el,n.options.draggable)),r=Hd(n.el,n.options,j),s=10;return t?e.clientX>r.right+s||e.clientY>i.bottom&&e.clientX>i.left:e.clientY>r.bottom+s||e.clientX>i.right&&e.clientY>i.top}function Yb(e,t,n,i,r,s,o,a){var l=i?e.clientY:e.clientX,c=i?n.height:n.width,d=i?n.top:n.left,u=i?n.bottom:n.right,h=!1;if(!o){if(a&&io<c*r){if(!mr&&(gr===1?l>d+c*s/2:l<u-c*s/2)&&(mr=!0),mr)h=!0;else if(gr===1?l<d+io:l>u-io)return-gr}else if(l>d+c*(1-r)/2&&l<u-c*(1-r)/2)return Gb(t)}return h=h||o,h&&(l<d+c*s/2||l>u-c*s/2)?l>d+c/2?1:-1:0}function Gb(e){return _e(S)<_e(e)?1:-1}function Jb(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function Qb(e){co.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var i=t[n];i.checked&&co.push(i)}}function ro(e){return setTimeout(e,0)}function nl(e){return clearTimeout(e)}ho&&K(document,"touchmove",function(e){(U.active||Mi)&&e.cancelable&&e.preventDefault()});U.utils={on:K,off:W,css:M,find:Md,is:function(t,n){return!!Oe(t,n,t,!1)},extend:kb,throttle:Fd,closest:Oe,toggleClass:ie,clone:$d,index:_e,nextTick:ro,cancelNextTick:nl,detectDirection:Bd,getChild:$i,expando:Gt};U.get=function(e){return e[Gt]};U.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(U.utils=Ne(Ne({},U.utils),i.utils)),vr.mount(i)})};U.create=function(e,t){return new U(e,t)};U.version=Rb;var yt=[],Zs,Nd,Zb=!1;var Id;function ty(){yt.forEach(function(e){clearInterval(e.pid)}),yt=[]}var rx=Fd(function(e,t,n,i){if(t.scroll){var r=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,o=t.scrollSensitivity,a=t.scrollSpeed,l=He(),c=!1,d;Nd!==n&&(Nd=n,ty(),Zs=t.scroll,d=t.scrollFn,Zs===!0&&(Zs=oo(n,!0)));var u=0,h=Zs;do{var f=h,p=mt(f),g=p.top,m=p.bottom,v=p.left,b=p.right,E=p.width,_=p.height,A=void 0,w=void 0,T=f.scrollWidth,D=f.scrollHeight,O=M(f),N=f.scrollLeft,I=f.scrollTop;f===l?(A=E<T&&(O.overflowX==="auto"||O.overflowX==="scroll"||O.overflowX==="visible"),w=_<D&&(O.overflowY==="auto"||O.overflowY==="scroll"||O.overflowY==="visible")):(A=E<T&&(O.overflowX==="auto"||O.overflowX==="scroll"),w=_<D&&(O.overflowY==="auto"||O.overflowY==="scroll"));var $=A&&(Math.abs(b-r)<=o&&N+E<T)-(Math.abs(v-r)<=o&&!!N),H=w&&(Math.abs(m-s)<=o&&I+_<D)-(Math.abs(g-s)<=o&&!!I);if(!yt[u])for(var z=0;z<=u;z++)yt[z]||(yt[z]={});(yt[u].vx!=$||yt[u].vy!=H||yt[u].el!==f)&&(yt[u].el=f,yt[u].vx=$,yt[u].vy=H,clearInterval(yt[u].pid),($!=0||H!=0)&&(c=!0,yt[u].pid=setInterval(function(){i&&this.layer===0&&U.active._onTouchMove(Id);var ut=yt[this.layer].vy?yt[this.layer].vy*a:0,q=yt[this.layer].vx?yt[this.layer].vx*a:0;typeof d=="function"&&d.call(U.dragged.parentNode[Gt],q,ut,e,Id,yt[this.layer].el)!=="continue"||Ud(yt[this.layer].el,q,ut)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&h!==l&&(h=oo(h,!1)));Zb=c}},30),zd=function(t){var n=t.originalEvent,i=t.putSortable,r=t.dragEl,s=t.activeSortable,o=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(n){var c=i||s;a();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,u=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(u)&&(o("spill"),this.onSpill({dragEl:r,putSortable:i}))}};function Kd(){}Kd.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var r=$i(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:zd};wn(Kd,{pluginName:"revertOnSpill"});function Xd(){}Xd.prototype={onSpill:function(t){var n=t.dragEl,i=t.putSortable,r=i||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:zd};wn(Xd,{pluginName:"removeOnSpill"});var Yd=U;function Gd(e){e.querySelectorAll("[data-tags]").forEach(t=>{let n=t.dataset.tagsInputName,i=new hr(t,{delimiters:",",duplicates:!1,pasteAsTags:!0});i.on("change",function(r){i.DOM.scope.parentElement.querySelectorAll(`input[name="${n}"]`).forEach(s=>{s.remove()}),r.detail.tagify.value.forEach(s=>{let o=document.createElement("input");o.type="hidden",o.name=n,o.value=s.value,i.DOM.scope.parentElement.appendChild(o)})}),Yd.create(i.DOM.scope,{draggable:"."+i.settings.classNames.tag,onEnd:function(){i.updateValueByDOMTags()}})})}function fo(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var ey=0;function Qd(e){return"__private_"+ey+++"_"+e}function ny(e,t,n){let i=[];return e.forEach(r=>typeof r!="string"?i.push(r):t[Symbol.split](r).forEach((s,o,a)=>{s!==""&&i.push(s),o<a.length-1&&i.push(n)})),i}function Jd(e,t){let n=/\$/g,i="$$$$",r=[e];if(t==null)return r;for(let s of Object.keys(t))if(s!=="_"){let o=t[s];typeof o=="string"&&(o=n[Symbol.replace](o,i)),r=ny(r,new RegExp(`%\\{${s}\\}`,"g"),o)}return r}var iy=e=>{throw new Error(`missing string: ${e}`)},_r=Qd("onMissingKey"),br=Qd("apply"),zn=class{constructor(t,n){let{onMissingKey:i=iy}=n===void 0?{}:n;Object.defineProperty(this,br,{value:ry}),Object.defineProperty(this,_r,{writable:!0,value:void 0}),this.locale={strings:{},pluralize(r){return r===1?0:1}},Array.isArray(t)?t.forEach(fo(this,br)[br],this):fo(this,br)[br](t),fo(this,_r)[_r]=i}translate(t,n){return this.translateArray(t,n).join("")}translateArray(t,n){let i=this.locale.strings[t];if(i==null&&(fo(this,_r)[_r](t),i=t),typeof i=="object"){if(n&&typeof n.smart_count<"u"){let s=this.locale.pluralize(n.smart_count);return Jd(i[s],n)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof i!="string")throw new Error("string was not a string");return Jd(i,n)}};function ry(e){if(!(e!=null&&e.strings))return;let t=this.locale;Object.assign(this.locale,{strings:{...t.strings,...e.strings},pluralize:e.pluralize||t.pluralize})}var Qh=sn(th(),1);var sy="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var eh=(e=21)=>{let t="",n=e|0;for(;n--;)t+=sy[Math.random()*64|0];return t};var Zh=sn(kh(),1);function go(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Qy=0;function Mh(e){return"__private_"+Qy+++"_"+e}var Zy={version:"4.2.0"},Kn=Mh("callbacks"),ll=Mh("publish"),mo=class{constructor(){Object.defineProperty(this,ll,{value:tw}),this.state={},Object.defineProperty(this,Kn,{writable:!0,value:new Set})}getState(){return this.state}setState(t){let n={...this.state},i={...this.state,...t};this.state=i,go(this,ll)[ll](n,i,t)}subscribe(t){return go(this,Kn)[Kn].add(t),()=>{go(this,Kn)[Kn].delete(t)}}};function tw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];go(this,Kn)[Kn].forEach(i=>{i(...t)})}mo.VERSION=Zy.version;var Fh=mo;function wr(e){let t=e.lastIndexOf(".");return t===-1||t===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,t),extension:e.slice(t+1)}}var cl={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function Er(e){var t;if(e.type)return e.type;let n=e.name?(t=wr(e.name).extension)==null?void 0:t.toLowerCase():null;return n&&n in cl?cl[n]:"application/octet-stream"}function ew(e){return e.charCodeAt(0).toString(32)}function Uh(e){let t="";return e.replace(/[^A-Z0-9]/gi,n=>(t+=`-${ew(n)}`,"/"))+t}function $h(e,t){let n=t||"uppy";return typeof e.name=="string"&&(n+=`-${Uh(e.name.toLowerCase())}`),e.type!==void 0&&(n+=`-${e.type}`),e.meta&&typeof e.meta.relativePath=="string"&&(n+=`-${Uh(e.meta.relativePath.toLowerCase())}`),e.data.size!==void 0&&(n+=`-${e.data.size}`),e.data.lastModified!==void 0&&(n+=`-${e.data.lastModified}`),n}function nw(e){return!e.isRemote||!e.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(e.remote.provider)}function Hh(e,t){if(nw(e))return e.id;let n=Er(e);return $h({...e,type:n},t)}function ul(e){if(e==null&&typeof navigator<"u"&&(e=navigator.userAgent),!e)return!0;let t=/Edge\/(\d+\.\d+)/.exec(e);if(!t)return!0;let i=t[1].split(".",2),r=parseInt(i[0],10),s=parseInt(i[1],10);return r<15||r===15&&s<15063||r>18||r===18&&s>=18218}function dl(e,t){return t.name?t.name:e.split("/")[0]==="image"?`${e.split("/")[0]}.${e.split("/")[1]}`:"noname"}function hl(e){return e<10?`0${e}`:e.toString()}function Hi(){let e=new Date,t=hl(e.getHours()),n=hl(e.getMinutes()),i=hl(e.getSeconds());return`${t}:${n}:${i}`}var jh={debug:()=>{},warn:()=>{},error:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return console.error(`[Uppy] [${Hi()}]`,...t)}},Bh={debug:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return console.debug(`[Uppy] [${Hi()}]`,...t)},warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return console.warn(`[Uppy] [${Hi()}]`,...t)},error:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return console.error(`[Uppy] [${Hi()}]`,...t)}};var Tr=sn(fl(),1),Yh=sn(Xh(),1),Gh={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]},Jt=class extends Error{constructor(t,n){var i;super(t),this.isRestriction=!0,this.isUserFacing=(i=n?.isUserFacing)!=null?i:!0,n!=null&&n.file&&(this.file=n.file)}},vo=class{constructor(t,n){this.getI18n=n,this.getOpts=()=>{var i;let r=t();if(((i=r.restrictions)==null?void 0:i.allowedFileTypes)!=null&&!Array.isArray(r.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return r}}validateAggregateRestrictions(t,n){let{maxTotalFileSize:i,maxNumberOfFiles:r}=this.getOpts().restrictions;if(r&&t.filter(o=>!o.isGhost).length+n.length>r)throw new Jt(`${this.getI18n()("youCanOnlyUploadX",{smart_count:r})}`);if(i){let s=[...t,...n].reduce((o,a)=>{var l;return o+((l=a.size)!=null?l:0)},0);if(s>i)throw new Jt(this.getI18n()("aggregateExceedsSize",{sizeAllowed:(0,Tr.default)(i),size:(0,Tr.default)(s)}))}}validateSingleFile(t){let{maxFileSize:n,minFileSize:i,allowedFileTypes:r}=this.getOpts().restrictions;if(r&&!r.some(a=>a.includes("/")?t.type?(0,Yh.default)(t.type.replace(/;.*?$/,""),a):!1:a[0]==="."&&t.extension?t.extension.toLowerCase()===a.slice(1).toLowerCase():!1)){let a=r.join(", ");throw new Jt(this.getI18n()("youCanOnlyUploadFileTypes",{types:a}),{file:t})}if(n&&t.size!=null&&t.size>n){var s;throw new Jt(this.getI18n()("exceedsSize",{size:(0,Tr.default)(n),file:(s=t.name)!=null?s:this.getI18n()("unnamed")}),{file:t})}if(i&&t.size!=null&&t.size<i)throw new Jt(this.getI18n()("inferiorSize",{size:(0,Tr.default)(i)}),{file:t})}validate(t,n){n.forEach(i=>{this.validateSingleFile(i)}),this.validateAggregateRestrictions(t,n)}validateMinNumberOfFiles(t){let{minNumberOfFiles:n}=this.getOpts().restrictions;if(n&&Object.keys(t).length<n)throw new Jt(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:n}))}getMissingRequiredMetaFields(t){var n;let i=new Jt(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:(n=t.name)!=null?n:this.getI18n()("unnamed")})),{requiredMetaFields:r}=this.getOpts().restrictions,s=[];for(let o of r)(!Object.hasOwn(t.meta,o)||t.meta[o]==="")&&s.push(o);return{missingFields:s,error:i}}};var Jh={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};function x(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var sw=0;function G(e){return"__private_"+sw+++"_"+e}var ow={version:"4.4.4"},_o={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null},Dt=G("plugins"),Nt=G("restricter"),Sr=G("storeUnsubscribe"),je=G("emitter"),Xn=G("preProcessors"),Yn=G("uploaders"),qe=G("postProcessors"),se=G("informAndEmit"),Ir=G("checkRequiredMetaFieldsOnFile"),pl=G("checkRequiredMetaFields"),Ar=G("assertNewUploadAllowed"),vl=G("transformFile"),xr=G("startIfAutoProceed"),Or=G("checkAndUpdateFileState"),Nr=G("getFilesToRetry"),Cr=G("doRetryAll"),_l=G("handleUploadProgress"),Pr=G("updateTotalProgress"),We=G("updateTotalProgressThrottled"),bl=G("calculateTotalProgress"),gl=G("addListeners"),Ce=G("updateOnlineStatus"),Dr=G("requestClientById"),Be=G("createUpload"),ml=G("getUpload"),Gn=G("removeUpload"),Ve=G("runUpload"),bo=class e{constructor(t){Object.defineProperty(this,Ve,{value:Ew}),Object.defineProperty(this,Gn,{value:ww}),Object.defineProperty(this,ml,{value:yw}),Object.defineProperty(this,Be,{value:bw}),Object.defineProperty(this,gl,{value:_w}),Object.defineProperty(this,bl,{value:vw}),Object.defineProperty(this,Pr,{value:mw}),Object.defineProperty(this,Cr,{value:gw}),Object.defineProperty(this,Nr,{value:pw}),Object.defineProperty(this,Or,{value:fw}),Object.defineProperty(this,xr,{value:hw}),Object.defineProperty(this,vl,{value:dw}),Object.defineProperty(this,Ar,{value:uw}),Object.defineProperty(this,pl,{value:cw}),Object.defineProperty(this,Ir,{value:lw}),Object.defineProperty(this,se,{value:aw}),Object.defineProperty(this,Dt,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,Nt,{writable:!0,value:void 0}),Object.defineProperty(this,Sr,{writable:!0,value:void 0}),Object.defineProperty(this,je,{writable:!0,value:(0,Qh.default)()}),Object.defineProperty(this,Xn,{writable:!0,value:new Set}),Object.defineProperty(this,Yn,{writable:!0,value:new Set}),Object.defineProperty(this,qe,{writable:!0,value:new Set}),this.scheduledAutoProceed=null,this.wasOffline=!1,Object.defineProperty(this,_l,{writable:!0,value:(r,s)=>{let o=r?this.getFile(r.id):void 0;if(r==null||!o){this.log(`Not setting progress for a file that has been removed: ${r?.id}`);return}if(o.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${r.id}`);return}let a={bytesTotal:s.bytesTotal,percentage:s.bytesTotal!=null&&Number.isFinite(s.bytesTotal)&&s.bytesTotal>0?Math.round(s.bytesUploaded/s.bytesTotal*100):void 0};o.progress.uploadStarted!=null?this.setFileState(r.id,{progress:{...o.progress,...a,bytesUploaded:s.bytesUploaded}}):this.setFileState(r.id,{progress:{...o.progress,...a}}),x(this,We)[We]()}}),Object.defineProperty(this,We,{writable:!0,value:(0,Zh.default)(()=>x(this,Pr)[Pr](),500,{leading:!0,trailing:!0})}),Object.defineProperty(this,Ce,{writable:!0,value:this.updateOnlineStatus.bind(this)}),Object.defineProperty(this,Dr,{writable:!0,value:new Map}),this.defaultLocale=Jh;let n={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:Gh,meta:{},onBeforeFileAdded:(r,s)=>!Object.hasOwn(s,r.id),onBeforeUpload:r=>r,store:new Fh,logger:jh,infoTimeout:5e3},i={...n,...t};this.opts={...i,restrictions:{...n.restrictions,...t&&t.restrictions}},t&&t.logger&&t.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):t&&t.debug&&(this.opts.logger=Bh),this.log(`Using Core v${e.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({..._o,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:ul(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),x(this,Nt)[Nt]=new vo(()=>this.opts,()=>this.i18n),x(this,Sr)[Sr]=this.store.subscribe((r,s,o)=>{this.emit("state-update",r,s,o),this.updateAll(s)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),x(this,gl)[gl]()}emit(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];x(this,je)[je].emit(t,...i)}on(t,n){return x(this,je)[je].on(t,n),this}once(t,n){return x(this,je)[je].once(t,n),this}off(t,n){return x(this,je)[je].off(t,n),this}updateAll(t){this.iteratePlugins(n=>{n.update(t)})}setState(t){this.store.setState(t)}getState(){return this.store.getState()}patchFilesState(t){let n=this.getState().files;this.setState({files:{...n,...Object.fromEntries(Object.entries(t).map(i=>{let[r,s]=i;return[r,{...n[r],...s}]}))}})}setFileState(t,n){if(!this.getState().files[t])throw new Error(`Can\u2019t set state for ${t} (the file could have been removed)`);this.patchFilesState({[t]:n})}i18nInit(){let t=i=>this.log(`Missing i18n string: ${i}`,"error"),n=new zn([this.defaultLocale,this.opts.locale],{onMissingKey:t});this.i18n=n.translate.bind(n),this.i18nArray=n.translateArray.bind(n),this.locale=n.locale}setOptions(t){this.opts={...this.opts,...t,restrictions:{...this.opts.restrictions,...t?.restrictions}},t.meta&&this.setMeta(t.meta),this.i18nInit(),t.locale&&this.iteratePlugins(n=>{n.setOptions(t)}),this.setState(void 0)}resetProgress(){let t={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},n={...this.getState().files},i=Object.create(null);Object.keys(n).forEach(r=>{i[r]={...n[r],progress:{...n[r].progress,...t},tus:void 0,transloadit:void 0}}),this.setState({files:i,..._o})}clear(){let{capabilities:t,currentUploads:n}=this.getState();if(Object.keys(n).length>0&&!t.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({..._o,files:{}})}addPreProcessor(t){x(this,Xn)[Xn].add(t)}removePreProcessor(t){return x(this,Xn)[Xn].delete(t)}addPostProcessor(t){x(this,qe)[qe].add(t)}removePostProcessor(t){return x(this,qe)[qe].delete(t)}addUploader(t){x(this,Yn)[Yn].add(t)}removeUploader(t){return x(this,Yn)[Yn].delete(t)}setMeta(t){let n={...this.getState().meta,...t},i={...this.getState().files};Object.keys(i).forEach(r=>{i[r]={...i[r],meta:{...i[r].meta,...t}}}),this.log("Adding metadata:"),this.log(t),this.setState({meta:n,files:i})}setFileMeta(t,n){let i={...this.getState().files};if(!i[t]){this.log(`Was trying to set metadata for a file that has been removed: ${t}`);return}let r={...i[t].meta,...n};i[t]={...i[t],meta:r},this.setState({files:i})}getFile(t){return this.getState().files[t]}getFiles(){let{files:t}=this.getState();return Object.values(t)}getFilesByIds(t){return t.map(n=>this.getFile(n))}getObjectOfFilesPerState(){let{files:t,totalProgress:n,error:i}=this.getState(),r=Object.values(t),s=[],o=[],a=[],l=[],c=[],d=[],u=[],h=[],f=[];for(let p of r){let{progress:g}=p;!g.uploadComplete&&g.uploadStarted&&(s.push(p),p.isPaused||h.push(p)),g.uploadStarted||o.push(p),(g.uploadStarted||g.preprocess||g.postprocess)&&a.push(p),g.uploadStarted&&l.push(p),p.isPaused&&c.push(p),g.uploadComplete&&d.push(p),p.error&&u.push(p),(g.preprocess||g.postprocess)&&f.push(p)}return{newFiles:o,startedFiles:a,uploadStartedFiles:l,pausedFiles:c,completeFiles:d,erroredFiles:u,inProgressFiles:s,inProgressNotPausedFiles:h,processingFiles:f,isUploadStarted:l.length>0,isAllComplete:n===100&&d.length===r.length&&f.length===0,isAllErrored:!!i&&u.length===r.length,isAllPaused:s.length!==0&&c.length===s.length,isUploadInProgress:s.length>0,isSomeGhost:r.some(p=>p.isGhost)}}validateRestrictions(t,n){n===void 0&&(n=this.getFiles());try{x(this,Nt)[Nt].validate(n,[t])}catch(i){return i}return null}validateSingleFile(t){try{x(this,Nt)[Nt].validateSingleFile(t)}catch(n){return n.message}return null}validateAggregateRestrictions(t){let n=this.getFiles();try{x(this,Nt)[Nt].validateAggregateRestrictions(n,t)}catch(i){return i.message}return null}checkIfFileAlreadyExists(t){let{files:n}=this.getState();return!!(n[t]&&!n[t].isGhost)}addFile(t){x(this,Ar)[Ar](t);let{nextFilesState:n,validFilesToAdd:i,errors:r}=x(this,Or)[Or]([t]),s=r.filter(a=>a.isRestriction);if(x(this,se)[se](s),r.length>0)throw r[0];this.setState({files:n});let[o]=i;return this.emit("file-added",o),this.emit("files-added",i),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),x(this,xr)[xr](),o.id}addFiles(t){x(this,Ar)[Ar]();let{nextFilesState:n,validFilesToAdd:i,errors:r}=x(this,Or)[Or](t),s=r.filter(a=>a.isRestriction);x(this,se)[se](s);let o=r.filter(a=>!a.isRestriction);if(o.length>0){let a=`Multiple errors occurred while adding files:
`;if(o.forEach(l=>{a+=`
 * ${l.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:a},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(o,a);{let l=new Error(a);throw l.errors=o,l}}this.setState({files:n}),i.forEach(a=>{this.emit("file-added",a)}),this.emit("files-added",i),i.length>5?this.log(`Added batch of ${i.length} files`):Object.values(i).forEach(a=>{this.log(`Added file: ${a.name}
 id: ${a.id}
 type: ${a.type}`)}),i.length>0&&x(this,xr)[xr]()}removeFiles(t){let{files:n,currentUploads:i}=this.getState(),r={...n},s={...i},o=Object.create(null);t.forEach(d=>{n[d]&&(o[d]=n[d],delete r[d])});function a(d){return o[d]===void 0}Object.keys(s).forEach(d=>{let u=i[d].fileIDs.filter(a);if(u.length===0){delete s[d];return}let{capabilities:h}=this.getState();if(u.length!==i[d].fileIDs.length&&!h.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");s[d]={...i[d],fileIDs:u}});let l={currentUploads:s,files:r};Object.keys(r).length===0&&(l.allowNewUpload=!0,l.error=null,l.recoveredState=null),this.setState(l),x(this,We)[We]();let c=Object.keys(o);c.forEach(d=>{this.emit("file-removed",o[d])}),c.length>5?this.log(`Removed ${c.length} files`):this.log(`Removed files: ${c.join(", ")}`)}removeFile(t){this.removeFiles([t])}pauseResume(t){if(!this.getState().capabilities.resumableUploads||this.getFile(t).progress.uploadComplete)return;let n=this.getFile(t),r=!(n.isPaused||!1);return this.setFileState(t,{isPaused:r}),this.emit("upload-pause",n,r),r}pauseAll(){let t={...this.getState().files};Object.keys(t).filter(i=>!t[i].progress.uploadComplete&&t[i].progress.uploadStarted).forEach(i=>{let r={...t[i],isPaused:!0};t[i]=r}),this.setState({files:t}),this.emit("pause-all")}resumeAll(){let t={...this.getState().files};Object.keys(t).filter(i=>!t[i].progress.uploadComplete&&t[i].progress.uploadStarted).forEach(i=>{let r={...t[i],isPaused:!1,error:null};t[i]=r}),this.setState({files:t}),this.emit("resume-all")}async retryAll(){let t=await x(this,Cr)[Cr]();return this.emit("complete",t),t}cancelAll(){this.emit("cancel-all");let{files:t}=this.getState(),n=Object.keys(t);n.length&&this.removeFiles(n),this.setState(_o)}retryUpload(t){this.setFileState(t,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(t));let n=x(this,Be)[Be]([t],{forceAllowNewUpload:!0});return x(this,Ve)[Ve](n)}logout(){this.iteratePlugins(t=>{var n;(n=t.provider)==null||n.logout==null||n.logout()})}[Symbol.for("uppy test: updateTotalProgress")](){return x(this,Pr)[Pr]()}updateOnlineStatus(){var t;((t=window.navigator.onLine)!=null?t:!0)?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(t){if(typeof t!="function"){let l=`Expected a plugin class, but got ${t===null?"null":typeof t}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(l)}for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];let s=new t(this,...i),o=s.id;if(!o)throw new Error("Your plugin must have an id");if(!s.type)throw new Error("Your plugin must have a type");let a=this.getPlugin(o);if(a){let l=`Already found a plugin named '${a.id}'. Tried to use: '${o}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(l)}return t.VERSION&&this.log(`Using ${o} v${t.VERSION}`),s.type in x(this,Dt)[Dt]?x(this,Dt)[Dt][s.type].push(s):x(this,Dt)[Dt][s.type]=[s],s.install(),this.emit("plugin-added",s),this}getPlugin(t){for(let n of Object.values(x(this,Dt)[Dt])){let i=n.find(r=>r.id===t);if(i!=null)return i}}[Symbol.for("uppy test: getPlugins")](t){return x(this,Dt)[Dt][t]}iteratePlugins(t){Object.values(x(this,Dt)[Dt]).flat(1).forEach(t)}removePlugin(t){this.log(`Removing plugin ${t.id}`),this.emit("plugin-remove",t),t.uninstall&&t.uninstall();let n=x(this,Dt)[Dt][t.type],i=n.findIndex(o=>o.id===t.id);i!==-1&&n.splice(i,1);let s={plugins:{...this.getState().plugins,[t.id]:void 0}};this.setState(s)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),x(this,Sr)[Sr](),this.iteratePlugins(t=>{this.removePlugin(t)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",x(this,Ce)[Ce]),window.removeEventListener("offline",x(this,Ce)[Ce]))}hideInfo(){let{info:t}=this.getState();this.setState({info:t.slice(1)}),this.emit("info-hidden")}info(t,n,i){n===void 0&&(n="info"),i===void 0&&(i=3e3);let r=typeof t=="object";this.setState({info:[...this.getState().info,{type:n,message:r?t.message:t,details:r?t.details:null}]}),setTimeout(()=>this.hideInfo(),i),this.emit("info-visible")}log(t,n){let{logger:i}=this.opts;switch(n){case"error":i.error(t);break;case"warning":i.warn(t);break;default:i.debug(t);break}}registerRequestClient(t,n){x(this,Dr)[Dr].set(t,n)}getRequestClientForFile(t){if(!t.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${t.id}`);let n=x(this,Dr)[Dr].get(t.remote.requestClientId);if(n==null)throw new Error(`requestClientId "${t.remote.requestClientId}" not registered for file "${t.id}"`);return n}restore(t){return this.log(`Core: attempting to restore upload "${t}"`),this.getState().currentUploads[t]?x(this,Ve)[Ve](t):(x(this,Gn)[Gn](t),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](){return x(this,Be)[Be](...arguments)}addResultData(t,n){if(!x(this,ml)[ml](t)){this.log(`Not setting result for an upload that has been removed: ${t}`);return}let{currentUploads:i}=this.getState(),r={...i[t],result:{...i[t].result,...n}};this.setState({currentUploads:{...i,[t]:r}})}async upload(){var t;(t=x(this,Dt)[Dt].uploader)!=null&&t.length||this.log("No uploader type plugins are used","warning");let{files:n}=this.getState();if(x(this,Nr)[Nr]().length>0){let s=await x(this,Cr)[Cr]();if(!(this.getFiles().filter(a=>a.progress.uploadStarted==null).length>0))return this.emit("complete",s),s;({files:n}=this.getState())}let r=this.opts.onBeforeUpload(n);return r===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(r&&typeof r=="object"&&(n=r,this.setState({files:n})),Promise.resolve().then(()=>x(this,Nt)[Nt].validateMinNumberOfFiles(n)).catch(s=>{throw x(this,se)[se]([s]),s}).then(()=>{if(!x(this,pl)[pl](n))throw new Jt(this.i18n("missingRequiredMetaField"))}).catch(s=>{throw s}).then(async()=>{let{currentUploads:s}=this.getState(),o=Object.values(s).flatMap(d=>d.fileIDs),a=[];Object.keys(n).forEach(d=>{let u=this.getFile(d);!u.progress.uploadStarted&&o.indexOf(d)===-1&&a.push(u.id)});let l=x(this,Be)[Be](a),c=await x(this,Ve)[Ve](l);return this.emit("complete",c),c}).catch(s=>{throw this.emit("error",s),this.log(s,"error"),s}))}};function aw(e){for(let s of e)s.isRestriction?this.emit("restriction-failed",s.file,s):this.emit("error",s,s.file),this.log(s,"warning");let t=e.filter(s=>s.isUserFacing),n=4,i=t.slice(0,n),r=t.slice(n);i.forEach(s=>{let{message:o,details:a=""}=s;this.info({message:o,details:a},"error",this.opts.infoTimeout)}),r.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:r.length})})}function lw(e){let{missingFields:t,error:n}=x(this,Nt)[Nt].getMissingRequiredMetaFields(e);return t.length>0?(this.setFileState(e.id,{missingRequiredMetaFields:t}),this.log(n.message),this.emit("restriction-failed",e,n),!1):!0}function cw(e){let t=!0;for(let n of Object.values(e))x(this,Ir)[Ir](n)||(t=!1);return t}function uw(e){let{allowNewUpload:t}=this.getState();if(t===!1){let n=new Jt(this.i18n("noMoreFilesAllowed"),{file:e});throw x(this,se)[se]([n]),n}}function dw(e){let t=e instanceof File?{name:e.name,type:e.type,size:e.size,data:e}:e,n=Er(t),i=dl(n,t),r=wr(i).extension,s=Hh(t,this.getID()),o=t.meta||{};o.name=i,o.type=n;let a=Number.isFinite(t.data.size)?t.data.size:null;return{source:t.source||"",id:s,name:i,extension:r||"",meta:{...this.getState().meta,...o},type:n,data:t.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:a,uploadComplete:!1,uploadStarted:null},size:a,isGhost:!1,isRemote:t.isRemote||!1,remote:t.remote,preview:t.preview}}function hw(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(e=>{e.isRestriction||this.log(e.stack||e.message||e)})},4))}function fw(e){let{files:t}=this.getState(),n={...t},i=[],r=[];for(let a of e)try{var s;let l=x(this,vl)[vl](a),c=(s=t[l.id])==null?void 0:s.isGhost;c&&(l={...t[l.id],isGhost:!1,data:a.data},this.log(`Replaced the blob in the restored ghost file: ${l.name}, ${l.id}`));let d=this.opts.onBeforeFileAdded(l,n);if(!d&&this.checkIfFileAlreadyExists(l.id)){var o;throw new Jt(this.i18n("noDuplicates",{fileName:(o=l.name)!=null?o:this.i18n("unnamed")}),{file:a})}if(d===!1&&!c)throw new Jt("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:a});typeof d=="object"&&d!==null&&(l=d),x(this,Nt)[Nt].validateSingleFile(l),n[l.id]=l,i.push(l)}catch(l){r.push(l)}try{x(this,Nt)[Nt].validateAggregateRestrictions(Object.values(t),i)}catch(a){return r.push(a),{nextFilesState:t,validFilesToAdd:[],errors:r}}return{nextFilesState:n,validFilesToAdd:i,errors:r}}function pw(){let{files:e}=this.getState();return Object.keys(e).filter(t=>e[t].error)}async function gw(){let e=x(this,Nr)[Nr](),t={...this.getState().files};if(e.forEach(i=>{t[i]={...t[i],isPaused:!1,error:null}}),this.setState({files:t,error:null}),this.emit("retry-all",this.getFilesByIds(e)),e.length===0)return{successful:[],failed:[]};let n=x(this,Be)[Be](e,{forceAllowNewUpload:!0});return x(this,Ve)[Ve](n)}function mw(){var e,t;let n=x(this,bl)[bl](),i=null;n!=null&&(i=Math.round(n*100),i>100?i=100:i<0&&(i=0)),this.emit("progress",(e=i)!=null?e:0),this.setState({totalProgress:(t=i)!=null?t:0})}function vw(){let t=this.getFiles().filter(a=>a.progress.uploadStarted||a.progress.preprocess||a.progress.postprocess);if(t.length===0)return 0;if(t.every(a=>a.progress.uploadComplete))return 1;let n=a=>a.progress.bytesTotal!=null&&a.progress.bytesTotal!==0,i=t.filter(n),r=t.filter(a=>!n(a));if(i.every(a=>a.progress.uploadComplete)&&r.length>0&&!r.every(a=>a.progress.uploadComplete))return null;let s=i.reduce((a,l)=>{var c;return a+((c=l.progress.bytesTotal)!=null?c:0)},0),o=i.reduce((a,l)=>a+(l.progress.bytesUploaded||0),0);return s===0?0:o/s}function _w(){let e=(i,r,s)=>{let o=i.message||"Unknown error";i.details&&(o+=` ${i.details}`),this.setState({error:o}),r!=null&&r.id in this.getState().files&&this.setFileState(r.id,{error:o,response:s})};this.on("error",e),this.on("upload-error",(i,r,s)=>{if(e(r,i,s),typeof r=="object"&&r.message){var o;this.log(r.message,"error");let a=new Error(this.i18n("failedToUpload",{file:(o=i?.name)!=null?o:""}));a.isUserFacing=!0,a.details=r.message,r.details&&(a.details+=` ${r.details}`),x(this,se)[se]([a])}else x(this,se)[se]([r])});let t=null;this.on("upload-stalled",(i,r)=>{let{message:s}=i,o=r.map(a=>a.meta.name).join(", ");t||(this.info({message:s,details:o},"warning",this.opts.infoTimeout),t=setTimeout(()=>{t=null},this.opts.infoTimeout)),this.log(`${s} ${o}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});let n=i=>{let r=i.filter(o=>{let a=o!=null&&this.getFile(o.id);return a||this.log(`Not setting progress for a file that has been removed: ${o?.id}`),a}),s=Object.fromEntries(r.map(o=>[o.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:o.size}}]));this.patchFilesState(s)};this.on("upload-start",n),this.on("upload-progress",x(this,_l)[_l]),this.on("upload-success",(i,r)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let s=this.getFile(i.id).progress;this.setFileState(i.id,{progress:{...s,postprocess:x(this,qe)[qe].size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:s.bytesTotal},response:r,uploadURL:r.uploadURL,isPaused:!1}),i.size==null&&this.setFileState(i.id,{size:r.bytesUploaded||s.bytesTotal}),x(this,We)[We]()}),this.on("preprocess-progress",(i,r)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:{...this.getFile(i.id).progress,preprocess:r}})}),this.on("preprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let r={...this.getState().files};r[i.id]={...r[i.id],progress:{...r[i.id].progress}},delete r[i.id].progress.preprocess,this.setState({files:r})}),this.on("postprocess-progress",(i,r)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:{...this.getState().files[i.id].progress,postprocess:r}})}),this.on("postprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let r={...this.getState().files};r[i.id]={...r[i.id],progress:{...r[i.id].progress}},delete r[i.id].progress.postprocess,this.setState({files:r})}),this.on("restored",()=>{x(this,We)[We]()}),this.on("dashboard:file-edit-complete",i=>{i&&x(this,Ir)[Ir](i)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",x(this,Ce)[Ce]),window.addEventListener("offline",x(this,Ce)[Ce]),setTimeout(x(this,Ce)[Ce],3e3))}function bw(e,t){t===void 0&&(t={});let{forceAllowNewUpload:n=!1}=t,{allowNewUpload:i,currentUploads:r}=this.getState();if(!i&&!n)throw new Error("Cannot create a new upload: already uploading.");let s=eh();return this.emit("upload",s,this.getFilesByIds(e)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...r,[s]:{fileIDs:e,step:0,result:{}}}}),s}function yw(e){let{currentUploads:t}=this.getState();return t[e]}function ww(e){let t={...this.getState().currentUploads};delete t[e],this.setState({currentUploads:t})}async function Ew(e){let t=()=>{let{currentUploads:s}=this.getState();return s[e]},n=t(),i=[...x(this,Xn)[Xn],...x(this,Yn)[Yn],...x(this,qe)[qe]];try{for(let s=n.step||0;s<i.length&&n;s++){let o=i[s];this.setState({currentUploads:{...this.getState().currentUploads,[e]:{...n,step:s}}});let{fileIDs:a}=n;await o(a,e),n=t()}}catch(s){throw x(this,Gn)[Gn](e),s}if(n){n.fileIDs.forEach(l=>{let c=this.getFile(l);c&&c.progress.postprocess&&this.emit("postprocess-complete",c)});let s=n.fileIDs.map(l=>this.getFile(l)),o=s.filter(l=>!l.error),a=s.filter(l=>l.error);this.addResultData(e,{successful:o,failed:a,uploadID:e}),n=t()}let r;return n&&(r=n.result,x(this,Gn)[Gn](e)),r==null&&this.log(`Not setting result for an upload that has been removed: ${e}`),r}bo.VERSION=ow.version;var yo=bo;var Ao,it,sf,Tw,Jn,tf,of,af,lf,El,yl,wl,Sw,Rr={},cf=[],Aw=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,xo=Array.isArray;function ze(e,t){for(var n in t)e[n]=t[n];return e}function Tl(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function C(e,t,n){var i,r,s,o={};for(s in t)s=="key"?i=t[s]:s=="ref"?r=t[s]:o[s]=t[s];if(arguments.length>2&&(o.children=arguments.length>3?Ao.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)o[s]==null&&(o[s]=e.defaultProps[s]);return Eo(e,o,i,r,null)}function Eo(e,t,n,i,r){var s={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++sf,__i:-1,__u:0};return r==null&&it.vnode!=null&&it.vnode(s),s}function Oo(e){return e.children}function To(e,t){this.props=e,this.context=t}function ji(e,t){if(t==null)return e.__?ji(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?ji(e):null}function uf(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return uf(e)}}function ef(e){(!e.__d&&(e.__d=!0)&&Jn.push(e)&&!So.__r++||tf!=it.debounceRendering)&&((tf=it.debounceRendering)||of)(So)}function So(){for(var e,t,n,i,r,s,o,a=1;Jn.length;)Jn.length>a&&Jn.sort(af),e=Jn.shift(),a=Jn.length,e.__d&&(n=void 0,r=(i=(t=e).__v).__e,s=[],o=[],t.__P&&((n=ze({},i)).__v=i.__v+1,it.vnode&&it.vnode(n),Sl(t.__P,n,i,t.__n,t.__P.namespaceURI,32&i.__u?[r]:null,s,r??ji(i),!!(32&i.__u),o),n.__v=i.__v,n.__.__k[n.__i]=n,ff(s,n,o),n.__e!=r&&uf(n)));So.__r=0}function df(e,t,n,i,r,s,o,a,l,c,d){var u,h,f,p,g,m,v=i&&i.__k||cf,b=t.length;for(l=xw(n,t,v,l,b),u=0;u<b;u++)(f=n.__k[u])!=null&&(h=f.__i==-1?Rr:v[f.__i]||Rr,f.__i=u,m=Sl(e,f,h,r,s,o,a,l,c,d),p=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&Al(h.ref,null,f),d.push(f.ref,f.__c||p,f)),g==null&&p!=null&&(g=p),4&f.__u||h.__k===f.__k?l=hf(f,l,e):typeof f.type=="function"&&m!==void 0?l=m:p&&(l=p.nextSibling),f.__u&=-7);return n.__e=g,l}function xw(e,t,n,i,r){var s,o,a,l,c,d=n.length,u=d,h=0;for(e.__k=new Array(r),s=0;s<r;s++)(o=t[s])!=null&&typeof o!="boolean"&&typeof o!="function"?(l=s+h,(o=e.__k[s]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Eo(null,o,null,null,null):xo(o)?Eo(Oo,{children:o},null,null,null):o.constructor==null&&o.__b>0?Eo(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=e,o.__b=e.__b+1,a=null,(c=o.__i=Ow(o,n,l,u))!=-1&&(u--,(a=n[c])&&(a.__u|=2)),a==null||a.__v==null?(c==-1&&(r>d?h--:r<d&&h++),typeof o.type!="function"&&(o.__u|=4)):c!=l&&(c==l-1?h--:c==l+1?h++:(c>l?h--:h++,o.__u|=4))):e.__k[s]=null;if(u)for(s=0;s<d;s++)(a=n[s])!=null&&(2&a.__u)==0&&(a.__e==i&&(i=ji(a)),gf(a,a));return i}function hf(e,t,n){var i,r;if(typeof e.type=="function"){for(i=e.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=e,t=hf(i[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=ji(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Ow(e,t,n,i){var r,s,o=e.key,a=e.type,l=t[n];if(l===null&&e.key==null||l&&o==l.key&&a==l.type&&(2&l.__u)==0)return n;if(i>(l!=null&&(2&l.__u)==0?1:0))for(r=n-1,s=n+1;r>=0||s<t.length;){if(r>=0){if((l=t[r])&&(2&l.__u)==0&&o==l.key&&a==l.type)return r;r--}if(s<t.length){if((l=t[s])&&(2&l.__u)==0&&o==l.key&&a==l.type)return s;s++}}return-1}function nf(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Aw.test(t)?n:n+"px"}function wo(e,t,n,i,r){var s;t:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||nf(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||nf(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(lf,"$1")),t=t.toLowerCase()in e||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?i?n.u=i.u:(n.u=El,e.addEventListener(t,s?wl:yl,s)):e.removeEventListener(t,s?wl:yl,s);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function rf(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=El++;else if(t.t<n.u)return;return n(it.event?it.event(t):t)}}}function Sl(e,t,n,i,r,s,o,a,l,c){var d,u,h,f,p,g,m,v,b,E,_,A,w,T,D,O,N,I=t.type;if(t.constructor!=null)return null;128&n.__u&&(l=!!(32&n.__u),s=[a=t.__e=n.__e]),(d=it.__b)&&d(t);t:if(typeof I=="function")try{if(v=t.props,b="prototype"in I&&I.prototype.render,E=(d=I.contextType)&&i[d.__c],_=d?E?E.props.value:d.__:i,n.__c?m=(u=t.__c=n.__c).__=u.__E:(b?t.__c=u=new I(v,_):(t.__c=u=new To(v,_),u.constructor=I,u.render=Pw),E&&E.sub(u),u.props=v,u.state||(u.state={}),u.context=_,u.__n=i,h=u.__d=!0,u.__h=[],u._sb=[]),b&&u.__s==null&&(u.__s=u.state),b&&I.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=ze({},u.__s)),ze(u.__s,I.getDerivedStateFromProps(v,u.__s))),f=u.props,p=u.state,u.__v=t,h)b&&I.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),b&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(b&&I.getDerivedStateFromProps==null&&v!==f&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(v,_),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(v,u.__s,_)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(u.props=v,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function($){$&&($.__=t)}),A=0;A<u._sb.length;A++)u.__h.push(u._sb[A]);u._sb=[],u.__h.length&&o.push(u);break t}u.componentWillUpdate!=null&&u.componentWillUpdate(v,u.__s,_),b&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(f,p,g)})}if(u.context=_,u.props=v,u.__P=e,u.__e=!1,w=it.__r,T=0,b){for(u.state=u.__s,u.__d=!1,w&&w(t),d=u.render(u.props,u.state,u.context),D=0;D<u._sb.length;D++)u.__h.push(u._sb[D]);u._sb=[]}else do u.__d=!1,w&&w(t),d=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++T<25);u.state=u.__s,u.getChildContext!=null&&(i=ze(ze({},i),u.getChildContext())),b&&!h&&u.getSnapshotBeforeUpdate!=null&&(g=u.getSnapshotBeforeUpdate(f,p)),O=d,d!=null&&d.type===Oo&&d.key==null&&(O=pf(d.props.children)),a=df(e,xo(O)?O:[O],t,n,i,r,s,o,a,l,c),u.base=t.__e,t.__u&=-161,u.__h.length&&o.push(u),m&&(u.__E=u.__=null)}catch($){if(t.__v=null,l||s!=null)if($.then){for(t.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,t.__e=a}else for(N=s.length;N--;)Tl(s[N]);else t.__e=n.__e,t.__k=n.__k;it.__e($,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):a=t.__e=Cw(n.__e,t,n,i,r,s,o,l,c);return(d=it.diffed)&&d(t),128&t.__u?void 0:a}function ff(e,t,n){for(var i=0;i<n.length;i++)Al(n[i],n[++i],n[++i]);it.__c&&it.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(s){s.call(r)})}catch(s){it.__e(s,r.__v)}})}function pf(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:xo(e)?e.map(pf):ze({},e)}function Cw(e,t,n,i,r,s,o,a,l){var c,d,u,h,f,p,g,m=n.props,v=t.props,b=t.type;if(b=="svg"?r="http://www.w3.org/2000/svg":b=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(c=0;c<s.length;c++)if((f=s[c])&&"setAttribute"in f==!!b&&(b?f.localName==b:f.nodeType==3)){e=f,s[c]=null;break}}if(e==null){if(b==null)return document.createTextNode(v);e=document.createElementNS(r,b,v.is&&v),a&&(it.__m&&it.__m(t,s),a=!1),s=null}if(b==null)m===v||a&&e.data==v||(e.data=v);else{if(s=s&&Ao.call(e.childNodes),m=n.props||Rr,!a&&s!=null)for(m={},c=0;c<e.attributes.length;c++)m[(f=e.attributes[c]).name]=f.value;for(c in m)if(f=m[c],c!="children"){if(c=="dangerouslySetInnerHTML")u=f;else if(!(c in v)){if(c=="value"&&"defaultValue"in v||c=="checked"&&"defaultChecked"in v)continue;wo(e,c,null,f,r)}}for(c in v)f=v[c],c=="children"?h=f:c=="dangerouslySetInnerHTML"?d=f:c=="value"?p=f:c=="checked"?g=f:a&&typeof f!="function"||m[c]===f||wo(e,c,f,m[c],r);if(d)a||u&&(d.__html==u.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(u&&(e.innerHTML=""),df(t.type=="template"?e.content:e,xo(h)?h:[h],t,n,i,b=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,o,s?s[0]:n.__k&&ji(n,0),a,l),s!=null)for(c=s.length;c--;)Tl(s[c]);a||(c="value",b=="progress"&&p==null?e.removeAttribute("value"):p!=null&&(p!==e[c]||b=="progress"&&!p||b=="option"&&p!=m[c])&&wo(e,c,p,m[c],r),c="checked",g!=null&&g!=e[c]&&wo(e,c,g,m[c],r))}return e}function Al(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(r){it.__e(r,n)}}function gf(e,t,n){var i,r;if(it.unmount&&it.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||Al(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){it.__e(s,t)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&gf(i[r],t,n||typeof e.type!="function");n||Tl(e.__e),e.__c=e.__=e.__e=void 0}function Pw(e,t,n){return this.constructor(e,n)}function xl(e,t,n){var i,r,s,o;t==document&&(t=document.documentElement),it.__&&it.__(e,t),r=(i=typeof n=="function")?null:n&&n.__k||t.__k,s=[],o=[],Sl(t,e=(!i&&n||t).__k=C(Oo,null,[e]),r||Rr,Rr,t.namespaceURI,!i&&n?[n]:r?null:t.firstChild?Ao.call(t.childNodes):null,s,!i&&n?n:r?r.__e:t.firstChild,i,o),ff(s,e,o)}Ao=cf.slice,it={__e:function(e,t,n,i){for(var r,s,o;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),o=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,i||{}),o=r.__d),o)return r.__E=r}catch(a){e=a}throw e}},sf=0,Tw=function(e){return e!=null&&e.constructor==null},To.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ze({},this.state),typeof e=="function"&&(e=e(ze({},n),this.props)),e&&ze(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),ef(this))},To.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ef(this))},To.prototype.render=Oo,Jn=[],of=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,af=function(e,t){return e.__v.__b-t.__v.__b},So.__r=0,lf=/(PointerCapture)$|Capture$/i,El=0,yl=rf(!1),wl=rf(!0),Sw=0;function Ol(e){return typeof e!="object"||e===null||!("nodeType"in e)?!1:e.nodeType===Node.ELEMENT_NODE}function Dw(e,t){return t===void 0&&(t=document),typeof e=="string"?t.querySelector(e):Ol(e)?e:null}var mf=Dw;function Nw(e){for(var t;e&&!e.dir;)e=e.parentNode;return(t=e)==null?void 0:t.dir}var Co=Nw;var Tn=class{constructor(t,n){this.uppy=t,this.opts=n??{}}getPluginState(){let{plugins:t}=this.uppy.getState();return t?.[this.id]||{}}setPluginState(t){let{plugins:n}=this.uppy.getState();this.uppy.setState({plugins:{...n,[this.id]:{...n[this.id],...t}}})}setOptions(t){this.opts={...this.opts,...t},this.setPluginState(void 0),this.i18nInit()}i18nInit(){let t=new zn([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.setPluginState(void 0)}addTarget(t){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(t){}afterUpdate(){}};function vf(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Iw=0;function Rw(e){return"__private_"+Iw+++"_"+e}function Lw(e){let t=null,n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=r,t||(t=Promise.resolve().then(()=>(t=null,e(...n)))),t}}var Lr=Rw("updateUI"),Cl=class e extends Tn{constructor(){super(...arguments),Object.defineProperty(this,Lr,{writable:!0,value:void 0})}getTargetPlugin(t){let n;if(typeof t?.addTarget=="function")n=t,n instanceof e||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:n,UIPlugin:e}}));else if(typeof t=="function"){let i=t;this.uppy.iteratePlugins(r=>{r instanceof i&&(n=r)})}return n}mount(t,n){let i=n.id,r=mf(t);if(r){this.isTargetDOMEl=!0;let a=document.createElement("div");return a.classList.add("uppy-Root"),vf(this,Lr)[Lr]=Lw(l=>{this.uppy.getPlugin(this.id)&&(xl(this.render(l,a),a),this.afterUpdate())}),this.uppy.log(`Installing ${i} to a DOM element '${t}'`),this.opts.replaceTargetContent&&(r.innerHTML=""),xl(this.render(this.uppy.getState(),a),a),this.el=a,r.appendChild(a),a.dir=this.opts.direction||Co(a)||"ltr",this.onMount(),this.el}let s=this.getTargetPlugin(t);if(s)return this.uppy.log(`Installing ${i} to ${s.id}`),this.parent=s,this.el=s.addTarget(n),this.onMount(),this.el;this.uppy.log(`Not installing ${i}`);let o=`Invalid target option given to ${i}.`;throw typeof t=="function"?o+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":o+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(o)}render(t,n){throw new Error("Extend the render method to add your plugin to a DOM element")}update(t){if(this.el!=null){var n,i;(n=(i=vf(this,Lr))[Lr])==null||n.call(i,t)}}unmount(){if(this.isTargetDOMEl){var t;(t=this.el)==null||t.remove()}this.onUnmount()}onMount(){}onUnmount(){}},kr=Cl;var Po=Array.from;function Pl(){let e=document.body;return!(!("draggable"in e)||!("ondragstart"in e&&"ondrop"in e)||!("FormData"in window)||!("FileReader"in window))}function Do(e,t,n,i){let{onSuccess:r}=i;e.readEntries(s=>{let o=[...t,...s];s.length?queueMicrotask(()=>{Do(e,o,n,{onSuccess:r})}):r(o)},s=>{n(s),r(t)})}function _f(e,t){return e==null?e:{kind:e.isFile?"file":e.isDirectory?"directory":void 0,name:e.name,getFile(){return new Promise((n,i)=>e.file(n,i))},async*values(){let n=e.createReader();yield*await new Promise(r=>{Do(n,[],t,{onSuccess:s=>r(s.map(o=>_f(o,t)))})})},isSameEntry:void 0}}function bf(e,t,n){try{return n===void 0&&(n=void 0),async function*(){let i=()=>`${t}/${e.name}`;if(e.kind==="file"){let r=await e.getFile();r!=null?(r.relativePath=t?i():null,yield r):n!=null&&(yield n)}else if(e.kind==="directory")for await(let r of e.values())yield*bf(r,t?i():e.name);else n!=null&&(yield n)}()}catch(i){return Promise.reject(i)}}async function*Dl(e,t){let n=await Promise.all(Array.from(e.items,async i=>{var r;let s,o=()=>typeof i.getAsEntry=="function"?i.getAsEntry():i.webkitGetAsEntry();return(r=s)!=null||(s=_f(o(),t)),{fileSystemHandle:s,lastResortFile:i.getAsFile()}}));for(let{lastResortFile:i,fileSystemHandle:r}of n)if(r!=null)try{yield*bf(r,"",i)}catch(s){i!=null?yield i:t(s)}else i!=null&&(yield i)}function Nl(e){let t=Po(e.files);return Promise.resolve(t)}async function Il(e,t){var n;let i=(n=t?.logDropError)!=null?n:Function.prototype;try{let r=[];for await(let s of Dl(e,i))r.push(s);return r}catch{return Nl(e)}}var yf={strings:{dropHereOr:"Drop here or %{browse}",browse:"browse"}};var kw={version:"4.1.2"},Mw={inputName:"files[]",width:"100%",height:"100%"},Qn=class e extends kr{constructor(t,n){super(t,{...Mw,...n}),this.isDragDropSupported=Pl(),this.addFiles=i=>{let r=i.map(s=>({source:this.id,name:s.name,type:s.type,data:s,meta:{relativePath:s.relativePath||null}}));try{this.uppy.addFiles(r)}catch(s){this.uppy.log(s)}},this.onInputChange=i=>{let r=Po(i.currentTarget.files||[]);r.length>0&&(this.uppy.log("[DragDrop] Files selected through input"),this.addFiles(r)),i.currentTarget.value=""},this.handleDragOver=i=>{var r,s;i.preventDefault(),i.stopPropagation();let{types:o}=i.dataTransfer,a=o.some(c=>c==="Files"),{allowNewUpload:l}=this.uppy.getState();if(!a||!l){i.dataTransfer.dropEffect="none";return}i.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),(r=(s=this.opts).onDragOver)==null||r.call(s,i)},this.handleDragLeave=i=>{var r,s;i.preventDefault(),i.stopPropagation(),this.setPluginState({isDraggingOver:!1}),(r=(s=this.opts).onDragLeave)==null||r.call(s,i)},this.handleDrop=async i=>{var r,s;i.preventDefault(),i.stopPropagation(),this.setPluginState({isDraggingOver:!1});let o=l=>{this.uppy.log(l,"error")},a=await Il(i.dataTransfer,{logDropError:o});a.length>0&&(this.uppy.log("[DragDrop] Files dropped"),this.addFiles(a)),(r=(s=this.opts).onDrop)==null||r.call(s,i)},this.type="acquirer",this.id=this.opts.id||"DragDrop",this.title="Drag & Drop",this.defaultLocale=yf,this.i18nInit()}renderHiddenFileInput(){var t;let{restrictions:n}=this.uppy.opts;return C("input",{className:"uppy-DragDrop-input",type:"file",hidden:!0,ref:i=>{this.fileInputRef=i},name:this.opts.inputName,multiple:n.maxNumberOfFiles!==1,accept:(t=n.allowedFileTypes)==null?void 0:t.join(", "),onChange:this.onInputChange})}static renderArrowSvg(){return C("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-DragDrop-arrow",width:"16",height:"16",viewBox:"0 0 16 16"},C("path",{d:"M11 10V0H5v10H2l6 6 6-6h-3zm0 0",fillRule:"evenodd"}))}renderLabel(){return C("div",{className:"uppy-DragDrop-label"},this.i18nArray("dropHereOr",{browse:C("span",{className:"uppy-DragDrop-browse"},this.i18n("browse"))}))}renderNote(){return C("span",{className:"uppy-DragDrop-note"},this.opts.note)}render(){let t=`uppy-u-reset
      uppy-DragDrop-container
      ${this.isDragDropSupported?"uppy-DragDrop--isDragDropSupported":""}
      ${this.getPluginState().isDraggingOver?"uppy-DragDrop--isDraggingOver":""}
    `,n={width:this.opts.width,height:this.opts.height};return C("button",{type:"button",className:t,style:n,onClick:()=>this.fileInputRef.click(),onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},this.renderHiddenFileInput(),C("div",{className:"uppy-DragDrop-inner"},e.renderArrowSvg(),this.renderLabel(),this.renderNote()))}install(){let{target:t}=this.opts;this.setPluginState({isDraggingOver:!1}),t&&this.mount(t,this)}uninstall(){this.unmount()}};Qn.VERSION=kw.version;function No(e,t,n,i){return n===0||e===t?e:i===0?t:e+(t-e)*2**(-i/n)}var oe={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};var Hl=sn(Rl(),1);function Mr(e){let t=[],n="indeterminate",i;for(let{progress:s}of Object.values(e)){let{preprocess:o,postprocess:a}=s;i==null&&(o||a)&&({mode:n,message:i}=o||a),o?.mode==="determinate"&&t.push(o.value),a?.mode==="determinate"&&t.push(a.value)}let r=t.reduce((s,o)=>s+o/t.length,0);return{mode:n,message:i,value:r}}var Fl=sn(Rl(),1),Ml=sn(fl(),1);function Ll(e){let t=Math.floor(e/3600)%24,n=Math.floor(e/60)%60,i=Math.floor(e%60);return{hours:t,minutes:n,seconds:i}}function kl(e){let t=Ll(e),n=t.hours===0?"":`${t.hours}h`,i=t.minutes===0?"":`${t.hours===0?t.minutes:` ${t.minutes.toString(10).padStart(2,"0")}`}m`,r=t.hours!==0?"":`${t.minutes===0?t.seconds:` ${t.seconds.toString(10).padStart(2,"0")}`}s`;return`${n}${i}${r}`}var Fw="\xB7",wf=()=>` ${Fw} `;function Ef(e){let{newFiles:t,isUploadStarted:n,recoveredState:i,i18n:r,uploadState:s,isSomeGhost:o,startUpload:a}=e,l=(0,Fl.default)("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":s===oe.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":o}),c=t&&n&&!i?r("uploadXNewFiles",{smart_count:t}):r("uploadXFiles",{smart_count:t});return C("button",{type:"button",className:l,"aria-label":r("uploadXFiles",{smart_count:t}),onClick:a,disabled:o,"data-uppy-super-focusable":!0},c)}function Tf(e){let{i18n:t,uppy:n}=e;return C("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":t("retryUpload"),onClick:()=>n.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry"},C("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10"},C("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),t("retry"))}function Sf(e){let{i18n:t,uppy:n}=e;return C("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:t("cancel"),"aria-label":t("cancel"),onClick:()=>n.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0},C("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},C("g",{fill:"none",fillRule:"evenodd"},C("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),C("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))}function Af(e){let{isAllPaused:t,i18n:n,isAllComplete:i,resumableUploads:r,uppy:s}=e,o=n(t?"resume":"pause");function a(){if(!i){if(!r){s.cancelAll();return}if(t){s.resumeAll();return}s.pauseAll()}}return C("button",{title:o,"aria-label":o,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:a,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0},C("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},C("g",{fill:"none",fillRule:"evenodd"},C("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),C("path",{fill:"#FFF",d:t?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"}))))}function xf(e){let{i18n:t,doneButtonHandler:n}=e;return C("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:n,"data-uppy-super-focusable":!0},t("done"))}function Of(){return C("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},C("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"}))}function Cf(e){let{progress:t}=e,{value:n,mode:i,message:r}=t;return C("div",{className:"uppy-StatusBar-content"},C(Of,null),i==="determinate"?`${Math.round(n*100)}% \xB7 `:"",r)}function Uw(e){let{numUploads:t,complete:n,totalUploadedSize:i,totalSize:r,totalETA:s,i18n:o}=e,a=t>1,l=(0,Ml.default)(i);return C("div",{className:"uppy-StatusBar-statusSecondary"},a&&o("filesUploadedOfTotal",{complete:n,smart_count:t}),C("span",{className:"uppy-StatusBar-additionalInfo"},a&&wf(),r!=null?o("dataUploadedOfTotal",{complete:l,total:(0,Ml.default)(r)}):o("dataUploadedOfUnknown",{complete:l}),wf(),s!=null&&o("xTimeLeft",{time:kl(s)})))}function Pf(e){let{i18n:t,complete:n,numUploads:i}=e;return C("div",{className:"uppy-StatusBar-statusSecondary"},t("filesUploadedOfTotal",{complete:n,smart_count:i}))}function $w(e){let{i18n:t,newFiles:n,startUpload:i}=e,r=(0,Fl.default)("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return C("div",{className:"uppy-StatusBar-statusSecondary"},C("div",{className:"uppy-StatusBar-statusSecondaryHint"},t("xMoreFilesAdded",{smart_count:n})),C("button",{type:"button",className:r,"aria-label":t("uploadXFiles",{smart_count:n}),onClick:i},t("upload")))}function Df(e){let{i18n:t,supportsUploadProgress:n,totalProgress:i,showProgressDetails:r,isUploadStarted:s,isAllComplete:o,isAllPaused:a,newFiles:l,numUploads:c,complete:d,totalUploadedSize:u,totalSize:h,totalETA:f,startUpload:p}=e,g=l&&s;if(!s||o)return null;let m=t(a?"paused":"uploading");function v(){return!a&&!g&&r?n?C(Uw,{numUploads:c,complete:d,totalUploadedSize:u,totalSize:h,totalETA:f,i18n:t}):C(Pf,{i18n:t,complete:d,numUploads:c}):null}return C("div",{className:"uppy-StatusBar-content","aria-label":m,title:m},a?null:C(Of,null),C("div",{className:"uppy-StatusBar-status"},C("div",{className:"uppy-StatusBar-statusPrimary"},n&&i!==0?`${m}: ${i}%`:m),v(),g?C($w,{i18n:t,newFiles:l,startUpload:p}):null))}function Nf(e){let{i18n:t}=e;return C("div",{className:"uppy-StatusBar-content",role:"status",title:t("complete")},C("div",{className:"uppy-StatusBar-status"},C("div",{className:"uppy-StatusBar-statusPrimary"},C("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11"},C("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),t("complete"))))}function If(e){let{error:t,i18n:n,complete:i,numUploads:r}=e;function s(){let o=`${n("uploadFailed")} 

 ${t}`;alert(o)}return C("div",{className:"uppy-StatusBar-content",title:n("uploadFailed")},C("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11"},C("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),C("div",{className:"uppy-StatusBar-status"},C("div",{className:"uppy-StatusBar-statusPrimary"},n("uploadFailed"),C("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":n("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:s,type:"button"},"?")),C(Pf,{i18n:n,complete:i,numUploads:r})))}var{STATE_ERROR:Rf,STATE_WAITING:Hw,STATE_PREPROCESSING:Ul,STATE_UPLOADING:Ro,STATE_POSTPROCESSING:$l,STATE_COMPLETE:Lo}=oe;function jl(e){let{newFiles:t,allowNewUpload:n,isUploadInProgress:i,isAllPaused:r,resumableUploads:s,error:o,hideUploadButton:a=void 0,hidePauseResumeButton:l=!1,hideCancelButton:c=!1,hideRetryButton:d=!1,recoveredState:u,uploadState:h,totalProgress:f,files:p,supportsUploadProgress:g,hideAfterFinish:m=!1,isSomeGhost:v,doneButtonHandler:b=void 0,isUploadStarted:E,i18n:_,startUpload:A,uppy:w,isAllComplete:T,showProgressDetails:D=void 0,numUploads:O,complete:N,totalSize:I,totalETA:$,totalUploadedSize:H}=e;function z(){switch(h){case $l:case Ul:{let rn=Mr(p);return rn.mode==="determinate"?rn.value*100:f}case Rf:return null;case Ro:return g?f:null;default:return f}}function ut(){switch(h){case $l:case Ul:{let{mode:rn}=Mr(p);return rn==="indeterminate"}case Ro:return!g;default:return!1}}let q=z(),B=q??100,dt=!o&&t&&(!i&&!r||u)&&n&&!a,ht=!c&&h!==Hw&&h!==Lo,Ot=s&&!l&&h===Ro,vt=o&&!T&&!d,Y=b&&h===Lo,we=(0,Hl.default)("uppy-StatusBar-progress",{"is-indeterminate":ut()}),te=(0,Hl.default)("uppy-StatusBar",`is-${h}`,{"has-ghosts":v}),ee=(()=>{switch(h){case Ul:case $l:return C(Cf,{progress:Mr(p)});case Lo:return C(Nf,{i18n:_});case Rf:return C(If,{error:o,i18n:_,numUploads:O,complete:N});case Ro:return C(Df,{i18n:_,supportsUploadProgress:g,totalProgress:f,showProgressDetails:D,isUploadStarted:E,isAllComplete:T,isAllPaused:r,newFiles:t,numUploads:O,complete:N,totalUploadedSize:H,totalSize:I,totalETA:$,startUpload:A});default:return null}})();return!(dt||vt||Ot||ht||Y)&&!ee||h===Lo&&m?null:C("div",{className:te},C("div",{className:we,style:{width:`${B}%`},role:"progressbar","aria-label":`${B}%`,"aria-valuetext":`${B}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":q}),ee,C("div",{className:"uppy-StatusBar-actions"},dt?C(Ef,{newFiles:t,isUploadStarted:E,recoveredState:u,i18n:_,isSomeGhost:v,startUpload:A,uploadState:h}):null,vt?C(Tf,{i18n:_,uppy:w}):null,Ot?C(Af,{isAllPaused:r,i18n:_,isAllComplete:T,resumableUploads:s,uppy:w}):null,ht?C(Sf,{i18n:_,uppy:w}):null,Y?C(xf,{i18n:_,doneButtonHandler:b}):null))}var Lf={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};function at(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var jw=0;function Bi(e){return"__private_"+jw+++"_"+e}var Bw={version:"4.1.3"},Vw=2e3,qw=2e3;function Ww(e,t,n,i){if(e)return oe.STATE_ERROR;if(t)return oe.STATE_COMPLETE;if(n)return oe.STATE_WAITING;let r=oe.STATE_WAITING,s=Object.keys(i);for(let o=0;o<s.length;o++){let{progress:a}=i[s[o]];if(a.uploadStarted&&!a.uploadComplete)return oe.STATE_UPLOADING;a.preprocess&&(r=oe.STATE_PREPROCESSING),a.postprocess&&r!==oe.STATE_PREPROCESSING&&(r=oe.STATE_POSTPROCESSING)}return r}var zw={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null},be=Bi("lastUpdateTime"),Pe=Bi("previousUploadedBytes"),Ke=Bi("previousSpeed"),ae=Bi("previousETA"),Bl=Bi("computeSmoothETA"),Fr=Bi("onUploadStart"),Zn=class extends kr{constructor(t,n){super(t,{...zw,...n}),Object.defineProperty(this,Bl,{value:Kw}),Object.defineProperty(this,be,{writable:!0,value:void 0}),Object.defineProperty(this,Pe,{writable:!0,value:void 0}),Object.defineProperty(this,Ke,{writable:!0,value:void 0}),Object.defineProperty(this,ae,{writable:!0,value:void 0}),this.startUpload=()=>this.uppy.upload().catch(()=>{}),Object.defineProperty(this,Fr,{writable:!0,value:()=>{let{recoveredState:i}=this.uppy.getState();if(at(this,Ke)[Ke]=null,at(this,ae)[ae]=null,i){at(this,Pe)[Pe]=Object.values(i.files).reduce((r,s)=>{let{progress:o}=s;return r+o.bytesUploaded},0),this.uppy.emit("restore-confirmed");return}at(this,be)[be]=performance.now(),at(this,Pe)[Pe]=0}}),this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=Lf,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(t){let{capabilities:n,files:i,allowNewUpload:r,totalProgress:s,error:o,recoveredState:a}=t,{newFiles:l,startedFiles:c,completeFiles:d,isUploadStarted:u,isAllComplete:h,isAllPaused:f,isUploadInProgress:p,isSomeGhost:g}=this.uppy.getObjectOfFilesPerState(),m=a?Object.values(i):l,v=!!n.resumableUploads,b=n.uploadProgress!==!1,E=null,_=0;c.every(w=>w.progress.bytesTotal!=null&&w.progress.bytesTotal!==0)?(E=0,c.forEach(w=>{E+=w.progress.bytesTotal||0,_+=w.progress.bytesUploaded||0})):c.forEach(w=>{_+=w.progress.bytesUploaded||0});let A=at(this,Bl)[Bl]({uploaded:_,total:E});return jl({error:o,uploadState:Ww(o,h,a,t.files||{}),allowNewUpload:r,totalProgress:s,totalSize:E,totalUploadedSize:_,isAllComplete:!1,isAllPaused:f,isUploadStarted:u,isUploadInProgress:p,isSomeGhost:g,recoveredState:a,complete:d.length,newFiles:m.length,numUploads:c.length,totalETA:A,files:i,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:v,supportsUploadProgress:b,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish})}onMount(){let t=this.el;Co(t)||(t.dir="ltr")}install(){let{target:t}=this.opts;t&&this.mount(t,this),this.uppy.on("upload",at(this,Fr)[Fr]),at(this,be)[be]=performance.now(),at(this,Pe)[Pe]=this.uppy.getFiles().reduce((n,i)=>n+i.progress.bytesUploaded,0)}uninstall(){this.unmount(),this.uppy.off("upload",at(this,Fr)[Fr])}};function Kw(e){var t,n;if(e.total==null||e.total===0)return null;let i=e.total-e.uploaded;if(i<=0)return null;(n=(t=at(this,be))[be])!=null||(t[be]=performance.now());let r=performance.now()-at(this,be)[be];if(r===0){var s;return Math.round(((s=at(this,ae)[ae])!=null?s:0)/100)/10}let o=e.uploaded-at(this,Pe)[Pe];if(at(this,Pe)[Pe]=e.uploaded,o<=0){var a;return Math.round(((a=at(this,ae)[ae])!=null?a:0)/100)/10}let l=o/r,c=at(this,Ke)[Ke]==null?l:No(l,at(this,Ke)[Ke],Vw,r);at(this,Ke)[Ke]=c;let d=i/c,u=Math.max(at(this,ae)[ae]-r,0),h=at(this,ae)[ae]==null?d:No(d,u,qw,r);return at(this,ae)[ae]=h,at(this,be)[be]=performance.now(),Math.round(h/100)/10}Zn.VERSION=Bw.version;var Vl=class extends Error{constructor(){super(...arguments),this.name="UserFacingApiError"}},kf=Vl;var Bf=sn(Hf(),1);var Yw=Object.prototype.toString,Gw=e=>Yw.call(e)==="[object Error]",Jw=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);function ql(e){return e&&Gw(e)&&e.name==="TypeError"&&typeof e.message=="string"?e.message==="Load failed"?e.stack===void 0:Jw.has(e.message):!1}var Vi=class extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,{message:t}=t):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}},jf=(e,t,n)=>{let i=n.retries-(t-1);return e.attemptNumber=t,e.retriesLeft=i,e};async function ko(e,t){return new Promise((n,i)=>{t={...t},t.onFailedAttempt??=()=>{},t.shouldRetry??=()=>!0,t.retries??=10;let r=Bf.default.operation(t),s=()=>{r.stop(),i(t.signal?.reason)};t.signal&&!t.signal.aborted&&t.signal.addEventListener("abort",s,{once:!0});let o=()=>{t.signal?.removeEventListener("abort",s),r.stop()};r.attempt(async a=>{try{let l=await e(a);o(),n(l)}catch(l){try{if(!(l instanceof Error))throw new TypeError(`Non-error was thrown: "${l}". You should only throw errors.`);if(l instanceof Vi)throw l.originalError;if(l instanceof TypeError&&!ql(l))throw l;if(jf(l,a,t),await t.shouldRetry(l)||(r.stop(),i(l)),await t.onFailedAttempt(l),!r.retry(l))throw r.mainError()}catch(c){jf(c,a,t),o(),i(c)}}})})}var Wl=class extends Error{constructor(t,n){n===void 0&&(n=null),super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=t,this.isNetworkError=!0,this.request=n}},Vf=Wl;function zl(){return fetch(...arguments).catch(e=>{throw e.name==="AbortError"?e:new Vf(e)})}function Ur(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Kl=class extends Error{constructor(t,n){super(t),this.cause=n?.cause,this.cause&&Ur(this.cause,"isNetworkError")?this.isNetworkError=this.cause.isNetworkError:this.isNetworkError=!1}},qf=Kl;function Xl(e){var t;let i=(t=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?([^\n]+)/i.exec(e))==null?void 0:t[1];return`${/^http:\/\//i.test(e)?"ws":"wss"}://${i}`}var Yl=class extends Error{constructor(){super("Authorization required"),this.name="AuthError",this.isAuthError=!0}},Wf=Yl;function Xe(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Qw=0;function Mo(e){return"__private_"+Qw+++"_"+e}var Zw={version:"4.4.1"};function tE(e){return e.replace(/\/$/,"")}var zf=10,eE=5*60*1e3,Kf=401,Jl=class extends Error{constructor(t){let{statusCode:n,message:i}=t;super(i),this.name="HttpError",this.statusCode=n}};async function nE(e){if(e.status===Kf)throw new Wf;if(e.ok)return e.json();let t=`Failed request with status: ${e.status}. ${e.statusText}`,n;try{n=await e.json(),n.message&&(t=`${t} message: ${n.message}`),n.requestId&&(t=`${t} request-Id: ${n.requestId}`)}catch(i){throw new Error(t,{cause:i})}throw e.status>=400&&e.status<=499&&n.message?new kf(n.message):new Jl({statusCode:e.status,message:t})}function iE(e,t,n){let{progress:i,bytesUploaded:r,bytesTotal:s}=t;if(i){var o;e.uppy.log(`Upload progress: ${i}`),e.uppy.emit("upload-progress",n,{uploadStarted:(o=n.progress.uploadStarted)!=null?o:0,bytesUploaded:r,bytesTotal:s})}}var Ye=Mo("companionHeaders"),$r=Mo("getUrl"),Gl=Mo("requestSocketToken"),Hr=Mo("awaitRemoteFileUpload"),Ge=class{constructor(t,n){Object.defineProperty(this,Hr,{value:sE}),Object.defineProperty(this,$r,{value:rE}),Object.defineProperty(this,Ye,{writable:!0,value:void 0}),Object.defineProperty(this,Gl,{writable:!0,value:async i=>{var r;let{file:s,postBody:o,signal:a}=i;if(((r=s.remote)==null?void 0:r.url)==null)throw new Error("Cannot connect to an undefined URL");return(await this.post(s.remote.url,{...s.remote.body,...o},{signal:a})).token}}),this.uppy=t,this.opts=n,this.onReceiveResponse=this.onReceiveResponse.bind(this),Xe(this,Ye)[Ye]=n.companionHeaders}setCompanionHeaders(t){Xe(this,Ye)[Ye]=t}[Symbol.for("uppy test: getCompanionHeaders")](){return Xe(this,Ye)[Ye]}get hostname(){let{companion:t}=this.uppy.getState(),n=this.opts.companionUrl;return tE(t&&t[n]?t[n]:n)}async headers(t){return t===void 0&&(t=!1),{...{Accept:"application/json",...t?void 0:{"Content-Type":"application/json"}},...Xe(this,Ye)[Ye]}}onReceiveResponse(t){let{headers:n}=t,r=this.uppy.getState().companion||{},s=this.opts.companionUrl;n.has("i-am")&&n.get("i-am")!==r[s]&&this.uppy.setState({companion:{...r,[s]:n.get("i-am")}})}async request(t){let{path:n,method:i="GET",data:r,skipPostResponse:s,signal:o}=t;try{let a=await this.headers(!r),l=await zl(Xe(this,$r)[$r](n),{method:i,signal:o,headers:a,credentials:this.opts.companionCookiesRule||"same-origin",body:r?JSON.stringify(r):null});return s||this.onReceiveResponse(l),await nE(l)}catch(a){throw a.isAuthError||a.name==="UserFacingApiError"||a.name==="AbortError"?a:new qf(`Could not ${i} ${Xe(this,$r)[$r](n)}`,{cause:a})}}async get(t,n){return this.request({...n,path:t})}async post(t,n,i){return this.request({...i,path:t,method:"POST",data:n})}async delete(t,n,i){return this.request({...i,path:t,method:"DELETE",data:n})}async uploadRemoteFile(t,n,i){var r=this;try{let{signal:s,getQueue:o}=i||{};return await ko(async()=>{var a;let l=(a=this.uppy.getFile(t.id))==null?void 0:a.serverToken;if(l!=null)return this.uppy.log(`Connecting to exiting websocket ${l}`),Xe(this,Hr)[Hr]({file:t,queue:o(),signal:s});let d=await o().wrapPromiseFunction(async function(){try{return await Xe(r,Gl)[Gl](...arguments)}catch(u){if(u.isAuthError)throw new Vi(u);if(u.cause==null)throw u;let h=u.cause,f=()=>[408,409,429,418,423].includes(h.statusCode)||h.statusCode>=500&&h.statusCode<=599&&![501,505].includes(h.statusCode);throw h.name==="HttpError"&&!f()?new Vi(h):h}},{priority:-1})({file:t,postBody:n,signal:s}).abortOn(s);if(this.uppy.getFile(t.id))return this.uppy.setFileState(t.id,{serverToken:d}),Xe(this,Hr)[Hr]({file:this.uppy.getFile(t.id),queue:o(),signal:s})},{retries:zf,signal:s,onFailedAttempt:a=>this.uppy.log(`Retrying upload due to: ${a.message}`,"warning")})}catch(s){if(s.name==="AbortError")return;throw this.uppy.emit("upload-error",t,s),s}}};function rE(e){return/^(https?:|)\/\//.test(e)?e:`${this.hostname}/${e}`}async function sE(e){let{file:t,queue:n,signal:i}=e,r,{capabilities:s}=this.uppy.getState();try{return await new Promise((o,a)=>{let l=t.serverToken,c=Xl(t.remote.companionUrl),d,u,h,{isPaused:f}=t,p=(T,D)=>{if(d==null||d.readyState!==d.OPEN){var O;this.uppy.log(`Cannot send "${T}" to socket ${t.id} because the socket state was ${String((O=d)==null?void 0:O.readyState)}`,"warning");return}d.send(JSON.stringify({action:T,payload:D??{}}))};function g(){s.resumableUploads&&p(f?"pause":"resume")}let m=async()=>{u&&u.abort(),u=new AbortController;let T=O=>{var N;this.uppy.setFileState(t.id,{serverToken:null}),(N=u)==null||N.abort==null||N.abort(),a(O)};function D(){clearTimeout(h),!f&&(h=setTimeout(()=>T(new Error("Timeout waiting for message from Companion socket")),eE))}try{await n.wrapPromiseFunction(async()=>{await ko(async()=>new Promise((N,I)=>{d=new WebSocket(`${c}/api/${l}`),D(),d.addEventListener("close",()=>{d=void 0,I(new Error("Socket closed unexpectedly"))}),d.addEventListener("error",H=>{var z;this.uppy.log(`Companion socket error ${JSON.stringify(H)}, closing socket`,"warning"),(z=d)==null||z.close()}),d.addEventListener("open",()=>{g()}),d.addEventListener("message",H=>{D();try{let{action:dt,payload:ht}=JSON.parse(H.data);switch(dt){case"progress":{iE(this,ht,this.uppy.getFile(t.id));break}case"success":{var z,ut,q,B;let Ot=(z=ht.response)==null?void 0:z.responseText;this.uppy.emit("upload-success",this.uppy.getFile(t.id),{uploadURL:ht.url,status:(ut=(q=ht.response)==null?void 0:q.status)!=null?ut:200,body:Ot?JSON.parse(Ot):void 0}),(B=u)==null||B.abort==null||B.abort(),o();break}case"error":{let{message:Ot}=ht.error;throw Object.assign(new Error(Ot),{cause:ht.error})}default:this.uppy.log(`Companion socket unknown action ${dt}`,"warning")}}catch(dt){T(dt)}});let $=()=>{this.uppy.log(`Closing socket ${t.id}`),clearTimeout(h),d&&d.close(),d=void 0};u.signal.addEventListener("abort",()=>{$()})}),{retries:zf,signal:u.signal,onFailedAttempt:()=>{u.signal.aborted||this.uppy.log(`Retrying websocket ${t.id}`)}})})().abortOn(u.signal)}catch(O){if(u.signal.aborted)return;T(O)}},v=T=>{s.resumableUploads&&(f=T,d&&g())},b=T=>{var D;s.individualCancellation&&T.id===t.id&&(p("cancel"),(D=u)==null||D.abort==null||D.abort(),this.uppy.log(`upload ${t.id} was removed`),o())},E=()=>{var T;p("cancel"),(T=u)==null||T.abort==null||T.abort(),this.uppy.log(`upload ${t.id} was canceled`),o()},_=(T,D)=>{T?.id===t.id&&v(D)},A=()=>v(!0),w=()=>v(!1);this.uppy.on("file-removed",b),this.uppy.on("cancel-all",E),this.uppy.on("upload-pause",_),this.uppy.on("pause-all",A),this.uppy.on("resume-all",w),r=()=>{this.uppy.off("file-removed",b),this.uppy.off("cancel-all",E),this.uppy.off("upload-pause",_),this.uppy.off("pause-all",A),this.uppy.off("resume-all",w)},i.addEventListener("abort",()=>{var T;(T=u)==null||T.abort()}),m()})}finally{r?.()}}Ge.VERSION=Zw.version;function Je(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var aE=0;function Xf(e){return"__private_"+aE+++"_"+e}var Bt=Xf("uppy"),jr=Xf("events"),Br=class{constructor(t){Object.defineProperty(this,Bt,{writable:!0,value:void 0}),Object.defineProperty(this,jr,{writable:!0,value:[]}),Je(this,Bt)[Bt]=t}on(t,n){return Je(this,jr)[jr].push([t,n]),Je(this,Bt)[Bt].on(t,n)}remove(){for(let[t,n]of Je(this,jr)[jr].splice(0))Je(this,Bt)[Bt].off(t,n)}onFilePause(t,n){this.on("upload-pause",(i,r)=>{t===i?.id&&n(r)})}onFileRemove(t,n){this.on("file-removed",i=>{t===i.id&&n(i.id)})}onPause(t,n){this.on("upload-pause",(i,r)=>{t===i?.id&&n(r)})}onRetry(t,n){this.on("upload-retry",i=>{t===i?.id&&n()})}onRetryAll(t,n){this.on("retry-all",()=>{Je(this,Bt)[Bt].getFile(t)&&n()})}onPauseAll(t,n){this.on("pause-all",()=>{Je(this,Bt)[Bt].getFile(t)&&n()})}onCancelAll(t,n){var i=this;this.on("cancel-all",function(){Je(i,Bt)[Bt].getFile(t)&&n(...arguments)})}onResumeAll(t,n){this.on("resume-all",()=>{Je(this,Bt)[Bt].getFile(t)&&n()})}};function k(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var lE=0;function Qt(e){return"__private_"+lE+++"_"+e}function cE(e){return new Error("Cancelled",{cause:e})}function Yf(e){if(e!=null){var t;let n=()=>this.abort(e.reason);e.addEventListener("abort",n,{once:!0});let i=()=>{e.removeEventListener("abort",n)};(t=this.then)==null||t.call(this,i,i)}return this}var ce=Qt("activeRequests"),qt=Qt("queuedHandlers"),le=Qt("paused"),ei=Qt("pauseTimer"),Vt=Qt("downLimit"),ni=Qt("upperLimit"),Qe=Qt("rateLimitingTimer"),Vr=Qt("call"),Ze=Qt("queueNext"),tc=Qt("next"),Ql=Qt("queue"),ec=Qt("dequeue"),Zl=Qt("resume"),ii=Qt("increaseLimit"),Fo=class{constructor(t){Object.defineProperty(this,ec,{value:pE}),Object.defineProperty(this,Ql,{value:fE}),Object.defineProperty(this,tc,{value:hE}),Object.defineProperty(this,Ze,{value:dE}),Object.defineProperty(this,Vr,{value:uE}),Object.defineProperty(this,ce,{writable:!0,value:0}),Object.defineProperty(this,qt,{writable:!0,value:[]}),Object.defineProperty(this,le,{writable:!0,value:!1}),Object.defineProperty(this,ei,{writable:!0,value:void 0}),Object.defineProperty(this,Vt,{writable:!0,value:1}),Object.defineProperty(this,ni,{writable:!0,value:void 0}),Object.defineProperty(this,Qe,{writable:!0,value:void 0}),Object.defineProperty(this,Zl,{writable:!0,value:()=>this.resume()}),Object.defineProperty(this,ii,{writable:!0,value:()=>{if(k(this,le)[le]){k(this,Qe)[Qe]=setTimeout(k(this,ii)[ii],0);return}k(this,Vt)[Vt]=this.limit,this.limit=Math.ceil((k(this,ni)[ni]+k(this,Vt)[Vt])/2);for(let n=k(this,Vt)[Vt];n<=this.limit;n++)k(this,Ze)[Ze]();k(this,ni)[ni]-k(this,Vt)[Vt]>3?k(this,Qe)[Qe]=setTimeout(k(this,ii)[ii],2e3):k(this,Vt)[Vt]=Math.floor(k(this,Vt)[Vt]/2)}}),typeof t!="number"||t===0?this.limit=1/0:this.limit=t}run(t,n){return!k(this,le)[le]&&k(this,ce)[ce]<this.limit?k(this,Vr)[Vr](t):k(this,Ql)[Ql](t,n)}wrapSyncFunction(t,n){var i=this;return function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];let a=i.run(()=>(t(...s),queueMicrotask(()=>a.done()),()=>{}),n);return{abortOn:Yf,abort(){a.abort()}}}}wrapPromiseFunction(t,n){var i=this;return function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];let a,l=new Promise((c,d)=>{a=i.run(()=>{let u,h;try{h=Promise.resolve(t(...s))}catch(f){h=Promise.reject(f)}return h.then(f=>{u?d(u):(a.done(),c(f))},f=>{u?d(u):(a.done(),d(f))}),f=>{u=cE(f)}},n)});return l.abort=c=>{a.abort(c)},l.abortOn=Yf,l}}resume(){k(this,le)[le]=!1,clearTimeout(k(this,ei)[ei]);for(let t=0;t<this.limit;t++)k(this,Ze)[Ze]()}pause(t){t===void 0&&(t=null),k(this,le)[le]=!0,clearTimeout(k(this,ei)[ei]),t!=null&&(k(this,ei)[ei]=setTimeout(k(this,Zl)[Zl],t))}rateLimit(t){clearTimeout(k(this,Qe)[Qe]),this.pause(t),this.limit>1&&Number.isFinite(this.limit)&&(k(this,ni)[ni]=this.limit-1,this.limit=k(this,Vt)[Vt],k(this,Qe)[Qe]=setTimeout(k(this,ii)[ii],t))}get isPaused(){return k(this,le)[le]}};function uE(e){k(this,ce)[ce]+=1;let t=!1,n;try{n=e()}catch(i){throw k(this,ce)[ce]-=1,i}return{abort:i=>{t||(t=!0,k(this,ce)[ce]-=1,n?.(i),k(this,Ze)[Ze]())},done:()=>{t||(t=!0,k(this,ce)[ce]-=1,k(this,Ze)[Ze]())}}}function dE(){queueMicrotask(()=>k(this,tc)[tc]())}function hE(){if(k(this,le)[le]||k(this,ce)[ce]>=this.limit||k(this,qt)[qt].length===0)return;let e=k(this,qt)[qt].shift();if(e==null)throw new Error("Invariant violation: next is null");let t=k(this,Vr)[Vr](e.fn);e.abort=t.abort,e.done=t.done}function fE(e,t){let n={fn:e,priority:t?.priority||0,abort:()=>{k(this,ec)[ec](n)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},i=k(this,qt)[qt].findIndex(r=>n.priority>r.priority);return i===-1?k(this,qt)[qt].push(n):k(this,qt)[qt].splice(i,0,n),n}function pE(e){let t=k(this,qt)[qt].indexOf(e);t!==-1&&k(this,qt)[qt].splice(t,1)}var YC=Symbol("__queue");function Gf(e){let t=n=>"error"in n&&!!n.error;return e.filter(n=>!t(n))}function Jf(e){return e.filter(t=>{var n;return!((n=t.progress)!=null&&n.uploadStarted)||!t.isRestored})}var{AbortController:Uo}=globalThis,{AbortSignal:ZC}=globalThis,$o=function(e,t){e===void 0&&(e="Aborted");let n=new DOMException(e,"AbortError");return t!=null&&Ur(t,"cause")&&Object.defineProperty(n,"cause",{__proto__:null,configurable:!0,writable:!0,value:t.cause}),n};function Ho(e,t){return e===!0?Object.keys(t):Array.isArray(e)?e:[]}function P(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var gE=0;function Et(e){return"__private_"+gE+++"_"+e}var mE=1024*1024,Qf={getChunkSize(e){return Math.ceil(e.size/1e4)},onProgress(){},onPartComplete(){},onSuccess(){},onError(e){throw e}};function vE(e){if(typeof e=="string")return parseInt(e,10);if(typeof e=="number")return e;throw new TypeError("Expected a number")}var Yr=Symbol("pausing upload, not an actual error"),It=Et("abortController"),wt=Et("chunks"),Wt=Et("chunkState"),ue=Et("data"),de=Et("file"),Gr=Et("uploadHasStarted"),qr=Et("onError"),oi=Et("onSuccess"),tn=Et("shouldUseMultipart"),si=Et("isRestoring"),Jr=Et("onReject"),ri=Et("maxMultipartParts"),zr=Et("minPartSize"),nc=Et("initChunks"),ic=Et("createUpload"),Wr=Et("resumeUpload"),Kr=Et("onPartProgress"),Xr=Et("onPartComplete"),rc=Et("abortUpload"),sc=class{constructor(t,n){var i,r;Object.defineProperty(this,rc,{value:wE}),Object.defineProperty(this,Wr,{value:yE}),Object.defineProperty(this,ic,{value:bE}),Object.defineProperty(this,nc,{value:_E}),Object.defineProperty(this,It,{writable:!0,value:new Uo}),Object.defineProperty(this,wt,{writable:!0,value:[]}),Object.defineProperty(this,Wt,{writable:!0,value:[]}),Object.defineProperty(this,ue,{writable:!0,value:void 0}),Object.defineProperty(this,de,{writable:!0,value:void 0}),Object.defineProperty(this,Gr,{writable:!0,value:!1}),Object.defineProperty(this,qr,{writable:!0,value:void 0}),Object.defineProperty(this,oi,{writable:!0,value:void 0}),Object.defineProperty(this,tn,{writable:!0,value:void 0}),Object.defineProperty(this,si,{writable:!0,value:void 0}),Object.defineProperty(this,Jr,{writable:!0,value:s=>s?.cause===Yr?null:P(this,qr)[qr](s)}),Object.defineProperty(this,ri,{writable:!0,value:1e4}),Object.defineProperty(this,zr,{writable:!0,value:5*mE}),Object.defineProperty(this,Kr,{writable:!0,value:s=>o=>{if(!o.lengthComputable)return;P(this,Wt)[Wt][s].uploaded=vE(o.loaded);let a=P(this,Wt)[Wt].reduce((l,c)=>l+c.uploaded,0);this.options.onProgress(a,P(this,ue)[ue].size)}}),Object.defineProperty(this,Xr,{writable:!0,value:s=>o=>{P(this,wt)[wt][s]=null,P(this,Wt)[Wt][s].etag=o,P(this,Wt)[Wt][s].done=!0;let a={PartNumber:s+1,ETag:o};this.options.onPartComplete(a)}}),this.options={...Qf,...n},(r=(i=this.options).getChunkSize)!=null||(i.getChunkSize=Qf.getChunkSize),P(this,ue)[ue]=t,P(this,de)[de]=n.file,P(this,oi)[oi]=this.options.onSuccess,P(this,qr)[qr]=this.options.onError,P(this,tn)[tn]=this.options.shouldUseMultipart,P(this,si)[si]=n.uploadId&&n.key,P(this,nc)[nc]()}start(){P(this,Gr)[Gr]?(P(this,It)[It].signal.aborted||P(this,It)[It].abort(Yr),P(this,It)[It]=new Uo,P(this,Wr)[Wr]()):P(this,si)[si]?(this.options.companionComm.restoreUploadFile(P(this,de)[de],{uploadId:this.options.uploadId,key:this.options.key}),P(this,Wr)[Wr]()):P(this,ic)[ic]()}pause(){P(this,It)[It].abort(Yr),P(this,It)[It]=new Uo}abort(t){t!=null&&t.really?P(this,rc)[rc]():this.pause()}[Symbol.for("uppy test: getChunkState")](){return P(this,Wt)[Wt]}};function _E(){let e=P(this,ue)[ue].size,t=typeof P(this,tn)[tn]=="function"?P(this,tn)[tn](P(this,de)[de]):!!P(this,tn)[tn];if(t&&e>P(this,zr)[zr]){let n=Math.max(this.options.getChunkSize(P(this,ue)[ue]),P(this,zr)[zr]),i=Math.floor(e/n);i>P(this,ri)[ri]&&(i=P(this,ri)[ri],n=e/P(this,ri)[ri]),P(this,wt)[wt]=Array(i);for(let r=0,s=0;r<e;r+=n,s++){let o=Math.min(e,r+n),a=()=>{let l=r;return P(this,ue)[ue].slice(l,o)};if(P(this,wt)[wt][s]={getData:a,onProgress:P(this,Kr)[Kr](s),onComplete:P(this,Xr)[Xr](s),shouldUseMultipart:t},P(this,si)[si]){let l=r+n>e?e-r:n;P(this,wt)[wt][s].setAsUploaded=()=>{P(this,wt)[wt][s]=null,P(this,Wt)[Wt][s].uploaded=l}}}}else P(this,wt)[wt]=[{getData:()=>P(this,ue)[ue],onProgress:P(this,Kr)[Kr](0),onComplete:P(this,Xr)[Xr](0),shouldUseMultipart:t}];P(this,Wt)[Wt]=P(this,wt)[wt].map(()=>({uploaded:0}))}function bE(){this.options.companionComm.uploadFile(P(this,de)[de],P(this,wt)[wt],P(this,It)[It].signal).then(P(this,oi)[oi],P(this,Jr)[Jr]),P(this,Gr)[Gr]=!0}function yE(){this.options.companionComm.resumeUploadFile(P(this,de)[de],P(this,wt)[wt],P(this,It)[It].signal).then(P(this,oi)[oi],P(this,Jr)[Jr])}function wE(){P(this,It)[It].abort(),this.options.companionComm.abortFileUpload(P(this,de)[de]).catch(e=>this.options.log(e))}var Zf=sc;function xt(e){if(e!=null&&e.aborted)throw $o("The operation was aborted",{cause:e.reason})}function EE(e){let{method:t="PUT",CanonicalUri:n="/",CanonicalQueryString:i="",SignedHeaders:r,HashedPayload:s}=e,o=Object.keys(r).map(a=>a.toLowerCase()).sort();return[t,n,i,...o.map(a=>`${a}:${r[a]}`),"",o.join(";"),s].join(`
`)}var oc=new TextEncoder,ac={name:"HMAC",hash:"SHA-256"};async function TE(e){let{subtle:t}=globalThis.crypto;return t.digest(ac.hash,oc.encode(e))}async function SE(e){let{subtle:t}=globalThis.crypto;return t.importKey("raw",typeof e=="string"?oc.encode(e):e,ac,!1,["sign"])}function tp(e){let t=new Uint8Array(e),n="";for(let i=0;i<t.length;i++)n+=t[i].toString(16).padStart(2,"0");return n}async function Qr(e,t){let{subtle:n}=globalThis.crypto;return n.sign(ac,await SE(e),oc.encode(t))}async function lc(e){let{accountKey:t,accountSecret:n,sessionToken:i,bucketName:r,Key:s,Region:o,expires:a,uploadId:l,partNumber:c}=e,d="s3",u=`${d}.${o}.amazonaws.com`,h=`/${r}/${encodeURI(s).replace(/[;?:@&=+$,#!'()*]/g,N=>`%${N.charCodeAt(0).toString(16).toUpperCase()}`)}`,f="UNSIGNED-PAYLOAD",p=new Date().toISOString().replace(/[-:]|\.\d+/g,""),g=p.slice(0,8),m=`${g}/${o}/${d}/aws4_request`,v=new URL(`https://${u}${h}`);v.searchParams.set("X-Amz-Algorithm","AWS4-HMAC-SHA256"),v.searchParams.set("X-Amz-Content-Sha256",f),v.searchParams.set("X-Amz-Credential",`${t}/${m}`),v.searchParams.set("X-Amz-Date",p),v.searchParams.set("X-Amz-Expires",a),v.searchParams.set("X-Amz-Security-Token",i),v.searchParams.set("X-Amz-SignedHeaders","host"),c&&v.searchParams.set("partNumber",c),l&&v.searchParams.set("uploadId",l),v.searchParams.set("x-id",c&&l?"UploadPart":"PutObject");let b=EE({CanonicalUri:h,CanonicalQueryString:v.search.slice(1),SignedHeaders:{host:u},HashedPayload:f}),E=tp(await TE(b)),_=["AWS4-HMAC-SHA256",p,m,E].join(`
`),A=await Qr(`AWS4${n}`,g),w=await Qr(A,o),T=await Qr(w,d),D=await Qr(T,"aws4_request"),O=tp(await Qr(D,_));return v.searchParams.set("X-Amz-Signature",O),v}function F(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var AE=0;function zt(e){return"__private_"+AE+++"_"+e}function xE(e){let t=new URL(e);return t.search="",t.hash="",t.href}var Zr=zt("abortMultipartUpload"),Rt=zt("cache"),ts=zt("createMultipartUpload"),es=zt("fetchSignature"),rs=zt("getUploadParameters"),ns=zt("listParts"),ci=zt("previousRetryDelay"),ui=zt("requests"),ai=zt("retryDelays"),li=zt("sendCompletionRequest"),en=zt("setS3MultipartState"),di=zt("uploadPartBytes"),Lt=zt("getFile"),cc=zt("shouldRetry"),is=zt("nonMultipartUpload"),jo=class{constructor(t,n,i,r){Object.defineProperty(this,is,{value:CE}),Object.defineProperty(this,cc,{value:OE}),Object.defineProperty(this,Zr,{writable:!0,value:void 0}),Object.defineProperty(this,Rt,{writable:!0,value:new WeakMap}),Object.defineProperty(this,ts,{writable:!0,value:void 0}),Object.defineProperty(this,es,{writable:!0,value:void 0}),Object.defineProperty(this,rs,{writable:!0,value:void 0}),Object.defineProperty(this,ns,{writable:!0,value:void 0}),Object.defineProperty(this,ci,{writable:!0,value:void 0}),Object.defineProperty(this,ui,{writable:!0,value:void 0}),Object.defineProperty(this,ai,{writable:!0,value:void 0}),Object.defineProperty(this,li,{writable:!0,value:void 0}),Object.defineProperty(this,en,{writable:!0,value:void 0}),Object.defineProperty(this,di,{writable:!0,value:void 0}),Object.defineProperty(this,Lt,{writable:!0,value:void 0}),F(this,ui)[ui]=t,F(this,en)[en]=i,F(this,Lt)[Lt]=r,this.setOptions(n)}setOptions(t){let n=F(this,ui)[ui];if("abortMultipartUpload"in t&&(F(this,Zr)[Zr]=n.wrapPromiseFunction(t.abortMultipartUpload,{priority:1})),"createMultipartUpload"in t&&(F(this,ts)[ts]=n.wrapPromiseFunction(t.createMultipartUpload,{priority:-1})),"signPart"in t&&(F(this,es)[es]=n.wrapPromiseFunction(t.signPart)),"listParts"in t&&(F(this,ns)[ns]=n.wrapPromiseFunction(t.listParts)),"completeMultipartUpload"in t&&(F(this,li)[li]=n.wrapPromiseFunction(t.completeMultipartUpload,{priority:1})),"retryDelays"in t){var i;F(this,ai)[ai]=(i=t.retryDelays)!=null?i:[]}"uploadPartBytes"in t&&(F(this,di)[di]=n.wrapPromiseFunction(t.uploadPartBytes,{priority:1/0})),"getUploadParameters"in t&&(F(this,rs)[rs]=n.wrapPromiseFunction(t.getUploadParameters))}async getUploadId(t,n){let i;for(;(i=F(this,Rt)[Rt].get(t.data))!=null;)try{return await i}catch{}let r=F(this,ts)[ts](F(this,Lt)[Lt](t),n),s=()=>{r.abort(n.reason),F(this,Rt)[Rt].delete(t.data)};return n.addEventListener("abort",s,{once:!0}),F(this,Rt)[Rt].set(t.data,r),r.then(async o=>{n.removeEventListener("abort",s),F(this,en)[en](t,o),F(this,Rt)[Rt].set(t.data,o)},()=>{n.removeEventListener("abort",s),F(this,Rt)[Rt].delete(t.data)}),r}async abortFileUpload(t){let n=F(this,Rt)[Rt].get(t.data);if(n==null)return;F(this,Rt)[Rt].delete(t.data),F(this,en)[en](t,Object.create(null));let i;try{i=await n}catch{return}await F(this,Zr)[Zr](F(this,Lt)[Lt](t),i)}async uploadFile(t,n,i){if(xt(i),n.length===1&&!n[0].shouldUseMultipart)return F(this,is)[is](t,n[0],i);let{uploadId:r,key:s}=await this.getUploadId(t,i);xt(i);try{let o=await Promise.all(n.map((a,l)=>this.uploadChunk(t,l+1,a,i)));return xt(i),await F(this,li)[li](F(this,Lt)[Lt](t),{key:s,uploadId:r,parts:o,signal:i},i).abortOn(i)}catch(o){throw o?.cause!==Yr&&o?.name!=="AbortError"&&this.abortFileUpload(t),o}}restoreUploadFile(t,n){F(this,Rt)[Rt].set(t.data,n)}async resumeUploadFile(t,n,i){if(xt(i),n.length===1&&n[0]!=null&&!n[0].shouldUseMultipart)return F(this,is)[is](t,n[0],i);let{uploadId:r,key:s}=await this.getUploadId(t,i);xt(i);let o=await F(this,ns)[ns](F(this,Lt)[Lt](t),{uploadId:r,key:s,signal:i},i).abortOn(i);xt(i);let a=await Promise.all(n.map((l,c)=>{let d=c+1,u=o.find(h=>{let{PartNumber:f}=h;return f===d});return u==null?this.uploadChunk(t,d,l,i):(l==null||l.setAsUploaded==null||l.setAsUploaded(),{PartNumber:d,ETag:u.ETag})}));return xt(i),F(this,li)[li](F(this,Lt)[Lt](t),{key:s,uploadId:r,parts:a,signal:i},i).abortOn(i)}async uploadChunk(t,n,i,r){xt(r);let{uploadId:s,key:o}=await this.getUploadId(t,r),a=F(this,ai)[ai].values(),l=F(this,ai)[ai].values(),c=()=>{let d=a.next();return d==null||d.done?null:d.value};for(;;){xt(r);let d=i.getData(),{onProgress:u,onComplete:h}=i,f;try{f=await F(this,es)[es](F(this,Lt)[Lt](t),{uploadId:s,key:o,partNumber:n,body:d,signal:r}).abortOn(r)}catch(p){let g=c();if(g==null||r.aborted)throw p;await new Promise(m=>setTimeout(m,g));continue}xt(r);try{return{PartNumber:n,...await F(this,di)[di]({signature:f,body:d,size:d.size,onProgress:u,onComplete:h,signal:r}).abortOn(r)}}catch(p){if(!await F(this,cc)[cc](p,l))throw p}}}};async function OE(e,t){var n;let i=F(this,ui)[ui],r=e==null||(n=e.source)==null?void 0:n.status;if(r==null)return!1;if(r===403&&e.message==="Request has expired"){if(!i.isPaused){if(i.limit===1||F(this,ci)[ci]==null){let s=t.next();if(s==null||s.done)return!1;F(this,ci)[ci]=s.value}i.rateLimit(0),await new Promise(s=>setTimeout(s,F(this,ci)[ci]))}}else if(r===429){if(!i.isPaused){let s=t.next();if(s==null||s.done)return!1;i.rateLimit(s.value)}}else{if(r>400&&r<500&&r!==409)return!1;if(typeof navigator<"u"&&navigator.onLine===!1)i.isPaused||(i.pause(),window.addEventListener("online",()=>{i.resume()},{once:!0}));else{let s=t.next();if(s==null||s.done)return!1;await new Promise(o=>setTimeout(o,s.value))}}return!0}async function CE(e,t,n){var i;let{method:r="POST",url:s,fields:o,headers:a}=await F(this,rs)[rs](F(this,Lt)[Lt](e),{signal:n}).abortOn(n),l,c=t.getData();if(r.toUpperCase()==="POST"){let p=new FormData;Object.entries(o).forEach(g=>{let[m,v]=g;return p.set(m,v)}),p.set("file",c),l=p}else l=c;let{onProgress:d,onComplete:u}=t,h=await F(this,di)[di]({signature:{url:s,headers:a,method:r},body:l,size:c.size,onProgress:d,onComplete:u,signal:n}).abortOn(n),f=o?.key;return F(this,en)[en](e,{key:f}),{...h,location:(i=h.location)!=null?i:xE(s),bucket:o?.bucket,key:f}}function L(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var PE=0;function Zt(e){return"__private_"+PE+++"_"+e}var DE={version:"4.2.3"};function qi(e){if(e!=null&&e.error){let t=new Error(e.message);throw Object.assign(t,e.error),t}return e}function np(e){let t=e.Expiration;if(t){let n=Math.floor((new Date(t)-Date.now())/1e3);if(n>9)return n}}function ep(e){let{meta:t,allowedMetaFields:n,querify:i=!1}=e,r=n??Object.keys(t);return t?Object.fromEntries(r.filter(s=>t[s]!=null).map(s=>{let o=i?`metadata[${s}]`:s,a=String(t[s]);return[o,a]})):{}}var NE={allowedMetaFields:!0,limit:6,getTemporarySecurityCredentials:!1,shouldUseMultipart:e=>(e.size||0)>100*1024*1024,retryDelays:[0,1e3,3e3,5e3]},hi=Zt("companionCommunicationQueue"),tt=Zt("client"),ss=Zt("setClient"),Kt=Zt("assertHost"),kt=Zt("cachedTemporaryCredentials"),uc=Zt("getTemporarySecurityCredentials"),dc=Zt("setS3MultipartState"),pi=Zt("getFile"),hc=Zt("uploadLocalFile"),fc=Zt("getCompanionClientArgs"),os=Zt("upload"),fi=Zt("setCompanionHeaders"),nn=Zt("setResumableUploadsCapability"),as=Zt("resetResumableCapability"),Wi=class e extends Tn{constructor(t,n){var i;super(t,{...NE,uploadPartBytes:e.uploadPartBytes,createMultipartUpload:null,listParts:null,abortMultipartUpload:null,completeMultipartUpload:null,signPart:null,getUploadParameters:null,...n}),Object.defineProperty(this,fc,{value:ME}),Object.defineProperty(this,hc,{value:kE}),Object.defineProperty(this,uc,{value:LE}),Object.defineProperty(this,Kt,{value:RE}),Object.defineProperty(this,ss,{value:IE}),Object.defineProperty(this,hi,{writable:!0,value:void 0}),Object.defineProperty(this,tt,{writable:!0,value:void 0}),Object.defineProperty(this,kt,{writable:!0,value:void 0}),Object.defineProperty(this,dc,{writable:!0,value:(s,o)=>{let{key:a,uploadId:l}=o,c=this.uppy.getFile(s.id);c!=null&&this.uppy.setFileState(s.id,{s3Multipart:{...c.s3Multipart,key:a,uploadId:l}})}}),Object.defineProperty(this,pi,{writable:!0,value:s=>this.uppy.getFile(s.id)||s}),Object.defineProperty(this,os,{writable:!0,value:async s=>{if(s.length===0)return;let o=this.uppy.getFilesByIds(s),a=Gf(o),l=Jf(a);this.uppy.emit("upload-start",l);let c=a.map(u=>{if(u.isRemote){let h=()=>this.requests;L(this,nn)[nn](!1);let f=new AbortController,p=m=>{m.id===u.id&&f.abort()};this.uppy.on("file-removed",p);let g=this.uppy.getRequestClientForFile(u).uploadRemoteFile(u,L(this,fc)[fc](u),{signal:f.signal,getQueue:h});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",p)},{priority:-1})(),g}return L(this,hc)[hc](u)}),d=await Promise.allSettled(c);return L(this,nn)[nn](!0),d}}),Object.defineProperty(this,fi,{writable:!0,value:()=>{var s;(s=L(this,tt)[tt])==null||s.setCompanionHeaders(this.opts.headers)}}),Object.defineProperty(this,nn,{writable:!0,value:s=>{let{capabilities:o}=this.uppy.getState();this.uppy.setState({capabilities:{...o,resumableUploads:s}})}}),Object.defineProperty(this,as,{writable:!0,value:()=>{L(this,nn)[nn](!0)}}),this.type="uploader",this.id=this.opts.id||"AwsS3Multipart",L(this,ss)[ss](n);let r={createMultipartUpload:this.createMultipartUpload,listParts:this.listParts,abortMultipartUpload:this.abortMultipartUpload,completeMultipartUpload:this.completeMultipartUpload,signPart:n!=null&&n.getTemporarySecurityCredentials?this.createSignedURL:this.signPart,getUploadParameters:n!=null&&n.getTemporarySecurityCredentials?this.createSignedURL:this.getUploadParameters};for(let s of Object.keys(r))this.opts[s]==null&&(this.opts[s]=r[s].bind(this));this.requests=(i=this.opts.rateLimitedQueue)!=null?i:new Fo(this.opts.limit),L(this,hi)[hi]=new jo(this.requests,this.opts,L(this,dc)[dc],L(this,pi)[pi]),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}[Symbol.for("uppy test: getClient")](){return L(this,tt)[tt]}setOptions(t){L(this,hi)[hi].setOptions(t),super.setOptions(t),L(this,ss)[ss](t)}resetUploaderReferences(t,n){this.uploaders[t]&&(this.uploaders[t].abort({really:n?.abort||!1}),this.uploaders[t]=null),this.uploaderEvents[t]&&(this.uploaderEvents[t].remove(),this.uploaderEvents[t]=null)}createMultipartUpload(t,n){L(this,Kt)[Kt]("createMultipartUpload"),xt(n);let i=Ho(this.opts.allowedMetaFields,t.meta),r=ep({meta:t.meta,allowedMetaFields:i});return L(this,tt)[tt].post("s3/multipart",{filename:t.name,type:t.type,metadata:r},{signal:n}).then(qi)}listParts(t,n,i){var r;let{key:s,uploadId:o,signal:a}=n;(r=a)!=null||(a=i),L(this,Kt)[Kt]("listParts"),xt(a);let l=encodeURIComponent(s);return L(this,tt)[tt].get(`s3/multipart/${encodeURIComponent(o)}?key=${l}`,{signal:a}).then(qi)}completeMultipartUpload(t,n,i){var r;let{key:s,uploadId:o,parts:a,signal:l}=n;(r=l)!=null||(l=i),L(this,Kt)[Kt]("completeMultipartUpload"),xt(l);let c=encodeURIComponent(s),d=encodeURIComponent(o);return L(this,tt)[tt].post(`s3/multipart/${d}/complete?key=${c}`,{parts:a.map(u=>{let{ETag:h,PartNumber:f}=u;return{ETag:h,PartNumber:f}})},{signal:l}).then(qi)}async createSignedURL(t,n){let i=await L(this,uc)[uc](n),r=np(i.credentials)||604800,{uploadId:s,key:o,partNumber:a}=n;return{method:"PUT",expires:r,fields:{},url:`${await lc({accountKey:i.credentials.AccessKeyId,accountSecret:i.credentials.SecretAccessKey,sessionToken:i.credentials.SessionToken,expires:r,bucketName:i.bucket,Region:i.region,Key:o??`${crypto.randomUUID()}-${t.name}`,uploadId:s,partNumber:a})}`,headers:{"Content-Type":t.type}}}signPart(t,n){let{uploadId:i,key:r,partNumber:s,signal:o}=n;if(L(this,Kt)[Kt]("signPart"),xt(o),i==null||r==null||s==null)throw new Error("Cannot sign without a key, an uploadId, and a partNumber");let a=encodeURIComponent(r);return L(this,tt)[tt].get(`s3/multipart/${encodeURIComponent(i)}/${s}?key=${a}`,{signal:o}).then(qi)}abortMultipartUpload(t,n){let{key:i,uploadId:r,signal:s}=n;L(this,Kt)[Kt]("abortMultipartUpload");let o=encodeURIComponent(i),a=encodeURIComponent(r);return L(this,tt)[tt].delete(`s3/multipart/${a}?key=${o}`,void 0,{signal:s}).then(qi)}getUploadParameters(t,n){L(this,Kt)[Kt]("getUploadParameters");let{meta:i}=t,{type:r,name:s}=i,o=Ho(this.opts.allowedMetaFields,t.meta),a=ep({meta:i,allowedMetaFields:o,querify:!0}),l=new URLSearchParams({filename:s,type:r,...a});return L(this,tt)[tt].get(`s3/params?${l}`,n)}static async uploadPartBytes(t){let{signature:{url:n,expires:i,headers:r,method:s="PUT"},body:o,size:a=o.size,onProgress:l,onComplete:c,signal:d}=t;if(xt(d),n==null)throw new Error("Cannot upload to an undefined URL");return new Promise((u,h)=>{let f=new XMLHttpRequest;f.open(s,n,!0),r&&Object.keys(r).forEach(m=>{f.setRequestHeader(m,r[m])}),f.responseType="text",typeof i=="number"&&(f.timeout=i*1e3);function p(){f.abort()}function g(){d?.removeEventListener("abort",p)}d?.addEventListener("abort",p),f.upload.addEventListener("progress",m=>{l(m)}),f.addEventListener("abort",()=>{g(),h($o())}),f.addEventListener("timeout",()=>{g();let m=new Error("Request has expired");m.source={status:403},h(m)}),f.addEventListener("load",()=>{if(g(),f.status===403&&f.responseText.includes("<Message>Request has expired</Message>")){let _=new Error("Request has expired");_.source=f,h(_);return}if(f.status<200||f.status>=300){let _=new Error("Non 2xx");_.source=f,h(_);return}l?.({loaded:a,lengthComputable:!0});let m=f.getAllResponseHeaders().trim().split(/[\r\n]+/),v={__proto__:null};for(let _ of m){let A=_.split(": "),w=A.shift(),T=A.join(": ");v[w]=T}let{etag:b,location:E}=v;if(s.toUpperCase()==="POST"&&E==null&&console.error("@uppy/aws-s3: Could not read the Location header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket"),b==null){console.error("@uppy/aws-s3: Could not read the ETag header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket");return}c?.(b),u({...v,ETag:b})}),f.addEventListener("error",m=>{g();let v=new Error("Unknown error");v.source=m.target,h(v)}),f.send(o)})}install(){L(this,nn)[nn](!0),this.uppy.addPreProcessor(L(this,fi)[fi]),this.uppy.addUploader(L(this,os)[os]),this.uppy.on("cancel-all",L(this,as)[as])}uninstall(){this.uppy.removePreProcessor(L(this,fi)[fi]),this.uppy.removeUploader(L(this,os)[os]),this.uppy.off("cancel-all",L(this,as)[as])}};function IE(e){e==null||!("endpoint"in e||"companionUrl"in e||"headers"in e||"companionHeaders"in e||"cookiesRule"in e||"companionCookiesRule"in e)||("companionUrl"in e&&!("endpoint"in e)&&this.uppy.log("`companionUrl` option has been removed in @uppy/aws-s3, use `endpoint` instead.","warning"),"companionHeaders"in e&&!("headers"in e)&&this.uppy.log("`companionHeaders` option has been removed in @uppy/aws-s3, use `headers` instead.","warning"),"companionCookiesRule"in e&&!("cookiesRule"in e)&&this.uppy.log("`companionCookiesRule` option has been removed in @uppy/aws-s3, use `cookiesRule` instead.","warning"),"endpoint"in e?L(this,tt)[tt]=new Ge(this.uppy,{pluginId:this.id,provider:"AWS",companionUrl:this.opts.endpoint,companionHeaders:this.opts.headers,companionCookiesRule:this.opts.cookiesRule}):("headers"in e&&L(this,fi)[fi](),"cookiesRule"in e&&(L(this,tt)[tt].opts.companionCookiesRule=e.cookiesRule)))}function RE(e){if(!L(this,tt)[tt])throw new Error(`Expected a \`endpoint\` option containing a URL, or if you are not using Companion, a custom \`${e}\` implementation.`)}async function LE(e){if(xt(e?.signal),L(this,kt)[kt]==null){let{getTemporarySecurityCredentials:t}=this.opts;t===!0?(L(this,Kt)[Kt]("getTemporarySecurityCredentials"),L(this,kt)[kt]=L(this,tt)[tt].get("s3/sts",e).then(qi)):L(this,kt)[kt]=t(e),L(this,kt)[kt]=await L(this,kt)[kt],setTimeout(()=>{L(this,kt)[kt]=null},(np(L(this,kt)[kt].credentials)||0)*500)}return L(this,kt)[kt]}function kE(e){var t=this;return new Promise((n,i)=>{let r=(c,d)=>{var u;let h=this.uppy.getFile(e.id);this.uppy.emit("upload-progress",h,{uploadStarted:(u=h.progress.uploadStarted)!=null?u:0,bytesUploaded:c,bytesTotal:d})},s=c=>{this.uppy.log(c),this.uppy.emit("upload-error",e,c),this.resetUploaderReferences(e.id),i(c)},o=c=>{let d={body:{...c},status:200,uploadURL:c.location};this.resetUploaderReferences(e.id),this.uppy.emit("upload-success",L(this,pi)[pi](e),d),c.location&&this.uppy.log(`Download ${e.name} from ${c.location}`),n()},a=new Zf(e.data,{companionComm:L(this,hi)[hi],log:function(){return t.uppy.log(...arguments)},getChunkSize:this.opts.getChunkSize?this.opts.getChunkSize.bind(this):void 0,onProgress:r,onError:s,onSuccess:o,onPartComplete:c=>{this.uppy.emit("s3-multipart:part-uploaded",L(this,pi)[pi](e),c)},file:e,shouldUseMultipart:this.opts.shouldUseMultipart,...e.s3Multipart});this.uploaders[e.id]=a;let l=new Br(this.uppy);this.uploaderEvents[e.id]=l,l.onFileRemove(e.id,c=>{a.abort(),this.resetUploaderReferences(e.id,{abort:!0}),n(`upload ${c} was removed`)}),l.onCancelAll(e.id,()=>{a.abort(),this.resetUploaderReferences(e.id,{abort:!0}),n(`upload ${e.id} was canceled`)}),l.onFilePause(e.id,c=>{c?a.pause():a.start()}),l.onPauseAll(e.id,()=>{a.pause()}),l.onResumeAll(e.id,()=>{a.start()}),a.start()})}function ME(e){var t;return{...(t=e.remote)==null?void 0:t.body,protocol:"s3-multipart",size:e.data.size,metadata:e.meta}}Wi.VERSION=DE.version;function ip(e){e.querySelectorAll("[data-uppy]").forEach(t=>{let n=t.getAttribute("data-uppy-presign-url"),i=new yo({debug:!0,autoProceed:!0});i.use(Qn,{target:t.querySelector("[data-uppy-drag-drop]")}),i.use(Zn,{target:t.querySelector("[data-uppy-status]")}),i.use(Wi,{getUploadParameters(r){return fetch(n,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:r.name,content_type:r.type})}).then(s=>s.json()).then(s=>(i.setFileMeta(r.id,{object_id:s.object_id}),{method:"PUT",url:s.url,headers:{"Content-Type":r.type}}))}}),i.on("complete",r=>{r.successful.forEach(s=>{let o=document.createElement("input");o.type="hidden",o.name="files",o.value=JSON.stringify({object_id:s.meta.object_id,name:s.name,content_type:s.type,size:s.size}),t.appendChild(o)}),t.dispatchEvent(new Event("files-added"))})})}on.config.defaultFocusScroll=!0;on.onLoad(nd);on.onLoad(od);on.onLoad(Gd);on.onLoad(ip);ed(document.body);})();
/*! For license information please see app-USEQXZ5Q.js.LEGAL.txt */
//# sourceMappingURL=app-USEQXZ5Q.js.map
